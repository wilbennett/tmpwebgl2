// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles
parcelRequire = (function (modules, cache, entry, globalName) {
  // Save the require from previous bundle to this closure if any
  var previousRequire = typeof parcelRequire === 'function' && parcelRequire;
  var nodeRequire = typeof require === 'function' && require;

  function newRequire(name, jumped) {
    if (!cache[name]) {
      if (!modules[name]) {
        // if we cannot find the module within our internal map or
        // cache jump to the current global require ie. the last bundle
        // that was added to the page.
        var currentRequire = typeof parcelRequire === 'function' && parcelRequire;
        if (!jumped && currentRequire) {
          return currentRequire(name, true);
        }

        // If there are other bundles on this page the require from the
        // previous one is saved to 'previousRequire'. Repeat this as
        // many times as there are bundles until the module is found or
        // we exhaust the require chain.
        if (previousRequire) {
          return previousRequire(name, true);
        }

        // Try the node require function if it exists.
        if (nodeRequire && typeof name === 'string') {
          return nodeRequire(name);
        }

        var err = new Error('Cannot find module \'' + name + '\'');
        err.code = 'MODULE_NOT_FOUND';
        throw err;
      }

      localRequire.resolve = resolve;
      localRequire.cache = {};

      var module = cache[name] = new newRequire.Module(name);

      modules[name][0].call(module.exports, localRequire, module, module.exports, this);
    }

    return cache[name].exports;

    function localRequire(x){
      return newRequire(localRequire.resolve(x));
    }

    function resolve(x){
      return modules[name][1][x] || x;
    }
  }

  function Module(moduleName) {
    this.id = moduleName;
    this.bundle = newRequire;
    this.exports = {};
  }

  newRequire.isParcelRequire = true;
  newRequire.Module = Module;
  newRequire.modules = modules;
  newRequire.cache = cache;
  newRequire.parent = previousRequire;
  newRequire.register = function (id, exports) {
    modules[id] = [function (require, module) {
      module.exports = exports;
    }, {}];
  };

  var error;
  for (var i = 0; i < entry.length; i++) {
    try {
      newRequire(entry[i]);
    } catch (e) {
      // Save first error but execute all entries
      if (!error) {
        error = e;
      }
    }
  }

  if (entry.length) {
    // Expose entry point to Node, AMD or browser globals
    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
    var mainExports = newRequire(entry[entry.length - 1]);

    // CommonJS
    if (typeof exports === "object" && typeof module !== "undefined") {
      module.exports = mainExports;

    // RequireJS
    } else if (typeof define === "function" && define.amd) {
     define(function () {
       return mainExports;
     });

    // <script>
    } else if (globalName) {
      this[globalName] = mainExports;
    }
  }

  // Override the current require with this new one
  parcelRequire = newRequire;

  if (error) {
    // throw error from earlier, _after updating parcelRequire_
    throw error;
  }

  return newRequire;
})({"../JS/.fable/fable-library.3.0.0/Util.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isIterable = isIterable;
exports.isArrayLike = isArrayLike;
exports.isDisposable = isDisposable;
exports.sameConstructor = sameConstructor;
exports.comparerFromEqualityComparer = comparerFromEqualityComparer;
exports.assertEqual = assertEqual;
exports.assertNotEqual = assertNotEqual;
exports.lazyFromValue = lazyFromValue;
exports.padWithZeros = padWithZeros;
exports.padLeftAndRightWithZeros = padLeftAndRightWithZeros;
exports.dateOffset = dateOffset;
exports.int16ToString = int16ToString;
exports.int32ToString = int32ToString;
exports.stringHash = stringHash;
exports.numberHash = numberHash;
exports.combineHashCodes = combineHashCodes;
exports.physicalHash = physicalHash;
exports.identityHash = identityHash;
exports.dateHash = dateHash;
exports.arrayHash = arrayHash;
exports.structuralHash = structuralHash;
exports.fastStructuralHash = fastStructuralHash;
exports.safeHash = safeHash;
exports.equalArraysWith = equalArraysWith;
exports.equalArrays = equalArrays;
exports.equalsSafe = equalsSafe;
exports.equals = equals;
exports.compareDates = compareDates;
exports.comparePrimitives = comparePrimitives;
exports.compareArraysWith = compareArraysWith;
exports.compareArrays = compareArrays;
exports.compareSafe = compareSafe;
exports.compare = compare;
exports.min = min;
exports.max = max;
exports.clamp = clamp;
exports.createAtom = createAtom;
exports.createObj = createObj;
exports.jsOptions = jsOptions;
exports.round = round;
exports.sign = sign;
exports.randomNext = randomNext;
exports.randomBytes = randomBytes;
exports.unescapeDataString = unescapeDataString;
exports.escapeDataString = escapeDataString;
exports.escapeUriString = escapeUriString;
exports.count = count;
exports.clear = clear;
exports.uncurry = uncurry;
exports.curry = curry;
exports.partialApply = partialApply;
exports.mapCurriedArgs = mapCurriedArgs;
exports.ObjectRef = exports.Lazy = exports.Comparer = void 0;

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

// tslint:disable:ban-types
function isIterable(x) {
  return x != null && _typeof(x) === "object" && Symbol.iterator in x;
}

function isArrayLike(x) {
  return Array.isArray(x) || ArrayBuffer.isView(x);
}

function isComparer(x) {
  return typeof x.Compare === "function";
}

function isComparable(x) {
  return typeof x.CompareTo === "function";
}

function isEquatable(x) {
  return typeof x.Equals === "function";
}

function isHashable(x) {
  return typeof x.GetHashCode === "function";
}

function isDisposable(x) {
  return x != null && typeof x.Dispose === "function";
}

function sameConstructor(x, y) {
  return Object.getPrototypeOf(x).constructor === Object.getPrototypeOf(y).constructor;
}

var Comparer = function Comparer(f) {
  _classCallCheck(this, Comparer);

  this.Compare = f || compare;
};

exports.Comparer = Comparer;

function comparerFromEqualityComparer(comparer) {
  // Sometimes IEqualityComparer also implements IComparer
  if (isComparer(comparer)) {
    return new Comparer(comparer.Compare);
  } else {
    return new Comparer(function (x, y) {
      var xhash = comparer.GetHashCode(x);
      var yhash = comparer.GetHashCode(y);

      if (xhash === yhash) {
        return comparer.Equals(x, y) ? 0 : -1;
      } else {
        return xhash < yhash ? -1 : 1;
      }
    });
  }
}

function assertEqual(actual, expected, msg) {
  if (!equals(actual, expected)) {
    throw Object.assign(new Error(msg || "Expected: ".concat(expected, " - Actual: ").concat(actual)), {
      actual: actual,
      expected: expected
    });
  }
}

function assertNotEqual(actual, expected, msg) {
  if (equals(actual, expected)) {
    throw Object.assign(new Error(msg || "Expected: ".concat(expected, " - Actual: ").concat(actual)), {
      actual: actual,
      expected: expected
    });
  }
}

var Lazy = /*#__PURE__*/function () {
  function Lazy(factory) {
    _classCallCheck(this, Lazy);

    this.factory = factory;
    this.isValueCreated = false;
  }

  _createClass(Lazy, [{
    key: "Value",
    get: function get() {
      if (!this.isValueCreated) {
        this.createdValue = this.factory();
        this.isValueCreated = true;
      }

      return this.createdValue;
    }
  }, {
    key: "IsValueCreated",
    get: function get() {
      return this.isValueCreated;
    }
  }]);

  return Lazy;
}();

exports.Lazy = Lazy;

function lazyFromValue(v) {
  return new Lazy(function () {
    return v;
  });
}

function padWithZeros(i, length) {
  var str = i.toString(10);

  while (str.length < length) {
    str = "0" + str;
  }

  return str;
}

function padLeftAndRightWithZeros(i, lengthLeft, lengthRight) {
  var str = i.toString(10);

  while (str.length < lengthLeft) {
    str = "0" + str;
  }

  while (str.length < lengthRight) {
    str = str + "0";
  }

  return str;
}

function dateOffset(date) {
  var date1 = date;
  return typeof date1.offset === "number" ? date1.offset : date.kind === 1
  /* UTC */
  ? 0 : date.getTimezoneOffset() * -60000;
}

function int16ToString(i, radix) {
  i = i < 0 && radix != null && radix !== 10 ? 0xFFFF + i + 1 : i;
  return i.toString(radix);
}

function int32ToString(i, radix) {
  i = i < 0 && radix != null && radix !== 10 ? 0xFFFFFFFF + i + 1 : i;
  return i.toString(radix);
}

var ObjectRef =
/** @class */
function () {
  var ObjectRef = /*#__PURE__*/function () {
    function ObjectRef() {
      _classCallCheck(this, ObjectRef);
    }

    _createClass(ObjectRef, null, [{
      key: "id",
      value: function id(o) {
        if (!ObjectRef.idMap.has(o)) {
          ObjectRef.idMap.set(o, ++ObjectRef.count);
        }

        return ObjectRef.idMap.get(o);
      }
    }]);

    return ObjectRef;
  }();

  ObjectRef.idMap = new WeakMap();
  ObjectRef.count = 0;
  return ObjectRef;
}();

exports.ObjectRef = ObjectRef;

function stringHash(s) {
  var i = 0;
  var h = 5381;
  var len = s.length;

  while (i < len) {
    h = h * 33 ^ s.charCodeAt(i++);
  }

  return h;
}

function numberHash(x) {
  return x * 2654435761 | 0;
} // From https://stackoverflow.com/a/37449594


function combineHashCodes(hashes) {
  if (hashes.length === 0) {
    return 0;
  }

  return hashes.reduce(function (h1, h2) {
    return (h1 << 5) + h1 ^ h2;
  });
}

function physicalHash(x) {
  if (x == null) {
    return 0;
  }

  switch (_typeof(x)) {
    case "boolean":
      return x ? 1 : 0;

    case "number":
      return numberHash(x);

    case "string":
      return stringHash(x);

    default:
      return numberHash(ObjectRef.id(x));
  }
}

function identityHash(x) {
  if (x == null) {
    return 0;
  } else if (isHashable(x)) {
    return x.GetHashCode();
  } else {
    return physicalHash(x);
  }
}

function dateHash(x) {
  return x.getTime();
}

function arrayHash(x) {
  var len = x.length;
  var hashes = new Array(len);

  for (var i = 0; i < len; i++) {
    hashes[i] = structuralHash(x[i]);
  }

  return combineHashCodes(hashes);
}

function structuralHash(x) {
  if (x == null) {
    return 0;
  }

  switch (_typeof(x)) {
    case "boolean":
      return x ? 1 : 0;

    case "number":
      return numberHash(x);

    case "string":
      return stringHash(x);

    default:
      {
        if (isHashable(x)) {
          return x.GetHashCode();
        } else if (isArrayLike(x)) {
          return arrayHash(x);
        } else if (x instanceof Date) {
          return dateHash(x);
        } else if (Object.getPrototypeOf(x).constructor === Object) {
          // TODO: check call-stack to prevent cyclic objects?
          var hashes = Object.values(x).map(function (v) {
            return structuralHash(v);
          });
          return combineHashCodes(hashes);
        } else {
          // Classes don't implement GetHashCode by default, but must use identity hashing
          return numberHash(ObjectRef.id(x)); // return stringHash(String(x));
        }
      }
  }
} // Intended for custom numeric types, like long or decimal


function fastStructuralHash(x) {
  return stringHash(String(x));
} // Intended for declared types that may or may not implement GetHashCode


function safeHash(x) {
  return x == null ? 0 : isHashable(x) ? x.GetHashCode() : numberHash(ObjectRef.id(x));
}

function equalArraysWith(x, y, eq) {
  if (x == null) {
    return y == null;
  }

  if (y == null) {
    return false;
  }

  if (x.length !== y.length) {
    return false;
  }

  for (var i = 0; i < x.length; i++) {
    if (!eq(x[i], y[i])) {
      return false;
    }
  }

  return true;
}

function equalArrays(x, y) {
  return equalArraysWith(x, y, equals);
}

function equalObjects(x, y) {
  var xKeys = Object.keys(x);
  var yKeys = Object.keys(y);

  if (xKeys.length !== yKeys.length) {
    return false;
  }

  xKeys.sort();
  yKeys.sort();

  for (var i = 0; i < xKeys.length; i++) {
    if (xKeys[i] !== yKeys[i] || !equals(x[xKeys[i]], y[yKeys[i]])) {
      return false;
    }
  }

  return true;
}

function equalsSafe(x, y) {
  var _a;

  return (_a = x === null || x === void 0 ? void 0 : x.Equals(y)) !== null && _a !== void 0 ? _a : y == null;
}

function equals(x, y) {
  if (x === y) {
    return true;
  } else if (x == null) {
    return y == null;
  } else if (y == null) {
    return false;
  } else if (_typeof(x) !== "object") {
    return false;
  } else if (isEquatable(x)) {
    return x.Equals(y);
  } else if (isArrayLike(x)) {
    return isArrayLike(y) && equalArrays(x, y);
  } else if (x instanceof Date) {
    return y instanceof Date && compareDates(x, y) === 0;
  } else {
    return Object.getPrototypeOf(x).constructor === Object && equalObjects(x, y);
  }
}

function compareDates(x, y) {
  var xtime;
  var ytime; // DateTimeOffset and DateTime deals with equality differently.

  if ("offset" in x && "offset" in y) {
    xtime = x.getTime();
    ytime = y.getTime();
  } else {
    xtime = x.getTime() + dateOffset(x);
    ytime = y.getTime() + dateOffset(y);
  }

  return xtime === ytime ? 0 : xtime < ytime ? -1 : 1;
}

function comparePrimitives(x, y) {
  return x === y ? 0 : x < y ? -1 : 1;
}

function compareArraysWith(x, y, comp) {
  if (x == null) {
    return y == null ? 0 : 1;
  }

  if (y == null) {
    return -1;
  }

  if (x.length !== y.length) {
    return x.length < y.length ? -1 : 1;
  }

  for (var i = 0, j = 0; i < x.length; i++) {
    j = comp(x[i], y[i]);

    if (j !== 0) {
      return j;
    }
  }

  return 0;
}

function compareArrays(x, y) {
  return compareArraysWith(x, y, compare);
}

function compareObjects(x, y) {
  var xKeys = Object.keys(x);
  var yKeys = Object.keys(y);

  if (xKeys.length !== yKeys.length) {
    return xKeys.length < yKeys.length ? -1 : 1;
  }

  xKeys.sort();
  yKeys.sort();

  for (var i = 0, j = 0; i < xKeys.length; i++) {
    var key = xKeys[i];

    if (key !== yKeys[i]) {
      return key < yKeys[i] ? -1 : 1;
    } else {
      j = compare(x[key], y[key]);

      if (j !== 0) {
        return j;
      }
    }
  }

  return 0;
}

function compareSafe(x, y) {
  var _a;

  return (_a = x === null || x === void 0 ? void 0 : x.CompareTo(y)) !== null && _a !== void 0 ? _a : y == null ? 0 : -1;
}

function compare(x, y) {
  if (x === y) {
    return 0;
  } else if (x == null) {
    return y == null ? 0 : -1;
  } else if (y == null) {
    return 1;
  } else if (_typeof(x) !== "object") {
    return x < y ? -1 : 1;
  } else if (isComparable(x)) {
    return x.CompareTo(y);
  } else if (isArrayLike(x)) {
    return isArrayLike(y) ? compareArrays(x, y) : -1;
  } else if (x instanceof Date) {
    return y instanceof Date ? compareDates(x, y) : -1;
  } else {
    return Object.getPrototypeOf(x).constructor === Object ? compareObjects(x, y) : -1;
  }
}

function min(comparer, x, y) {
  return comparer(x, y) < 0 ? x : y;
}

function max(comparer, x, y) {
  return comparer(x, y) > 0 ? x : y;
}

function clamp(comparer, value, min, max) {
  return comparer(value, min) < 0 ? min : comparer(value, max) > 0 ? max : value;
}

function createAtom(value) {
  var atom = value;
  return function (value, isSetter) {
    if (!isSetter) {
      return atom;
    } else {
      atom = value;
      return void 0;
    }
  };
}

function createObj(fields) {
  var obj = {};

  var _iterator = _createForOfIteratorHelper(fields),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var kv = _step.value;
      obj[kv[0]] = kv[1];
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  return obj;
}

function jsOptions(mutator) {
  var opts = {};
  mutator(opts);
  return opts;
}

function round(value) {
  var digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  var m = Math.pow(10, digits);
  var n = +(digits ? value * m : value).toFixed(8);
  var i = Math.floor(n);
  var f = n - i;
  var e = 1e-8;
  var r = f > 0.5 - e && f < 0.5 + e ? i % 2 === 0 ? i : i + 1 : Math.round(n);
  return digits ? r / m : r;
}

function sign(x) {
  return x > 0 ? 1 : x < 0 ? -1 : 0;
}

function randomNext(min, max) {
  return Math.floor(Math.random() * (max - min)) + min;
}

function randomBytes(buffer) {
  if (buffer == null) {
    throw new Error("Buffer cannot be null");
  }

  for (var i = 0; i < buffer.length; i += 6) {
    // Pick random 48-bit number. Fill buffer in 2 24-bit chunks to avoid bitwise truncation.
    var r = Math.floor(Math.random() * 281474976710656); // Low 24 bits = chunk 1.

    var rhi = Math.floor(r / 16777216); // High 24 bits shifted via division = chunk 2.

    for (var j = 0; j < 6 && i + j < buffer.length; j++) {
      if (j === 3) {
        r = rhi;
      }

      buffer[i + j] = r & 255;
      r >>>= 8;
    }
  }
}

function unescapeDataString(s) {
  // https://stackoverflow.com/a/4458580/524236
  return decodeURIComponent(s.replace(/\+/g, "%20"));
}

function escapeDataString(s) {
  return encodeURIComponent(s).replace(/!/g, "%21").replace(/'/g, "%27").replace(/\(/g, "%28").replace(/\)/g, "%29").replace(/\*/g, "%2A");
}

function escapeUriString(s) {
  return encodeURI(s);
} // ICollection.Clear and Count members can be called on Arrays
// or Dictionaries so we need a runtime check (see #1120)


function count(col) {
  if (isArrayLike(col)) {
    return col.length;
  } else {
    var _count = 0;

    var _iterator2 = _createForOfIteratorHelper(col),
        _step2;

    try {
      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
        var _ = _step2.value;
        _count++;
      }
    } catch (err) {
      _iterator2.e(err);
    } finally {
      _iterator2.f();
    }

    return _count;
  }
}

function clear(col) {
  if (isArrayLike(col)) {
    col.splice(0);
  } else {
    col.clear();
  }
}

var CURRIED_KEY = "__CURRIED__";

function uncurry(arity, f) {
  // f may be a function option with None value
  if (f == null) {
    return undefined;
  } // The function is already uncurried


  if (f.length > 1) {
    // if (CURRIED_KEY in f) { // This doesn't always work
    return f;
  }

  var uncurriedFn;

  switch (arity) {
    case 2:
      uncurriedFn = function uncurriedFn(a1, a2) {
        return f(a1)(a2);
      };

      break;

    case 3:
      uncurriedFn = function uncurriedFn(a1, a2, a3) {
        return f(a1)(a2)(a3);
      };

      break;

    case 4:
      uncurriedFn = function uncurriedFn(a1, a2, a3, a4) {
        return f(a1)(a2)(a3)(a4);
      };

      break;

    case 5:
      uncurriedFn = function uncurriedFn(a1, a2, a3, a4, a5) {
        return f(a1)(a2)(a3)(a4)(a5);
      };

      break;

    case 6:
      uncurriedFn = function uncurriedFn(a1, a2, a3, a4, a5, a6) {
        return f(a1)(a2)(a3)(a4)(a5)(a6);
      };

      break;

    case 7:
      uncurriedFn = function uncurriedFn(a1, a2, a3, a4, a5, a6, a7) {
        return f(a1)(a2)(a3)(a4)(a5)(a6)(a7);
      };

      break;

    case 8:
      uncurriedFn = function uncurriedFn(a1, a2, a3, a4, a5, a6, a7, a8) {
        return f(a1)(a2)(a3)(a4)(a5)(a6)(a7)(a8);
      };

      break;

    default:
      throw new Error("Uncurrying to more than 8-arity is not supported: " + arity);
  }

  uncurriedFn[CURRIED_KEY] = f;
  return uncurriedFn;
}

function curry(arity, f) {
  if (f == null) {
    return undefined;
  }

  if (CURRIED_KEY in f) {
    return f[CURRIED_KEY];
  }

  switch (arity) {
    case 2:
      return function (a1) {
        return function (a2) {
          return f(a1, a2);
        };
      };

    case 3:
      return function (a1) {
        return function (a2) {
          return function (a3) {
            return f(a1, a2, a3);
          };
        };
      };

    case 4:
      return function (a1) {
        return function (a2) {
          return function (a3) {
            return function (a4) {
              return f(a1, a2, a3, a4);
            };
          };
        };
      };

    case 5:
      return function (a1) {
        return function (a2) {
          return function (a3) {
            return function (a4) {
              return function (a5) {
                return f(a1, a2, a3, a4, a5);
              };
            };
          };
        };
      };

    case 6:
      return function (a1) {
        return function (a2) {
          return function (a3) {
            return function (a4) {
              return function (a5) {
                return function (a6) {
                  return f(a1, a2, a3, a4, a5, a6);
                };
              };
            };
          };
        };
      };

    case 7:
      return function (a1) {
        return function (a2) {
          return function (a3) {
            return function (a4) {
              return function (a5) {
                return function (a6) {
                  return function (a7) {
                    return f(a1, a2, a3, a4, a5, a6, a7);
                  };
                };
              };
            };
          };
        };
      };

    case 8:
      return function (a1) {
        return function (a2) {
          return function (a3) {
            return function (a4) {
              return function (a5) {
                return function (a6) {
                  return function (a7) {
                    return function (a8) {
                      return f(a1, a2, a3, a4, a5, a6, a7, a8);
                    };
                  };
                };
              };
            };
          };
        };
      };

    default:
      throw new Error("Currying to more than 8-arity is not supported: " + arity);
  }
}

function partialApply(arity, f, args) {
  if (f == null) {
    return undefined;
  } else if (CURRIED_KEY in f) {
    f = f[CURRIED_KEY];

    for (var i = 0; i < args.length; i++) {
      f = f(args[i]);
    }

    return f;
  } else {
    switch (arity) {
      case 1:
        // Wrap arguments to make sure .concat doesn't destruct arrays. Example
        // [1,2].concat([3,4],5)   --> [1,2,3,4,5]    // fails
        // [1,2].concat([[3,4],5]) --> [1,2,[3,4],5]  // ok
        return function (a1) {
          return f.apply(undefined, args.concat([a1]));
        };

      case 2:
        return function (a1) {
          return function (a2) {
            return f.apply(undefined, args.concat([a1, a2]));
          };
        };

      case 3:
        return function (a1) {
          return function (a2) {
            return function (a3) {
              return f.apply(undefined, args.concat([a1, a2, a3]));
            };
          };
        };

      case 4:
        return function (a1) {
          return function (a2) {
            return function (a3) {
              return function (a4) {
                return f.apply(undefined, args.concat([a1, a2, a3, a4]));
              };
            };
          };
        };

      case 5:
        return function (a1) {
          return function (a2) {
            return function (a3) {
              return function (a4) {
                return function (a5) {
                  return f.apply(undefined, args.concat([a1, a2, a3, a4, a5]));
                };
              };
            };
          };
        };

      case 6:
        return function (a1) {
          return function (a2) {
            return function (a3) {
              return function (a4) {
                return function (a5) {
                  return function (a6) {
                    return f.apply(undefined, args.concat([a1, a2, a3, a4, a5, a6]));
                  };
                };
              };
            };
          };
        };

      case 7:
        return function (a1) {
          return function (a2) {
            return function (a3) {
              return function (a4) {
                return function (a5) {
                  return function (a6) {
                    return function (a7) {
                      return f.apply(undefined, args.concat([a1, a2, a3, a4, a5, a6, a7]));
                    };
                  };
                };
              };
            };
          };
        };

      case 8:
        return function (a1) {
          return function (a2) {
            return function (a3) {
              return function (a4) {
                return function (a5) {
                  return function (a6) {
                    return function (a7) {
                      return function (a8) {
                        return f.apply(undefined, args.concat([a1, a2, a3, a4, a5, a6, a7, a8]));
                      };
                    };
                  };
                };
              };
            };
          };
        };

      default:
        throw new Error("Partially applying to more than 8-arity is not supported: " + arity);
    }
  }
}

function mapCurriedArgs(fn, mappings) {
  function mapArg(fn, arg, mappings, idx) {
    var mapping = mappings[idx];

    if (mapping !== 0) {
      var expectedArity = mapping[0];
      var actualArity = mapping[1];

      if (expectedArity > 1) {
        arg = curry(expectedArity, arg);
      }

      if (actualArity > 1) {
        arg = uncurry(actualArity, arg);
      }
    }

    var res = fn(arg);

    if (idx + 1 === mappings.length) {
      return res;
    } else {
      return function (arg) {
        return mapArg(res, arg, mappings, idx + 1);
      };
    }
  }

  return function (arg) {
    return mapArg(fn, arg, mappings, 0);
  };
}
},{}],"../JS/js/jsutils.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.indent = exports.logCollapsed = exports.collapsible = exports.enabled = void 0;

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var enabled = (0, _Util.createAtom)(false);
exports.enabled = enabled;
var collapsible = (0, _Util.createAtom)(true);
exports.collapsible = collapsible;
var logCollapsed = (0, _Util.createAtom)(true);
exports.logCollapsed = logCollapsed;
var indent = (0, _Util.createAtom)("");
exports.indent = indent;
},{"../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/.fable/fable-library.3.0.0/Int32.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isValid = isValid;
exports.parse = parse;
exports.tryParse = tryParse;
exports.op_UnaryNegation_Int8 = op_UnaryNegation_Int8;
exports.op_UnaryNegation_Int16 = op_UnaryNegation_Int16;
exports.op_UnaryNegation_Int32 = op_UnaryNegation_Int32;
exports.NumberStyles = void 0;

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

// export type decimal = Decimal;
var NumberStyles;
exports.NumberStyles = NumberStyles;

(function (NumberStyles) {
  // None = 0x00000000,
  // AllowLeadingWhite = 0x00000001,
  // AllowTrailingWhite = 0x00000002,
  // AllowLeadingSign = 0x00000004,
  // AllowTrailingSign = 0x00000008,
  // AllowParentheses = 0x00000010,
  // AllowDecimalPoint = 0x00000020,
  // AllowThousands = 0x00000040,
  // AllowExponent = 0x00000080,
  // AllowCurrencySymbol = 0x00000100,
  NumberStyles[NumberStyles["AllowHexSpecifier"] = 512] = "AllowHexSpecifier"; // Integer = AllowLeadingWhite | AllowTrailingWhite | AllowLeadingSign,
  // HexNumber = AllowLeadingWhite | AllowTrailingWhite | AllowHexSpecifier,
  // Number = AllowLeadingWhite | AllowTrailingWhite | AllowLeadingSign |
  //          AllowTrailingSign | AllowDecimalPoint | AllowThousands,
  // Float = AllowLeadingWhite | AllowTrailingWhite | AllowLeadingSign |
  //         AllowDecimalPoint | AllowExponent,
  // Currency = AllowLeadingWhite | AllowTrailingWhite | AllowLeadingSign | AllowTrailingSign |
  //            AllowParentheses | AllowDecimalPoint | AllowThousands | AllowCurrencySymbol,
  // Any = AllowLeadingWhite | AllowTrailingWhite | AllowLeadingSign | AllowTrailingSign |
  //       AllowParentheses | AllowDecimalPoint | AllowThousands | AllowCurrencySymbol | AllowExponent,
})(NumberStyles || (exports.NumberStyles = NumberStyles = {}));

function validResponse(regexMatch, radix) {
  var _regexMatch = _slicedToArray(regexMatch, 4),

  /*all*/
  sign = _regexMatch[1],
      prefix = _regexMatch[2],
      digits = _regexMatch[3];

  return {
    sign: sign || "",
    prefix: prefix || "",
    digits: digits,
    radix: radix
  };
}

function getRange(unsigned, bitsize) {
  switch (bitsize) {
    case 8:
      return unsigned ? [0, 255] : [-128, 127];

    case 16:
      return unsigned ? [0, 65535] : [-32768, 32767];

    case 32:
      return unsigned ? [0, 4294967295] : [-2147483648, 2147483647];

    default:
      throw new Error("Invalid bit size.");
  }
}

function getInvalidDigits(radix) {
  switch (radix) {
    case 2:
      return /[^0-1]/;

    case 8:
      return /[^0-7]/;

    case 10:
      return /[^0-9]/;

    case 16:
      return /[^0-9a-fA-F]/;

    default:
      throw new Error("Invalid Base.");
  }
}

function getRadix(prefix, style) {
  if (style & NumberStyles.AllowHexSpecifier) {
    return 16;
  } else {
    switch (prefix) {
      case "0b":
      case "0B":
        return 2;

      case "0o":
      case "0O":
        return 8;

      case "0x":
      case "0X":
        return 16;

      default:
        return 10;
    }
  }
}

function isValid(str, style, radix) {
  var integerRegex = /^\s*([\+\-])?(0[xXoObB])?([0-9a-fA-F]+)\s*$/;
  var res = integerRegex.exec(str.replace(/_/g, ""));

  if (res != null) {
    var _res = _slicedToArray(res, 4),

    /*all*/

    /*sign*/
    prefix = _res[2],
        digits = _res[3];

    radix = radix || getRadix(prefix, style);
    var invalidDigits = getInvalidDigits(radix);

    if (!invalidDigits.test(digits)) {
      return validResponse(res, radix);
    }
  }

  return null;
}

function parse(str, style, unsigned, bitsize, radix) {
  var res = isValid(str, style, radix);

  if (res != null) {
    var v = Number.parseInt(res.sign + res.digits, res.radix);

    if (!Number.isNaN(v)) {
      var _getRange = getRange(true, bitsize),
          _getRange2 = _slicedToArray(_getRange, 2),
          umin = _getRange2[0],
          umax = _getRange2[1];

      if (!unsigned && res.radix !== 10 && v >= umin && v <= umax) {
        v = v << 32 - bitsize >> 32 - bitsize;
      }

      var _getRange3 = getRange(unsigned, bitsize),
          _getRange4 = _slicedToArray(_getRange3, 2),
          min = _getRange4[0],
          max = _getRange4[1];

      if (v >= min && v <= max) {
        return v;
      }
    }
  }

  throw new Error("Input string was not in a correct format.");
}

function tryParse(str, style, unsigned, bitsize, defValue) {
  try {
    defValue.contents = parse(str, style, unsigned, bitsize);
    return true;
  } catch (_a) {
    return false;
  }
}

function op_UnaryNegation_Int8(x) {
  return x === -128 ? x : -x;
}

function op_UnaryNegation_Int16(x) {
  return x === -32768 ? x : -x;
}

function op_UnaryNegation_Int32(x) {
  return x === -2147483648 ? x : -x;
}
},{}],"../JS/.fable/fable-library.3.0.0/lib/long.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Long = Long;
exports.isLong = isLong;
exports.fromInt = fromInt;
exports.fromNumber = fromNumber;
exports.fromBits = fromBits;
exports.fromString = fromString;
exports.fromValue = fromValue;
exports.toInt = toInt;
exports.toNumber = toNumber;
exports.toString = toString;
exports.getHighBits = getHighBits;
exports.getHighBitsUnsigned = getHighBitsUnsigned;
exports.getLowBits = getLowBits;
exports.getLowBitsUnsigned = getLowBitsUnsigned;
exports.getNumBitsAbs = getNumBitsAbs;
exports.isZero = isZero;
exports.isNegative = isNegative;
exports.isPositive = isPositive;
exports.isOdd = isOdd;
exports.isEven = isEven;
exports.equals = equals;
exports.notEquals = notEquals;
exports.lessThan = lessThan;
exports.lessThanOrEqual = lessThanOrEqual;
exports.greaterThan = greaterThan;
exports.greaterThanOrEqual = greaterThanOrEqual;
exports.compare = compare;
exports.negate = negate;
exports.add = add;
exports.subtract = subtract;
exports.multiply = multiply;
exports.divide = divide;
exports.modulo = modulo;
exports.not = not;
exports.and = and;
exports.or = or;
exports.xor = xor;
exports.shiftLeft = shiftLeft;
exports.shiftRight = shiftRight;
exports.shiftRightUnsigned = shiftRightUnsigned;
exports.toSigned = toSigned;
exports.toUnsigned = toUnsigned;
exports.toBytes = toBytes;
exports.toBytesLE = toBytesLE;
exports.toBytesBE = toBytesBE;
exports.fromBytes = fromBytes;
exports.fromBytesLE = fromBytesLE;
exports.fromBytesBE = fromBytesBE;
exports.rotateRight = exports.rotateLeft = exports.MIN_VALUE = exports.MAX_UNSIGNED_VALUE = exports.MAX_VALUE = exports.NEG_ONE = exports.UONE = exports.ONE = exports.UZERO = exports.ZERO = exports.default = void 0;
// Adapted from: https://github.com/dcodeIO/long.js/blob/master/src/long.js
// Apache License 2.0: https://github.com/dcodeIO/long.js/blob/master/LICENSE
var _default = Long;
/**
 * wasm optimizations, to do native i64 multiplication and divide
 */

exports.default = _default;
var wasm = null;

try {
  wasm = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;
} catch (e) {// no wasm support :(
}
/**
 * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.
 *  See the from* functions below for more convenient ways of constructing Longs.
 * @exports Long
 * @class A Long class for representing a 64 bit two's-complement integer value.
 * @param {number} low The low (signed) 32 bits of the long
 * @param {number} high The high (signed) 32 bits of the long
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @constructor
 */


function Long(low, high, unsigned) {
  /**
   * The low 32 bits as a signed value.
   * @type {number}
   */
  this.low = low | 0;
  /**
   * The high 32 bits as a signed value.
   * @type {number}
   */

  this.high = high | 0;
  /**
   * Whether unsigned or not.
   * @type {boolean}
   */

  this.unsigned = !!unsigned;
}

Long.prototype.GetHashCode = function () {
  var h1 = this.unsigned ? 1 : 0;
  h1 = (h1 << 5) + h1 ^ this.high;
  h1 = (h1 << 5) + h1 ^ this.low;
  return h1;
};

Long.prototype.Equals = function (x) {
  return equals(this, x);
};

Long.prototype.CompareTo = function (x) {
  return compare(this, x);
};

Long.prototype.toString = function (radix) {
  return toString(this, radix);
};

Long.prototype.toJSON = function () {
  return toString(this);
}; // The internal representation of a long is the two given signed, 32-bit values.
// We use 32-bit pieces because these are the size of integers on which
// Javascript performs bit-operations.  For operations like addition and
// multiplication, we split each number into 16 bit pieces, which can easily be
// multiplied within Javascript's floating-point representation without overflow
// or change in sign.
//
// In the algorithms below, we frequently reduce the negative case to the
// positive case by negating the input(s) and then post-processing the result.
// Note that we must ALWAYS check specially whether those values are MIN_VALUE
// (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as
// a positive number, it overflows back into a negative).  Not handling this
// case would often result in infinite recursion.
//
// Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the from*
// methods on which they depend.

/**
 * An indicator used to reliably determine if an object is a Long or not.
 * @type {boolean}
 * @const
 * @private
 */


Long.prototype.__isLong__;
Object.defineProperty(Long.prototype, "__isLong__", {
  value: true
});
/**
 * @function
 * @param {*} obj Object
 * @returns {boolean}
 * @inner
 */

function isLong(obj) {
  return (obj && obj["__isLong__"]) === true;
}
/**
 * Tests if the specified object is a Long.
 * @function
 * @param {*} obj Object
 * @returns {boolean}
 */
// Long.isLong = isLong;

/**
 * A cache of the Long representations of small integer values.
 * @type {!Object}
 * @inner
 */


var INT_CACHE = {};
/**
 * A cache of the Long representations of small unsigned integer values.
 * @type {!Object}
 * @inner
 */

var UINT_CACHE = {};
/**
 * @param {number} value
 * @param {boolean=} unsigned
 * @returns {!Long}
 * @inner
 */

function fromInt(value, unsigned) {
  var obj, cachedObj, cache;

  if (unsigned) {
    value >>>= 0;

    if (cache = 0 <= value && value < 256) {
      cachedObj = UINT_CACHE[value];
      if (cachedObj) return cachedObj;
    }

    obj = fromBits(value, (value | 0) < 0 ? -1 : 0, true);
    if (cache) UINT_CACHE[value] = obj;
    return obj;
  } else {
    value |= 0;

    if (cache = -128 <= value && value < 128) {
      cachedObj = INT_CACHE[value];
      if (cachedObj) return cachedObj;
    }

    obj = fromBits(value, value < 0 ? -1 : 0, false);
    if (cache) INT_CACHE[value] = obj;
    return obj;
  }
}
/**
 * Returns a Long representing the given 32 bit integer value.
 * @function
 * @param {number} value The 32 bit integer in question
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {!Long} The corresponding Long value
 */
// Long.fromInt = fromInt;

/**
 * @param {number} value
 * @param {boolean=} unsigned
 * @returns {!Long}
 * @inner
 */


function fromNumber(value, unsigned) {
  if (isNaN(value)) return unsigned ? UZERO : ZERO;

  if (unsigned) {
    if (value < 0) return UZERO;
    if (value >= TWO_PWR_64_DBL) return MAX_UNSIGNED_VALUE;
  } else {
    if (value <= -TWO_PWR_63_DBL) return MIN_VALUE;
    if (value + 1 >= TWO_PWR_63_DBL) return MAX_VALUE;
  }

  if (value < 0) return negate(fromNumber(-value, unsigned));
  return fromBits(value % TWO_PWR_32_DBL | 0, value / TWO_PWR_32_DBL | 0, unsigned);
}
/**
 * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.
 * @function
 * @param {number} value The number in question
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {!Long} The corresponding Long value
 */
// Long.fromNumber = fromNumber;

/**
 * @param {number} lowBits
 * @param {number} highBits
 * @param {boolean=} unsigned
 * @returns {!Long}
 * @inner
 */


function fromBits(lowBits, highBits, unsigned) {
  return new Long(lowBits, highBits, unsigned);
}
/**
 * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits. Each is
 *  assumed to use 32 bits.
 * @function
 * @param {number} lowBits The low 32 bits
 * @param {number} highBits The high 32 bits
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {!Long} The corresponding Long value
 */
// Long.fromBits = fromBits;

/**
 * @function
 * @param {number} base
 * @param {number} exponent
 * @returns {number}
 * @inner
 */


var pow_dbl = Math.pow; // Used 4 times (4*8 to 15+4)

/**
 * @param {string} str
 * @param {(boolean|number)=} unsigned
 * @param {number=} radix
 * @returns {!Long}
 * @inner
 */

function fromString(str, unsigned, radix) {
  if (str.length === 0) throw Error('empty string');
  if (str === "NaN" || str === "Infinity" || str === "+Infinity" || str === "-Infinity") return ZERO;

  if (typeof unsigned === 'number') {
    // For goog.math.long compatibility
    radix = unsigned, unsigned = false;
  } else {
    unsigned = !!unsigned;
  }

  radix = radix || 10;
  if (radix < 2 || 36 < radix) throw RangeError('radix');
  var p = str.indexOf('-');
  if (p > 0) throw Error('interior hyphen');else if (p === 0) {
    return negate(fromString(str.substring(1), unsigned, radix));
  } // Do several (8) digits each time through the loop, so as to
  // minimize the calls to the very expensive emulated div.

  var radixToPower = fromNumber(pow_dbl(radix, 8));
  var result = ZERO;

  for (var i = 0; i < str.length; i += 8) {
    var size = Math.min(8, str.length - i),
        value = parseInt(str.substring(i, i + size), radix);

    if (size < 8) {
      var power = fromNumber(pow_dbl(radix, size));
      result = add(multiply(result, power), fromNumber(value));
    } else {
      result = multiply(result, radixToPower);
      result = add(result, fromNumber(value));
    }
  }

  result.unsigned = unsigned;
  return result;
}
/**
 * Returns a Long representation of the given string, written using the specified radix.
 * @function
 * @param {string} str The textual representation of the Long
 * @param {(boolean|number)=} unsigned Whether unsigned or not, defaults to signed
 * @param {number=} radix The radix in which the text is written (2-36), defaults to 10
 * @returns {!Long} The corresponding Long value
 */
// Long.fromString = fromString;

/**
 * @function
 * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val
 * @param {boolean=} unsigned
 * @returns {!Long}
 * @inner
 */


function fromValue(val, unsigned) {
  if (typeof val === 'number') return fromNumber(val, unsigned);
  if (typeof val === 'string') return fromString(val, unsigned); // Throws for non-objects, converts non-instanceof Long:

  return fromBits(val.low, val.high, typeof unsigned === 'boolean' ? unsigned : val.unsigned);
}
/**
 * Converts the specified value to a Long using the appropriate from* function for its type.
 * @function
 * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val Value
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {!Long}
 */
// Long.fromValue = fromValue;
// NOTE: the compiler should inline these constant values below and then remove these variables, so there should be
// no runtime penalty for these.

/**
 * @type {number}
 * @const
 * @inner
 */


var TWO_PWR_16_DBL = 1 << 16;
/**
 * @type {number}
 * @const
 * @inner
 */

var TWO_PWR_24_DBL = 1 << 24;
/**
 * @type {number}
 * @const
 * @inner
 */

var TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;
/**
 * @type {number}
 * @const
 * @inner
 */

var TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;
/**
 * @type {number}
 * @const
 * @inner
 */

var TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;
/**
 * @type {!Long}
 * @const
 * @inner
 */

var TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);
/**
 * @type {!Long}
 * @inner
 */

var ZERO = fromInt(0);
/**
 * Signed zero.
 * @type {!Long}
 */
// Long.ZERO = ZERO;

/**
 * @type {!Long}
 * @inner
 */

exports.ZERO = ZERO;
var UZERO = fromInt(0, true);
/**
 * Unsigned zero.
 * @type {!Long}
 */
// Long.UZERO = UZERO;

/**
 * @type {!Long}
 * @inner
 */

exports.UZERO = UZERO;
var ONE = fromInt(1);
/**
 * Signed one.
 * @type {!Long}
 */
// Long.ONE = ONE;

/**
 * @type {!Long}
 * @inner
 */

exports.ONE = ONE;
var UONE = fromInt(1, true);
/**
 * Unsigned one.
 * @type {!Long}
 */
// Long.UONE = UONE;

/**
 * @type {!Long}
 * @inner
 */

exports.UONE = UONE;
var NEG_ONE = fromInt(-1);
/**
 * Signed negative one.
 * @type {!Long}
 */
// Long.NEG_ONE = NEG_ONE;

/**
 * @type {!Long}
 * @inner
 */

exports.NEG_ONE = NEG_ONE;
var MAX_VALUE = fromBits(0xFFFFFFFF | 0, 0x7FFFFFFF | 0, false);
/**
 * Maximum signed value.
 * @type {!Long}
 */
// Long.MAX_VALUE = MAX_VALUE;

/**
 * @type {!Long}
 * @inner
 */

exports.MAX_VALUE = MAX_VALUE;
var MAX_UNSIGNED_VALUE = fromBits(0xFFFFFFFF | 0, 0xFFFFFFFF | 0, true);
/**
 * Maximum unsigned value.
 * @type {!Long}
 */
// Long.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;

/**
 * @type {!Long}
 * @inner
 */

exports.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;
var MIN_VALUE = fromBits(0, 0x80000000 | 0, false);
/**
 * Minimum signed value.
 * @type {!Long}
 */
// Long.MIN_VALUE = MIN_VALUE;

/**
 * @alias Long.prototype
 * @inner
 */
// var LongPrototype = Long.prototype;

/**
 * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.
 * @this {!Long}
 * @returns {number}
 */

exports.MIN_VALUE = MIN_VALUE;

function toInt($this) {
  return $this.unsigned ? $this.low >>> 0 : $this.low;
}

;
/**
 * Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa).
 * @this {!Long}
 * @returns {number}
 */

function toNumber($this) {
  if ($this.unsigned) return ($this.high >>> 0) * TWO_PWR_32_DBL + ($this.low >>> 0);
  return $this.high * TWO_PWR_32_DBL + ($this.low >>> 0);
}

;
/**
 * Converts the Long to a string written in the specified radix.
 * @this {!Long}
 * @param {number=} radix Radix (2-36), defaults to 10
 * @returns {string}
 * @override
 * @throws {RangeError} If `radix` is out of range
 */

function toString($this, radix) {
  radix = radix || 10;
  if (radix < 2 || 36 < radix) throw RangeError('radix');
  if (isZero($this)) return '0';

  if (isNegative($this)) {
    // Unsigned Longs are never negative
    if (equals($this, MIN_VALUE)) {
      // We need to change the Long value before it can be negated, so we remove
      // the bottom-most digit in this base and then recurse to do the rest.
      var radixLong = fromNumber(radix),
          div = divide($this, radixLong),
          rem1 = subtract(multiply(div, radixLong), $this);
      return toString(div, radix) + toInt(rem1).toString(radix);
    } else return '-' + toString(negate($this), radix);
  } // Do several (6) digits each time through the loop, so as to
  // minimize the calls to the very expensive emulated div.


  var radixToPower = fromNumber(pow_dbl(radix, 6), $this.unsigned),
      rem = $this;
  var result = '';

  while (true) {
    var remDiv = divide(rem, radixToPower),
        intval = toInt(subtract(rem, multiply(remDiv, radixToPower))) >>> 0,
        digits = intval.toString(radix);
    rem = remDiv;
    if (isZero(rem)) return digits + result;else {
      while (digits.length < 6) {
        digits = '0' + digits;
      }

      result = '' + digits + result;
    }
  }
}

;
/**
 * Gets the high 32 bits as a signed integer.
 * @this {!Long}
 * @returns {number} Signed high bits
 */

function getHighBits($this) {
  return $this.high;
}

;
/**
 * Gets the high 32 bits as an unsigned integer.
 * @this {!Long}
 * @returns {number} Unsigned high bits
 */

function getHighBitsUnsigned($this) {
  return $this.high >>> 0;
}

;
/**
 * Gets the low 32 bits as a signed integer.
 * @this {!Long}
 * @returns {number} Signed low bits
 */

function getLowBits($this) {
  return $this.low;
}

;
/**
 * Gets the low 32 bits as an unsigned integer.
 * @this {!Long}
 * @returns {number} Unsigned low bits
 */

function getLowBitsUnsigned($this) {
  return $this.low >>> 0;
}

;
/**
 * Gets the number of bits needed to represent the absolute value of this Long.
 * @this {!Long}
 * @returns {number}
 */

function getNumBitsAbs($this) {
  if (isNegative($this)) // Unsigned Longs are never negative
    return equals($this, MIN_VALUE) ? 64 : getNumBitsAbs(negate($this));
  var val = $this.high != 0 ? $this.high : $this.low;

  for (var bit = 31; bit > 0; bit--) {
    if ((val & 1 << bit) != 0) break;
  }

  return $this.high != 0 ? bit + 33 : bit + 1;
}

;
/**
 * Tests if this Long's value equals zero.
 * @this {!Long}
 * @returns {boolean}
 */

function isZero($this) {
  return $this.high === 0 && $this.low === 0;
}

;
/**
 * Tests if this Long's value equals zero. This is an alias of {@link Long#isZero}.
 * @returns {boolean}
 */
// LongPrototype.eqz = LongPrototype.isZero;

/**
 * Tests if this Long's value is negative.
 * @this {!Long}
 * @returns {boolean}
 */

function isNegative($this) {
  return !$this.unsigned && $this.high < 0;
}

;
/**
 * Tests if this Long's value is positive.
 * @this {!Long}
 * @returns {boolean}
 */

function isPositive($this) {
  return $this.unsigned || $this.high >= 0;
}

;
/**
 * Tests if this Long's value is odd.
 * @this {!Long}
 * @returns {boolean}
 */

function isOdd($this) {
  return ($this.low & 1) === 1;
}

;
/**
 * Tests if this Long's value is even.
 * @this {!Long}
 * @returns {boolean}
 */

function isEven($this) {
  return ($this.low & 1) === 0;
}

;
/**
 * Tests if this Long's value equals the specified's.
 * @this {!Long}
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */

function equals($this, other) {
  if (!isLong(other)) other = fromValue(other);
  if ($this.unsigned !== other.unsigned && $this.high >>> 31 === 1 && other.high >>> 31 === 1) return false;
  return $this.high === other.high && $this.low === other.low;
}

;
/**
 * Tests if this Long's value equals the specified's. This is an alias of {@link Long#equals}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
// LongPrototype.eq = LongPrototype.equals;

/**
 * Tests if this Long's value differs from the specified's.
 * @this {!Long}
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */

function notEquals($this, other) {
  return !equals($this,
  /* validates */
  other);
}

;
/**
 * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
// LongPrototype.neq = LongPrototype.notEquals;

/**
 * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
// LongPrototype.ne = LongPrototype.notEquals;

/**
 * Tests if this Long's value is less than the specified's.
 * @this {!Long}
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */

function lessThan($this, other) {
  return compare($this,
  /* validates */
  other) < 0;
}

;
/**
 * Tests if this Long's value is less than the specified's. This is an alias of {@link Long#lessThan}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
// LongPrototype.lt = LongPrototype.lessThan;

/**
 * Tests if this Long's value is less than or equal the specified's.
 * @this {!Long}
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */

function lessThanOrEqual($this, other) {
  return compare($this,
  /* validates */
  other) <= 0;
}

;
/**
 * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
// LongPrototype.lte = LongPrototype.lessThanOrEqual;

/**
 * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
// LongPrototype.le = LongPrototype.lessThanOrEqual;

/**
 * Tests if this Long's value is greater than the specified's.
 * @this {!Long}
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */

function greaterThan($this, other) {
  return compare($this,
  /* validates */
  other) > 0;
}

;
/**
 * Tests if this Long's value is greater than the specified's. This is an alias of {@link Long#greaterThan}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
// LongPrototype.gt = LongPrototype.greaterThan;

/**
 * Tests if this Long's value is greater than or equal the specified's.
 * @this {!Long}
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */

function greaterThanOrEqual($this, other) {
  return compare($this,
  /* validates */
  other) >= 0;
}

;
/**
 * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
// LongPrototype.gte = LongPrototype.greaterThanOrEqual;

/**
 * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {boolean}
 */
// LongPrototype.ge = LongPrototype.greaterThanOrEqual;

/**
 * Compares this Long's value with the specified's.
 * @this {!Long}
 * @param {!Long|number|string} other Other value
 * @returns {number} 0 if they are the same, 1 if the this is greater and -1
 *  if the given one is greater
 */

function compare($this, other) {
  if (!isLong(other)) other = fromValue(other);
  if (equals($this, other)) return 0;
  var thisNeg = isNegative($this),
      otherNeg = isNegative(other);
  if (thisNeg && !otherNeg) return -1;
  if (!thisNeg && otherNeg) return 1; // At this point the sign bits are the same

  if (!$this.unsigned) return isNegative(subtract($this, other)) ? -1 : 1; // Both are positive if at least one is unsigned

  return other.high >>> 0 > $this.high >>> 0 || other.high === $this.high && other.low >>> 0 > $this.low >>> 0 ? -1 : 1;
}

;
/**
 * Compares this Long's value with the specified's. This is an alias of {@link Long#compare}.
 * @function
 * @param {!Long|number|string} other Other value
 * @returns {number} 0 if they are the same, 1 if the this is greater and -1
 *  if the given one is greater
 */
// LongPrototype.comp = LongPrototype.compare;

/**
 * Negates this Long's value.
 * @this {!Long}
 * @returns {!Long} Negated Long
 */

function negate($this) {
  if (!$this.unsigned && equals($this, MIN_VALUE)) return MIN_VALUE;
  return add(not($this), ONE);
}

;
/**
 * Negates this Long's value. This is an alias of {@link Long#negate}.
 * @function
 * @returns {!Long} Negated Long
 */
// LongPrototype.neg = LongPrototype.negate;

/**
 * Returns the sum of this and the specified Long.
 * @this {!Long}
 * @param {!Long|number|string} addend Addend
 * @returns {!Long} Sum
 */

function add($this, addend) {
  if (!isLong(addend)) addend = fromValue(addend); // Divide each number into 4 chunks of 16 bits, and then sum the chunks.

  var a48 = $this.high >>> 16;
  var a32 = $this.high & 0xFFFF;
  var a16 = $this.low >>> 16;
  var a00 = $this.low & 0xFFFF;
  var b48 = addend.high >>> 16;
  var b32 = addend.high & 0xFFFF;
  var b16 = addend.low >>> 16;
  var b00 = addend.low & 0xFFFF;
  var c48 = 0,
      c32 = 0,
      c16 = 0,
      c00 = 0;
  c00 += a00 + b00;
  c16 += c00 >>> 16;
  c00 &= 0xFFFF;
  c16 += a16 + b16;
  c32 += c16 >>> 16;
  c16 &= 0xFFFF;
  c32 += a32 + b32;
  c48 += c32 >>> 16;
  c32 &= 0xFFFF;
  c48 += a48 + b48;
  c48 &= 0xFFFF;
  return fromBits(c16 << 16 | c00, c48 << 16 | c32, $this.unsigned);
}

;
/**
 * Returns the difference of this and the specified Long.
 * @this {!Long}
 * @param {!Long|number|string} subtrahend Subtrahend
 * @returns {!Long} Difference
 */

function subtract($this, subtrahend) {
  if (!isLong(subtrahend)) subtrahend = fromValue(subtrahend);
  return add($this, negate(subtrahend));
}

;
/**
 * Returns the difference of this and the specified Long. This is an alias of {@link Long#subtract}.
 * @function
 * @param {!Long|number|string} subtrahend Subtrahend
 * @returns {!Long} Difference
 */
// LongPrototype.sub = LongPrototype.subtract;

/**
 * Returns the product of this and the specified Long.
 * @this {!Long}
 * @param {!Long|number|string} multiplier Multiplier
 * @returns {!Long} Product
 */

function multiply($this, multiplier) {
  if (isZero($this)) return $this.unsigned ? UZERO : ZERO;
  if (!isLong(multiplier)) multiplier = fromValue(multiplier); // use wasm support if present

  if (wasm) {
    var low = wasm.mul($this.low, $this.high, multiplier.low, multiplier.high);
    return fromBits(low, wasm.get_high(), $this.unsigned);
  }

  if (isZero(multiplier)) return $this.unsigned ? UZERO : ZERO;
  if (equals($this, MIN_VALUE)) return isOdd(multiplier) ? MIN_VALUE : ZERO;
  if (equals(multiplier, MIN_VALUE)) return isOdd($this) ? MIN_VALUE : ZERO;

  if (isNegative($this)) {
    if (isNegative(multiplier)) return multiply(negate($this), negate(multiplier));else return negate(multiply(negate($this), multiplier));
  } else if (isNegative(multiplier)) return negate(multiply($this, negate(multiplier))); // If both longs are small, use float multiplication


  if (lessThan($this, TWO_PWR_24) && lessThan(multiplier, TWO_PWR_24)) return fromNumber(toNumber($this) * toNumber(multiplier), $this.unsigned); // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.
  // We can skip products that would overflow.

  var a48 = $this.high >>> 16;
  var a32 = $this.high & 0xFFFF;
  var a16 = $this.low >>> 16;
  var a00 = $this.low & 0xFFFF;
  var b48 = multiplier.high >>> 16;
  var b32 = multiplier.high & 0xFFFF;
  var b16 = multiplier.low >>> 16;
  var b00 = multiplier.low & 0xFFFF;
  var c48 = 0,
      c32 = 0,
      c16 = 0,
      c00 = 0;
  c00 += a00 * b00;
  c16 += c00 >>> 16;
  c00 &= 0xFFFF;
  c16 += a16 * b00;
  c32 += c16 >>> 16;
  c16 &= 0xFFFF;
  c16 += a00 * b16;
  c32 += c16 >>> 16;
  c16 &= 0xFFFF;
  c32 += a32 * b00;
  c48 += c32 >>> 16;
  c32 &= 0xFFFF;
  c32 += a16 * b16;
  c48 += c32 >>> 16;
  c32 &= 0xFFFF;
  c32 += a00 * b32;
  c48 += c32 >>> 16;
  c32 &= 0xFFFF;
  c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;
  c48 &= 0xFFFF;
  return fromBits(c16 << 16 | c00, c48 << 16 | c32, $this.unsigned);
}

;
/**
 * Returns the product of this and the specified Long. This is an alias of {@link Long#multiply}.
 * @function
 * @param {!Long|number|string} multiplier Multiplier
 * @returns {!Long} Product
 */
// LongPrototype.mul = LongPrototype.multiply;

/**
 * Returns this Long divided by the specified. The result is signed if this Long is signed or
 *  unsigned if this Long is unsigned.
 * @this {!Long}
 * @param {!Long|number|string} divisor Divisor
 * @returns {!Long} Quotient
 */

function divide($this, divisor) {
  if (!isLong(divisor)) divisor = fromValue(divisor);
  if (isZero(divisor)) throw Error('division by zero'); // use wasm support if present

  if (wasm) {
    // guard against signed division overflow: the largest
    // negative number / -1 would be 1 larger than the largest
    // positive number, due to two's complement.
    if (!$this.unsigned && $this.high === -0x80000000 && divisor.low === -1 && divisor.high === -1) {
      // be consistent with non-wasm code path
      return $this;
    }

    var low = ($this.unsigned ? wasm.div_u : wasm.div_s)($this.low, $this.high, divisor.low, divisor.high);
    return fromBits(low, wasm.get_high(), $this.unsigned);
  }

  if (isZero($this)) return $this.unsigned ? UZERO : ZERO;
  var approx, rem, res;

  if (!$this.unsigned) {
    // This section is only relevant for signed longs and is derived from the
    // closure library as a whole.
    if (equals($this, MIN_VALUE)) {
      if (equals(divisor, ONE) || equals(divisor, NEG_ONE)) return MIN_VALUE; // recall that -MIN_VALUE == MIN_VALUE
      else if (equals(divisor, MIN_VALUE)) return ONE;else {
          // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.
          var halfThis = shiftRight($this, 1);
          approx = shiftLeft(divide(halfThis, divisor), 1);

          if (equals(approx, ZERO)) {
            return isNegative(divisor) ? ONE : NEG_ONE;
          } else {
            rem = subtract($this, multiply(divisor, approx));
            res = add(approx, divide(rem, divisor));
            return res;
          }
        }
    } else if (equals(divisor, MIN_VALUE)) return $this.unsigned ? UZERO : ZERO;

    if (isNegative($this)) {
      if (isNegative(divisor)) return divide(negate($this), negate(divisor));
      return negate(divide(negate($this), divisor));
    } else if (isNegative(divisor)) return negate(divide($this, negate(divisor)));

    res = ZERO;
  } else {
    // The algorithm below has not been made for unsigned longs. It's therefore
    // required to take special care of the MSB prior to running it.
    if (!divisor.unsigned) divisor = toUnsigned(divisor);
    if (greaterThan(divisor, $this)) return UZERO;
    if (greaterThan(divisor, shiftRightUnsigned($this, 1))) // 15 >>> 1 = 7 ; with divisor = 8 ; true
      return UONE;
    res = UZERO;
  } // Repeat the following until the remainder is less than other:  find a
  // floating-point that approximates remainder / other *from below*, add this
  // into the result, and subtract it from the remainder.  It is critical that
  // the approximate value is less than or equal to the real value so that the
  // remainder never becomes negative.


  rem = $this;

  while (greaterThanOrEqual(rem, divisor)) {
    // Approximate the result of division. This may be a little greater or
    // smaller than the actual value.
    approx = Math.max(1, Math.floor(toNumber(rem) / toNumber(divisor))); // We will tweak the approximate result by changing it in the 48-th digit or
    // the smallest non-fractional digit, whichever is larger.

    var log2 = Math.ceil(Math.log(approx) / Math.LN2),
        delta = log2 <= 48 ? 1 : pow_dbl(2, log2 - 48),
        // Decrease the approximation until it is smaller than the remainder.  Note
    // that if it is too large, the product overflows and is negative.
    approxRes = fromNumber(approx),
        approxRem = multiply(approxRes, divisor);

    while (isNegative(approxRem) || greaterThan(approxRem, rem)) {
      approx -= delta;
      approxRes = fromNumber(approx, $this.unsigned);
      approxRem = multiply(approxRes, divisor);
    } // We know the answer can't be zero... and actually, zero would cause
    // infinite recursion since we would make no progress.


    if (isZero(approxRes)) approxRes = ONE;
    res = add(res, approxRes);
    rem = subtract(rem, approxRem);
  }

  return res;
}

;
/**
 * Returns this Long divided by the specified. This is an alias of {@link Long#divide}.
 * @function
 * @param {!Long|number|string} divisor Divisor
 * @returns {!Long} Quotient
 */
// LongPrototype.div = LongPrototype.divide;

/**
 * Returns this Long modulo the specified.
 * @this {!Long}
 * @param {!Long|number|string} divisor Divisor
 * @returns {!Long} Remainder
 */

function modulo($this, divisor) {
  if (!isLong(divisor)) divisor = fromValue(divisor); // use wasm support if present

  if (wasm) {
    var low = ($this.unsigned ? wasm.rem_u : wasm.rem_s)($this.low, $this.high, divisor.low, divisor.high);
    return fromBits(low, wasm.get_high(), $this.unsigned);
  }

  return subtract($this, multiply(divide($this, divisor), divisor));
}

;
/**
 * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.
 * @function
 * @param {!Long|number|string} divisor Divisor
 * @returns {!Long} Remainder
 */
// LongPrototype.mod = LongPrototype.modulo;

/**
 * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.
 * @function
 * @param {!Long|number|string} divisor Divisor
 * @returns {!Long} Remainder
 */
// LongPrototype.rem = LongPrototype.modulo;

/**
 * Returns the bitwise NOT of this Long.
 * @this {!Long}
 * @returns {!Long}
 */

function not($this) {
  return fromBits(~$this.low, ~$this.high, $this.unsigned);
}

;
/**
 * Returns the bitwise AND of this Long and the specified.
 * @this {!Long}
 * @param {!Long|number|string} other Other Long
 * @returns {!Long}
 */

function and($this, other) {
  if (!isLong(other)) other = fromValue(other);
  return fromBits($this.low & other.low, $this.high & other.high, $this.unsigned);
}

;
/**
 * Returns the bitwise OR of this Long and the specified.
 * @this {!Long}
 * @param {!Long|number|string} other Other Long
 * @returns {!Long}
 */

function or($this, other) {
  if (!isLong(other)) other = fromValue(other);
  return fromBits($this.low | other.low, $this.high | other.high, $this.unsigned);
}

;
/**
 * Returns the bitwise XOR of this Long and the given one.
 * @this {!Long}
 * @param {!Long|number|string} other Other Long
 * @returns {!Long}
 */

function xor($this, other) {
  if (!isLong(other)) other = fromValue(other);
  return fromBits($this.low ^ other.low, $this.high ^ other.high, $this.unsigned);
}

;
/**
 * Returns this Long with bits shifted to the left by the given amount.
 * @this {!Long}
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */

function shiftLeft($this, numBits) {
  if (isLong(numBits)) numBits = toInt(numBits);
  if ((numBits &= 63) === 0) return $this;else if (numBits < 32) return fromBits($this.low << numBits, $this.high << numBits | $this.low >>> 32 - numBits, $this.unsigned);else return fromBits(0, $this.low << numBits - 32, $this.unsigned);
}

;
/**
 * Returns this Long with bits shifted to the left by the given amount. This is an alias of {@link Long#shiftLeft}.
 * @function
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
// LongPrototype.shl = LongPrototype.shiftLeft;

/**
 * Returns this Long with bits arithmetically shifted to the right by the given amount.
 * @this {!Long}
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */

function shiftRight($this, numBits) {
  if (isLong(numBits)) numBits = toInt(numBits);
  if ((numBits &= 63) === 0) return $this;else if (numBits < 32) return fromBits($this.low >>> numBits | $this.high << 32 - numBits, $this.high >> numBits, $this.unsigned);else return fromBits($this.high >> numBits - 32, $this.high >= 0 ? 0 : -1, $this.unsigned);
}

;
/**
 * Returns this Long with bits arithmetically shifted to the right by the given amount. This is an alias of {@link Long#shiftRight}.
 * @function
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
// LongPrototype.shr = LongPrototype.shiftRight;

/**
 * Returns this Long with bits logically shifted to the right by the given amount.
 * @this {!Long}
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */

function shiftRightUnsigned($this, numBits) {
  if (isLong(numBits)) numBits = toInt(numBits);
  numBits &= 63;
  if (numBits === 0) return $this;else {
    var high = $this.high;

    if (numBits < 32) {
      var low = $this.low;
      return fromBits(low >>> numBits | high << 32 - numBits, high >>> numBits, $this.unsigned);
    } else if (numBits === 32) return fromBits(high, 0, $this.unsigned);else return fromBits(high >>> numBits - 32, 0, $this.unsigned);
  }
}

;
/**
 * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.
 * @function
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
// LongPrototype.shru = LongPrototype.shiftRightUnsigned;

/**
 * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.
 * @function
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Shifted Long
 */
// LongPrototype.shr_u = LongPrototype.shiftRightUnsigned;

/**
 * Returns this Long with bits rotated to the left by the given amount.
 * @this {!Long}
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Rotated Long
 */

var rotateLeft = function rotateLeft(numBits) {
  var b;
  if (isLong(numBits)) numBits = numBits.toInt();
  if ((numBits &= 63) === 0) return this;
  if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);

  if (numBits < 32) {
    b = 32 - numBits;
    return fromBits(this.low << numBits | this.high >>> b, this.high << numBits | this.low >>> b, this.unsigned);
  }

  numBits -= 32;
  b = 32 - numBits;
  return fromBits(this.high << numBits | this.low >>> b, this.low << numBits | this.high >>> b, this.unsigned);
};
/**
 * Returns this Long with bits rotated to the left by the given amount. This is an alias of {@link Long#rotateLeft}.
 * @function
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Rotated Long
 */
// LongPrototype.rotl = LongPrototype.rotateLeft;

/**
 * Returns this Long with bits rotated to the right by the given amount.
 * @this {!Long}
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Rotated Long
 */


exports.rotateLeft = rotateLeft;

var rotateRight = function rotateRight(numBits) {
  var b;
  if (isLong(numBits)) numBits = numBits.toInt();
  if ((numBits &= 63) === 0) return this;
  if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);

  if (numBits < 32) {
    b = 32 - numBits;
    return fromBits(this.high << b | this.low >>> numBits, this.low << b | this.high >>> numBits, this.unsigned);
  }

  numBits -= 32;
  b = 32 - numBits;
  return fromBits(this.low << b | this.high >>> numBits, this.high << b | this.low >>> numBits, this.unsigned);
};
/**
 * Returns this Long with bits rotated to the right by the given amount. This is an alias of {@link Long#rotateRight}.
 * @function
 * @param {number|!Long} numBits Number of bits
 * @returns {!Long} Rotated Long
 */
// LongPrototype.rotr = LongPrototype.rotateRight;

/**
 * Converts this Long to signed.
 * @this {!Long}
 * @returns {!Long} Signed long
 */


exports.rotateRight = rotateRight;

function toSigned($this) {
  if (!$this.unsigned) return $this;
  return fromBits($this.low, $this.high, false);
}

;
/**
 * Converts this Long to unsigned.
 * @this {!Long}
 * @returns {!Long} Unsigned long
 */

function toUnsigned($this) {
  if ($this.unsigned) return $this;
  return fromBits($this.low, $this.high, true);
}

;
/**
 * Converts this Long to its byte representation.
 * @param {boolean=} le Whether little or big endian, defaults to big endian
 * @this {!Long}
 * @returns {!Array.<number>} Byte representation
 */

function toBytes($this, le) {
  return le ? toBytesLE($this) : toBytesBE($this);
}

;
/**
 * Converts this Long to its little endian byte representation.
 * @this {!Long}
 * @returns {!Array.<number>} Little endian byte representation
 */

function toBytesLE($this) {
  var hi = $this.high,
      lo = $this.low;
  return [lo & 0xff, lo >>> 8 & 0xff, lo >>> 16 & 0xff, lo >>> 24, hi & 0xff, hi >>> 8 & 0xff, hi >>> 16 & 0xff, hi >>> 24];
}

;
/**
 * Converts this Long to its big endian byte representation.
 * @this {!Long}
 * @returns {!Array.<number>} Big endian byte representation
 */

function toBytesBE($this) {
  var hi = $this.high,
      lo = $this.low;
  return [hi >>> 24, hi >>> 16 & 0xff, hi >>> 8 & 0xff, hi & 0xff, lo >>> 24, lo >>> 16 & 0xff, lo >>> 8 & 0xff, lo & 0xff];
}

;
/**
 * Creates a Long from its byte representation.
 * @param {!Array.<number>} bytes Byte representation
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @param {boolean=} le Whether little or big endian, defaults to big endian
 * @returns {Long} The corresponding Long value
 */

function fromBytes(bytes, unsigned, le) {
  return le ? fromBytesLE(bytes, unsigned) : fromBytesBE(bytes, unsigned);
}

;
/**
 * Creates a Long from its little endian byte representation.
 * @param {!Array.<number>} bytes Little endian byte representation
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {Long} The corresponding Long value
 */

function fromBytesLE(bytes, unsigned) {
  return new Long(bytes[0] | bytes[1] << 8 | bytes[2] << 16 | bytes[3] << 24, bytes[4] | bytes[5] << 8 | bytes[6] << 16 | bytes[7] << 24, unsigned);
}

;
/**
 * Creates a Long from its big endian byte representation.
 * @param {!Array.<number>} bytes Big endian byte representation
 * @param {boolean=} unsigned Whether unsigned or not, defaults to signed
 * @returns {Long} The corresponding Long value
 */

function fromBytesBE(bytes, unsigned) {
  return new Long(bytes[4] << 24 | bytes[5] << 16 | bytes[6] << 8 | bytes[7], bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3], unsigned);
}

;
},{}],"../JS/.fable/fable-library.3.0.0/Long.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.abs = abs;
exports.fromInteger = fromInteger;
exports.parse = parse;
exports.tryParse = tryParse;
exports.unixEpochMillisecondsToTicks = unixEpochMillisecondsToTicks;
exports.ticksToUnixEpochMilliseconds = ticksToUnixEpochMilliseconds;
exports.makeRangeStepFunction = makeRangeStepFunction;
exports.getHighBitsUnsigned = exports.getLowBitsUnsigned = exports.getHighBits = exports.getLowBits = exports.toString = exports.toNumber = exports.toBytes = exports.toInt = exports.fromValue = exports.fromString = exports.fromNumber = exports.fromBytes = exports.fromBits = exports.fromInt = exports.compare = exports.equals = exports.op_Inequality = exports.op_Equality = exports.op_GreaterThanOrEqual = exports.op_GreaterThan = exports.op_LessThanOrEqual = exports.op_LessThan = exports.op_LogicalNot = exports.op_ExclusiveOr = exports.op_BitwiseOr = exports.op_BitwiseAnd = exports.op_RightShiftUnsigned = exports.op_RightShift = exports.op_LeftShift = exports.op_UnaryNegation = exports.op_Modulus = exports.op_Division = exports.op_Multiply = exports.op_Subtraction = exports.op_Addition = exports.get_One = exports.get_Zero = exports.default = void 0;

var _Int = require("./Int32.js");

var LongLib = _interopRequireWildcard(require("./lib/long.js"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

var _default = LongLib.Long;
exports.default = _default;
var get_Zero = LongLib.ZERO;
exports.get_Zero = get_Zero;
var get_One = LongLib.ONE;
exports.get_One = get_One;
var op_Addition = LongLib.add;
exports.op_Addition = op_Addition;
var op_Subtraction = LongLib.subtract;
exports.op_Subtraction = op_Subtraction;
var op_Multiply = LongLib.multiply;
exports.op_Multiply = op_Multiply;
var op_Division = LongLib.divide;
exports.op_Division = op_Division;
var op_Modulus = LongLib.modulo;
exports.op_Modulus = op_Modulus;
var op_UnaryNegation = LongLib.negate;
exports.op_UnaryNegation = op_UnaryNegation;
var op_LeftShift = LongLib.shiftLeft;
exports.op_LeftShift = op_LeftShift;
var op_RightShift = LongLib.shiftRight;
exports.op_RightShift = op_RightShift;
var op_RightShiftUnsigned = LongLib.shiftRightUnsigned;
exports.op_RightShiftUnsigned = op_RightShiftUnsigned;
var op_BitwiseAnd = LongLib.and;
exports.op_BitwiseAnd = op_BitwiseAnd;
var op_BitwiseOr = LongLib.or;
exports.op_BitwiseOr = op_BitwiseOr;
var op_ExclusiveOr = LongLib.xor;
exports.op_ExclusiveOr = op_ExclusiveOr;
var op_LogicalNot = LongLib.not;
exports.op_LogicalNot = op_LogicalNot;
var op_LessThan = LongLib.lessThan;
exports.op_LessThan = op_LessThan;
var op_LessThanOrEqual = LongLib.lessThanOrEqual;
exports.op_LessThanOrEqual = op_LessThanOrEqual;
var op_GreaterThan = LongLib.greaterThan;
exports.op_GreaterThan = op_GreaterThan;
var op_GreaterThanOrEqual = LongLib.greaterThanOrEqual;
exports.op_GreaterThanOrEqual = op_GreaterThanOrEqual;
var op_Equality = LongLib.equals;
exports.op_Equality = op_Equality;
var op_Inequality = LongLib.notEquals;
exports.op_Inequality = op_Inequality;
var equals = LongLib.equals;
exports.equals = equals;
var compare = LongLib.compare;
exports.compare = compare;
var fromInt = LongLib.fromInt;
exports.fromInt = fromInt;
var fromBits = LongLib.fromBits;
exports.fromBits = fromBits;
var fromBytes = LongLib.fromBytes;
exports.fromBytes = fromBytes;
var fromNumber = LongLib.fromNumber;
exports.fromNumber = fromNumber;
var fromString = LongLib.fromString;
exports.fromString = fromString;
var fromValue = LongLib.fromValue;
exports.fromValue = fromValue;
var toInt = LongLib.toInt;
exports.toInt = toInt;
var toBytes = LongLib.toBytes;
exports.toBytes = toBytes;
var toNumber = LongLib.toNumber;
exports.toNumber = toNumber;
var toString = LongLib.toString;
exports.toString = toString;
var getLowBits = LongLib.getLowBits;
exports.getLowBits = getLowBits;
var getHighBits = LongLib.getHighBits;
exports.getHighBits = getHighBits;
var getLowBitsUnsigned = LongLib.getLowBitsUnsigned;
exports.getLowBitsUnsigned = getLowBitsUnsigned;
var getHighBitsUnsigned = LongLib.getHighBitsUnsigned;
exports.getHighBitsUnsigned = getHighBitsUnsigned;

function getMaxValue(unsigned, radix, isNegative) {
  switch (radix) {
    case 2:
      return unsigned ? "1111111111111111111111111111111111111111111111111111111111111111" : isNegative ? "1000000000000000000000000000000000000000000000000000000000000000" : "111111111111111111111111111111111111111111111111111111111111111";

    case 8:
      return unsigned ? "1777777777777777777777" : isNegative ? "1000000000000000000000" : "777777777777777777777";

    case 10:
      return unsigned ? "18446744073709551615" : isNegative ? "9223372036854775808" : "9223372036854775807";

    case 16:
      return unsigned ? "FFFFFFFFFFFFFFFF" : isNegative ? "8000000000000000" : "7FFFFFFFFFFFFFFF";

    default:
      throw new Error("Invalid radix.");
  }
}

function abs(x) {
  if (!x.unsigned && LongLib.isNegative(x)) {
    return op_UnaryNegation(x);
  } else {
    return x;
  }
}

function fromInteger(value, unsigned, kind) {
  var x = value;
  var xh = 0;

  switch (kind) {
    case 0:
      x = value << 24 >> 24;
      xh = x;
      break;

    case 4:
      x = value << 24 >>> 24;
      break;

    case 1:
      x = value << 16 >> 16;
      xh = x;
      break;

    case 5:
      x = value << 16 >>> 16;
      break;

    case 2:
      x = value >> 0;
      xh = x;
      break;

    case 6:
      x = value >>> 0;
      break;
  }

  return LongLib.fromBits(x, xh >> 31, unsigned);
}

function parse(str, style, unsigned, _bitsize, radix) {
  var res = (0, _Int.isValid)(str, style, radix);

  if (res != null) {
    var lessOrEqual = function lessOrEqual(x, y) {
      var len = Math.max(x.length, y.length);
      return x.padStart(len, "0") <= y.padStart(len, "0");
    };

    var isNegative = res.sign === "-";
    var maxValue = getMaxValue(unsigned || res.radix !== 10, res.radix, isNegative);

    if (lessOrEqual(res.digits.toUpperCase(), maxValue)) {
      str = isNegative ? res.sign + res.digits : res.digits;
      return LongLib.fromString(str, unsigned, res.radix);
    }
  }

  throw new Error("Input string was not in a correct format.");
}

function tryParse(str, style, unsigned, bitsize, defValue) {
  try {
    defValue.contents = parse(str, style, unsigned, bitsize);
    return true;
  } catch (_a) {
    return false;
  }
}

function unixEpochMillisecondsToTicks(ms, offset) {
  return op_Multiply(op_Addition(op_Addition(LongLib.fromNumber(ms), 62135596800000), offset), 10000);
}

function ticksToUnixEpochMilliseconds(ticks) {
  return LongLib.toNumber(op_Subtraction(op_Division(ticks, 10000), 62135596800000));
}

function makeRangeStepFunction(step, last, unsigned) {
  var stepComparedWithZero = LongLib.compare(step, unsigned ? LongLib.UZERO : LongLib.ZERO);

  if (stepComparedWithZero === 0) {
    throw new Error("The step of a range cannot be zero");
  }

  var stepGreaterThanZero = stepComparedWithZero > 0;
  return function (x) {
    var comparedWithLast = LongLib.compare(x, last);

    if (stepGreaterThanZero && comparedWithLast <= 0 || !stepGreaterThanZero && comparedWithLast >= 0) {
      return [x, op_Addition(x, step)];
    } else {
      return undefined;
    }
  };
}
},{"./Int32.js":"../JS/.fable/fable-library.3.0.0/Int32.js","./lib/long.js":"../JS/.fable/fable-library.3.0.0/lib/long.js"}],"../JS/.fable/fable-library.3.0.0/Date.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.dateOffsetToString = dateOffsetToString;
exports.dateToHalfUTCString = dateToHalfUTCString;
exports.toString = toString;
exports.DateTime = DateTime;
exports.fromTicks = fromTicks;
exports.fromDateTimeOffset = fromDateTimeOffset;
exports.getTicks = getTicks;
exports.minValue = minValue;
exports.maxValue = maxValue;
exports.parseRaw = parseRaw;
exports.parse = parse;
exports.tryParse = tryParse;
exports.create = create;
exports.now = now;
exports.utcNow = utcNow;
exports.today = today;
exports.isLeapYear = isLeapYear;
exports.daysInMonth = daysInMonth;
exports.toUniversalTime = toUniversalTime;
exports.toLocalTime = toLocalTime;
exports.specifyKind = specifyKind;
exports.timeOfDay = timeOfDay;
exports.date = date;
exports.day = day;
exports.hour = hour;
exports.millisecond = millisecond;
exports.minute = minute;
exports.month = month;
exports.second = second;
exports.year = year;
exports.dayOfWeek = dayOfWeek;
exports.dayOfYear = dayOfYear;
exports.add = add;
exports.addDays = addDays;
exports.addHours = addHours;
exports.addMinutes = addMinutes;
exports.addSeconds = addSeconds;
exports.addMilliseconds = addMilliseconds;
exports.addYears = addYears;
exports.addMonths = addMonths;
exports.subtract = subtract;
exports.toLongDateString = toLongDateString;
exports.toShortDateString = toShortDateString;
exports.toLongTimeString = toLongTimeString;
exports.toShortTimeString = toShortTimeString;
exports.equals = equals;
exports.op_Addition = op_Addition;
exports.op_Subtraction = op_Subtraction;
exports.isDaylightSavingTime = isDaylightSavingTime;
exports.default = exports.compareTo = exports.compare = exports.offsetRegex = void 0;

var _Long = require("./Long.js");

var _Util = require("./Util.js");

/**
 * DateTimeOffset functions.
 *
 * Note: Date instances are always DateObjects in local
 * timezone (because JS dates are all kinds of messed up).
 * A local date returns UTC epoc when `.getTime()` is called.
 *
 * Basically; invariant: date.getTime() always return UTC time.
 */
var offsetRegex = /(?:Z|[+-](\d+):?([0-5]?\d)?)\s*$/;
exports.offsetRegex = offsetRegex;

function dateOffsetToString(offset) {
  var isMinus = offset < 0;
  offset = Math.abs(offset);
  var hours = ~~(offset / 3600000);
  var minutes = offset % 3600000 / 60000;
  return (isMinus ? "-" : "+") + (0, _Util.padWithZeros)(hours, 2) + ":" + (0, _Util.padWithZeros)(minutes, 2);
}

function dateToHalfUTCString(date, half) {
  var str = date.toISOString();
  return half === "first" ? str.substring(0, str.indexOf("T")) : str.substring(str.indexOf("T") + 1, str.length - 1);
}

function dateToISOString(d, utc) {
  if (utc) {
    return d.toISOString();
  } else {
    // JS Date is always local
    var printOffset = d.kind == null ? true : d.kind === 2
    /* Local */
    ;
    return (0, _Util.padWithZeros)(d.getFullYear(), 4) + "-" + (0, _Util.padWithZeros)(d.getMonth() + 1, 2) + "-" + (0, _Util.padWithZeros)(d.getDate(), 2) + "T" + (0, _Util.padWithZeros)(d.getHours(), 2) + ":" + (0, _Util.padWithZeros)(d.getMinutes(), 2) + ":" + (0, _Util.padWithZeros)(d.getSeconds(), 2) + "." + (0, _Util.padWithZeros)(d.getMilliseconds(), 3) + (printOffset ? dateOffsetToString(d.getTimezoneOffset() * -60000) : "");
  }
}

function dateToISOStringWithOffset(dateWithOffset, offset) {
  var str = dateWithOffset.toISOString();
  return str.substring(0, str.length - 1) + dateOffsetToString(offset);
}

function dateToStringWithCustomFormat(date, format, utc) {
  return format.replace(/(\w)\1*/g, function (match) {
    var rep = Number.NaN;

    switch (match.substring(0, 1)) {
      case "y":
        var y = utc ? date.getUTCFullYear() : date.getFullYear();
        rep = match.length < 4 ? y % 100 : y;
        break;

      case "M":
        rep = (utc ? date.getUTCMonth() : date.getMonth()) + 1;
        break;

      case "d":
        rep = utc ? date.getUTCDate() : date.getDate();
        break;

      case "H":
        rep = utc ? date.getUTCHours() : date.getHours();
        break;

      case "h":
        var h = utc ? date.getUTCHours() : date.getHours();
        rep = h > 12 ? h % 12 : h;
        break;

      case "m":
        rep = utc ? date.getUTCMinutes() : date.getMinutes();
        break;

      case "s":
        rep = utc ? date.getUTCSeconds() : date.getSeconds();
        break;

      case "f":
        rep = utc ? date.getUTCMilliseconds() : date.getMilliseconds();
        break;
    }

    if (Number.isNaN(rep)) {
      return match;
    } else {
      return rep < 10 && match.length > 1 ? "0" + rep : "" + rep;
    }
  });
}

function dateToStringWithOffset(date, format) {
  var _a, _b, _c;

  var d = new Date(date.getTime() + ((_a = date.offset) !== null && _a !== void 0 ? _a : 0));

  if (typeof format !== "string") {
    return d.toISOString().replace(/\.\d+/, "").replace(/[A-Z]|\.\d+/g, " ") + dateOffsetToString((_b = date.offset) !== null && _b !== void 0 ? _b : 0);
  } else if (format.length === 1) {
    switch (format) {
      case "D":
      case "d":
        return dateToHalfUTCString(d, "first");

      case "T":
      case "t":
        return dateToHalfUTCString(d, "second");

      case "O":
      case "o":
        return dateToISOStringWithOffset(d, (_c = date.offset) !== null && _c !== void 0 ? _c : 0);

      default:
        throw new Error("Unrecognized Date print format");
    }
  } else {
    return dateToStringWithCustomFormat(d, format, true);
  }
}

function dateToStringWithKind(date, format) {
  var utc = date.kind === 1
  /* UTC */
  ;

  if (typeof format !== "string") {
    return utc ? date.toUTCString() : date.toLocaleString();
  } else if (format.length === 1) {
    switch (format) {
      case "D":
      case "d":
        return utc ? dateToHalfUTCString(date, "first") : date.toLocaleDateString();

      case "T":
      case "t":
        return utc ? dateToHalfUTCString(date, "second") : date.toLocaleTimeString();

      case "O":
      case "o":
        return dateToISOString(date, utc);

      default:
        throw new Error("Unrecognized Date print format");
    }
  } else {
    return dateToStringWithCustomFormat(date, format, utc);
  }
}

function toString(date, format, _provider) {
  return date.offset != null ? dateToStringWithOffset(date, format) : dateToStringWithKind(date, format);
}

function DateTime(value, kind) {
  var d = new Date(value);
  d.kind = (kind == null ? 0
  /* Unspecified */
  : kind) | 0;
  return d;
}

function fromTicks(ticks, kind) {
  ticks = (0, _Long.fromValue)(ticks);
  kind = kind != null ? kind : 0
  /* Unspecified */
  ;
  var date = DateTime((0, _Long.ticksToUnixEpochMilliseconds)(ticks), kind); // Ticks are local to offset (in this case, either UTC or Local/Unknown).
  // If kind is anything but UTC, that means that the tick number was not
  // in utc, thus getTime() cannot return UTC, and needs to be shifted.

  if (kind !== 1
  /* UTC */
  ) {
      date = DateTime(date.getTime() - (0, _Util.dateOffset)(date), kind);
    }

  return date;
}

function fromDateTimeOffset(date, kind) {
  var _a;

  switch (kind) {
    case 1
    /* UTC */
    :
      return DateTime(date.getTime(), 1
      /* UTC */
      );

    case 2
    /* Local */
    :
      return DateTime(date.getTime(), 2
      /* Local */
      );

    default:
      var d = DateTime(date.getTime() + ((_a = date.offset) !== null && _a !== void 0 ? _a : 0), kind);
      return DateTime(d.getTime() - (0, _Util.dateOffset)(d), kind);
  }
}

function getTicks(date) {
  return (0, _Long.unixEpochMillisecondsToTicks)(date.getTime(), (0, _Util.dateOffset)(date));
}

function minValue() {
  // This is "0001-01-01T00:00:00.000Z", actual JS min value is -8640000000000000
  return DateTime(-62135596800000, 0
  /* Unspecified */
  );
}

function maxValue() {
  // This is "9999-12-31T23:59:59.999Z", actual JS max value is 8640000000000000
  return DateTime(253402300799999, 0
  /* Unspecified */
  );
}

function parseRaw(input) {
  if (input === null) {
    throw new Error("Value cannot be null when parsing DateTime");
  }

  if (input.trim() === "") {
    throw new Error("An empty string is not recognized as a valid DateTime");
  }

  var date = new Date(input);

  if (isNaN(date.getTime())) {
    // Try to check strings JS Date cannot parse (see #1045, #1422)
    // tslint:disable-next-line:max-line-length
    var m = /^\s*(\d+[^\w\s:]\d+[^\w\s:]\d+)?\s*(\d+:\d+(?::\d+(?:\.\d+)?)?)?\s*([AaPp][Mm])?\s*([+-]\d+(?::\d+)?)?\s*$/.exec(input);

    if (m != null) {
      var baseDate;
      var timeInSeconds = 0;

      if (m[2] != null) {
        var timeParts = m[2].split(":");
        timeInSeconds = parseInt(timeParts[0], 10) * 3600 + parseInt(timeParts[1] || "0", 10) * 60 + parseFloat(timeParts[2] || "0");

        if (m[3] != null && m[3].toUpperCase() === "PM") {
          timeInSeconds += 720;
        }
      }

      if (m[4] != null) {
        // There's an offset, parse as UTC
        if (m[1] != null) {
          baseDate = new Date(m[1] + " UTC");
        } else {
          var d = new Date();
          baseDate = new Date(d.getUTCFullYear() + "/" + (d.getUTCMonth() + 1) + "/" + d.getUTCDate());
        }

        var offsetParts = m[4].substr(1).split(":");
        var offsetInMinutes = parseInt(offsetParts[0], 10) * 60 + parseInt(offsetParts[1] || "0", 10);

        if (m[4][0] === "+") {
          offsetInMinutes *= -1;
        }

        timeInSeconds += offsetInMinutes * 60;
      } else {
        if (m[1] != null) {
          baseDate = new Date(m[1]);
        } else {
          var _d = new Date();

          baseDate = new Date(_d.getFullYear() + "/" + (_d.getMonth() + 1) + "/" + _d.getDate());
        }
      }

      date = new Date(baseDate.getTime() + timeInSeconds * 1000); // correct for daylight savings time

      date = new Date(date.getTime() + (date.getTimezoneOffset() - baseDate.getTimezoneOffset()) * 60000);
    } else {
      throw new Error("The string is not a valid Date.");
    }
  }

  return date;
}

function parse(str) {
  var detectUTC = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  var date = parseRaw(str);
  var offset = offsetRegex.exec(str); // .NET always parses DateTime as Local if there's offset info (even "Z")
  // Newtonsoft.Json uses UTC if the offset is "Z"

  var kind = offset != null ? detectUTC && offset[0] === "Z" ? 1
  /* UTC */
  : 2
  /* Local */
  : 0
  /* Unspecified */
  ;
  return DateTime(date.getTime(), kind);
}

function tryParse(v, defValue) {
  try {
    defValue.contents = parse(v);
    return true;
  } catch (_err) {
    return false;
  }
}

function create(year, month, day) {
  var h = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
  var m = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;
  var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;
  var ms = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;
  var kind = arguments.length > 7 ? arguments[7] : undefined;
  var dateValue = kind === 1
  /* UTC */
  ? Date.UTC(year, month - 1, day, h, m, s, ms) : new Date(year, month - 1, day, h, m, s, ms).getTime();

  if (isNaN(dateValue)) {
    throw new Error("The parameters describe an unrepresentable Date.");
  }

  var date = DateTime(dateValue, kind);

  if (year <= 99) {
    date.setFullYear(year, month - 1, day);
  }

  return date;
}

function now() {
  return DateTime(Date.now(), 2
  /* Local */
  );
}

function utcNow() {
  return DateTime(Date.now(), 1
  /* UTC */
  );
}

function today() {
  return date(now());
}

function isLeapYear(year) {
  return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
}

function daysInMonth(year, month) {
  return month === 2 ? isLeapYear(year) ? 29 : 28 : month >= 8 ? month % 2 === 0 ? 31 : 30 : month % 2 === 0 ? 30 : 31;
}

function toUniversalTime(date) {
  return date.kind === 1
  /* UTC */
  ? date : DateTime(date.getTime(), 1
  /* UTC */
  );
}

function toLocalTime(date) {
  return date.kind === 2
  /* Local */
  ? date : DateTime(date.getTime(), 2
  /* Local */
  );
}

function specifyKind(d, kind) {
  return create(year(d), month(d), day(d), hour(d), minute(d), second(d), millisecond(d), kind);
}

function timeOfDay(d) {
  return hour(d) * 3600000 + minute(d) * 60000 + second(d) * 1000 + millisecond(d);
}

function date(d) {
  return create(year(d), month(d), day(d), 0, 0, 0, 0, d.kind);
}

function day(d) {
  return d.kind === 1
  /* UTC */
  ? d.getUTCDate() : d.getDate();
}

function hour(d) {
  return d.kind === 1
  /* UTC */
  ? d.getUTCHours() : d.getHours();
}

function millisecond(d) {
  return d.kind === 1
  /* UTC */
  ? d.getUTCMilliseconds() : d.getMilliseconds();
}

function minute(d) {
  return d.kind === 1
  /* UTC */
  ? d.getUTCMinutes() : d.getMinutes();
}

function month(d) {
  return (d.kind === 1
  /* UTC */
  ? d.getUTCMonth() : d.getMonth()) + 1;
}

function second(d) {
  return d.kind === 1
  /* UTC */
  ? d.getUTCSeconds() : d.getSeconds();
}

function year(d) {
  return d.kind === 1
  /* UTC */
  ? d.getUTCFullYear() : d.getFullYear();
}

function dayOfWeek(d) {
  return d.kind === 1
  /* UTC */
  ? d.getUTCDay() : d.getDay();
}

function dayOfYear(d) {
  var _year = year(d);

  var _month = month(d);

  var _day = day(d);

  for (var i = 1; i < _month; i++) {
    _day += daysInMonth(_year, i);
  }

  return _day;
}

function add(d, ts) {
  var newDate = DateTime(d.getTime() + ts, d.kind);

  if (d.kind === 2
  /* Local */
  ) {
      var oldTzOffset = d.getTimezoneOffset();
      var newTzOffset = newDate.getTimezoneOffset();
      return oldTzOffset !== newTzOffset ? DateTime(newDate.getTime() + (newTzOffset - oldTzOffset) * 60000, d.kind) : newDate;
    } else {
    return newDate;
  }
}

function addDays(d, v) {
  return add(d, v * 86400000);
}

function addHours(d, v) {
  return add(d, v * 3600000);
}

function addMinutes(d, v) {
  return add(d, v * 60000);
}

function addSeconds(d, v) {
  return add(d, v * 1000);
}

function addMilliseconds(d, v) {
  return add(d, v);
}

function addYears(d, v) {
  var newMonth = month(d);
  var newYear = year(d) + v;

  var _daysInMonth = daysInMonth(newYear, newMonth);

  var newDay = Math.min(_daysInMonth, day(d));
  return create(newYear, newMonth, newDay, hour(d), minute(d), second(d), millisecond(d), d.kind);
}

function addMonths(d, v) {
  var newMonth = month(d) + v;
  var newMonth_ = 0;
  var yearOffset = 0;

  if (newMonth > 12) {
    newMonth_ = newMonth % 12;
    yearOffset = Math.floor(newMonth / 12);
    newMonth = newMonth_;
  } else if (newMonth < 1) {
    newMonth_ = 12 + newMonth % 12;
    yearOffset = Math.floor(newMonth / 12) + (newMonth_ === 12 ? -1 : 0);
    newMonth = newMonth_;
  }

  var newYear = year(d) + yearOffset;

  var _daysInMonth = daysInMonth(newYear, newMonth);

  var newDay = Math.min(_daysInMonth, day(d));
  return create(newYear, newMonth, newDay, hour(d), minute(d), second(d), millisecond(d), d.kind);
}

function subtract(d, that) {
  return typeof that === "number" ? add(d, -that) : d.getTime() - that.getTime();
}

function toLongDateString(d) {
  return d.toDateString();
}

function toShortDateString(d) {
  return d.toLocaleDateString();
}

function toLongTimeString(d) {
  return d.toLocaleTimeString();
}

function toShortTimeString(d) {
  return d.toLocaleTimeString().replace(/:\d\d(?!:)/, "");
}

function equals(d1, d2) {
  return d1.getTime() === d2.getTime();
}

var compare = _Util.compareDates;
exports.compare = compare;
var compareTo = _Util.compareDates;
exports.compareTo = compareTo;

function op_Addition(x, y) {
  return add(x, y);
}

function op_Subtraction(x, y) {
  return subtract(x, y);
}

function isDaylightSavingTime(x) {
  var jan = new Date(x.getFullYear(), 0, 1);
  var jul = new Date(x.getFullYear(), 6, 1);
  return isDST(jan.getTimezoneOffset(), jul.getTimezoneOffset(), x.getTimezoneOffset());
}

function isDST(janOffset, julOffset, tOffset) {
  return Math.min(janOffset, julOffset) === tOffset;
}

var _default = DateTime;
exports.default = _default;
},{"./Long.js":"../JS/.fable/fable-library.3.0.0/Long.js","./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/.fable/fable-library.3.0.0/lib/big.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.Big = void 0;

var _Util = require("../Util.js");

// https://github.com/MikeMcl/big.js/blob/01b3ce3a6b0ba7b42442ea48ec4ffc88d1669ec4/big.mjs

/* tslint:disable */
// The shared prototype object.
var P = {
  GetHashCode: function GetHashCode() {
    return (0, _Util.combineHashCodes)([this.s, this.e].concat(this.c));
  },
  Equals: function Equals(x) {
    return !this.cmp(x);
  },
  CompareTo: function CompareTo(x) {
    return this.cmp(x);
  }
};
/*
 *  big.js v5.2.2
 *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.
 *  Copyright (c) 2018 Michael Mclaughlin <M8ch88l@gmail.com>
 *  https://github.com/MikeMcl/big.js/LICENCE
 */

/************************************** EDITABLE DEFAULTS *****************************************/
// The default values below must be integers within the stated ranges.

/*
 * The maximum number of decimal places (DP) of the results of operations involving division:
 * div and sqrt, and pow with negative exponents.
 */

var DP = 28,
    // 0 to MAX_DP

/*
 * The rounding mode (RM) used when rounding to the above decimal places.
 *
 *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)
 *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)
 *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)
 *  3  Away from zero.                                  (ROUND_UP)
 */
RM = 1,
    // 0, 1, 2 or 3
// The maximum value of DP and Big.DP.
MAX_DP = 1E6,
    // 0 to 1000000
// The maximum magnitude of the exponent argument to the pow method.
MAX_POWER = 1E6,
    // 1 to 1000000

/*
 * The negative exponent (NE) at and beneath which toString returns exponential notation.
 * (JavaScript numbers: -7)
 * -1000000 is the minimum recommended exponent value of a Big.
 */
NE = -29,
    // 0 to -1000000

/*
 * The positive exponent (PE) at and above which toString returns exponential notation.
 * (JavaScript numbers: 21)
 * 1000000 is the maximum recommended exponent value of a Big.
 * (This limit is not enforced or checked.)
 */
PE = 29,
    // 0 to 1000000

/**************************************************************************************************/
// Error messages.
NAME = '[big.js] ',
    INVALID = NAME + 'Invalid ',
    INVALID_DP = INVALID + 'decimal places',
    INVALID_RM = INVALID + 'rounding mode',
    DIV_BY_ZERO = NAME + 'Division by zero',
    UNDEFINED = void 0,
    NUMERIC = /^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;
/*
 * Create and return a Big constructor.
 *
 */

function _Big_() {
  /*
   * The Big constructor and exported function.
   * Create and return a new instance of a Big number object.
   *
   * n {number|string|Big} A numeric value.
   */
  function Big(n) {
    var x = this; // Enable constructor usage without new.

    if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n); // Duplicate.

    if (n instanceof Big) {
      x.s = n.s;
      x.e = n.e;
      x.c = n.c.slice();
      normalize(x);
    } else {
      parse(x, n);
    }
    /*
     * Retain a reference to this Big constructor, and shadow Big.prototype.constructor which
     * points to Object.
     */


    x.constructor = Big;
  }

  Big.prototype = P;
  Big.DP = DP;
  Big.RM = RM;
  Big.NE = NE;
  Big.PE = PE;
  Big.version = '5.2.2';
  return Big;
}

function normalize(x) {
  x = round(x, DP, 0);

  if (x.c.length > 1 && !x.c[0]) {
    var i = x.c.findIndex(function (x) {
      return x;
    });
    x.c = x.c.slice(i);
    x.e = x.e - i;
  }
}
/*
 * Parse the number or string value passed to a Big constructor.
 *
 * x {Big} A Big number instance.
 * n {number|string} A numeric value.
 */


function parse(x, n) {
  var e, i, nl; // Minus zero?

  if (n === 0 && 1 / n < 0) n = '-0';else if (!NUMERIC.test(n += '')) throw Error(INVALID + 'number'); // Determine sign.

  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1; // Decimal point?

  if ((e = n.indexOf('.')) > -1) n = n.replace('.', ''); // Exponential form?

  if ((i = n.search(/e/i)) > 0) {
    // Determine exponent.
    if (e < 0) e = i;
    e += +n.slice(i + 1);
    n = n.substring(0, i);
  } else if (e < 0) {
    // Integer.
    e = n.length;
  }

  nl = n.length; // Determine leading zeros before decimal point.

  for (i = 0; i < e && i < nl && n.charAt(i) == '0';) {
    ++i;
  } // older version (ignores decimal point).
  // // Determine leading zeros.
  // for (i = 0; i < nl && n.charAt(i) == '0';) ++i;


  if (i == nl) {
    // Zero.
    x.c = [x.e = 0];
  } else {
    x.e = e - i - 1;
    x.c = []; // Convert string to array of digits without leading zeros

    for (e = 0; i < nl;) {
      x.c[e++] = +n.charAt(i++);
    } // older version (doesn't keep trailing zeroes).
    // // Determine trailing zeros.
    // for (; nl > 0 && n.charAt(--nl) == '0';);
    // // Convert string to array of digits without leading/trailing zeros.
    // for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);

  }

  x = round(x, Big.DP, Big.RM);
  return x;
}
/*
 * Round Big x to a maximum of dp decimal places using rounding mode rm.
 * Called by stringify, P.div, P.round and P.sqrt.
 *
 * x {Big} The Big to round.
 * dp {number} Integer, 0 to MAX_DP inclusive.
 * rm {number} 0, 1, 2 or 3 (DOWN, HALF_UP, HALF_EVEN, UP)
 * [more] {boolean} Whether the result of division was truncated.
 */


function round(x, dp, rm, more) {
  var xc = x.c,
      i = x.e + dp + 1;

  if (i < xc.length) {
    if (rm === 1) {
      // xc[i] is the digit after the digit that may be rounded up.
      more = xc[i] >= 5;
    } else if (rm === 2) {
      more = xc[i] > 5 || xc[i] == 5 && (more || i < 0 || xc[i + 1] !== UNDEFINED || xc[i - 1] & 1);
    } else if (rm === 3) {
      more = more || !!xc[0];
    } else {
      more = false;
      if (rm !== 0) throw Error(INVALID_RM);
    }

    if (i < 1) {
      xc.length = 1;

      if (more) {
        // 1, 0.1, 0.01, 0.001, 0.0001 etc.
        x.e = -dp;
        xc[0] = 1;
      } else {
        // Zero.
        xc[0] = x.e = 0;
      }
    } else {
      // Remove any digits after the required decimal places.
      xc.length = i--; // Round up?

      if (more) {
        // Rounding up may mean the previous digit has to be rounded up.
        for (; ++xc[i] > 9;) {
          xc[i] = 0;

          if (!i--) {
            ++x.e;
            xc.unshift(1);
          }
        }
      } // Remove trailing zeros.


      for (i = xc.length; !xc[--i];) {
        xc.pop();
      }
    }
  } else if (rm < 0 || rm > 3 || rm !== ~~rm) {
    throw Error(INVALID_RM);
  }

  return x;
}
/*
 * Return a string representing the value of Big x in normal or exponential notation.
 * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.
 *
 * x {Big}
 * id? {number} Caller id.
 *         1 toExponential
 *         2 toFixed
 *         3 toPrecision
 *         4 valueOf
 * n? {number|undefined} Caller's argument.
 * k? {number|undefined}
 */


function stringify(x, id, n, k) {
  var e,
      s,
      Big = x.constructor,
      z = !x.c[0];

  if (n !== UNDEFINED) {
    if (n !== ~~n || n < (id == 3) || n > MAX_DP) {
      throw Error(id == 3 ? INVALID + 'precision' : INVALID_DP);
    }

    x = new Big(x); // The index of the digit that may be rounded up.

    n = k - x.e; // Round?

    if (x.c.length > ++k) round(x, n, Big.RM); // toFixed: recalculate k as x.e may have changed if value rounded up.

    if (id == 2) k = x.e + n + 1; // Append zeros?

    for (; x.c.length < k;) {
      x.c.push(0);
    }
  }

  e = x.e;
  s = x.c.join('');
  n = s.length; // Exponential notation?

  if (id != 2 && (id == 1 || id == 3 && k <= e || e <= Big.NE || e >= Big.PE)) {
    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e; // Normal notation.
  } else if (e < 0) {
    for (; ++e;) {
      s = '0' + s;
    }

    s = '0.' + s;
  } else if (e > 0) {
    if (++e > n) for (e -= n; e--;) {
      s += '0';
    } else if (e < n) s = s.slice(0, e) + '.' + s.slice(e);
  } else if (n > 1) {
    s = s.charAt(0) + '.' + s.slice(1);
  }

  return x.s < 0 && (!z || id == 4) ? '-' + s : s;
} // Prototype/instance methods

/*
 * Return a new Big whose value is the absolute value of this Big.
 */


P.abs = function () {
  var x = new this.constructor(this);
  x.s = 1;
  return x;
};
/*
 * Return 1 if the value of this Big is greater than the value of Big y,
 *       -1 if the value of this Big is less than the value of Big y, or
 *        0 if they have the same value.
*/


P.cmp = function (y) {
  var isneg,
      Big = this.constructor,
      x = new Big(this),
      y = new Big(y),
      xc = x.c,
      yc = y.c,
      i = x.s,
      j = y.s,
      k = x.e,
      l = y.e; // Either zero?

  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i; // Signs differ?

  if (i != j) return i;
  isneg = i < 0; // Compare exponents.

  if (k != l) return k > l ^ isneg ? 1 : -1; // Compare digit by digit.

  j = Math.max(xc.length, yc.length);

  for (i = 0; i < j; i++) {
    k = i < xc.length ? xc[i] : 0;
    l = i < yc.length ? yc[i] : 0;
    if (k != l) return k > l ^ isneg ? 1 : -1;
  }

  return 0; // old version (doesn't compare well trailing zeroes, e.g. 1.0 with 1.00)
  // j = (k = xc.length) < (l = yc.length) ? k : l;
  // // Compare digit by digit.
  // for (i = -1; ++i < j;) {
  //   if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;
  // }
  // // Compare lengths.
  // return k == l ? 0 : k > l ^ isneg ? 1 : -1;
};
/*
 * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,
 * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.
 */


P.div = function (y) {
  var Big = this.constructor,
      x = new Big(this),
      y = new Big(y),
      a = x.c,
      // dividend
  b = y.c,
      // divisor
  k = x.s == y.s ? 1 : -1,
      dp = Big.DP;
  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) throw Error(INVALID_DP); // Divisor is zero?

  if (!b[0]) throw Error(DIV_BY_ZERO); // Dividend is 0? Return +-0.

  if (!a[0]) return new Big(k * 0);
  var bl,
      bt,
      n,
      cmp,
      ri,
      bz = b.slice(),
      ai = bl = b.length,
      al = a.length,
      r = a.slice(0, bl),
      // remainder
  rl = r.length,
      q = y,
      // quotient
  qc = q.c = [],
      qi = 0,
      d = dp + (q.e = x.e - y.e) + 1; // number of digits of the result

  q.s = k;
  k = d < 0 ? 0 : d; // Create version of divisor with leading zero.

  bz.unshift(0); // Add zeros to make remainder as long as divisor.

  for (; rl++ < bl;) {
    r.push(0);
  }

  do {
    // n is how many times the divisor goes into current remainder.
    for (n = 0; n < 10; n++) {
      // Compare divisor and remainder.
      if (bl != (rl = r.length)) {
        cmp = bl > rl ? 1 : -1;
      } else {
        for (ri = -1, cmp = 0; ++ri < bl;) {
          if (b[ri] != r[ri]) {
            cmp = b[ri] > r[ri] ? 1 : -1;
            break;
          }
        }
      } // If divisor < remainder, subtract divisor from remainder.


      if (cmp < 0) {
        // Remainder can't be more than 1 digit longer than divisor.
        // Equalise lengths using divisor with extra leading zero?
        for (bt = rl == bl ? b : bz; rl;) {
          if (r[--rl] < bt[rl]) {
            ri = rl;

            for (; ri && !r[--ri];) {
              r[ri] = 9;
            }

            --r[ri];
            r[rl] += 10;
          }

          r[rl] -= bt[rl];
        }

        for (; !r[0];) {
          r.shift();
        }
      } else {
        break;
      }
    } // Add the digit n to the result array.


    qc[qi++] = cmp ? n : ++n; // Update the remainder.

    if (r[0] && cmp) r[rl] = a[ai] || 0;else r = [a[ai]];
  } while ((ai++ < al || r[0] !== UNDEFINED) && k--); // Leading zero? Do not remove if result is simply zero (qi == 1).


  if (!qc[0] && qi != 1) {
    // There can't be more than one zero.
    qc.shift();
    q.e--;
  } // Round?


  if (qi > d) round(q, dp, Big.RM, r[0] !== UNDEFINED);
  return q;
};
/*
 * Return true if the value of this Big is equal to the value of Big y, otherwise return false.
 */


P.eq = function (y) {
  return !this.cmp(y);
};
/*
 * Return true if the value of this Big is greater than the value of Big y, otherwise return
 * false.
 */


P.gt = function (y) {
  return this.cmp(y) > 0;
};
/*
 * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise
 * return false.
 */


P.gte = function (y) {
  return this.cmp(y) > -1;
};
/*
 * Return true if the value of this Big is less than the value of Big y, otherwise return false.
 */


P.lt = function (y) {
  return this.cmp(y) < 0;
};
/*
 * Return true if the value of this Big is less than or equal to the value of Big y, otherwise
 * return false.
 */


P.lte = function (y) {
  return this.cmp(y) < 1;
};
/*
 * Return a new Big whose value is the value of this Big minus the value of Big y.
 */


P.minus = P.sub = function (y) {
  var i,
      j,
      t,
      xlty,
      Big = this.constructor,
      x = new Big(this),
      y = new Big(y),
      a = x.s,
      b = y.s; // Signs differ?

  if (a != b) {
    y.s = -b;
    return x.plus(y);
  }

  var xc = x.c.slice(),
      xe = x.e,
      yc = y.c,
      ye = y.e; // Either zero?

  if (!xc[0] || !yc[0]) {
    // y is non-zero? x is non-zero? Or both are zero.
    return yc[0] ? (y.s = -b, y) : new Big(xc[0] ? x : 0);
  } // Determine which is the bigger number. Prepend zeros to equalise exponents.


  if (a = xe - ye) {
    if (xlty = a < 0) {
      a = -a;
      t = xc;
    } else {
      ye = xe;
      t = yc;
    }

    t.reverse();

    for (b = a; b--;) {
      t.push(0);
    }

    t.reverse();
  } else {
    // Exponents equal. Check digit by digit.
    j = ((xlty = xc.length < yc.length) ? xc : yc).length;

    for (a = b = 0; b < j; b++) {
      if (xc[b] != yc[b]) {
        xlty = xc[b] < yc[b];
        break;
      }
    }
  } // x < y? Point xc to the array of the bigger number.


  if (xlty) {
    t = xc;
    xc = yc;
    yc = t;
    y.s = -y.s;
  }
  /*
   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only
   * needs to start at yc.length.
   */


  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) {
    xc[i++] = 0;
  } // Subtract yc from xc.

  for (b = i; j > a;) {
    if (xc[--j] < yc[j]) {
      for (i = j; i && !xc[--i];) {
        xc[i] = 9;
      }

      --xc[i];
      xc[j] += 10;
    }

    xc[j] -= yc[j];
  } // Remove trailing zeros.


  for (; xc[--b] === 0;) {
    xc.pop();
  } // Remove leading zeros and adjust exponent accordingly.


  for (; xc[0] === 0;) {
    xc.shift();
    --ye;
  }

  if (!xc[0]) {
    // n - n = +0
    y.s = 1; // Result must be zero.

    xc = [ye = 0];
  }

  y.c = xc;
  y.e = ye;
  return y;
};
/*
 * Return a new Big whose value is the value of this Big modulo the value of Big y.
 */


P.mod = function (y) {
  var ygtx,
      Big = this.constructor,
      x = new Big(this),
      y = new Big(y),
      a = x.s,
      b = y.s;
  if (!y.c[0]) throw Error(DIV_BY_ZERO);
  x.s = y.s = 1;
  ygtx = y.cmp(x) == 1;
  x.s = a;
  y.s = b;
  if (ygtx) return new Big(x);
  a = Big.DP;
  b = Big.RM;
  Big.DP = Big.RM = 0;
  x = x.div(y);
  Big.DP = a;
  Big.RM = b;
  return this.minus(x.times(y));
};
/*
 * Return a new Big whose value is the value of this Big plus the value of Big y.
 */


P.plus = P.add = function (y) {
  var t,
      Big = this.constructor,
      x = new Big(this),
      y = new Big(y),
      a = x.s,
      b = y.s; // Signs differ?

  if (a != b) {
    y.s = -b;
    return x.minus(y);
  }

  var xe = x.e,
      xc = x.c,
      ye = y.e,
      yc = y.c; // Either zero? y is non-zero? x is non-zero? Or both are zero.

  if (!xc[0] || !yc[0]) return yc[0] ? y : new Big(xc[0] ? x : a * 0);
  xc = xc.slice(); // Prepend zeros to equalise exponents.
  // Note: reverse faster than unshifts.

  if (a = xe - ye) {
    if (a > 0) {
      ye = xe;
      t = yc;
    } else {
      a = -a;
      t = xc;
    }

    t.reverse();

    for (; a--;) {
      t.push(0);
    }

    t.reverse();
  } // Point xc to the longer array.


  if (xc.length - yc.length < 0) {
    t = yc;
    yc = xc;
    xc = t;
  }

  a = yc.length; // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.

  for (b = 0; a; xc[a] %= 10) {
    b = (xc[--a] = xc[a] + yc[a] + b) / 10 | 0;
  } // No need to check for zero, as +x + +y != 0 && -x + -y != 0


  if (b) {
    xc.unshift(b);
    ++ye;
  } // Remove trailing zeros.


  for (a = xc.length; xc[--a] === 0;) {
    xc.pop();
  }

  y.c = xc;
  y.e = ye;
  return y;
};
/*
 * Return a Big whose value is the value of this Big raised to the power n.
 * If n is negative, round to a maximum of Big.DP decimal places using rounding
 * mode Big.RM.
 *
 * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.
 */


P.pow = function (n) {
  var Big = this.constructor,
      x = new Big(this),
      y = new Big(1),
      one = new Big(1),
      isneg = n < 0;
  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) throw Error(INVALID + 'exponent');
  if (isneg) n = -n;

  for (;;) {
    if (n & 1) y = y.times(x);
    n >>= 1;
    if (!n) break;
    x = x.times(x);
  }

  return isneg ? one.div(y) : y;
};
/*
 * Return a new Big whose value is the value of this Big rounded using rounding mode rm
 * to a maximum of dp decimal places, or, if dp is negative, to an integer which is a
 * multiple of 10**-dp.
 * If dp is not specified, round to 0 decimal places.
 * If rm is not specified, use Big.RM.
 *
 * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.
 * rm? 0, 1, 2 or 3 (ROUND_DOWN, ROUND_HALF_UP, ROUND_HALF_EVEN, ROUND_UP)
 */


P.round = function (dp, rm) {
  var Big = this.constructor;
  if (dp === UNDEFINED) dp = 0;else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) throw Error(INVALID_DP);
  return round(new Big(this), dp, rm === UNDEFINED ? Big.RM : rm);
};
/*
 * Return a new Big whose value is the square root of the value of this Big, rounded, if
 * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.
 */


P.sqrt = function () {
  var r,
      c,
      t,
      Big = this.constructor,
      x = new Big(this),
      s = x.s,
      e = x.e,
      half = new Big(0.5); // Zero?

  if (!x.c[0]) return new Big(x); // Negative?

  if (s < 0) throw Error(NAME + 'No square root'); // Estimate.

  s = Math.sqrt(x + ''); // Math.sqrt underflow/overflow?
  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.

  if (s === 0 || s === 1 / 0) {
    c = x.c.join('');
    if (!(c.length + e & 1)) c += '0';
    s = Math.sqrt(c);
    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);
    r = new Big((s == 1 / 0 ? '1e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);
  } else {
    r = new Big(s);
  }

  e = r.e + (Big.DP += 4); // Newton-Raphson iteration.

  do {
    t = r;
    r = half.times(t.plus(x.div(t)));
  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));

  return round(r, Big.DP -= 4, Big.RM);
};
/*
 * Return a new Big whose value is the value of this Big times the value of Big y.
 */


P.times = P.mul = function (y) {
  var c,
      Big = this.constructor,
      x = new Big(this),
      y = new Big(y),
      xc = x.c,
      yc = y.c,
      a = xc.length,
      b = yc.length,
      i = x.e,
      j = y.e; // Determine sign of result.

  y.s = x.s == y.s ? 1 : -1; // Return signed 0 if either 0.

  if (!xc[0] || !yc[0]) return new Big(y.s * 0); // Initialise exponent of result as x.e + y.e.

  y.e = i + j; // If array xc has fewer digits than yc, swap xc and yc, and lengths.

  if (a < b) {
    c = xc;
    xc = yc;
    yc = c;
    j = a;
    a = b;
    b = j;
  } // Initialise coefficient array of result with zeros.


  for (c = new Array(j = a + b); j--;) {
    c[j] = 0;
  } // Multiply.
  // i is initially xc.length.


  for (i = b; i--;) {
    b = 0; // a is yc.length.

    for (j = a + i; j > i;) {
      // Current sum of products at this digit position, plus carry.
      b = c[j] + yc[i] * xc[j - i - 1] + b;
      c[j--] = b % 10; // carry

      b = b / 10 | 0;
    }

    c[j] = (c[j] + b) % 10;
  } // Increment result exponent if there is a final carry, otherwise remove leading zero.


  if (b) ++y.e;else c.shift(); // Remove trailing zeros.

  for (i = c.length; !c[--i];) {
    c.pop();
  }

  y.c = c;
  return y;
};
/*
 * Return a string representing the value of this Big in exponential notation to dp fixed decimal
 * places and rounded using Big.RM.
 *
 * dp? {number} Integer, 0 to MAX_DP inclusive.
 */


P.toExponential = function (dp) {
  return stringify(this, 1, dp, dp);
};
/*
 * Return a string representing the value of this Big in normal notation to dp fixed decimal
 * places and rounded using Big.RM.
 *
 * dp? {number} Integer, 0 to MAX_DP inclusive.
 *
 * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.
 * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.
 */


P.toFixed = function (dp) {
  return stringify(this, 2, dp, this.e + dp);
};
/*
 * Return a string representing the value of this Big rounded to sd significant digits using
 * Big.RM. Use exponential notation if sd is less than the number of digits necessary to represent
 * the integer part of the value in normal notation.
 *
 * sd {number} Integer, 1 to MAX_DP inclusive.
 */


P.toPrecision = function (sd) {
  return stringify(this, 3, sd, sd - 1);
};
/*
 * Return a string representing the value of this Big.
 * Return exponential notation if this Big has a positive exponent equal to or greater than
 * Big.PE, or a negative exponent equal to or less than Big.NE.
 * Omit the sign for negative zero.
 */


P.toString = function () {
  return stringify(this);
};
/*
 * Return a string representing the value of this Big.
 * Return exponential notation if this Big has a positive exponent equal to or greater than
 * Big.PE, or a negative exponent equal to or less than Big.NE.
 * Include the sign for negative zero.
 */


P.valueOf = P.toJSON = function () {
  return stringify(this, 4);
}; // Export


var Big = _Big_();

exports.Big = Big;
var _default = Big;
exports.default = _default;
},{"../Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/.fable/fable-library.3.0.0/Types.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.seqToString = seqToString;
exports.toString = _toString;
exports.isException = isException;
exports.Attribute = exports.MatchFailureException = exports.FSharpException = exports.Exception = exports.FSharpRef = exports.Record = exports.Union = exports.List = void 0;

var _Util = require("./Util.js");

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function seqToString(self) {
  var count = 0;
  var str = "[";

  var _iterator = _createForOfIteratorHelper(self),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var x = _step.value;

      if (count === 0) {
        str += _toString(x);
      } else if (count === 100) {
        str += "; ...";
        break;
      } else {
        str += "; " + _toString(x);
      }

      count++;
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  return str + "]";
}

function _toString(x) {
  var callStack = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

  if (x != null && _typeof(x) === "object") {
    if (typeof x.toString === "function") {
      return x.toString();
    } else if (Symbol.iterator in x) {
      return seqToString(x);
    } else {
      // TODO: Date?
      var cons = Object.getPrototypeOf(x).constructor;
      return cons === Object && callStack < 10 // Same format as recordToString
      ? "{ " + Object.entries(x).map(function (_ref) {
        var _ref2 = _slicedToArray(_ref, 2),
            k = _ref2[0],
            v = _ref2[1];

        return k + " = " + _toString(v, callStack + 1);
      }).join("\n  ") + " }" : cons.name;
    }
  }

  return String(x);
}

function compareList(self, other) {
  if (self === other) {
    return 0;
  } else {
    if (other == null) {
      return -1;
    }

    while (self.tail != null) {
      if (other.tail == null) {
        return 1;
      }

      var res = (0, _Util.compare)(self.head, other.head);

      if (res !== 0) {
        return res;
      }

      self = self.tail;
      other = other.tail;
    }

    return other.tail == null ? 0 : -1;
  }
}

var List = /*#__PURE__*/function () {
  function List(head, tail) {
    _classCallCheck(this, List);

    this.head = head;
    this.tail = tail;
  }

  _createClass(List, [{
    key: Symbol.iterator,
    value: function value() {
      var cur = this;
      return {
        next: function next() {
          var value = cur === null || cur === void 0 ? void 0 : cur.head;
          var done = (cur === null || cur === void 0 ? void 0 : cur.tail) == null;
          cur = cur === null || cur === void 0 ? void 0 : cur.tail;
          return {
            done: done,
            value: value
          };
        }
      };
    }
  }, {
    key: "toJSON",
    value: function toJSON() {
      return Array.from(this);
    }
  }, {
    key: "toString",
    value: function toString() {
      return seqToString(this);
    }
  }, {
    key: "GetHashCode",
    value: function GetHashCode() {
      return (0, _Util.combineHashCodes)(Array.from(this).map(_Util.structuralHash));
    }
  }, {
    key: "Equals",
    value: function Equals(other) {
      return compareList(this, other) === 0;
    }
  }, {
    key: "CompareTo",
    value: function CompareTo(other) {
      return compareList(this, other);
    }
  }]);

  return List;
}();

exports.List = List;

var Union = /*#__PURE__*/function () {
  function Union() {
    _classCallCheck(this, Union);
  }

  _createClass(Union, [{
    key: "toJSON",
    value: function toJSON() {
      return this.fields.length === 0 ? this.name : [this.name].concat(this.fields);
    }
  }, {
    key: "toString",
    value: function toString() {
      if (this.fields.length === 0) {
        return this.name;
      } else {
        var fields = "";
        var withParens = true;

        if (this.fields.length === 1) {
          var field = _toString(this.fields[0]);

          withParens = field.indexOf(" ") >= 0;
          fields = field;
        } else {
          fields = this.fields.map(function (x) {
            return _toString(x);
          }).join(", ");
        }

        return this.name + (withParens ? " (" : " ") + fields + (withParens ? ")" : "");
      }
    }
  }, {
    key: "GetHashCode",
    value: function GetHashCode() {
      var hashes = this.fields.map(function (x) {
        return (0, _Util.structuralHash)(x);
      });
      hashes.splice(0, 0, (0, _Util.numberHash)(this.tag));
      return (0, _Util.combineHashCodes)(hashes);
    }
  }, {
    key: "Equals",
    value: function Equals(other) {
      if (this === other) {
        return true;
      } else if (!(0, _Util.sameConstructor)(this, other)) {
        return false;
      } else if (this.tag === other.tag) {
        return (0, _Util.equalArrays)(this.fields, other.fields);
      } else {
        return false;
      }
    }
  }, {
    key: "CompareTo",
    value: function CompareTo(other) {
      if (this === other) {
        return 0;
      } else if (!(0, _Util.sameConstructor)(this, other)) {
        return -1;
      } else if (this.tag === other.tag) {
        return (0, _Util.compareArrays)(this.fields, other.fields);
      } else {
        return this.tag < other.tag ? -1 : 1;
      }
    }
  }, {
    key: "name",
    get: function get() {
      return this.cases()[this.tag];
    }
  }]);

  return Union;
}();

exports.Union = Union;

function recordToJSON(self) {
  var o = {};
  var keys = Object.keys(self);

  for (var i = 0; i < keys.length; i++) {
    o[keys[i]] = self[keys[i]];
  }

  return o;
}

function recordToString(self) {
  return "{ " + Object.entries(self).map(function (_ref3) {
    var _ref4 = _slicedToArray(_ref3, 2),
        k = _ref4[0],
        v = _ref4[1];

    return k + " = " + _toString(v);
  }).join("\n  ") + " }";
}

function recordGetHashCode(self) {
  var hashes = Object.values(self).map(function (v) {
    return (0, _Util.structuralHash)(v);
  });
  return (0, _Util.combineHashCodes)(hashes);
}

function recordEquals(self, other) {
  if (self === other) {
    return true;
  } else if (!(0, _Util.sameConstructor)(self, other)) {
    return false;
  } else {
    var thisNames = Object.keys(self);

    for (var i = 0; i < thisNames.length; i++) {
      if (!(0, _Util.equals)(self[thisNames[i]], other[thisNames[i]])) {
        return false;
      }
    }

    return true;
  }
}

function recordCompareTo(self, other) {
  if (self === other) {
    return 0;
  } else if (!(0, _Util.sameConstructor)(self, other)) {
    return -1;
  } else {
    var thisNames = Object.keys(self);

    for (var i = 0; i < thisNames.length; i++) {
      var result = (0, _Util.compare)(self[thisNames[i]], other[thisNames[i]]);

      if (result !== 0) {
        return result;
      }
    }

    return 0;
  }
}

var Record = /*#__PURE__*/function () {
  function Record() {
    _classCallCheck(this, Record);
  }

  _createClass(Record, [{
    key: "toJSON",
    value: function toJSON() {
      return recordToJSON(this);
    }
  }, {
    key: "toString",
    value: function toString() {
      return recordToString(this);
    }
  }, {
    key: "GetHashCode",
    value: function GetHashCode() {
      return recordGetHashCode(this);
    }
  }, {
    key: "Equals",
    value: function Equals(other) {
      return recordEquals(this, other);
    }
  }, {
    key: "CompareTo",
    value: function CompareTo(other) {
      return recordCompareTo(this, other);
    }
  }]);

  return Record;
}();

exports.Record = Record;

var FSharpRef = /*#__PURE__*/function () {
  function FSharpRef(contentsOrGetter, setter) {
    _classCallCheck(this, FSharpRef);

    if (typeof setter === "function") {
      this.getter = contentsOrGetter;
      this.setter = setter;
    } else {
      this.getter = function () {
        return contentsOrGetter;
      };

      this.setter = function (v) {
        contentsOrGetter = v;
      };
    }
  }

  _createClass(FSharpRef, [{
    key: "contents",
    get: function get() {
      return this.getter();
    },
    set: function set(v) {
      this.setter(v);
    }
  }]);

  return FSharpRef;
}(); // EXCEPTIONS
// Exception is intentionally not derived from Error, for performance reasons (see #2160)


exports.FSharpRef = FSharpRef;

var Exception = function Exception(message) {
  _classCallCheck(this, Exception);

  this.message = message;
};

exports.Exception = Exception;

function isException(x) {
  return x instanceof Exception || x instanceof Error;
}

var FSharpException = /*#__PURE__*/function (_Exception) {
  _inherits(FSharpException, _Exception);

  var _super = _createSuper(FSharpException);

  function FSharpException() {
    _classCallCheck(this, FSharpException);

    return _super.apply(this, arguments);
  }

  _createClass(FSharpException, [{
    key: "toJSON",
    value: function toJSON() {
      return recordToJSON(this);
    }
  }, {
    key: "toString",
    value: function toString() {
      return recordToString(this);
    }
  }, {
    key: "GetHashCode",
    value: function GetHashCode() {
      return recordGetHashCode(this);
    }
  }, {
    key: "Equals",
    value: function Equals(other) {
      return recordEquals(this, other);
    }
  }, {
    key: "CompareTo",
    value: function CompareTo(other) {
      return recordCompareTo(this, other);
    }
  }]);

  return FSharpException;
}(Exception);

exports.FSharpException = FSharpException;

var MatchFailureException = /*#__PURE__*/function (_FSharpException) {
  _inherits(MatchFailureException, _FSharpException);

  var _super2 = _createSuper(MatchFailureException);

  function MatchFailureException(arg1, arg2, arg3) {
    var _this;

    _classCallCheck(this, MatchFailureException);

    _this = _super2.call(this);
    _this.arg1 = arg1;
    _this.arg2 = arg2 | 0;
    _this.arg3 = arg3 | 0;
    _this.message = "The match cases were incomplete";
    return _this;
  }

  return MatchFailureException;
}(FSharpException);

exports.MatchFailureException = MatchFailureException;

var Attribute = function Attribute() {
  _classCallCheck(this, Attribute);
};

exports.Attribute = Attribute;
},{"./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/.fable/fable-library.3.0.0/Decimal.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.compare = compare;
exports.equals = equals;
exports.abs = abs;
exports.round = round;
exports.truncate = truncate;
exports.ceiling = ceiling;
exports.floor = floor;
exports.pow = pow;
exports.sqrt = sqrt;
exports.op_Addition = op_Addition;
exports.op_Subtraction = op_Subtraction;
exports.op_Multiply = op_Multiply;
exports.op_Division = op_Division;
exports.op_Modulus = op_Modulus;
exports.op_UnaryNegation = op_UnaryNegation;
exports.toString = toString;
exports.tryParse = tryParse;
exports.parse = parse;
exports.toNumber = toNumber;
exports.fromIntArray = fromIntArray;
exports.fromInts = fromInts;
exports.fromParts = fromParts;
exports.getBits = getBits;
exports.makeRangeStepFunction = makeRangeStepFunction;
exports.negate = exports.remainder = exports.divide = exports.multiply = exports.subtract = exports.add = exports.get_MinValue = exports.get_MaxValue = exports.get_MinusOne = exports.get_One = exports.get_Zero = exports.default = void 0;

var _big = _interopRequireDefault(require("./lib/big.js"));

var _Types = require("./Types.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = _big.default;
exports.default = _default;
var get_Zero = new _big.default(0);
exports.get_Zero = get_Zero;
var get_One = new _big.default(1);
exports.get_One = get_One;
var get_MinusOne = new _big.default(-1);
exports.get_MinusOne = get_MinusOne;
var get_MaxValue = new _big.default("79228162514264337593543950335");
exports.get_MaxValue = get_MaxValue;
var get_MinValue = new _big.default("-79228162514264337593543950335");
exports.get_MinValue = get_MinValue;

function compare(x, y) {
  return x.cmp(y);
}

function equals(x, y) {
  return !x.cmp(y);
}

function abs(x) {
  return x.abs();
}

function round(x) {
  var digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  return x.round(digits, 2
  /* ROUND_HALF_EVEN */
  );
}

function truncate(x) {
  return x.round(0, 0
  /* ROUND_DOWN */
  );
}

function ceiling(x) {
  return x.round(0, x.cmp(0) >= 0 ? 3
  /* ROUND_UP */
  : 0
  /* ROUND_DOWN */
  );
}

function floor(x) {
  return x.round(0, x.cmp(0) >= 0 ? 0
  /* ROUND_DOWN */
  : 3
  /* ROUND_UP */
  );
}

function pow(x, n) {
  return x.pow(n);
}

function sqrt(x) {
  return x.sqrt();
}

function op_Addition(x, y) {
  return x.add(y);
}

function op_Subtraction(x, y) {
  return x.sub(y);
}

function op_Multiply(x, y) {
  return x.mul(y);
}

function op_Division(x, y) {
  return x.div(y);
}

function op_Modulus(x, y) {
  return x.mod(y);
}

function op_UnaryNegation(x) {
  var x2 = new _big.default(x);
  x2.s = -x2.s || 0;
  return x2;
}

var add = op_Addition;
exports.add = add;
var subtract = op_Subtraction;
exports.subtract = subtract;
var multiply = op_Multiply;
exports.multiply = multiply;
var divide = op_Division;
exports.divide = divide;
var remainder = op_Modulus;
exports.remainder = remainder;
var negate = op_UnaryNegation;
exports.negate = negate;

function toString(x) {
  return x.toString();
}

function tryParse(str, defValue) {
  try {
    defValue.contents = new _big.default(str.trim());
    return true;
  } catch (_a) {
    return false;
  }
}

function parse(str) {
  var defValue = new _Types.FSharpRef(get_Zero);

  if (tryParse(str, defValue)) {
    return defValue.contents;
  } else {
    throw new Error("Input string was not in a correct format.");
  }
}

function toNumber(x) {
  return +x;
}

function decimalToHex(dec, bitSize) {
  var hex = new Uint8Array(bitSize / 4 | 0);
  var hexCount = 1;

  for (var d = 0; d < dec.length; d++) {
    var value = dec[d];

    for (var i = 0; i < hexCount; i++) {
      var digit = hex[i] * 10 + value | 0;
      hex[i] = digit & 0xF;
      value = digit >> 4;
    }

    if (value !== 0) {
      hex[hexCount++] = value;
    }
  }

  return hex.slice(0, hexCount); // digits in reverse order
}

function hexToDecimal(hex, bitSize) {
  var dec = new Uint8Array(bitSize * 301 / 1000 + 1 | 0);
  var decCount = 1;

  for (var d = hex.length - 1; d >= 0; d--) {
    var carry = hex[d];

    for (var i = 0; i < decCount; i++) {
      var val = dec[i] * 16 + carry | 0;
      dec[i] = val % 10 | 0;
      carry = val / 10 | 0;
    }

    while (carry > 0) {
      dec[decCount++] = carry % 10 | 0;
      carry = carry / 10 | 0;
    }
  }

  return dec.slice(0, decCount); // digits in reverse order
}

function setInt32Bits(hexDigits, bits, offset) {
  for (var i = 0; i < 8; i++) {
    hexDigits[offset + i] = bits >> i * 4 & 0xF;
  }
}

function getInt32Bits(hexDigits, offset) {
  var bits = 0;

  for (var i = 0; i < 8; i++) {
    bits = bits | hexDigits[offset + i] << i * 4;
  }

  return bits;
}

function fromIntArray(bits) {
  return fromInts(bits[0], bits[1], bits[2], bits[3]);
}

function fromInts(low, mid, high, signExp) {
  var isNegative = signExp < 0;
  var scale = signExp >> 16 & 0x7F;
  return fromParts(low, mid, high, isNegative, scale);
}

function fromParts(low, mid, high, isNegative, scale) {
  var bitSize = 96;
  var hexDigits = new Uint8Array(bitSize / 4);
  setInt32Bits(hexDigits, low, 0);
  setInt32Bits(hexDigits, mid, 8);
  setInt32Bits(hexDigits, high, 16);
  var decDigits = hexToDecimal(hexDigits, bitSize);
  scale = scale & 0x7F;
  var big = new _big.default(0);
  big.c = Array.from(decDigits.reverse());
  big.e = decDigits.length - scale - 1;
  big.s = isNegative ? -1 : 1;
  var d = new _big.default(big);
  return d;
}

function getBits(d) {
  var bitSize = 96;
  var decDigits = Uint8Array.from(d.c);
  var hexDigits = decimalToHex(decDigits, bitSize);
  var low = getInt32Bits(hexDigits, 0);
  var mid = getInt32Bits(hexDigits, 8);
  var high = getInt32Bits(hexDigits, 16);
  var decStr = d.toString();
  var dotPos = decStr.indexOf(".");
  var scale = dotPos < 0 ? 0 : decStr.length - dotPos - 1;
  var signExp = (scale & 0x7F) << 16 | (d.s < 0 ? 0x80000000 : 0);
  return [low, mid, high, signExp];
}

function makeRangeStepFunction(step, last) {
  var stepComparedWithZero = step.cmp(get_Zero);

  if (stepComparedWithZero === 0) {
    throw new Error("The step of a range cannot be zero");
  }

  var stepGreaterThanZero = stepComparedWithZero > 0;
  return function (x) {
    var comparedWithLast = x.cmp(last);

    if (stepGreaterThanZero && comparedWithLast <= 0 || !stepGreaterThanZero && comparedWithLast >= 0) {
      return [x, op_Addition(x, step)];
    } else {
      return undefined;
    }
  };
}
},{"./lib/big.js":"../JS/.fable/fable-library.3.0.0/lib/big.js","./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js"}],"../JS/.fable/fable-library.3.0.0/RegExp.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.create = create;
exports.escape = escape;
exports.unescape = unescape;
exports.isMatch = isMatch;
exports.match = match;
exports.matches = matches;
exports.options = options;
exports.replace = replace;
exports.split = split;

function create(pattern) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

  // Supported RegexOptions
  // * IgnoreCase:  0x0001
  // * Multiline:   0x0002
  // * Singleline:  0x0010
  // * ECMAScript:  0x0100 (ignored)
  if ((options & ~(1 ^ 2 ^ 16 ^ 256)) !== 0) {
    throw new Error("RegexOptions only supports: IgnoreCase, Multiline, Singleline and ECMAScript");
  }

  var flags = "g";
  flags += options & 1 ? "i" : ""; // 0x0001 RegexOptions.IgnoreCase

  flags += options & 2 ? "m" : "";
  flags += options & 16 ? "s" : "";
  return new RegExp(pattern, flags);
} // From http://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex


function escape(str) {
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
}

function unescape(str) {
  return str.replace(/\\([\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|])/g, "$1");
}

function isMatch(str, pattern) {
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
  var reg;
  reg = str instanceof RegExp ? (reg = str, str = pattern, reg.lastIndex = options, reg) : reg = create(pattern, options);
  return reg.test(str);
}

function match(str, pattern) {
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
  var reg;
  reg = str instanceof RegExp ? (reg = str, str = pattern, reg.lastIndex = options, reg) : reg = create(pattern, options);
  return reg.exec(str);
}

function matches(str, pattern) {
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
  var reg;
  reg = str instanceof RegExp ? (reg = str, str = pattern, reg.lastIndex = options, reg) : reg = create(pattern, options);

  if (!reg.global) {
    throw new Error("Non-global RegExp"); // Prevent infinite loop
  }

  var m = reg.exec(str);
  var matches = [];

  while (m !== null) {
    matches.push(m);
    m = reg.exec(str);
  }

  return matches;
}

function options(reg) {
  var options = 256; // ECMAScript

  options |= reg.ignoreCase ? 1 : 0;
  options |= reg.multiline ? 2 : 0;
  return options;
}

function replace(reg, input, replacement, limit) {
  var offset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;

  function replacer() {
    var res = arguments[0];

    if (limit) {
      limit--;
      var _match = [];
      var len = arguments.length;

      for (var i = 0; i < len - 2; i++) {
        _match.push(arguments[i]);
      }

      _match.index = arguments[len - 2];
      _match.input = arguments[len - 1];
      res = replacement(_match);
    }

    return res;
  }

  if (typeof reg === "string") {
    var tmp = reg;
    reg = create(input, limit !== null && limit !== void 0 ? limit : 0);
    input = tmp;
    limit = undefined;
  }

  if (typeof replacement === "function") {
    limit = limit == null ? -1 : limit;
    return input.substring(0, offset) + input.substring(offset).replace(reg, replacer);
  } else {
    // $0 doesn't work with JS regex, see #1155
    replacement = replacement.replace(/\$0/g, function (_s) {
      return "$&";
    });

    if (limit != null) {
      var m;
      var sub1 = input.substring(offset);

      var _matches = matches(reg, sub1);

      var sub2 = matches.length > limit ? (m = _matches[limit - 1], sub1.substring(0, m.index + m[0].length)) : sub1;
      return input.substring(0, offset) + sub2.replace(reg, replacement) + input.substring(offset + sub2.length);
    } else {
      return input.replace(reg, replacement);
    }
  }
}

function split(reg, input, limit) {
  var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;

  if (typeof reg === "string") {
    var tmp = reg;
    reg = create(input, limit !== null && limit !== void 0 ? limit : 0);
    input = tmp;
    limit = undefined;
  }

  input = input.substring(offset);
  return input.split(reg, limit);
}
},{}],"../JS/.fable/fable-library.3.0.0/String.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.compare = compare;
exports.compareOrdinal = compareOrdinal;
exports.compareTo = compareTo;
exports.startsWith = startsWith;
exports.indexOfAny = indexOfAny;
exports.printf = printf;
exports.interpolate = interpolate;
exports.toConsole = toConsole;
exports.toConsoleError = toConsoleError;
exports.toText = toText;
exports.toFail = toFail;
exports.fsFormat = fsFormat;
exports.format = format;
exports.endsWith = endsWith;
exports.initialize = initialize;
exports.insert = insert;
exports.isNullOrEmpty = isNullOrEmpty;
exports.isNullOrWhiteSpace = isNullOrWhiteSpace;
exports.concat = concat;
exports.join = join;
exports.joinWithIndices = joinWithIndices;
exports.toBase64String = toBase64String;
exports.fromBase64String = fromBase64String;
exports.padLeft = padLeft;
exports.padRight = padRight;
exports.remove = remove;
exports.replace = replace;
exports.replicate = replicate;
exports.getCharAtIndex = getCharAtIndex;
exports.split = split;
exports.trim = trim;
exports.trimStart = trimStart;
exports.trimEnd = trimEnd;
exports.filter = filter;
exports.substring = substring;

var _Date = require("./Date.js");

var _Decimal = _interopRequireDefault(require("./Decimal.js"));

var _Long = _interopRequireWildcard(require("./Long.js"));

var _RegExp = require("./RegExp.js");

var _Types = require("./Types.js");

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var fsFormatRegExp = /(^|[^%])%([0+\- ]*)(\d+)?(?:\.(\d+))?(\w)/;
var interpolateRegExp = /(?:(^|[^%])%([0+\- ]*)(\d+)?(?:\.(\d+))?(\w))?%P\(\)/g;
var formatRegExp = /\{(\d+)(,-?\d+)?(?:\:([a-zA-Z])(\d{0,2})|\:(.+?))?\}/g; // These are used for formatting and only take longs and decimals into account (no bigint)

function isNumeric(x) {
  return typeof x === "number" || x instanceof _Long.default || x instanceof _Decimal.default;
}

function isLessThan(x, y) {
  if (x instanceof _Long.default) {
    return _Long.compare(x, y) < 0;
  } else if (x instanceof _Decimal.default) {
    return x.cmp(y) < 0;
  } else {
    return x < y;
  }
}

function multiply(x, y) {
  if (x instanceof _Long.default) {
    return _Long.op_Multiply(x, y);
  } else if (x instanceof _Decimal.default) {
    return x.mul(y);
  } else {
    return x * y;
  }
}

function toFixed(x, dp) {
  if (x instanceof _Long.default) {
    return String(x) + 0 .toFixed(dp).substr(1);
  } else {
    return x.toFixed(dp);
  }
}

function toPrecision(x, sd) {
  if (x instanceof _Long.default) {
    return String(x) + 0 .toPrecision(sd).substr(1);
  } else {
    return x.toPrecision(sd);
  }
}

function toExponential(x, dp) {
  if (x instanceof _Long.default) {
    return String(x) + 0 .toExponential(dp).substr(1);
  } else {
    return x.toExponential(dp);
  }
}

function cmp(x, y, ic) {
  function isIgnoreCase(i) {
    return i === true || i === 1
    /* CurrentCultureIgnoreCase */
    || i === 3
    /* InvariantCultureIgnoreCase */
    || i === 5
    /* OrdinalIgnoreCase */
    ;
  }

  function isOrdinal(i) {
    return i === 4
    /* Ordinal */
    || i === 5
    /* OrdinalIgnoreCase */
    ;
  }

  if (x == null) {
    return y == null ? 0 : -1;
  }

  if (y == null) {
    return 1;
  } // everything is bigger than null


  if (isOrdinal(ic)) {
    if (isIgnoreCase(ic)) {
      x = x.toLowerCase();
      y = y.toLowerCase();
    }

    return x === y ? 0 : x < y ? -1 : 1;
  } else {
    if (isIgnoreCase(ic)) {
      x = x.toLocaleLowerCase();
      y = y.toLocaleLowerCase();
    }

    return x.localeCompare(y);
  }
}

function compare() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  switch (args.length) {
    case 2:
      return cmp(args[0], args[1], false);

    case 3:
      return cmp(args[0], args[1], args[2]);

    case 4:
      return cmp(args[0], args[1], args[2] === true);

    case 5:
      return cmp(args[0].substr(args[1], args[4]), args[2].substr(args[3], args[4]), false);

    case 6:
      return cmp(args[0].substr(args[1], args[4]), args[2].substr(args[3], args[4]), args[5]);

    case 7:
      return cmp(args[0].substr(args[1], args[4]), args[2].substr(args[3], args[4]), args[5] === true);

    default:
      throw new Error("String.compare: Unsupported number of parameters");
  }
}

function compareOrdinal(x, y) {
  return cmp(x, y, 4
  /* Ordinal */
  );
}

function compareTo(x, y) {
  return cmp(x, y, 0
  /* CurrentCulture */
  );
}

function startsWith(str, pattern, ic) {
  if (str.length >= pattern.length) {
    return cmp(str.substr(0, pattern.length), pattern, ic) === 0;
  }

  return false;
}

function indexOfAny(str, anyOf) {
  if (str == null || str === "") {
    return -1;
  }

  var startIndex = (arguments.length <= 2 ? 0 : arguments.length - 2) > 0 ? arguments.length <= 2 ? undefined : arguments[2] : 0;

  if (startIndex < 0) {
    throw new Error("Start index cannot be negative");
  }

  var length = (arguments.length <= 2 ? 0 : arguments.length - 2) > 1 ? arguments.length <= 3 ? undefined : arguments[3] : str.length - startIndex;

  if (length < 0) {
    throw new Error("Length cannot be negative");
  }

  if (length > str.length - startIndex) {
    throw new Error("Invalid startIndex and length");
  }

  str = str.substr(startIndex, length);

  var _iterator = _createForOfIteratorHelper(anyOf),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var c = _step.value;
      var index = str.indexOf(c);

      if (index > -1) {
        return index + startIndex;
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  return -1;
}

function toHex(x) {
  if (x instanceof _Long.default) {
    return _Long.toString(x.unsigned ? x : _Long.fromBytes(_Long.toBytes(x), true), 16);
  } else {
    return (Number(x) >>> 0).toString(16);
  }
}

function printf(input) {
  return {
    input: input,
    cont: fsFormat(input)
  };
}

function interpolate(input, values) {
  var i = 0;
  return input.replace(interpolateRegExp, function (_, prefix, flags, padLength, precision, format) {
    return formatReplacement(values[i++], prefix, flags, padLength, precision, format);
  });
}

function continuePrint(cont, arg) {
  return typeof arg === "string" ? cont(arg) : arg.cont(cont);
}

function toConsole(arg) {
  // Don't remove the lambda here, see #1357
  return continuePrint(function (x) {
    return console.log(x);
  }, arg);
}

function toConsoleError(arg) {
  return continuePrint(function (x) {
    return console.error(x);
  }, arg);
}

function toText(arg) {
  return continuePrint(function (x) {
    return x;
  }, arg);
}

function toFail(arg) {
  return continuePrint(function (x) {
    throw new Error(x);
  }, arg);
}

function formatReplacement(rep, prefix, flags, padLength, precision, format) {
  var sign = "";
  flags = flags || "";
  format = format || "";

  if (isNumeric(rep)) {
    if (format.toLowerCase() !== "x") {
      if (isLessThan(rep, 0)) {
        rep = multiply(rep, -1);
        sign = "-";
      } else {
        if (flags.indexOf(" ") >= 0) {
          sign = " ";
        } else if (flags.indexOf("+") >= 0) {
          sign = "+";
        }
      }
    }

    precision = precision == null ? null : parseInt(precision, 10);

    switch (format) {
      case "f":
      case "F":
        precision = precision != null ? precision : 6;
        rep = toFixed(rep, precision);
        break;

      case "g":
      case "G":
        rep = precision != null ? toPrecision(rep, precision) : toPrecision(rep);
        break;

      case "e":
      case "E":
        rep = precision != null ? toExponential(rep, precision) : toExponential(rep);
        break;

      case "x":
        rep = toHex(rep);
        break;

      case "X":
        rep = toHex(rep).toUpperCase();
        break;

      default:
        // AOid
        rep = String(rep);
        break;
    }
  } else if (rep instanceof Date) {
    rep = (0, _Date.toString)(rep);
  } else {
    rep = (0, _Types.toString)(rep);
  }

  padLength = parseInt(padLength, 10);

  if (!isNaN(padLength)) {
    var zeroFlag = flags.indexOf("0") >= 0; // Use '0' for left padding

    var minusFlag = flags.indexOf("-") >= 0; // Right padding

    var ch = minusFlag || !zeroFlag ? " " : "0";

    if (ch === "0") {
      rep = padLeft(rep, padLength - sign.length, ch, minusFlag);
      rep = sign + rep;
    } else {
      rep = padLeft(sign + rep, padLength, ch, minusFlag);
    }
  } else {
    rep = sign + rep;
  }

  return prefix ? prefix + rep : rep;
}

function formatOnce(str2, rep) {
  return str2.replace(fsFormatRegExp, function (_, prefix, flags, padLength, precision, format) {
    var once = formatReplacement(rep, prefix, flags, padLength, precision, format);
    return once.replace(/%/g, "%%");
  });
}

function createPrinter(str, cont) {
  return function () {
    // Make a copy as the function may be used several times
    var strCopy = str;

    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }

    for (var _i = 0, _args = args; _i < _args.length; _i++) {
      var arg = _args[_i];
      strCopy = formatOnce(strCopy, arg);
    }

    return fsFormatRegExp.test(strCopy) ? createPrinter(strCopy, cont) : cont(strCopy.replace(/%%/g, "%"));
  };
}

function fsFormat(str) {
  return function (cont) {
    return fsFormatRegExp.test(str) ? createPrinter(str, cont) : cont(str);
  };
}

function format(str) {
  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
    args[_key3 - 1] = arguments[_key3];
  }

  if (_typeof(str) === "object" && args.length > 0) {
    // Called with culture info
    str = args[0];
    args.shift();
  }

  return str.replace(formatRegExp, function (_, idx, padLength, format, precision, pattern) {
    var rep = args[idx];

    if (isNumeric(rep)) {
      precision = precision == null ? null : parseInt(precision, 10);

      switch (format) {
        case "f":
        case "F":
          precision = precision != null ? precision : 2;
          rep = toFixed(rep, precision);
          break;

        case "g":
        case "G":
          rep = precision != null ? toPrecision(rep, precision) : toPrecision(rep);
          break;

        case "e":
        case "E":
          rep = precision != null ? toExponential(rep, precision) : toExponential(rep);
          break;

        case "p":
        case "P":
          precision = precision != null ? precision : 2;
          rep = toFixed(multiply(rep, 100), precision) + " %";
          break;

        case "d":
        case "D":
          rep = precision != null ? padLeft(String(rep), precision, "0") : String(rep);
          break;

        case "x":
        case "X":
          rep = precision != null ? padLeft(toHex(rep), precision, "0") : toHex(rep);

          if (format === "X") {
            rep = rep.toUpperCase();
          }

          break;

        default:
          if (pattern) {
            var sign = "";
            rep = pattern.replace(/(0+)(\.0+)?/, function (_, intPart, decimalPart) {
              if (isLessThan(rep, 0)) {
                rep = multiply(rep, -1);
                sign = "-";
              }

              rep = toFixed(rep, decimalPart != null ? decimalPart.length - 1 : 0);
              return padLeft(rep, (intPart || "").length - sign.length + (decimalPart != null ? decimalPart.length : 0), "0");
            });
            rep = sign + rep;
          }

      }
    } else if (rep instanceof Date) {
      rep = (0, _Date.toString)(rep, pattern || format);
    } else {
      rep = (0, _Types.toString)(rep);
    }

    padLength = parseInt((padLength || " ").substring(1), 10);

    if (!isNaN(padLength)) {
      rep = padLeft(String(rep), Math.abs(padLength), " ", padLength < 0);
    }

    return rep;
  });
}

function endsWith(str, search) {
  var idx = str.lastIndexOf(search);
  return idx >= 0 && idx === str.length - search.length;
}

function initialize(n, f) {
  if (n < 0) {
    throw new Error("String length must be non-negative");
  }

  var xs = new Array(n);

  for (var i = 0; i < n; i++) {
    xs[i] = f(i);
  }

  return xs.join("");
}

function insert(str, startIndex, value) {
  if (startIndex < 0 || startIndex > str.length) {
    throw new Error("startIndex is negative or greater than the length of this instance.");
  }

  return str.substring(0, startIndex) + value + str.substring(startIndex);
}

function isNullOrEmpty(str) {
  return typeof str !== "string" || str.length === 0;
}

function isNullOrWhiteSpace(str) {
  return typeof str !== "string" || /^\s*$/.test(str);
}

function concat() {
  for (var _len4 = arguments.length, xs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
    xs[_key4] = arguments[_key4];
  }

  return xs.map(function (x) {
    return String(x);
  }).join("");
}

function join(delimiter, xs) {
  if (Array.isArray(xs)) {
    return xs.join(delimiter);
  } else {
    return Array.from(xs).join(delimiter);
  }
}

function joinWithIndices(delimiter, xs, startIndex, count) {
  var endIndexPlusOne = startIndex + count;

  if (endIndexPlusOne > xs.length) {
    throw new Error("Index and count must refer to a location within the buffer.");
  }

  return xs.slice(startIndex, endIndexPlusOne).join(delimiter);
}

function notSupported(name) {
  throw new Error("The environment doesn't support '" + name + "', please use a polyfill.");
}

function toBase64String(inArray) {
  var str = "";

  for (var i = 0; i < inArray.length; i++) {
    str += String.fromCharCode(inArray[i]);
  }

  return typeof btoa === "function" ? btoa(str) : notSupported("btoa");
}

function fromBase64String(b64Encoded) {
  var binary = typeof atob === "function" ? atob(b64Encoded) : notSupported("atob");
  var bytes = new Uint8Array(binary.length);

  for (var i = 0; i < binary.length; i++) {
    bytes[i] = binary.charCodeAt(i);
  }

  return bytes;
}

function padLeft(str, len, ch, isRight) {
  ch = ch || " ";
  len = len - str.length;

  for (var i = 0; i < len; i++) {
    str = isRight ? str + ch : ch + str;
  }

  return str;
}

function padRight(str, len, ch) {
  return padLeft(str, len, ch, true);
}

function remove(str, startIndex, count) {
  if (startIndex >= str.length) {
    throw new Error("startIndex must be less than length of string");
  }

  if (typeof count === "number" && startIndex + count > str.length) {
    throw new Error("Index and count must refer to a location within the string.");
  }

  return str.slice(0, startIndex) + (typeof count === "number" ? str.substr(startIndex + count) : "");
}

function replace(str, search, replace) {
  return str.replace(new RegExp((0, _RegExp.escape)(search), "g"), replace);
}

function replicate(n, x) {
  return initialize(n, function () {
    return x;
  });
}

function getCharAtIndex(input, index) {
  if (index < 0 || index >= input.length) {
    throw new Error("Index was outside the bounds of the array.");
  }

  return input[index];
}

function split(str, splitters, count, removeEmpty) {
  count = typeof count === "number" ? count : undefined;
  removeEmpty = typeof removeEmpty === "number" ? removeEmpty : undefined;

  if (count && count < 0) {
    throw new Error("Count cannot be less than zero");
  }

  if (count === 0) {
    return [];
  }

  if (!Array.isArray(splitters)) {
    if (removeEmpty === 0) {
      return str.split(splitters, count);
    }

    var len = arguments.length;
    splitters = Array(len - 1);

    for (var key = 1; key < len; key++) {
      splitters[key - 1] = arguments[key];
    }
  }

  splitters = splitters.map(function (x) {
    return (0, _RegExp.escape)(x);
  });
  splitters = splitters.length > 0 ? splitters : [" "];
  var i = 0;
  var splits = [];
  var reg = new RegExp(splitters.join("|"), "g");

  while (count == null || count > 1) {
    var m = reg.exec(str);

    if (m === null) {
      break;
    }

    if (!removeEmpty || m.index - i > 0) {
      count = count != null ? count - 1 : count;
      splits.push(str.substring(i, m.index));
    }

    i = reg.lastIndex;
  }

  if (!removeEmpty || str.length - i > 0) {
    splits.push(str.substring(i));
  }

  return splits;
}

function trim(str) {
  for (var _len5 = arguments.length, chars = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
    chars[_key5 - 1] = arguments[_key5];
  }

  if (chars.length === 0) {
    return str.trim();
  }

  var pattern = "[" + (0, _RegExp.escape)(chars.join("")) + "]+";
  return str.replace(new RegExp("^" + pattern), "").replace(new RegExp(pattern + "$"), "");
}

function trimStart(str) {
  for (var _len6 = arguments.length, chars = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {
    chars[_key6 - 1] = arguments[_key6];
  }

  return chars.length === 0 ? str.trimStart() : str.replace(new RegExp("^[" + (0, _RegExp.escape)(chars.join("")) + "]+"), "");
}

function trimEnd(str) {
  for (var _len7 = arguments.length, chars = new Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {
    chars[_key7 - 1] = arguments[_key7];
  }

  return chars.length === 0 ? str.trimEnd() : str.replace(new RegExp("[" + (0, _RegExp.escape)(chars.join("")) + "]+$"), "");
}

function filter(pred, x) {
  return x.split("").filter(function (c) {
    return pred(c);
  }).join("");
}

function substring(str, startIndex, length) {
  if (startIndex + (length || 0) > str.length) {
    throw new Error("Invalid startIndex and/or length");
  }

  return length != null ? str.substr(startIndex, length) : str.substr(startIndex);
}
},{"./Date.js":"../JS/.fable/fable-library.3.0.0/Date.js","./Decimal.js":"../JS/.fable/fable-library.3.0.0/Decimal.js","./Long.js":"../JS/.fable/fable-library.3.0.0/Long.js","./RegExp.js":"../JS/.fable/fable-library.3.0.0/RegExp.js","./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js"}],"../JS/.fable/fable-library.3.0.0/Option.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.some = some;
exports.value = value;
exports.ofNullable = ofNullable;
exports.toNullable = toNullable;
exports.flatten = flatten;
exports.toArray = toArray;
exports.defaultArg = defaultArg;
exports.defaultArgWith = defaultArgWith;
exports.filter = filter;
exports.map = map;
exports.map2 = map2;
exports.map3 = map3;
exports.bind = bind;
exports.tryOp = tryOp;
exports.Some = void 0;

var _Util = require("./Util.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

// Using a class here for better compatibility with TS files importing Some
var Some = /*#__PURE__*/function () {
  function Some(value) {
    _classCallCheck(this, Some);

    this.value = value;
  }

  _createClass(Some, [{
    key: "toJSON",
    value: function toJSON() {
      return this.value;
    } // Don't add "Some" for consistency with erased options

  }, {
    key: "toString",
    value: function toString() {
      return String(this.value);
    }
  }, {
    key: "GetHashCode",
    value: function GetHashCode() {
      return (0, _Util.structuralHash)(this.value);
    }
  }, {
    key: "Equals",
    value: function Equals(other) {
      if (other == null) {
        return false;
      } else {
        return (0, _Util.equals)(this.value, other instanceof Some ? other.value : other);
      }
    }
  }, {
    key: "CompareTo",
    value: function CompareTo(other) {
      if (other == null) {
        return 1;
      } else {
        return (0, _Util.compare)(this.value, other instanceof Some ? other.value : other);
      }
    }
  }]);

  return Some;
}();

exports.Some = Some;

function some(x) {
  return x == null || x instanceof Some ? new Some(x) : x;
}

function value(x) {
  if (x == null) {
    throw new Error("Option has no value");
  } else {
    return x instanceof Some ? x.value : x;
  }
}

function ofNullable(x) {
  // This will fail with unit probably, an alternative would be:
  // return x === null ? undefined : (x === undefined ? new Some(x) : x);
  return x == null ? undefined : x;
}

function toNullable(x) {
  return x == null ? null : value(x);
}

function flatten(x) {
  return x == null ? undefined : value(x);
}

function toArray(opt) {
  return opt == null ? [] : [value(opt)];
}

function defaultArg(opt, defaultValue) {
  return opt != null ? value(opt) : defaultValue;
}

function defaultArgWith(opt, defThunk) {
  return opt != null ? value(opt) : defThunk();
}

function filter(predicate, opt) {
  return opt != null ? predicate(value(opt)) ? opt : undefined : opt;
}

function map(mapping, opt) {
  return opt != null ? some(mapping(value(opt))) : undefined;
}

function map2(mapping, opt1, opt2) {
  return opt1 != null && opt2 != null ? mapping(value(opt1), value(opt2)) : undefined;
}

function map3(mapping, opt1, opt2, opt3) {
  return opt1 != null && opt2 != null && opt3 != null ? mapping(value(opt1), value(opt2), value(opt3)) : undefined;
}

function bind(binder, opt) {
  return opt != null ? binder(value(opt)) : undefined;
}

function tryOp(op, arg) {
  try {
    return some(op(arg));
  } catch (_a) {
    return undefined;
  }
}
},{"./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/.fable/fable-library.3.0.0/Seq.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getEnumerator = getEnumerator;
exports.toIterator = toIterator;
exports.ofArray = ofArray;
exports.allPairs = allPairs;
exports.append = append;
exports.average = average;
exports.averageBy = averageBy;
exports.concat = concat;
exports.collect = collect;
exports.choose = choose;
exports.compareWith = compareWith;
exports.delay = delay;
exports.empty = empty;
exports.singleton = singleton;
exports.enumerateFromFunctions = enumerateFromFunctions;
exports.enumerateWhile = enumerateWhile;
exports.enumerateThenFinally = enumerateThenFinally;
exports.enumerateUsing = enumerateUsing;
exports.exactlyOne = exactlyOne;
exports.except = except;
exports.exists = exists;
exports.exists2 = exists2;
exports.forAll = forAll;
exports.forAll2 = forAll2;
exports.contains = contains;
exports.filter = filter;
exports.where = where;
exports.fold = fold;
exports.foldBack = foldBack;
exports.fold2 = fold2;
exports.foldBack2 = foldBack2;
exports.tryHead = tryHead;
exports.head = head;
exports.initialize = initialize;
exports.initializeInfinite = initializeInfinite;
exports.tryItem = tryItem;
exports.item = item;
exports.iterate = iterate;
exports.iterate2 = iterate2;
exports.iterateIndexed = iterateIndexed;
exports.iterateIndexed2 = iterateIndexed2;
exports.isEmpty = isEmpty;
exports.tryLast = tryLast;
exports.last = last;
exports.length = length;
exports.map = map;
exports.mapIndexed = mapIndexed;
exports.indexed = indexed;
exports.map2 = map2;
exports.mapIndexed2 = mapIndexed2;
exports.map3 = map3;
exports.mapFold = mapFold;
exports.mapFoldBack = mapFoldBack;
exports.max = max;
exports.maxBy = maxBy;
exports.min = min;
exports.minBy = minBy;
exports.pairwise = pairwise;
exports.rangeChar = rangeChar;
exports.rangeLong = rangeLong;
exports.rangeDecimal = rangeDecimal;
exports.rangeNumber = rangeNumber;
exports.readOnly = readOnly;
exports.reduce = reduce;
exports.reduceBack = reduceBack;
exports.replicate = replicate;
exports.reverse = reverse;
exports.scan = scan;
exports.scanBack = scanBack;
exports.skip = skip;
exports.skipWhile = skipWhile;
exports.sortWith = sortWith;
exports.sum = sum;
exports.sumBy = sumBy;
exports.tail = tail;
exports.take = take;
exports.truncate = truncate;
exports.takeWhile = takeWhile;
exports.tryFind = tryFind;
exports.find = find;
exports.tryFindBack = tryFindBack;
exports.findBack = findBack;
exports.tryFindIndex = tryFindIndex;
exports.findIndex = findIndex;
exports.tryFindIndexBack = tryFindIndexBack;
exports.findIndexBack = findIndexBack;
exports.tryPick = tryPick;
exports.pick = pick;
exports.unfold = unfold;
exports.zip = zip;
exports.zip3 = zip3;
exports.windowed = windowed;
exports.transpose = transpose;
exports.Enumerator = void 0;

var _Decimal = require("./Decimal.js");

var _Long = require("./Long.js");

var _Option = require("./Option.js");

var _Util = require("./Util.js");

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var Enumerator = /*#__PURE__*/function () {
  function Enumerator(iter) {
    _classCallCheck(this, Enumerator);

    this.iter = iter;
  }

  _createClass(Enumerator, [{
    key: "System.Collections.Generic.IEnumerator`1.get_Current",
    value: function SystemCollectionsGenericIEnumerator1Get_Current() {
      return this.current;
    }
  }, {
    key: "System.Collections.IEnumerator.get_Current",
    value: function SystemCollectionsIEnumeratorGet_Current() {
      return this.current;
    }
  }, {
    key: "System.Collections.IEnumerator.MoveNext",
    value: function SystemCollectionsIEnumeratorMoveNext() {
      var cur = this.iter.next();
      this.current = cur.value;
      return !cur.done;
    }
  }, {
    key: "System.Collections.IEnumerator.Reset",
    value: function SystemCollectionsIEnumeratorReset() {
      throw new Error("JS iterators cannot be reset");
    }
  }, {
    key: "Dispose",
    value: function Dispose() {
      return;
    }
  }]);

  return Enumerator;
}();

exports.Enumerator = Enumerator;

function getEnumerator(o) {
  return typeof o.GetEnumerator === "function" ? o.GetEnumerator() : new Enumerator(o[Symbol.iterator]());
}

function toIterator(en) {
  var _ref;

  return _ref = {}, _defineProperty(_ref, Symbol.iterator, function () {
    return this;
  }), _defineProperty(_ref, "next", function next() {
    var hasNext = en["System.Collections.IEnumerator.MoveNext"]();
    var current = hasNext ? en["System.Collections.IEnumerator.get_Current"]() : undefined;
    return {
      done: !hasNext,
      value: current
    };
  }), _ref;
} // export function toIterable<T>(en: IEnumerable<T>): Iterable<T> {
//   return {
//     [Symbol.iterator]() {
//       return toIterator(en.GetEnumerator());
//     },
//   };
// }


function __failIfNone(res) {
  if (res == null) {
    throw new Error("Seq did not contain any matching element");
  }

  return (0, _Option.value)(res);
}

var Seq = /*#__PURE__*/function () {
  function Seq(f) {
    _classCallCheck(this, Seq);

    this.f = f;
  }

  _createClass(Seq, [{
    key: Symbol.iterator,
    value: function value() {
      return new Seq(this.f);
    }
  }, {
    key: "next",
    value: function next() {
      var _a;

      this.iter = (_a = this.iter) !== null && _a !== void 0 ? _a : this.f();
      return this.iter.next();
    }
  }, {
    key: "toString",
    value: function toString() {
      return "seq [" + Array.from(this).join("; ") + "]";
    }
  }]);

  return Seq;
}();

function makeSeq(f) {
  return new Seq(f);
}

function isArrayOrBufferView(xs) {
  return Array.isArray(xs) || ArrayBuffer.isView(xs);
}

function ofArray(xs) {
  if (Array.isArray(xs)) {
    return delay(function () {
      return xs;
    });
  } else {
    return delay(function () {
      return unfold(function (i) {
        return i != null && i < xs.length ? [xs[i], i + 1] : undefined;
      }, 0);
    });
  }
}

function allPairs(xs, ys) {
  var firstEl = true;
  var ysCache = [];
  return collect(function (x) {
    if (firstEl) {
      firstEl = false;
      return map(function (y) {
        ysCache.push(y);
        return [x, y];
      }, ys);
    } else {
      return ysCache.map(function (y) {
        return [x, y];
      }); // return map(function (i) {
      //     return [x, ysCache[i]];
      // }, rangeNumber(0, 1, ysCache.length - 1));
    }
  }, xs);
}

function append(xs, ys) {
  return delay(function () {
    var firstDone = false;
    var i = xs[Symbol.iterator]();
    var iters = [i, undefined];
    return unfold(function () {
      var _a, _b;

      var cur;

      if (!firstDone) {
        cur = (_a = iters[0]) === null || _a === void 0 ? void 0 : _a.next();

        if (cur != null && !cur.done) {
          return [cur.value, iters];
        } else {
          firstDone = true;
          iters = [undefined, ys[Symbol.iterator]()];
        }
      }

      cur = (_b = iters[1]) === null || _b === void 0 ? void 0 : _b.next();
      return cur != null && !cur.done ? [cur.value, iters] : undefined;
    }, iters);
  });
}

function average(xs, averager) {
  var count = 0;
  var total = fold(function (acc, x) {
    count++;
    return averager.Add(acc, x);
  }, averager.GetZero(), xs);
  return averager.DivideByInt(total, count);
}

function averageBy(f, xs, averager) {
  var count = 0;
  var total = fold(function (acc, x) {
    count++;
    return averager.Add(acc, f(x));
  }, averager.GetZero(), xs);
  return averager.DivideByInt(total, count);
}

function concat(xs) {
  return delay(function () {
    var iter = xs[Symbol.iterator]();
    var output;
    return unfold(function (innerIter) {
      var hasFinished = false;

      while (!hasFinished) {
        if (innerIter == null) {
          var cur = iter.next();

          if (!cur.done) {
            innerIter = cur.value[Symbol.iterator]();
          } else {
            hasFinished = true;
          }
        } else {
          var _cur = innerIter.next();

          if (!_cur.done) {
            output = _cur.value;
            hasFinished = true;
          } else {
            innerIter = undefined;
          }
        }
      }

      return innerIter != null ? [output, innerIter] : undefined;
    }, undefined);
  });
}

function collect(f, xs) {
  return concat(map(f, xs));
}

function choose(f, xs) {
  return delay(function () {
    return unfold(function (iter) {
      var cur = iter.next();

      while (!cur.done) {
        var y = f(cur.value);

        if (y != null) {
          return [(0, _Option.value)(y), iter];
        }

        cur = iter.next();
      }

      return undefined;
    }, xs[Symbol.iterator]());
  });
}

function compareWith(f, xs, ys) {
  if (xs === ys) {
    return 0;
  }

  var cur1;
  var cur2;
  var c = 0;

  for (var iter1 = xs[Symbol.iterator](), iter2 = ys[Symbol.iterator]();;) {
    cur1 = iter1.next();
    cur2 = iter2.next();

    if (cur1.done || cur2.done) {
      break;
    }

    c = f(cur1.value, cur2.value);

    if (c !== 0) {
      break;
    }
  }

  return c !== 0 ? c : cur1.done && !cur2.done ? -1 : !cur1.done && cur2.done ? 1 : 0;
}

function delay(f) {
  return makeSeq(function () {
    return f()[Symbol.iterator]();
  });
}

function empty() {
  return delay(function () {
    return [];
  });
}

function singleton(y) {
  return delay(function () {
    return [y];
  });
}

function enumerateFromFunctions(factory, moveNext, current) {
  return delay(function () {
    return unfold(function (e) {
      return moveNext(e) ? [current(e), e] : undefined;
    }, factory());
  });
}

function enumerateWhile(cond, xs) {
  return concat(unfold(function () {
    return cond() ? [xs, true] : undefined;
  }, undefined));
}

function enumerateThenFinally(xs, finalFn) {
  return delay(function () {
    var iter;

    try {
      iter = xs[Symbol.iterator]();
    } catch (err) {
      try {
        return empty();
      } finally {
        finalFn();
      }
    }

    return unfold(function (it) {
      try {
        var cur = it.next();
        return !cur.done ? [cur.value, it] : undefined;
      } catch (err) {
        return undefined;
      } finally {
        finalFn();
      }
    }, iter);
  });
}

function enumerateUsing(disp, work) {
  var isDisposed = false;

  var disposeOnce = function disposeOnce() {
    if (!isDisposed) {
      isDisposed = true;
      disp.Dispose();
    }
  };

  try {
    return enumerateThenFinally(work(disp), disposeOnce);
  } catch (err) {
    return void 0;
  } finally {
    disposeOnce();
  }
}

function exactlyOne(xs) {
  var iter = xs[Symbol.iterator]();
  var fst = iter.next();

  if (fst.done) {
    throw new Error("Seq was empty");
  }

  var snd = iter.next();

  if (!snd.done) {
    throw new Error("Seq had multiple items");
  }

  return fst.value;
}

function except(itemsToExclude, source) {
  var exclusionItems = Array.from(itemsToExclude);

  var testIsNotInExclusionItems = function testIsNotInExclusionItems(element) {
    return !exclusionItems.some(function (excludedItem) {
      return (0, _Util.equals)(excludedItem, element);
    });
  };

  return filter(testIsNotInExclusionItems, source);
}

function exists(f, xs) {
  var cur;

  for (var iter = xs[Symbol.iterator]();;) {
    cur = iter.next();

    if (cur.done) {
      break;
    }

    if (f(cur.value)) {
      return true;
    }
  }

  return false;
}

function exists2(f, xs, ys) {
  var cur1;
  var cur2;

  for (var iter1 = xs[Symbol.iterator](), iter2 = ys[Symbol.iterator]();;) {
    cur1 = iter1.next();
    cur2 = iter2.next();

    if (cur1.done || cur2.done) {
      break;
    }

    if (f(cur1.value, cur2.value)) {
      return true;
    }
  }

  return false;
}

function forAll(f, xs) {
  return !exists(function (x) {
    return !f(x);
  }, xs);
}

function forAll2(f, xs, ys) {
  return !exists2(function (x, y) {
    return !f(x, y);
  }, xs, ys);
}

function contains(i, xs) {
  return exists(function (x) {
    return (0, _Util.equals)(x, i);
  }, xs);
}

function filter(f, xs) {
  return delay(function () {
    return unfold(function (iter) {
      var cur = iter.next();

      while (!cur.done) {
        if (f(cur.value)) {
          return [cur.value, iter];
        }

        cur = iter.next();
      }

      return undefined;
    }, xs[Symbol.iterator]());
  });
}

function where(f, xs) {
  return filter(f, xs);
}

function fold(f, acc, xs) {
  if (isArrayOrBufferView(xs)) {
    return xs.reduce(f, acc);
  } else {
    var cur;

    for (var i = 0, iter = xs[Symbol.iterator]();; i++) {
      cur = iter.next();

      if (cur.done) {
        break;
      }

      acc = f(acc, cur.value, i);
    }

    return acc;
  }
}

function foldBack(f, xs, acc) {
  var arr = isArrayOrBufferView(xs) ? xs : Array.from(xs);

  for (var i = arr.length - 1; i >= 0; i--) {
    acc = f(arr[i], acc, i);
  }

  return acc;
}

function fold2(f, acc, xs, ys) {
  var iter1 = xs[Symbol.iterator]();
  var iter2 = ys[Symbol.iterator]();
  var cur1;
  var cur2;

  for (var i = 0;; i++) {
    cur1 = iter1.next();
    cur2 = iter2.next();

    if (cur1.done || cur2.done) {
      break;
    }

    acc = f(acc, cur1.value, cur2.value, i);
  }

  return acc;
}

function foldBack2(f, xs, ys, acc) {
  var ar1 = isArrayOrBufferView(xs) ? xs : Array.from(xs);
  var ar2 = isArrayOrBufferView(ys) ? ys : Array.from(ys);

  for (var i = ar1.length - 1; i >= 0; i--) {
    acc = f(ar1[i], ar2[i], acc, i);
  }

  return acc;
}

function tryHead(xs) {
  var iter = xs[Symbol.iterator]();
  var cur = iter.next();
  return cur.done ? undefined : (0, _Option.some)(cur.value);
}

function head(xs) {
  return __failIfNone(tryHead(xs));
}

function initialize(n, f) {
  return delay(function () {
    return unfold(function (i) {
      return i < n ? [f(i), i + 1] : undefined;
    }, 0);
  });
}

function initializeInfinite(f) {
  return delay(function () {
    return unfold(function (i) {
      return [f(i), i + 1];
    }, 0);
  });
}

function tryItem(i, xs) {
  if (i < 0) {
    return undefined;
  }

  if (isArrayOrBufferView(xs)) {
    return i < xs.length ? (0, _Option.some)(xs[i]) : undefined;
  }

  for (var j = 0, iter = xs[Symbol.iterator]();; j++) {
    var cur = iter.next();

    if (cur.done) {
      break;
    }

    if (j === i) {
      return (0, _Option.some)(cur.value);
    }
  }

  return undefined;
}

function item(i, xs) {
  return __failIfNone(tryItem(i, xs));
}

function iterate(f, xs) {
  fold(function (_, x) {
    return f(x), undefined;
  }, undefined, xs);
}

function iterate2(f, xs, ys) {
  fold2(function (_, x, y) {
    return f(x, y), undefined;
  }, undefined, xs, ys);
}

function iterateIndexed(f, xs) {
  fold(function (_, x, i) {
    return f(i !== null && i !== void 0 ? i : 0, x), undefined;
  }, undefined, xs);
}

function iterateIndexed2(f, xs, ys) {
  fold2(function (_, x, y, i) {
    return f(i !== null && i !== void 0 ? i : 0, x, y), undefined;
  }, undefined, xs, ys);
}

function isEmpty(xs) {
  var i = xs[Symbol.iterator]();
  return i.next().done;
}

function tryLast(xs) {
  return isEmpty(xs) ? undefined : (0, _Option.some)(reduce(function (_, x) {
    return x;
  }, xs));
}

function last(xs) {
  return __failIfNone(tryLast(xs));
}

function length(xs) {
  return isArrayOrBufferView(xs) ? xs.length : fold(function (acc, _x) {
    return acc + 1;
  }, 0, xs);
}

function map(f, xs) {
  return delay(function () {
    return unfold(function (iter) {
      var cur = iter.next();
      return !cur.done ? [f(cur.value), iter] : undefined;
    }, xs[Symbol.iterator]());
  });
}

function mapIndexed(f, xs) {
  return delay(function () {
    var i = 0;
    return unfold(function (iter) {
      var cur = iter.next();
      return !cur.done ? [f(i++, cur.value), iter] : undefined;
    }, xs[Symbol.iterator]());
  });
}

function indexed(xs) {
  return mapIndexed(function (i, x) {
    return [i, x];
  }, xs);
}

function map2(f, xs, ys) {
  return delay(function () {
    var iter1 = xs[Symbol.iterator]();
    var iter2 = ys[Symbol.iterator]();
    return unfold(function () {
      var cur1 = iter1.next();
      var cur2 = iter2.next();
      return !cur1.done && !cur2.done ? [f(cur1.value, cur2.value), undefined] : undefined;
    }, undefined);
  });
}

function mapIndexed2(f, xs, ys) {
  return delay(function () {
    var i = 0;
    var iter1 = xs[Symbol.iterator]();
    var iter2 = ys[Symbol.iterator]();
    return unfold(function () {
      var cur1 = iter1.next();
      var cur2 = iter2.next();
      return !cur1.done && !cur2.done ? [f(i++, cur1.value, cur2.value), undefined] : undefined;
    }, undefined);
  });
}

function map3(f, xs, ys, zs) {
  return delay(function () {
    var iter1 = xs[Symbol.iterator]();
    var iter2 = ys[Symbol.iterator]();
    var iter3 = zs[Symbol.iterator]();
    return unfold(function () {
      var cur1 = iter1.next();
      var cur2 = iter2.next();
      var cur3 = iter3.next();
      return !cur1.done && !cur2.done && !cur3.done ? [f(cur1.value, cur2.value, cur3.value), undefined] : undefined;
    }, undefined);
  });
}

function mapFold(f, acc, xs, transform) {
  var result = [];
  var r;
  var cur;

  for (var i = 0, iter = xs[Symbol.iterator]();; i++) {
    cur = iter.next();

    if (cur.done) {
      break;
    }

    var _f = f(acc, cur.value);

    var _f2 = _slicedToArray(_f, 2);

    r = _f2[0];
    acc = _f2[1];
    result.push(r);
  }

  return transform !== void 0 ? [transform(result), acc] : [result, acc];
}

function mapFoldBack(f, xs, acc, transform) {
  var arr = isArrayOrBufferView(xs) ? xs : Array.from(xs);
  var result = [];
  var r;

  for (var i = arr.length - 1; i >= 0; i--) {
    var _f3 = f(arr[i], acc);

    var _f4 = _slicedToArray(_f3, 2);

    r = _f4[0];
    acc = _f4[1];
    result.push(r);
  }

  return transform !== void 0 ? [transform(result), acc] : [result, acc];
}

function max(xs, comparer) {
  var compareFn = comparer != null ? comparer.Compare : _Util.compare;
  return reduce(function (acc, x) {
    return compareFn(acc, x) === 1 ? acc : x;
  }, xs);
}

function maxBy(f, xs, comparer) {
  var compareFn = comparer != null ? comparer.Compare : _Util.compare;
  return reduce(function (acc, x) {
    return compareFn(f(acc), f(x)) === 1 ? acc : x;
  }, xs);
}

function min(xs, comparer) {
  var compareFn = comparer != null ? comparer.Compare : _Util.compare;
  return reduce(function (acc, x) {
    return compareFn(acc, x) === -1 ? acc : x;
  }, xs);
}

function minBy(f, xs, comparer) {
  var compareFn = comparer != null ? comparer.Compare : _Util.compare;
  return reduce(function (acc, x) {
    return compareFn(f(acc), f(x)) === -1 ? acc : x;
  }, xs);
}

function pairwise(xs) {
  return delay(function () {
    var iter = xs[Symbol.iterator]();
    var cur = iter.next();

    if (cur.done) {
      return empty();
    }

    var hd = cur.value;
    var tl = tail(xs);
    var ys = scan(function (_ref2, next) {
      var _ref3 = _slicedToArray(_ref2, 2),
          _ = _ref3[0],
          last = _ref3[1];

      return [last, next];
    }, [hd, hd], tl);
    return skip(1, ys);
  });
}

function rangeChar(first, last) {
  return delay(function () {
    return unfold(function (x) {
      return x <= last ? [x, String.fromCharCode(x.charCodeAt(0) + 1)] : undefined;
    }, first);
  });
}

function rangeLong(first, step, last, unsigned) {
  var stepFn = (0, _Long.makeRangeStepFunction)(step, last, unsigned);
  return delay(function () {
    return unfold(stepFn, first);
  });
}

function rangeDecimal(first, step, last) {
  var stepFn = (0, _Decimal.makeRangeStepFunction)(step, last);
  return delay(function () {
    return unfold(stepFn, first);
  });
}

function rangeNumber(first, step, last) {
  if (step === 0) {
    throw new Error("Step cannot be 0");
  }

  return delay(function () {
    return unfold(function (x) {
      return step > 0 && x <= last || step < 0 && x >= last ? [x, x + step] : undefined;
    }, first);
  });
}

function readOnly(xs) {
  return map(function (x) {
    return x;
  }, xs);
}

function reduce(f, xs) {
  if (isArrayOrBufferView(xs)) {
    return xs.reduce(f);
  }

  var iter = xs[Symbol.iterator]();
  var cur = iter.next();

  if (cur.done) {
    throw new Error("Seq was empty");
  }

  var acc = cur.value;

  while (true) {
    cur = iter.next();

    if (cur.done) {
      break;
    }

    acc = f(acc, cur.value);
  }

  return acc;
}

function reduceBack(f, xs) {
  var ar = isArrayOrBufferView(xs) ? xs : Array.from(xs);

  if (ar.length === 0) {
    throw new Error("Seq was empty");
  }

  var acc = ar[ar.length - 1];

  for (var i = ar.length - 2; i >= 0; i--) {
    acc = f(ar[i], acc, i);
  }

  return acc;
}

function replicate(n, x) {
  return initialize(n, function () {
    return x;
  });
}

function reverse(xs) {
  var ar = isArrayOrBufferView(xs) ? xs.slice(0) : Array.from(xs);
  return ofArray(ar.reverse());
}

function scan(f, seed, xs) {
  return delay(function () {
    var iter = xs[Symbol.iterator]();
    return unfold(function (acc) {
      if (acc == null) {
        return [seed, seed];
      }

      var cur = iter.next();

      if (!cur.done) {
        acc = f(acc, cur.value);
        return [acc, acc];
      }

      return undefined;
    }, undefined);
  });
}

function scanBack(f, xs, seed) {
  return reverse(scan(function (acc, x) {
    return f(x, acc);
  }, seed, reverse(xs)));
}

function skip(n, xs) {
  return makeSeq(function () {
    var iter = xs[Symbol.iterator]();

    for (var i = 1; i <= n; i++) {
      if (iter.next().done) {
        throw new Error("Seq has not enough elements");
      }
    }

    return iter;
  });
}

function skipWhile(f, xs) {
  return delay(function () {
    var hasPassed = false;
    return filter(function (x) {
      return hasPassed || (hasPassed = !f(x));
    }, xs);
  });
}

function sortWith(f, xs) {
  var ys = Array.from(xs);
  return ofArray(ys.sort(f));
}

function sum(xs, adder) {
  return fold(function (acc, x) {
    return adder.Add(acc, x);
  }, adder.GetZero(), xs);
}

function sumBy(f, xs, adder) {
  return fold(function (acc, x) {
    return adder.Add(acc, f(x));
  }, adder.GetZero(), xs);
}

function tail(xs) {
  return skip(1, xs);
}

function take(n, xs) {
  var truncate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  return delay(function () {
    var iter = xs[Symbol.iterator]();
    return unfold(function (i) {
      if (i < n) {
        var cur = iter.next();

        if (!cur.done) {
          return [cur.value, i + 1];
        }

        if (!truncate) {
          throw new Error("Seq has not enough elements");
        }
      }

      return undefined;
    }, 0);
  });
}

function truncate(n, xs) {
  return take(n, xs, true);
}

function takeWhile(f, xs) {
  return delay(function () {
    var iter = xs[Symbol.iterator]();
    return unfold(function () {
      var cur = iter.next();

      if (!cur.done && f(cur.value)) {
        return [cur.value, undefined];
      }

      return undefined;
    }, 0);
  });
}

function tryFind(f, xs, defaultValue) {
  for (var i = 0, iter = xs[Symbol.iterator]();; i++) {
    var cur = iter.next();

    if (cur.done) {
      break;
    }

    if (f(cur.value, i)) {
      return (0, _Option.some)(cur.value);
    }
  }

  return defaultValue === void 0 ? undefined : (0, _Option.some)(defaultValue);
}

function find(f, xs) {
  return __failIfNone(tryFind(f, xs));
}

function tryFindBack(f, xs, defaultValue) {
  var arr = isArrayOrBufferView(xs) ? xs.slice(0) : Array.from(xs);
  return tryFind(f, arr.reverse(), defaultValue);
}

function findBack(f, xs) {
  return __failIfNone(tryFindBack(f, xs));
}

function tryFindIndex(f, xs) {
  for (var i = 0, iter = xs[Symbol.iterator]();; i++) {
    var cur = iter.next();

    if (cur.done) {
      break;
    }

    if (f(cur.value, i)) {
      return i;
    }
  }

  return undefined;
}

function findIndex(f, xs) {
  return __failIfNone(tryFindIndex(f, xs));
}

function tryFindIndexBack(f, xs) {
  var arr = isArrayOrBufferView(xs) ? xs.slice(0) : Array.from(xs);

  for (var i = arr.length - 1; i >= 0; i--) {
    if (f(arr[i], i)) {
      return i;
    }
  }

  return undefined;
}

function findIndexBack(f, xs) {
  return __failIfNone(tryFindIndexBack(f, xs));
}

function tryPick(f, xs) {
  for (var i = 0, iter = xs[Symbol.iterator]();; i++) {
    var cur = iter.next();

    if (cur.done) {
      break;
    }

    var y = f(cur.value, i);

    if (y != null) {
      return y;
    }
  }

  return undefined;
}

function pick(f, xs) {
  return __failIfNone(tryPick(f, xs));
}

function unfold(f, fst) {
  return makeSeq(function () {
    // Capture a copy of the first value in the closure
    // so the sequence is restarted every time, see #1230
    var acc = fst;
    var iter = {
      next: function next() {
        var res = f(acc);

        if (res != null) {
          var v = (0, _Option.value)(res);

          if (v != null) {
            acc = v[1];
            return {
              done: false,
              value: v[0]
            };
          }
        }

        return {
          done: true,
          value: undefined
        };
      }
    };
    return iter;
  });
}

function zip(xs, ys) {
  return map2(function (x, y) {
    return [x, y];
  }, xs, ys);
}

function zip3(xs, ys, zs) {
  return map3(function (x, y, z) {
    return [x, y, z];
  }, xs, ys, zs);
}

function windowed(windowSize, source) {
  if (windowSize <= 0) {
    throw new Error("windowSize must be positive");
  }

  return makeSeq(function () {
    var window = [];
    var iter = source[Symbol.iterator]();
    var iter2 = {
      next: function next() {
        var cur;

        while (window.length < windowSize) {
          if ((cur = iter.next()).done) {
            return {
              done: true,
              value: undefined
            };
          }

          window.push(cur.value);
        }

        var value = window;
        window = window.slice(1);
        return {
          done: false,
          value: value
        };
      }
    };
    return iter2;
  });
}

function transpose(source) {
  return makeSeq(function () {
    var iters = Array.from(source, function (x) {
      return x[Symbol.iterator]();
    });
    var iter = {
      next: function next() {
        if (iters.length === 0) {
          return {
            done: true,
            value: undefined
          }; // empty sequence
        }

        var results = Array.from(iters, function (iter) {
          return iter.next();
        });

        if (results[0].done) {
          if (!results.every(function (x) {
            return x.done;
          })) {
            throw new Error("Sequences have different lengths");
          }

          return {
            done: true,
            value: undefined
          };
        } else {
          if (!results.every(function (x) {
            return !x.done;
          })) {
            throw new Error("Sequences have different lengths");
          }

          var values = results.map(function (x) {
            return x.value;
          });
          return {
            done: false,
            value: values
          };
        }
      }
    };
    return iter;
  });
}
},{"./Decimal.js":"../JS/.fable/fable-library.3.0.0/Decimal.js","./Long.js":"../JS/.fable/fable-library.3.0.0/Long.js","./Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/.fable/fable-library.3.0.0/Reflection.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getGenerics = getGenerics;
exports.getHashCode = getHashCode;
exports.equals = equals;
exports.class_type = class_type;
exports.record_type = record_type;
exports.anonRecord_type = anonRecord_type;
exports.union_type = union_type;
exports.tuple_type = tuple_type;
exports.delegate_type = delegate_type;
exports.lambda_type = lambda_type;
exports.option_type = option_type;
exports.list_type = list_type;
exports.array_type = array_type;
exports.enum_type = enum_type;
exports.name = name;
exports.fullName = fullName;
exports.namespace = namespace;
exports.isArray = isArray;
exports.getElementType = getElementType;
exports.isGenericType = isGenericType;
exports.isEnum = isEnum;
exports.isSubclassOf = isSubclassOf;
exports.getGenericTypeDefinition = getGenericTypeDefinition;
exports.getEnumUnderlyingType = getEnumUnderlyingType;
exports.getEnumValues = getEnumValues;
exports.getEnumNames = getEnumNames;
exports.parseEnum = parseEnum;
exports.tryParseEnum = tryParseEnum;
exports.getEnumName = getEnumName;
exports.isEnumDefined = isEnumDefined;
exports.getUnionCases = getUnionCases;
exports.getRecordElements = getRecordElements;
exports.getTupleElements = getTupleElements;
exports.getFunctionElements = getFunctionElements;
exports.isUnion = isUnion;
exports.isRecord = isRecord;
exports.isTuple = isTuple;
exports.isFunction = isFunction;
exports.getUnionFields = getUnionFields;
exports.getUnionCaseFields = getUnionCaseFields;
exports.getRecordFields = getRecordFields;
exports.getRecordField = getRecordField;
exports.getTupleFields = getTupleFields;
exports.getTupleField = getTupleField;
exports.makeUnion = makeUnion;
exports.makeRecord = makeRecord;
exports.makeTuple = makeTuple;
exports.makeGenericType = makeGenericType;
exports.createInstance = createInstance;
exports.getValue = getValue;
exports.getCaseTag = getCaseTag;
exports.getCaseName = getCaseName;
exports.getCaseFields = getCaseFields;
exports.decimal_type = exports.float64_type = exports.float32_type = exports.uint32_type = exports.int32_type = exports.uint16_type = exports.int16_type = exports.uint8_type = exports.int8_type = exports.bool_type = exports.string_type = exports.char_type = exports.unit_type = exports.obj_type = exports.TypeInfo = exports.CaseInfo = void 0;

var _Types = require("./Types.js");

var _Util = require("./Util.js");

function _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var CaseInfo = function CaseInfo(declaringType, tag, name, fields) {
  _classCallCheck(this, CaseInfo);

  this.declaringType = declaringType;
  this.tag = tag;
  this.name = name;
  this.fields = fields;
};

exports.CaseInfo = CaseInfo;

var TypeInfo = /*#__PURE__*/function () {
  function TypeInfo(fullname, generics, construct, parent, fields, cases, enumCases) {
    _classCallCheck(this, TypeInfo);

    this.fullname = fullname;
    this.generics = generics;
    this.construct = construct;
    this.parent = parent;
    this.fields = fields;
    this.cases = cases;
    this.enumCases = enumCases;
  }

  _createClass(TypeInfo, [{
    key: "toString",
    value: function toString() {
      return fullName(this);
    }
  }, {
    key: "GetHashCode",
    value: function GetHashCode() {
      return getHashCode(this);
    }
  }, {
    key: "Equals",
    value: function Equals(other) {
      return equals(this, other);
    }
  }]);

  return TypeInfo;
}();

exports.TypeInfo = TypeInfo;

function getGenerics(t) {
  return t.generics != null ? t.generics : [];
}

function getHashCode(t) {
  var fullnameHash = (0, _Util.stringHash)(t.fullname);
  var genHashes = getGenerics(t).map(getHashCode);
  return (0, _Util.combineHashCodes)([fullnameHash].concat(_toConsumableArray(genHashes)));
}

function equals(t1, t2) {
  if (t1.fullname === "") {
    // Anonymous records
    return t2.fullname === "" && (0, _Util.equalArraysWith)(getRecordElements(t1), getRecordElements(t2), function (_ref, _ref2) {
      var _ref3 = _slicedToArray(_ref, 2),
          k1 = _ref3[0],
          v1 = _ref3[1];

      var _ref4 = _slicedToArray(_ref2, 2),
          k2 = _ref4[0],
          v2 = _ref4[1];

      return k1 === k2 && equals(v1, v2);
    });
  } else {
    return t1.fullname === t2.fullname && (0, _Util.equalArraysWith)(getGenerics(t1), getGenerics(t2), equals);
  }
}

function class_type(fullname, generics, construct, parent) {
  return new TypeInfo(fullname, generics, construct, parent);
}

function record_type(fullname, generics, construct, fields) {
  return new TypeInfo(fullname, generics, construct, undefined, fields);
}

function anonRecord_type() {
  for (var _len = arguments.length, fields = new Array(_len), _key = 0; _key < _len; _key++) {
    fields[_key] = arguments[_key];
  }

  return new TypeInfo("", undefined, undefined, undefined, function () {
    return fields;
  });
}

function union_type(fullname, generics, construct, cases) {
  var t = new TypeInfo(fullname, generics, construct, undefined, undefined, function () {
    var caseNames = construct.prototype.cases();
    return cases().map(function (fields, i) {
      return new CaseInfo(t, i, caseNames[i], fields);
    });
  });
  return t;
}

function tuple_type() {
  for (var _len2 = arguments.length, generics = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    generics[_key2] = arguments[_key2];
  }

  return new TypeInfo("System.Tuple`" + generics.length, generics);
}

function delegate_type() {
  for (var _len3 = arguments.length, generics = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
    generics[_key3] = arguments[_key3];
  }

  return new TypeInfo("System.Func`" + generics.length, generics);
}

function lambda_type(argType, returnType) {
  return new TypeInfo("Microsoft.FSharp.Core.FSharpFunc`2", [argType, returnType]);
}

function option_type(generic) {
  return new TypeInfo("Microsoft.FSharp.Core.FSharpOption`1", [generic]);
}

function list_type(generic) {
  return new TypeInfo("Microsoft.FSharp.Collections.FSharpList`1", [generic]);
}

function array_type(generic) {
  return new TypeInfo(generic.fullname + "[]", [generic]);
}

function enum_type(fullname, underlyingType, enumCases) {
  return new TypeInfo(fullname, [underlyingType], undefined, undefined, undefined, undefined, enumCases);
}

var obj_type = new TypeInfo("System.Object");
exports.obj_type = obj_type;
var unit_type = new TypeInfo("Microsoft.FSharp.Core.Unit");
exports.unit_type = unit_type;
var char_type = new TypeInfo("System.Char");
exports.char_type = char_type;
var string_type = new TypeInfo("System.String");
exports.string_type = string_type;
var bool_type = new TypeInfo("System.Boolean");
exports.bool_type = bool_type;
var int8_type = new TypeInfo("System.SByte");
exports.int8_type = int8_type;
var uint8_type = new TypeInfo("System.Byte");
exports.uint8_type = uint8_type;
var int16_type = new TypeInfo("System.Int16");
exports.int16_type = int16_type;
var uint16_type = new TypeInfo("System.UInt16");
exports.uint16_type = uint16_type;
var int32_type = new TypeInfo("System.Int32");
exports.int32_type = int32_type;
var uint32_type = new TypeInfo("System.UInt32");
exports.uint32_type = uint32_type;
var float32_type = new TypeInfo("System.Single");
exports.float32_type = float32_type;
var float64_type = new TypeInfo("System.Double");
exports.float64_type = float64_type;
var decimal_type = new TypeInfo("System.Decimal");
exports.decimal_type = decimal_type;

function name(info) {
  if (Array.isArray(info)) {
    return info[0];
  } else if (info instanceof CaseInfo) {
    return info.name;
  } else {
    var i = info.fullname.lastIndexOf(".");
    return i === -1 ? info.fullname : info.fullname.substr(i + 1);
  }
}

function fullName(t) {
  var gen = t.generics != null && !isArray(t) ? t.generics : [];

  if (gen.length > 0) {
    return t.fullname + "[" + gen.map(function (x) {
      return fullName(x);
    }).join(",") + "]";
  } else {
    return t.fullname;
  }
}

function namespace(t) {
  var i = t.fullname.lastIndexOf(".");
  return i === -1 ? "" : t.fullname.substr(0, i);
}

function isArray(t) {
  return t.fullname.endsWith("[]");
}

function getElementType(t) {
  var _a;

  return isArray(t) ? (_a = t.generics) === null || _a === void 0 ? void 0 : _a[0] : undefined;
}

function isGenericType(t) {
  return t.generics != null && t.generics.length > 0;
}

function isEnum(t) {
  return t.enumCases != null && t.enumCases.length > 0;
}

function isSubclassOf(t1, t2) {
  var _a, _b;

  return (_b = (_a = t1.parent) === null || _a === void 0 ? void 0 : _a.Equals(t2)) !== null && _b !== void 0 ? _b : false;
}
/**
 * This doesn't replace types for fields (records) or cases (unions)
 * but it should be enough for type comparison purposes
 */


function getGenericTypeDefinition(t) {
  return t.generics == null ? t : new TypeInfo(t.fullname, t.generics.map(function () {
    return obj_type;
  }));
}

function getEnumUnderlyingType(t) {
  var _a;

  return (_a = t.generics) === null || _a === void 0 ? void 0 : _a[0];
}

function getEnumValues(t) {
  if (isEnum(t) && t.enumCases != null) {
    return t.enumCases.map(function (kv) {
      return kv[1];
    });
  } else {
    throw new Error("".concat(t.fullname, " is not an enum type"));
  }
}

function getEnumNames(t) {
  if (isEnum(t) && t.enumCases != null) {
    return t.enumCases.map(function (kv) {
      return kv[0];
    });
  } else {
    throw new Error("".concat(t.fullname, " is not an enum type"));
  }
}

function getEnumCase(t, v) {
  if (t.enumCases != null) {
    if (typeof v === "string") {
      var _iterator = _createForOfIteratorHelper(t.enumCases),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var kv = _step.value;

          if (kv[0] === v) {
            return kv;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      throw new Error("'".concat(v, "' was not found in ").concat(t.fullname));
    } else {
      var _iterator2 = _createForOfIteratorHelper(t.enumCases),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var _kv = _step2.value;

          if (_kv[1] === v) {
            return _kv;
          }
        } // .NET returns the number even if it doesn't match any of the cases

      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }

      return ["", v];
    }
  } else {
    throw new Error("".concat(t.fullname, " is not an enum type"));
  }
}

function parseEnum(t, str) {
  // TODO: better int parsing here, parseInt ceils floats: "4.8" -> 4
  var value = parseInt(str, 10);
  return getEnumCase(t, isNaN(value) ? str : value)[1];
}

function tryParseEnum(t, str, defValue) {
  try {
    defValue.contents = parseEnum(t, str);
    return true;
  } catch (_a) {
    return false;
  }
}

function getEnumName(t, v) {
  return getEnumCase(t, v)[0];
}

function isEnumDefined(t, v) {
  try {
    var kv = getEnumCase(t, v);
    return kv[0] != null && kv[0] !== "";
  } catch (_a) {// supress error
  }

  return false;
} // FSharpType


function getUnionCases(t) {
  if (t.cases != null) {
    return t.cases();
  } else {
    throw new Error("".concat(t.fullname, " is not an F# union type"));
  }
}

function getRecordElements(t) {
  if (t.fields != null) {
    return t.fields();
  } else {
    throw new Error("".concat(t.fullname, " is not an F# record type"));
  }
}

function getTupleElements(t) {
  if (isTuple(t) && t.generics != null) {
    return t.generics;
  } else {
    throw new Error("".concat(t.fullname, " is not a tuple type"));
  }
}

function getFunctionElements(t) {
  if (isFunction(t) && t.generics != null) {
    var gen = t.generics;
    return [gen[0], gen[1]];
  } else {
    throw new Error("".concat(t.fullname, " is not an F# function type"));
  }
}

function isUnion(t) {
  return t instanceof TypeInfo ? t.cases != null : t instanceof _Types.Union;
}

function isRecord(t) {
  return t instanceof TypeInfo ? t.fields != null : t instanceof _Types.Record;
}

function isTuple(t) {
  return t.fullname.startsWith("System.Tuple") && !isArray(t);
} // In .NET this is false for delegates


function isFunction(t) {
  return t.fullname === "Microsoft.FSharp.Core.FSharpFunc`2";
} // FSharpValue


function getUnionFields(v, t) {
  var cases = getUnionCases(t);
  var case_ = cases[v.tag];

  if (case_ == null) {
    throw new Error("Cannot find case ".concat(v.name, " in union type"));
  }

  return [case_, v.fields];
}

function getUnionCaseFields(uci) {
  return uci.fields == null ? [] : uci.fields;
} // This is used as replacement of `FSharpValue.GetRecordFields`
// For `FSharpTypes.GetRecordFields` see `getRecordElements`
// Object.keys returns keys in the order they were added to the object


function getRecordFields(v) {
  return Object.keys(v).map(function (k) {
    return v[k];
  });
}

function getRecordField(v, field) {
  return v[field[0]];
}

function getTupleFields(v) {
  return v;
}

function getTupleField(v, i) {
  return v[i];
}

function makeUnion(uci, values) {
  var expectedLength = (uci.fields || []).length;

  if (values.length !== expectedLength) {
    throw new Error("Expected an array of length ".concat(expectedLength, " but got ").concat(values.length));
  }

  return uci.declaringType.construct != null ? _construct(uci.declaringType.construct, [uci.tag].concat(_toConsumableArray(values))) : {};
}

function makeRecord(t, values) {
  var fields = getRecordElements(t);

  if (fields.length !== values.length) {
    throw new Error("Expected an array of length ".concat(fields.length, " but got ").concat(values.length));
  }

  return t.construct != null ? _construct(t.construct, _toConsumableArray(values)) : fields.reduce(function (obj, _ref5, i) {
    var _ref6 = _slicedToArray(_ref5, 2),
        key = _ref6[0],
        _t = _ref6[1];

    obj[key] = values[i];
    return obj;
  }, {});
}

function makeTuple(values, _t) {
  return values;
}

function makeGenericType(t, generics) {
  return new TypeInfo(t.fullname, generics, t.construct, t.parent, t.fields, t.cases);
}

function createInstance(t, consArgs) {
  // TODO: Check if consArgs length is same as t.construct?
  // (Arg types can still be different)
  if (typeof t.construct === "function") {
    return _construct(t.construct, _toConsumableArray(consArgs !== null && consArgs !== void 0 ? consArgs : []));
  } else {
    throw new Error("Cannot access constructor of ".concat(t.fullname));
  }
}

function getValue(propertyInfo, v) {
  return v[propertyInfo[0]];
} // Fable.Core.Reflection


function assertUnion(x) {
  if (!(x instanceof _Types.Union)) {
    throw new Error("Value is not an F# union type");
  }
}

function getCaseTag(x) {
  assertUnion(x);
  return x.tag;
}

function getCaseName(x) {
  assertUnion(x);
  return x.cases()[x.tag];
}

function getCaseFields(x) {
  assertUnion(x);
  return x.fields;
}
},{"./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/.fable/fable-library.3.0.0/MapUtil.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.keyValueList = keyValueList;
exports.containsValue = containsValue;
exports.tryGetValue = tryGetValue;
exports.addToSet = addToSet;
exports.addToDict = addToDict;
exports.getItemFromDict = getItemFromDict;

var _Util = require("./Util.js");

var _Types = require("./Types.js");

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var CaseRules = {
  None: 0,
  LowerFirst: 1,
  SnakeCase: 2,
  SnakeCaseAllCaps: 3,
  KebabCase: 4
};

function dashify(str, separator) {
  return str.replace(/[a-z]?[A-Z]/g, function (m) {
    return m.length === 1 ? m.toLowerCase() : m.charAt(0) + separator + m.charAt(1).toLowerCase();
  });
}

function changeCase(str, caseRule) {
  switch (caseRule) {
    case CaseRules.LowerFirst:
      return str.charAt(0).toLowerCase() + str.slice(1);

    case CaseRules.SnakeCase:
      return dashify(str, "_");

    case CaseRules.SnakeCaseAllCaps:
      return dashify(str, "_").toUpperCase();

    case CaseRules.KebabCase:
      return dashify(str, "-");

    case CaseRules.None:
    default:
      return str;
  }
}

function keyValueList(fields) {
  var caseRule = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : CaseRules.None;
  var obj = {};
  var definedCaseRule = caseRule;

  function fail(kvPair) {
    throw new Error("Cannot infer key and value of " + String(kvPair));
  }

  function assign(key, caseRule, value) {
    key = changeCase(key, caseRule);
    obj[key] = value;
  }

  var _iterator = _createForOfIteratorHelper(fields),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var kvPair = _step.value;
      var _caseRule = CaseRules.None;

      if (kvPair == null) {
        fail(kvPair);
      } // Deflate unions and use the defined case rule


      if (kvPair instanceof _Types.Union) {
        var name = kvPair.cases()[kvPair.tag];
        kvPair = kvPair.fields.length === 0 ? name : [name].concat(kvPair.fields);
        _caseRule = definedCaseRule;
      }

      if (Array.isArray(kvPair)) {
        switch (kvPair.length) {
          case 0:
            fail(kvPair);
            break;

          case 1:
            assign(kvPair[0], _caseRule, true);
            break;

          case 2:
            var value = kvPair[1];
            assign(kvPair[0], _caseRule, value);
            break;

          default:
            assign(kvPair[0], _caseRule, kvPair.slice(1));
        }
      } else if (typeof kvPair === "string") {
        assign(kvPair, _caseRule, true);
      } else {
        fail(kvPair);
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  return obj;
} // TODO: Move these methods to Map and Set modules


function containsValue(v, map) {
  var _iterator2 = _createForOfIteratorHelper(map),
      _step2;

  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      var kv = _step2.value;

      if ((0, _Util.equals)(v, kv[1])) {
        return true;
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }

  return false;
}

function tryGetValue(map, key, defaultValue) {
  if (map.has(key)) {
    defaultValue.contents = map.get(key);
    return true;
  }

  return false;
}

function addToSet(v, set) {
  if (set.has(v)) {
    return false;
  }

  set.add(v);
  return true;
}

function addToDict(dict, k, v) {
  if (dict.has(k)) {
    throw new Error("An item with the same key has already been added. Key: " + k);
  }

  dict.set(k, v);
}

function getItemFromDict(map, key) {
  if (map.has(key)) {
    return map.get(key);
  } else {
    throw new Error("The given key '".concat(key, "' was not present in the dictionary."));
  }
}
},{"./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js"}],"../JS/.fable/fable-library.3.0.0/MutableMap.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Dictionary$reflection = Dictionary$reflection;
exports.Dictionary_$ctor_6623D9B3 = Dictionary_$ctor_6623D9B3;
exports.Dictionary__TryFind_2B595 = Dictionary__TryFind_2B595;
exports.Dictionary__get_Comparer = Dictionary__get_Comparer;
exports.Dictionary__Clear = Dictionary__Clear;
exports.Dictionary__get_Count = Dictionary__get_Count;
exports.Dictionary__get_Item_2B595 = Dictionary__get_Item_2B595;
exports.Dictionary__set_Item_5BDDA1 = Dictionary__set_Item_5BDDA1;
exports.Dictionary__Add_5BDDA1 = Dictionary__Add_5BDDA1;
exports.Dictionary__ContainsKey_2B595 = Dictionary__ContainsKey_2B595;
exports.Dictionary__Remove_2B595 = Dictionary__Remove_2B595;
exports.Dictionary = void 0;

var _Seq = require("./Seq.js");

var _Util = require("./Util.js");

var _Types = require("./Types.js");

var _Reflection = require("./Reflection.js");

var _MapUtil = require("./MapUtil.js");

var _String = require("./String.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var Dictionary = /*#__PURE__*/function () {
  function Dictionary(pairs, comparer) {
    _classCallCheck(this, Dictionary);

    var this$ = new _Types.FSharpRef(null);
    this.comparer = comparer;
    this$.contents = this;
    this.hashMap = new Map([]);
    this["init@8-1"] = 1;
    var enumerator = (0, _Seq.getEnumerator)(pairs);

    try {
      while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
        var pair = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]();
        Dictionary__Add_5BDDA1(this$.contents, pair[0], pair[1]);
      }
    } finally {
      enumerator.Dispose();
    }
  }

  _createClass(Dictionary, [{
    key: "System.Collections.IEnumerable.GetEnumerator",
    value: function SystemCollectionsIEnumerableGetEnumerator() {
      var this$ = this;
      return (0, _Seq.getEnumerator)(this$);
    }
  }, {
    key: "GetEnumerator",
    value: function GetEnumerator() {
      var this$ = this;
      return (0, _Seq.getEnumerator)((0, _Seq.concat)(this$.hashMap.values()));
    }
  }, {
    key: Symbol.iterator,
    value: function value() {
      return (0, _Seq.toIterator)(this.GetEnumerator());
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Add2B595",
    value: function SystemCollectionsGenericICollection1Add2B595(item) {
      var this$ = this;
      Dictionary__Add_5BDDA1(this$, item[0], item[1]);
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Clear",
    value: function SystemCollectionsGenericICollection1Clear() {
      var this$ = this;
      Dictionary__Clear(this$);
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Contains2B595",
    value: function SystemCollectionsGenericICollection1Contains2B595(item) {
      var this$ = this;
      var matchValue = Dictionary__TryFind_2B595(this$, item[0]);
      var pattern_matching_result;

      if (matchValue != null) {
        if ((0, _Util.equals)(matchValue[1], item[1])) {
          pattern_matching_result = 0;
        } else {
          pattern_matching_result = 1;
        }
      } else {
        pattern_matching_result = 1;
      }

      switch (pattern_matching_result) {
        case 0:
          {
            return true;
          }

        case 1:
          {
            return false;
          }
      }
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.CopyToZ2E171D71",
    value: function SystemCollectionsGenericICollection1CopyToZ2E171D71(array, arrayIndex) {
      var this$ = this;
      (0, _Seq.iterateIndexed)(function (i, e) {
        array[arrayIndex + i] = e;
      }, this$);
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.get_Count",
    value: function SystemCollectionsGenericICollection1Get_Count() {
      var this$ = this;
      return Dictionary__get_Count(this$) | 0;
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.get_IsReadOnly",
    value: function SystemCollectionsGenericICollection1Get_IsReadOnly() {
      return false;
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Remove2B595",
    value: function SystemCollectionsGenericICollection1Remove2B595(item) {
      var this$ = this;
      var matchValue = Dictionary__TryFind_2B595(this$, item[0]);

      if (matchValue != null) {
        if ((0, _Util.equals)(matchValue[1], item[1])) {
          var value = Dictionary__Remove_2B595(this$, item[0]);
          void value;
        }

        return true;
      } else {
        return false;
      }
    }
  }, {
    key: "clear",
    value: function clear() {
      var this$ = this;
      Dictionary__Clear(this$);
    }
  }, {
    key: "delete",
    value: function _delete(k) {
      var this$ = this;
      return Dictionary__Remove_2B595(this$, k);
    }
  }, {
    key: "entries",
    value: function entries() {
      var this$ = this;
      return (0, _Seq.map)(function (p) {
        return [p[0], p[1]];
      }, this$);
    }
  }, {
    key: "get",
    value: function get(k) {
      var this$ = this;
      return Dictionary__get_Item_2B595(this$, k);
    }
  }, {
    key: "has",
    value: function has(k) {
      var this$ = this;
      return Dictionary__ContainsKey_2B595(this$, k);
    }
  }, {
    key: "keys",
    value: function keys() {
      var this$ = this;
      return (0, _Seq.map)(function (p) {
        return p[0];
      }, this$);
    }
  }, {
    key: "set",
    value: function set(k, v) {
      var this$ = this;
      Dictionary__set_Item_5BDDA1(this$, k, v);
      return this$;
    }
  }, {
    key: "values",
    value: function values() {
      var this$ = this;
      return (0, _Seq.map)(function (p) {
        return p[1];
      }, this$);
    }
  }, {
    key: "forEach",
    value: function forEach(f, thisArg) {
      var this$ = this;
      (0, _Seq.iterate)(function (p) {
        f(p[1], p[0], this$);
      }, this$);
    }
  }, {
    key: Symbol.toStringTag,
    get: function get() {
      return "Dictionary";
    }
  }, {
    key: "size",
    get: function get() {
      var this$ = this;
      return Dictionary__get_Count(this$) | 0;
    }
  }]);

  return Dictionary;
}();

exports.Dictionary = Dictionary;

function Dictionary$reflection(gen0, gen1) {
  return (0, _Reflection.class_type)("Fable.Collections.Dictionary", [gen0, gen1], Dictionary);
}

function Dictionary_$ctor_6623D9B3(pairs, comparer) {
  return new Dictionary(pairs, comparer);
}

function Dictionary__TryFindIndex_2B595(this$, k) {
  var h = this$.comparer.GetHashCode(k) | 0;
  var matchValue;
  var outArg = null;
  matchValue = [(0, _MapUtil.tryGetValue)(this$.hashMap, h, new _Types.FSharpRef(function () {
    return outArg;
  }, function (v) {
    outArg = v;
  })), outArg];

  if (matchValue[0]) {
    return [true, h, matchValue[1].findIndex(function (pair) {
      return this$.comparer.Equals(k, pair[0]);
    })];
  } else {
    return [false, h, -1];
  }
}

function Dictionary__TryFind_2B595(this$, k) {
  var matchValue = Dictionary__TryFindIndex_2B595(this$, k);
  var pattern_matching_result;

  if (matchValue[0]) {
    if (matchValue[2] > -1) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 1;
    }
  } else {
    pattern_matching_result = 1;
  }

  switch (pattern_matching_result) {
    case 0:
      {
        return (0, _MapUtil.getItemFromDict)(this$.hashMap, matchValue[1])[matchValue[2]];
      }

    case 1:
      {
        return void 0;
      }
  }
}

function Dictionary__get_Comparer(this$) {
  return this$.comparer;
}

function Dictionary__Clear(this$) {
  this$.hashMap.clear();
}

function Dictionary__get_Count(this$) {
  return (0, _Seq.sumBy)(function (pairs) {
    return pairs.length;
  }, this$.hashMap.values(), {
    GetZero: function GetZero() {
      return 0;
    },
    Add: function Add(x, y) {
      return x + y;
    }
  });
}

function Dictionary__get_Item_2B595(this$, k) {
  var matchValue = Dictionary__TryFind_2B595(this$, k);

  if (matchValue != null) {
    return matchValue[1];
  } else {
    throw new Error("The item was not found in collection");
  }
}

function Dictionary__set_Item_5BDDA1(this$, k, v) {
  var matchValue = Dictionary__TryFindIndex_2B595(this$, k);
  var pattern_matching_result;

  if (matchValue[0]) {
    if (matchValue[2] > -1) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 1;
    }
  } else {
    pattern_matching_result = 1;
  }

  switch (pattern_matching_result) {
    case 0:
      {
        (0, _MapUtil.getItemFromDict)(this$.hashMap, matchValue[1])[matchValue[2]] = [k, v];
        break;
      }

    case 1:
      {
        if (matchValue[0]) {
          var value = void (0, _MapUtil.getItemFromDict)(this$.hashMap, matchValue[1]).push([k, v]);
          void undefined;
        } else {
          this$.hashMap.set(matchValue[1], [[k, v]]);
        }

        break;
      }
  }
}

function Dictionary__Add_5BDDA1(this$, k, v) {
  var matchValue = Dictionary__TryFindIndex_2B595(this$, k);
  var pattern_matching_result;

  if (matchValue[0]) {
    if (matchValue[2] > -1) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 1;
    }
  } else {
    pattern_matching_result = 1;
  }

  switch (pattern_matching_result) {
    case 0:
      {
        var msg = (0, _String.format)("An item with the same key has already been added. Key: {0}", k);
        throw new Error(msg);
        break;
      }

    case 1:
      {
        if (matchValue[0]) {
          var value = void (0, _MapUtil.getItemFromDict)(this$.hashMap, matchValue[1]).push([k, v]);
          void undefined;
        } else {
          this$.hashMap.set(matchValue[1], [[k, v]]);
        }

        break;
      }
  }
}

function Dictionary__ContainsKey_2B595(this$, k) {
  var matchValue = Dictionary__TryFindIndex_2B595(this$, k);
  var pattern_matching_result;

  if (matchValue[0]) {
    if (matchValue[2] > -1) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 1;
    }
  } else {
    pattern_matching_result = 1;
  }

  switch (pattern_matching_result) {
    case 0:
      {
        return true;
      }

    case 1:
      {
        return false;
      }
  }
}

function Dictionary__Remove_2B595(this$, k) {
  var matchValue = Dictionary__TryFindIndex_2B595(this$, k);
  var pattern_matching_result;

  if (matchValue[0]) {
    if (matchValue[2] > -1) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 1;
    }
  } else {
    pattern_matching_result = 1;
  }

  switch (pattern_matching_result) {
    case 0:
      {
        (0, _MapUtil.getItemFromDict)(this$.hashMap, matchValue[1]).splice(matchValue[2], 1);
        return true;
      }

    case 1:
      {
        return false;
      }
  }
}
},{"./Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","./Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./MapUtil.js":"../JS/.fable/fable-library.3.0.0/MapUtil.js","./String.js":"../JS/.fable/fable-library.3.0.0/String.js"}],"../JS/.fable/fable-library.3.0.0/MutableSet.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.HashSet$reflection = HashSet$reflection;
exports.HashSet_$ctor_Z6150332D = HashSet_$ctor_Z6150332D;
exports.HashSet__get_Comparer = HashSet__get_Comparer;
exports.HashSet__Clear = HashSet__Clear;
exports.HashSet__get_Count = HashSet__get_Count;
exports.HashSet__Add_2B595 = HashSet__Add_2B595;
exports.HashSet__Contains_2B595 = HashSet__Contains_2B595;
exports.HashSet__Remove_2B595 = HashSet__Remove_2B595;
exports.HashSet = void 0;

var _Seq = require("./Seq.js");

var _Types = require("./Types.js");

var _Reflection = require("./Reflection.js");

var _MapUtil = require("./MapUtil.js");

var _Option = require("./Option.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var HashSet = /*#__PURE__*/function () {
  function HashSet(items, comparer) {
    _classCallCheck(this, HashSet);

    var this$ = new _Types.FSharpRef(null);
    this.comparer = comparer;
    this$.contents = this;
    this.hashMap = new Map([]);
    this["init@8-2"] = 1;
    var enumerator = (0, _Seq.getEnumerator)(items);

    try {
      while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
        var value = HashSet__Add_2B595(this$.contents, enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]());
        void value;
      }
    } finally {
      enumerator.Dispose();
    }
  }

  _createClass(HashSet, [{
    key: "System.Collections.IEnumerable.GetEnumerator",
    value: function SystemCollectionsIEnumerableGetEnumerator() {
      var this$ = this;
      return (0, _Seq.getEnumerator)(this$);
    }
  }, {
    key: "GetEnumerator",
    value: function GetEnumerator() {
      var this$ = this;
      return (0, _Seq.getEnumerator)((0, _Seq.concat)(this$.hashMap.values()));
    }
  }, {
    key: Symbol.iterator,
    value: function value() {
      return (0, _Seq.toIterator)(this.GetEnumerator());
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Add2B595",
    value: function SystemCollectionsGenericICollection1Add2B595(item) {
      var this$ = this;
      var value = HashSet__Add_2B595(this$, item);
      void value;
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Clear",
    value: function SystemCollectionsGenericICollection1Clear() {
      var this$ = this;
      HashSet__Clear(this$);
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Contains2B595",
    value: function SystemCollectionsGenericICollection1Contains2B595(item) {
      var this$ = this;
      return HashSet__Contains_2B595(this$, item);
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.CopyToZ2E171D71",
    value: function SystemCollectionsGenericICollection1CopyToZ2E171D71(array, arrayIndex) {
      var this$ = this;
      (0, _Seq.iterateIndexed)(function (i, e) {
        array[arrayIndex + i] = e;
      }, this$);
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.get_Count",
    value: function SystemCollectionsGenericICollection1Get_Count() {
      var this$ = this;
      return HashSet__get_Count(this$) | 0;
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.get_IsReadOnly",
    value: function SystemCollectionsGenericICollection1Get_IsReadOnly() {
      return false;
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Remove2B595",
    value: function SystemCollectionsGenericICollection1Remove2B595(item) {
      var this$ = this;
      return HashSet__Remove_2B595(this$, item);
    }
  }, {
    key: "add",
    value: function add(k) {
      var this$ = this;
      var value = HashSet__Add_2B595(this$, k);
      void value;
      return this$;
    }
  }, {
    key: "clear",
    value: function clear() {
      var this$ = this;
      HashSet__Clear(this$);
    }
  }, {
    key: "delete",
    value: function _delete(k) {
      var this$ = this;
      return HashSet__Remove_2B595(this$, k);
    }
  }, {
    key: "has",
    value: function has(k) {
      var this$ = this;
      return HashSet__Contains_2B595(this$, k);
    }
  }, {
    key: "keys",
    value: function keys() {
      var this$ = this;
      return (0, _Seq.map)(function (x) {
        return x;
      }, this$);
    }
  }, {
    key: "values",
    value: function values() {
      var this$ = this;
      return (0, _Seq.map)(function (x) {
        return x;
      }, this$);
    }
  }, {
    key: "entries",
    value: function entries() {
      var this$ = this;
      return (0, _Seq.map)(function (v) {
        return [v, v];
      }, this$);
    }
  }, {
    key: "forEach",
    value: function forEach(f, thisArg) {
      var this$ = this;
      (0, _Seq.iterate)(function (x) {
        f(x, x, this$);
      }, this$);
    }
  }, {
    key: Symbol.toStringTag,
    get: function get() {
      return "HashSet";
    }
  }, {
    key: "size",
    get: function get() {
      var this$ = this;
      return HashSet__get_Count(this$) | 0;
    }
  }]);

  return HashSet;
}();

exports.HashSet = HashSet;

function HashSet$reflection(gen0) {
  return (0, _Reflection.class_type)("Fable.Collections.HashSet", [gen0], HashSet);
}

function HashSet_$ctor_Z6150332D(items, comparer) {
  return new HashSet(items, comparer);
}

function HashSet__TryFindIndex_2B595(this$, k) {
  var h = this$.comparer.GetHashCode(k) | 0;
  var matchValue;
  var outArg = null;
  matchValue = [(0, _MapUtil.tryGetValue)(this$.hashMap, h, new _Types.FSharpRef(function () {
    return outArg;
  }, function (v) {
    outArg = v;
  })), outArg];

  if (matchValue[0]) {
    return [true, h, matchValue[1].findIndex(function (v_1) {
      return this$.comparer.Equals(k, v_1);
    })];
  } else {
    return [false, h, -1];
  }
}

function HashSet__TryFind_2B595(this$, k) {
  var matchValue = HashSet__TryFindIndex_2B595(this$, k);
  var pattern_matching_result;

  if (matchValue[0]) {
    if (matchValue[2] > -1) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 1;
    }
  } else {
    pattern_matching_result = 1;
  }

  switch (pattern_matching_result) {
    case 0:
      {
        return (0, _Option.some)((0, _MapUtil.getItemFromDict)(this$.hashMap, matchValue[1])[matchValue[2]]);
      }

    case 1:
      {
        return void 0;
      }
  }
}

function HashSet__get_Comparer(this$) {
  return this$.comparer;
}

function HashSet__Clear(this$) {
  this$.hashMap.clear();
}

function HashSet__get_Count(this$) {
  return (0, _Seq.sumBy)(function (pairs) {
    return pairs.length;
  }, this$.hashMap.values(), {
    GetZero: function GetZero() {
      return 0;
    },
    Add: function Add(x, y) {
      return x + y;
    }
  });
}

function HashSet__Add_2B595(this$, k) {
  var matchValue = HashSet__TryFindIndex_2B595(this$, k);
  var pattern_matching_result;

  if (matchValue[0]) {
    if (matchValue[2] > -1) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 1;
    }
  } else {
    pattern_matching_result = 1;
  }

  switch (pattern_matching_result) {
    case 0:
      {
        return false;
      }

    case 1:
      {
        if (matchValue[0]) {
          var value = void (0, _MapUtil.getItemFromDict)(this$.hashMap, matchValue[1]).push(k);
          void undefined;
          return true;
        } else {
          this$.hashMap.set(matchValue[1], [k]);
          return true;
        }
      }
  }
}

function HashSet__Contains_2B595(this$, k) {
  var matchValue = HashSet__TryFindIndex_2B595(this$, k);
  var pattern_matching_result;

  if (matchValue[0]) {
    if (matchValue[2] > -1) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 1;
    }
  } else {
    pattern_matching_result = 1;
  }

  switch (pattern_matching_result) {
    case 0:
      {
        return true;
      }

    case 1:
      {
        return false;
      }
  }
}

function HashSet__Remove_2B595(this$, k) {
  var matchValue = HashSet__TryFindIndex_2B595(this$, k);
  var pattern_matching_result;

  if (matchValue[0]) {
    if (matchValue[2] > -1) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 1;
    }
  } else {
    pattern_matching_result = 1;
  }

  switch (pattern_matching_result) {
    case 0:
      {
        (0, _MapUtil.getItemFromDict)(this$.hashMap, matchValue[1]).splice(matchValue[2], 1);
        return true;
      }

    case 1:
      {
        return false;
      }
  }
}
},{"./Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","./Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./MapUtil.js":"../JS/.fable/fable-library.3.0.0/MapUtil.js","./Option.js":"../JS/.fable/fable-library.3.0.0/Option.js"}],"../JS/.fable/fable-library.3.0.0/Array.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.append = append;
exports.filter = filter;
exports.fill = fill;
exports.getSubArray = getSubArray;
exports.last = last;
exports.tryLast = tryLast;
exports.mapIndexed = mapIndexed;
exports.map = map;
exports.mapIndexed2 = mapIndexed2;
exports.map2 = map2;
exports.mapIndexed3 = mapIndexed3;
exports.map3 = map3;
exports.mapFold = mapFold;
exports.mapFoldBack = mapFoldBack;
exports.indexed = indexed;
exports.truncate = truncate;
exports.concat = concat;
exports.collect = collect;
exports.countBy = countBy;
exports.distinctBy = distinctBy;
exports.distinct = distinct;
exports.where = where;
exports.contains = contains;
exports.except = except;
exports.groupBy = groupBy;
exports.empty = empty;
exports.singleton = singleton;
exports.initialize = initialize;
exports.pairwise = pairwise;
exports.replicate = replicate;
exports.copy = copy;
exports.reverse = reverse;
exports.scan = scan;
exports.scanBack = scanBack;
exports.skip = skip;
exports.skipWhile = skipWhile;
exports.take = take;
exports.takeWhile = takeWhile;
exports.addInPlace = addInPlace;
exports.addRangeInPlace = addRangeInPlace;
exports.removeInPlace = removeInPlace;
exports.removeAllInPlace = removeAllInPlace;
exports.copyTo = copyTo;
exports.indexOf = indexOf;
exports.partition = partition;
exports.find = find;
exports.tryFind = tryFind;
exports.findIndex = findIndex;
exports.tryFindIndex = tryFindIndex;
exports.pick = pick;
exports.tryPick = tryPick;
exports.findBack = findBack;
exports.tryFindBack = tryFindBack;
exports.findLastIndex = findLastIndex;
exports.findIndexBack = findIndexBack;
exports.tryFindIndexBack = tryFindIndexBack;
exports.choose = choose;
exports.foldIndexed = foldIndexed;
exports.fold = fold;
exports.iterate = iterate;
exports.iterateIndexed = iterateIndexed;
exports.iterate2 = iterate2;
exports.iterateIndexed2 = iterateIndexed2;
exports.isEmpty = isEmpty;
exports.forAll = forAll;
exports.permute = permute;
exports.setSlice = setSlice;
exports.sortInPlaceBy = sortInPlaceBy;
exports.sortInPlace = sortInPlace;
exports.sort = sort;
exports.sortBy = sortBy;
exports.sortDescending = sortDescending;
exports.sortByDescending = sortByDescending;
exports.sortWith = sortWith;
exports.unfold = unfold;
exports.unzip = unzip;
exports.unzip3 = unzip3;
exports.zip = zip;
exports.zip3 = zip3;
exports.chunkBySize = chunkBySize;
exports.splitAt = splitAt;
exports.compareWith = compareWith;
exports.equalsWith = equalsWith;
exports.exactlyOne = exactlyOne;
exports.head = head;
exports.tryHead = tryHead;
exports.tail = tail;
exports.item = item;
exports.tryItem = tryItem;
exports.foldBackIndexed = foldBackIndexed;
exports.foldBack = foldBack;
exports.foldIndexed2 = foldIndexed2;
exports.fold2 = fold2;
exports.foldBackIndexed2 = foldBackIndexed2;
exports.foldBack2 = foldBack2;
exports.reduce = reduce;
exports.reduceBack = reduceBack;
exports.forAll2 = forAll2;
exports.existsOffset = existsOffset;
exports.exists = exists;
exports.existsOffset2 = existsOffset2;
exports.exists2 = exists2;
exports.sum = sum;
exports.sumBy = sumBy;
exports.maxBy = maxBy;
exports.max = max;
exports.minBy = minBy;
exports.min = min;
exports.average = average;
exports.averageBy = averageBy;
exports.windowed = windowed;
exports.splitInto = splitInto;
exports.transpose = transpose;

var _Option = require("./Option.js");

var _Util = require("./Util.js");

var _MutableMap = require("./MutableMap.js");

var _MapUtil = require("./MapUtil.js");

var _Types = require("./Types.js");

var _MutableSet = require("./MutableSet.js");

var _Seq = require("./Seq.js");

function indexNotFound() {
  throw new Error("An index satisfying the predicate was not found in the collection.");
}

function differentLengths() {
  throw new Error("Arrays had different lengths");
}

function append(array1, array2, cons) {
  var len1 = array1.length | 0;
  var len2 = array2.length | 0;
  var newArray = new (cons || Array)(len1 + len2);

  for (var i = 0; i <= len1 - 1; i++) {
    newArray[i] = array1[i];
  }

  for (var i_1 = 0; i_1 <= len2 - 1; i_1++) {
    newArray[i_1 + len1] = array2[i_1];
  }

  return newArray;
}

function filter(predicate, array) {
  return array.filter(predicate);
}

function fill(target, targetIndex, count, value) {
  var start = targetIndex | 0;
  return target.fill(value, start, start + count);
}

function getSubArray(array, start, count) {
  var start_1 = start | 0;
  return array.slice(start_1, start_1 + count);
}

function last(array) {
  if (array.length === 0) {
    throw new Error("The input array was empty\\nParameter name: array");
  }

  return array[array.length - 1];
}

function tryLast(array) {
  if (array.length === 0) {
    return void 0;
  } else {
    return (0, _Option.some)(array[array.length - 1]);
  }
}

function mapIndexed(f, source, cons) {
  var len = source.length | 0;
  var target = new (cons || Array)(len);

  for (var i = 0; i <= len - 1; i++) {
    target[i] = f(i, source[i]);
  }

  return target;
}

function map(f, source, cons) {
  var len = source.length | 0;
  var target = new (cons || Array)(len);

  for (var i = 0; i <= len - 1; i++) {
    target[i] = f(source[i]);
  }

  return target;
}

function mapIndexed2(f, source1, source2, cons) {
  if (source1.length !== source2.length) {
    throw new Error("Arrays had different lengths");
  }

  var result = new (cons || Array)(source1.length);

  for (var i = 0; i <= source1.length - 1; i++) {
    result[i] = f(i, source1[i], source2[i]);
  }

  return result;
}

function map2(f, source1, source2, cons) {
  if (source1.length !== source2.length) {
    throw new Error("Arrays had different lengths");
  }

  var result = new (cons || Array)(source1.length);

  for (var i = 0; i <= source1.length - 1; i++) {
    result[i] = f(source1[i], source2[i]);
  }

  return result;
}

function mapIndexed3(f, source1, source2, source3, cons) {
  if (source1.length !== source2.length ? true : source2.length !== source3.length) {
    throw new Error("Arrays had different lengths");
  }

  var result = new (cons || Array)(source1.length);

  for (var i = 0; i <= source1.length - 1; i++) {
    result[i] = f(i, source1[i], source2[i], source3[i]);
  }

  return result;
}

function map3(f, source1, source2, source3, cons) {
  if (source1.length !== source2.length ? true : source2.length !== source3.length) {
    throw new Error("Arrays had different lengths");
  }

  var result = new (cons || Array)(source1.length);

  for (var i = 0; i <= source1.length - 1; i++) {
    result[i] = f(source1[i], source2[i], source3[i]);
  }

  return result;
}

function mapFold(mapping, state, array, cons) {
  var matchValue = array.length | 0;

  if (matchValue === 0) {
    return [[], state];
  } else {
    var acc = state;
    var res = new (cons || Array)(matchValue);

    for (var i = 0; i <= array.length - 1; i++) {
      var patternInput = mapping(acc, array[i]);
      res[i] = patternInput[0];
      acc = patternInput[1];
    }

    return [res, acc];
  }
}

function mapFoldBack(mapping, array, state, cons) {
  var matchValue = array.length | 0;

  if (matchValue === 0) {
    return [[], state];
  } else {
    var acc = state;
    var res = new (cons || Array)(matchValue);

    for (var i = array.length - 1; i >= 0; i--) {
      var patternInput = mapping(array[i], acc);
      res[i] = patternInput[0];
      acc = patternInput[1];
    }

    return [res, acc];
  }
}

function indexed(source) {
  var len = source.length | 0;
  var target = new Array(len);

  for (var i = 0; i <= len - 1; i++) {
    target[i] = [i, source[i]];
  }

  return target;
}

function truncate(count, array) {
  var count_1 = (0, _Util.max)(_Util.comparePrimitives, 0, count) | 0;
  var start = 0;
  return array.slice(start, start + count_1);
}

function concat(arrays, cons) {
  var arrays_1 = Array.isArray(arrays) ? arrays : Array.from(arrays);
  var matchValue = arrays_1.length | 0;

  switch (matchValue) {
    case 0:
      {
        return new (cons || Array)(0);
      }

    case 1:
      {
        return arrays_1[0];
      }

    default:
      {
        var totalIdx = 0;
        var totalLength = 0;

        for (var idx = 0; idx <= arrays_1.length - 1; idx++) {
          var arr_1 = arrays_1[idx];
          totalLength = totalLength + arr_1.length;
        }

        var result = new (cons || Array)(totalLength);

        for (var idx_1 = 0; idx_1 <= arrays_1.length - 1; idx_1++) {
          var arr_2 = arrays_1[idx_1];

          for (var j = 0; j <= arr_2.length - 1; j++) {
            result[totalIdx] = arr_2[j];
            totalIdx = totalIdx + 1;
          }
        }

        return result;
      }
  }
}

function collect(mapping, array, cons) {
  return concat(map(mapping, array, null), cons);
}

function countBy(projection, array, eq) {
  var dict = new _MutableMap.Dictionary([], eq);
  var keys = [];

  var _loop = function _loop(idx) {
    var key = projection(array[idx]);
    var matchValue = void 0;
    var outArg = 0;
    matchValue = [(0, _MapUtil.tryGetValue)(dict, key, new _Types.FSharpRef(function () {
      return outArg;
    }, function (v) {
      outArg = v;
    })), outArg];

    if (matchValue[0]) {
      dict.set(key, matchValue[1] + 1);
    } else {
      dict.set(key, 1);
      var value_1 = keys.push(key);
      void value_1;
    }
  };

  for (var idx = 0; idx <= array.length - 1; idx++) {
    _loop(idx);
  }

  return map(function (key_1) {
    return [key_1, (0, _MapUtil.getItemFromDict)(dict, key_1)];
  }, keys, null);
}

function distinctBy(projection, array, eq) {
  var hashSet = new _MutableSet.HashSet([], eq);
  return filter(function (arg) {
    return (0, _MapUtil.addToSet)(projection(arg), hashSet);
  }, array);
}

function distinct(array, eq) {
  return distinctBy(function (x) {
    return x;
  }, array, eq);
}

function where(predicate, array) {
  return array.filter(predicate);
}

function contains(value, array, eq) {
  var loop = function loop(i_mut) {
    loop: while (true) {
      var i = i_mut;

      if (i >= array.length) {
        return false;
      } else if (eq.Equals(value, array[i])) {
        return true;
      } else {
        i_mut = i + 1;
        continue loop;
      }

      break;
    }
  };

  return loop(0);
}

function except(itemsToExclude, array, eq) {
  if (array.length === 0) {
    return array;
  } else {
    var cached = new _MutableSet.HashSet(itemsToExclude, eq);
    return array.filter(function (arg00) {
      return (0, _MapUtil.addToSet)(arg00, cached);
    });
  }
}

function groupBy(projection, array, eq) {
  var dict = new _MutableMap.Dictionary([], eq);
  var keys = [];

  var _loop2 = function _loop2(idx) {
    var v = array[idx];
    var key = projection(v);
    var matchValue = void 0;
    var outArg = null;
    matchValue = [(0, _MapUtil.tryGetValue)(dict, key, new _Types.FSharpRef(function () {
      return outArg;
    }, function (v_1) {
      outArg = v_1;
    })), outArg];

    if (matchValue[0]) {
      void matchValue[1].push(v);
    } else {
      (0, _MapUtil.addToDict)(dict, key, [v]);
      var value = keys.push(key);
      void value;
    }
  };

  for (var idx = 0; idx <= array.length - 1; idx++) {
    _loop2(idx);
  }

  return map(function (key_1) {
    return [key_1, Array.from((0, _MapUtil.getItemFromDict)(dict, key_1))];
  }, keys, null);
}

function empty(cons) {
  return new (cons || Array)(0);
}

function singleton(value, cons) {
  var ar = new (cons || Array)(1);
  ar[0] = value;
  return ar;
}

function initialize(count, initializer, cons) {
  if (count < 0) {
    throw new Error("The input must be non-negative\\nParameter name: count");
  }

  var result = new (cons || Array)(count);

  for (var i = 0; i <= count - 1; i++) {
    result[i] = initializer(i);
  }

  return result;
}

function pairwise(array) {
  if (array.length < 2) {
    return [];
  } else {
    var count = array.length - 1 | 0;
    var result = new Array(count);

    for (var i = 0; i <= count - 1; i++) {
      result[i] = [array[i], array[i + 1]];
    }

    return result;
  }
}

function replicate(count, initial, cons) {
  if (count < 0) {
    throw new Error("The input must be non-negative\\nParameter name: count");
  }

  var result = new (cons || Array)(count);

  for (var i = 0; i <= result.length - 1; i++) {
    result[i] = initial;
  }

  return result;
}

function copy(array) {
  return array.slice();
}

function reverse(array) {
  var array_2 = array.slice();
  return array_2.reverse();
}

function scan(folder, state, array, cons) {
  var res = new (cons || Array)(array.length + 1);
  res[0] = state;

  for (var i = 0; i <= array.length - 1; i++) {
    res[i + 1] = folder(res[i], array[i]);
  }

  return res;
}

function scanBack(folder, array, state, cons) {
  var res = new (cons || Array)(array.length + 1);
  res[array.length] = state;

  for (var i = array.length - 1; i >= 0; i--) {
    res[i] = folder(array[i], res[i + 1]);
  }

  return res;
}

function skip(count, array, cons) {
  if (count > array.length) {
    throw new Error("count is greater than array length\\nParameter name: count");
  }

  if (count === array.length) {
    return new (cons || Array)(0);
  } else {
    var count_1 = (count < 0 ? 0 : count) | 0;
    return array.slice(count_1);
  }
}

function skipWhile(predicate, array, cons) {
  var count = 0;

  while (count < array.length ? predicate(array[count]) : false) {
    count = count + 1;
  }

  if (count === array.length) {
    return new (cons || Array)(0);
  } else {
    var count_1 = count | 0;
    return array.slice(count_1);
  }
}

function take(count, array, cons) {
  if (count < 0) {
    throw new Error("The input must be non-negative\\nParameter name: count");
  }

  if (count > array.length) {
    throw new Error("count is greater than array length\\nParameter name: count");
  }

  if (count === 0) {
    return new (cons || Array)(0);
  } else {
    var start = 0;
    return array.slice(start, start + count);
  }
}

function takeWhile(predicate, array, cons) {
  var count = 0;

  while (count < array.length ? predicate(array[count]) : false) {
    count = count + 1;
  }

  if (count === 0) {
    return new (cons || Array)(0);
  } else {
    var start = 0;
    var count_1 = count | 0;
    return array.slice(start, start + count_1);
  }
}

function addInPlace(x, array) {
  var value = array.push(x);
  void value;
}

function addRangeInPlace(range, array) {
  (0, _Seq.iterate)(function (x) {
    var value = array.push(x);
    void value;
  }, range);
}

function removeInPlace(item_1, array) {
  var i = array.indexOf(item_1, 0);

  if (i > -1) {
    var value = array.splice(i, 1);
    void value;
    return true;
  } else {
    return false;
  }
}

function removeAllInPlace(predicate, array) {
  var countRemoveAll = function countRemoveAll(count) {
    var i = array.findIndex(predicate);

    if (i > -1) {
      var value = array.splice(i, 1);
      void value;
      return countRemoveAll(count) + 1 | 0;
    } else {
      return count | 0;
    }
  };

  return countRemoveAll(0) | 0;
}

function copyTo(source, sourceIndex, target, targetIndex, count) {
  var diff = targetIndex - sourceIndex | 0;

  for (var i = sourceIndex; i <= sourceIndex + count - 1; i++) {
    target[i + diff] = source[i];
  }
}

function indexOf(array, item_1, start, count) {
  var start_1 = (0, _Option.defaultArg)(start, 0) | 0;
  var i = array.indexOf(item_1, start_1);

  if (count != null ? i >= start_1 + count : false) {
    return -1;
  } else {
    return i | 0;
  }
}

function partition(f, source, cons) {
  var len = source.length | 0;
  var res1 = new (cons || Array)(len);
  var res2 = new (cons || Array)(len);
  var iTrue = 0;
  var iFalse = 0;

  for (var i = 0; i <= len - 1; i++) {
    if (f(source[i])) {
      res1[iTrue] = source[i];
      iTrue = iTrue + 1;
    } else {
      res2[iFalse] = source[i];
      iFalse = iFalse + 1;
    }
  }

  return [truncate(iTrue, res1), truncate(iFalse, res2)];
}

function find(predicate, array) {
  var matchValue = array.find(predicate);

  if (matchValue == null) {
    return indexNotFound();
  } else {
    return (0, _Option.value)(matchValue);
  }
}

function tryFind(predicate, array) {
  return array.find(predicate);
}

function findIndex(predicate, array) {
  var matchValue = array.findIndex(predicate);

  if (matchValue > -1) {
    return matchValue | 0;
  } else {
    return indexNotFound() | 0;
  }
}

function tryFindIndex(predicate, array) {
  var matchValue = array.findIndex(predicate);

  if (matchValue > -1) {
    return matchValue;
  } else {
    return void 0;
  }
}

function pick(chooser, array) {
  var loop = function loop(i_mut) {
    loop: while (true) {
      var i = i_mut;

      if (i >= array.length) {
        return indexNotFound();
      } else {
        var matchValue = chooser(array[i]);

        if (matchValue != null) {
          return (0, _Option.value)(matchValue);
        } else {
          i_mut = i + 1;
          continue loop;
        }
      }

      break;
    }
  };

  return loop(0);
}

function tryPick(chooser, array) {
  var loop = function loop(i_mut) {
    loop: while (true) {
      var i = i_mut;

      if (i >= array.length) {
        return void 0;
      } else {
        var matchValue = chooser(array[i]);

        if (matchValue == null) {
          i_mut = i + 1;
          continue loop;
        } else {
          return matchValue;
        }
      }

      break;
    }
  };

  return loop(0);
}

function findBack(predicate, array) {
  var loop = function loop(i_mut) {
    loop: while (true) {
      var i = i_mut;

      if (i < 0) {
        return indexNotFound();
      } else if (predicate(array[i])) {
        return array[i];
      } else {
        i_mut = i - 1;
        continue loop;
      }

      break;
    }
  };

  return loop(array.length - 1);
}

function tryFindBack(predicate, array) {
  var loop = function loop(i_mut) {
    loop: while (true) {
      var i = i_mut;

      if (i < 0) {
        return void 0;
      } else if (predicate(array[i])) {
        return (0, _Option.some)(array[i]);
      } else {
        i_mut = i - 1;
        continue loop;
      }

      break;
    }
  };

  return loop(array.length - 1);
}

function findLastIndex(predicate, array) {
  var loop = function loop(i_mut) {
    loop: while (true) {
      var i = i_mut;

      if (i < 0) {
        return -1;
      } else if (predicate(array[i])) {
        return i | 0;
      } else {
        i_mut = i - 1;
        continue loop;
      }

      break;
    }
  };

  return loop(array.length - 1) | 0;
}

function findIndexBack(predicate, array) {
  var loop = function loop(i_mut) {
    loop: while (true) {
      var i = i_mut;

      if (i < 0) {
        return indexNotFound() | 0;
      } else if (predicate(array[i])) {
        return i | 0;
      } else {
        i_mut = i - 1;
        continue loop;
      }

      break;
    }
  };

  return loop(array.length - 1) | 0;
}

function tryFindIndexBack(predicate, array) {
  var loop = function loop(i_mut) {
    loop: while (true) {
      var i = i_mut;

      if (i < 0) {
        return void 0;
      } else if (predicate(array[i])) {
        return i;
      } else {
        i_mut = i - 1;
        continue loop;
      }

      break;
    }
  };

  return loop(array.length - 1);
}

function choose(chooser, array, cons) {
  return map(function (x_1) {
    return (0, _Option.value)(chooser(x_1));
  }, array.filter(function (x) {
    return chooser(x) != null;
  }), cons);
}

function foldIndexed(folder, state, array) {
  return array.reduce(function (delegateArg0, delegateArg1, delegateArg2) {
    return folder(delegateArg2, delegateArg0, delegateArg1);
  }, state);
}

function fold(folder, state, array) {
  return array.reduce(folder, state);
}

function iterate(action, array) {
  for (var i = 0; i <= array.length - 1; i++) {
    action(array[i]);
  }
}

function iterateIndexed(action, array) {
  for (var i = 0; i <= array.length - 1; i++) {
    action(i, array[i]);
  }
}

function iterate2(action, array1, array2) {
  if (array1.length !== array2.length) {
    differentLengths();
  }

  for (var i = 0; i <= array1.length - 1; i++) {
    action(array1[i], array2[i]);
  }
}

function iterateIndexed2(action, array1, array2) {
  if (array1.length !== array2.length) {
    differentLengths();
  }

  for (var i = 0; i <= array1.length - 1; i++) {
    action(i, array1[i], array2[i]);
  }
}

function isEmpty(array) {
  return array.length === 0;
}

function forAll(predicate, array) {
  return array.every(predicate);
}

function permute(f, array) {
  var size = array.length | 0;
  var res = array.slice();
  var checkFlags = new Array(size);
  iterateIndexed(function (i, x) {
    var j = f(i) | 0;

    if (j < 0 ? true : j >= size) {
      throw new Error("Not a valid permutation");
    }

    res[j] = x;
    checkFlags[j] = 1;
  }, array);

  if (!checkFlags.every(function (y) {
    return 1 === y;
  })) {
    throw new Error("Not a valid permutation");
  }

  return res;
}

function setSlice(target, lower, upper, source) {
  var lower_1 = (0, _Option.defaultArg)(lower, 0) | 0;
  var upper_1 = (0, _Option.defaultArg)(upper, 0) | 0;
  var length = (upper_1 > 0 ? upper_1 : target.length - 1) - lower_1 | 0;

  for (var i = 0; i <= length; i++) {
    target[i + lower_1] = source[i];
  }
}

function sortInPlaceBy(projection, xs, comparer) {
  xs.sort(function (x, y) {
    return comparer.Compare(projection(x), projection(y));
  });
}

function sortInPlace(xs, comparer) {
  xs.sort(function (x, y) {
    return comparer.Compare(x, y);
  });
}

function sort(xs, comparer) {
  var xs_1 = xs.slice();
  xs_1.sort(function (x, y) {
    return comparer.Compare(x, y);
  });
  return xs_1;
}

function sortBy(projection, xs, comparer) {
  var xs_1 = xs.slice();
  xs_1.sort(function (x, y) {
    return comparer.Compare(projection(x), projection(y));
  });
  return xs_1;
}

function sortDescending(xs, comparer) {
  var xs_1 = xs.slice();
  xs_1.sort(function (x, y) {
    return comparer.Compare(x, y) * -1;
  });
  return xs_1;
}

function sortByDescending(projection, xs, comparer) {
  var xs_1 = xs.slice();
  xs_1.sort(function (x, y) {
    return comparer.Compare(projection(x), projection(y)) * -1;
  });
  return xs_1;
}

function sortWith(comparer, xs) {
  var comparer_1 = comparer;
  var xs_1 = xs.slice();
  xs_1.sort(comparer_1);
  return xs_1;
}

function unfold(generator, state) {
  var res = [];

  var loop = function loop(state_1_mut) {
    loop: while (true) {
      var state_1 = state_1_mut;
      var matchValue = generator(state_1);

      if (matchValue != null) {
        var x = matchValue[0];
        var s = matchValue[1];
        var value = res.push(x);
        void value;
        state_1_mut = s;
        continue loop;
      }

      break;
    }
  };

  loop(state);
  return res;
}

function unzip(array) {
  var len = array.length | 0;
  var res1 = new Array(len);
  var res2 = new Array(len);
  iterateIndexed(function (i, tupledArg) {
    res1[i] = tupledArg[0];
    res2[i] = tupledArg[1];
  }, array);
  return [res1, res2];
}

function unzip3(array) {
  var len = array.length | 0;
  var res1 = new Array(len);
  var res2 = new Array(len);
  var res3 = new Array(len);
  iterateIndexed(function (i, tupledArg) {
    res1[i] = tupledArg[0];
    res2[i] = tupledArg[1];
    res3[i] = tupledArg[2];
  }, array);
  return [res1, res2, res3];
}

function zip(array1, array2) {
  if (array1.length !== array2.length) {
    differentLengths();
  }

  var result = new Array(array1.length);

  for (var i = 0; i <= array1.length - 1; i++) {
    result[i] = [array1[i], array2[i]];
  }

  return result;
}

function zip3(array1, array2, array3) {
  if (array1.length !== array2.length ? true : array2.length !== array3.length) {
    differentLengths();
  }

  var result = new Array(array1.length);

  for (var i = 0; i <= array1.length - 1; i++) {
    result[i] = [array1[i], array2[i], array3[i]];
  }

  return result;
}

function chunkBySize(chunkSize, array) {
  if (chunkSize < 1) {
    throw new Error("The input must be positive.\\nParameter name: size");
  }

  if (array.length === 0) {
    return [[]];
  } else {
    var result = [];

    for (var x = 0; x <= ~~Math.ceil(array.length / chunkSize) - 1; x++) {
      var slice = void 0;
      var start_1 = x * chunkSize | 0;
      slice = array.slice(start_1, start_1 + chunkSize);
      var value = result.push(slice);
      void value;
    }

    return result;
  }
}

function splitAt(index, array) {
  var start;

  if (index < 0) {
    throw new Error("The input must be non-negative\\nParameter name: index");
  }

  if (index > array.length) {
    throw new Error("The input sequence has an insufficient number of elements.\\nParameter name: index");
  }

  return [(start = 0, array.slice(start, start + index)), array.slice(index)];
}

function compareWith(comparer, array1, array2) {
  if (array1 == null) {
    if (array2 == null) {
      return 0;
    } else {
      return -1;
    }
  } else if (array2 == null) {
    return 1;
  } else {
    var i = 0;
    var result = 0;
    var length1 = array1.length | 0;
    var length2 = array2.length | 0;

    if (length1 > length2) {
      return 1;
    } else if (length1 < length2) {
      return -1;
    } else {
      while (i < length1 ? result === 0 : false) {
        result = comparer(array1[i], array2[i]);
        i = i + 1;
      }

      return result | 0;
    }
  }
}

function equalsWith(comparer, array1, array2) {
  return compareWith(_Util.compare, array1, array2) === 0;
}

function exactlyOne(array) {
  if (array.length === 1) {
    return array[0];
  } else if (array.length === 0) {
    throw new Error("The input sequence was empty\\nParameter name: array");
  } else {
    throw new Error("Input array too long\\nParameter name: array");
  }
}

function head(array) {
  if (array.length === 0) {
    throw new Error("The input array was empty\\nParameter name: array");
  } else {
    return array[0];
  }
}

function tryHead(array) {
  if (array.length === 0) {
    return void 0;
  } else {
    return (0, _Option.some)(array[0]);
  }
}

function tail(array) {
  if (array.length === 0) {
    throw new Error("Not enough elements\\nParameter name: array");
  }

  return array.slice(1);
}

function item(index, array) {
  return array[index];
}

function tryItem(index, array) {
  if (index < 0 ? true : index >= array.length) {
    return void 0;
  } else {
    return (0, _Option.some)(array[index]);
  }
}

function foldBackIndexed(folder, array, state) {
  return array.reduceRight(function (delegateArg0, delegateArg1, delegateArg2) {
    return folder(delegateArg2, delegateArg1, delegateArg0);
  }, state);
}

function foldBack(folder, array, state) {
  return array.reduceRight(function (delegateArg0, delegateArg1) {
    return folder(delegateArg1, delegateArg0);
  }, state);
}

function foldIndexed2(folder, state, array1, array2) {
  var acc = state;

  if (array1.length !== array2.length) {
    throw new Error("Arrays have different lengths");
  }

  for (var i = 0; i <= array1.length - 1; i++) {
    acc = folder(i, acc, array1[i], array2[i]);
  }

  return acc;
}

function fold2(folder, state, array1, array2) {
  return foldIndexed2(function (_arg1, acc, x, y) {
    return folder(acc, x, y);
  }, state, array1, array2);
}

function foldBackIndexed2(folder, array1, array2, state) {
  var acc = state;

  if (array1.length !== array2.length) {
    differentLengths();
  }

  var size = array1.length | 0;

  for (var i = 1; i <= size; i++) {
    acc = folder(i - 1, array1[size - i], array2[size - i], acc);
  }

  return acc;
}

function foldBack2(f, array1, array2, state) {
  return foldBackIndexed2(function (_arg1, x, y, acc) {
    return f(x, y, acc);
  }, array1, array2, state);
}

function reduce(reduction, array) {
  if (array.length === 0) {
    throw new Error("The input array was empty");
  }

  var reduction_1 = reduction;
  return array.reduce(reduction_1);
}

function reduceBack(reduction, array) {
  if (array.length === 0) {
    throw new Error("The input array was empty");
  }

  var reduction_1 = reduction;
  return array.reduceRight(reduction_1);
}

function forAll2(predicate, array1, array2) {
  return fold2(function (acc, x, y) {
    return acc ? predicate(x, y) : false;
  }, true, array1, array2);
}

function existsOffset(predicate_mut, array_mut, index_mut) {
  existsOffset: while (true) {
    var predicate = predicate_mut,
        array = array_mut,
        index = index_mut;

    if (index === array.length) {
      return false;
    } else if (predicate(array[index])) {
      return true;
    } else {
      predicate_mut = predicate;
      array_mut = array;
      index_mut = index + 1;
      continue existsOffset;
    }

    break;
  }
}

function exists(predicate, array) {
  return existsOffset(predicate, array, 0);
}

function existsOffset2(predicate_mut, array1_mut, array2_mut, index_mut) {
  existsOffset2: while (true) {
    var predicate = predicate_mut,
        array1 = array1_mut,
        array2 = array2_mut,
        index = index_mut;

    if (index === array1.length) {
      return false;
    } else if (predicate(array1[index], array2[index])) {
      return true;
    } else {
      predicate_mut = predicate;
      array1_mut = array1;
      array2_mut = array2;
      index_mut = index + 1;
      continue existsOffset2;
    }

    break;
  }
}

function exists2(predicate, array1, array2) {
  if (array1.length !== array2.length) {
    differentLengths();
  }

  return existsOffset2(predicate, array1, array2, 0);
}

function sum(array, adder) {
  var acc = adder.GetZero();

  for (var i = 0; i <= array.length - 1; i++) {
    acc = adder.Add(acc, array[i]);
  }

  return acc;
}

function sumBy(projection, array, adder) {
  var acc = adder.GetZero();

  for (var i = 0; i <= array.length - 1; i++) {
    acc = adder.Add(acc, projection(array[i]));
  }

  return acc;
}

function maxBy(projection, xs, comparer) {
  return reduce(function (x, y) {
    return comparer.Compare(projection(y), projection(x)) > 0 ? y : x;
  }, xs);
}

function max(xs, comparer) {
  return reduce(function (x, y) {
    return comparer.Compare(y, x) > 0 ? y : x;
  }, xs);
}

function minBy(projection, xs, comparer) {
  return reduce(function (x, y) {
    return comparer.Compare(projection(y), projection(x)) > 0 ? x : y;
  }, xs);
}

function min(xs, comparer) {
  return reduce(function (x, y) {
    return comparer.Compare(y, x) > 0 ? x : y;
  }, xs);
}

function average(array, averager) {
  if (array.length === 0) {
    throw new Error("The input array was empty\\nParameter name: array");
  }

  var total = averager.GetZero();

  for (var i = 0; i <= array.length - 1; i++) {
    total = averager.Add(total, array[i]);
  }

  return averager.DivideByInt(total, array.length);
}

function averageBy(projection, array, averager) {
  if (array.length === 0) {
    throw new Error("The input array was empty\\nParameter name: array");
  }

  var total = averager.GetZero();

  for (var i = 0; i <= array.length - 1; i++) {
    total = averager.Add(total, projection(array[i]));
  }

  return averager.DivideByInt(total, array.length);
}

function windowed(windowSize, source) {
  if (windowSize <= 0) {
    throw new Error("windowSize must be positive");
  }

  var res;
  var len = (0, _Util.max)(_Util.comparePrimitives, 0, source.length - windowSize) | 0;
  res = new Array(len);

  for (var i = windowSize; i <= source.length; i++) {
    res[i - windowSize] = source.slice(i - windowSize, i - 1 + 1);
  }

  return res;
}

function splitInto(chunks, array) {
  if (chunks < 1) {
    throw new Error("The input must be positive.\\nParameter name: chunks");
  }

  if (array.length === 0) {
    return [[]];
  } else {
    var result = [];
    var chunks_1 = (0, _Util.min)(_Util.comparePrimitives, chunks, array.length) | 0;
    var minChunkSize = ~~(array.length / chunks_1) | 0;
    var chunksWithExtraItem = array.length % chunks_1 | 0;

    for (var i = 0; i <= chunks_1 - 1; i++) {
      var chunkSize = (i < chunksWithExtraItem ? minChunkSize + 1 : minChunkSize) | 0;
      var slice = void 0;
      var start_1 = i * minChunkSize + (0, _Util.min)(_Util.comparePrimitives, chunksWithExtraItem, i) | 0;
      slice = array.slice(start_1, start_1 + chunkSize);
      var value = result.push(slice);
      void value;
    }

    return result;
  }
}

function transpose(arrays, cons) {
  var arrays_1 = Array.isArray(arrays) ? arrays : Array.from(arrays);
  var len = arrays_1.length | 0;

  if (len === 0) {
    return new Array(0);
  } else {
    var lenInner = arrays_1[0].length | 0;

    if (!forAll(function (a) {
      return a.length === lenInner;
    }, arrays_1)) {
      differentLengths();
    }

    var result = new Array(lenInner);

    for (var i = 0; i <= lenInner - 1; i++) {
      result[i] = new (cons || Array)(len);

      for (var j = 0; j <= len - 1; j++) {
        result[i][j] = arrays_1[j][i];
      }
    }

    return result;
  }
}
},{"./Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./MutableMap.js":"../JS/.fable/fable-library.3.0.0/MutableMap.js","./MapUtil.js":"../JS/.fable/fable-library.3.0.0/MapUtil.js","./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","./MutableSet.js":"../JS/.fable/fable-library.3.0.0/MutableSet.js","./Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js"}],"../JS/webgl_data/webgl_data_types.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GlContextAttribute$reflection = GlContextAttribute$reflection;
exports.GlPixelStorage$reflection = GlPixelStorage$reflection;
exports.GlTexturePixels$reflection = GlTexturePixels$reflection;
exports.GlTexturePixels = exports.GlPixelStorage = exports.GlContextAttribute = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var GlContextAttribute = /*#__PURE__*/function (_Union) {
  _inherits(GlContextAttribute, _Union);

  var _super = _createSuper(GlContextAttribute);

  function GlContextAttribute(tag) {
    var _this;

    _classCallCheck(this, GlContextAttribute);

    _this = _super.call(this);
    _this.tag = tag | 0;

    for (var _len = arguments.length, fields = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      fields[_key - 1] = arguments[_key];
    }

    _this.fields = fields;
    return _this;
  }

  _createClass(GlContextAttribute, [{
    key: "cases",
    value: function cases() {
      return ["Alpha", "Desynchronized", "Antialias", "Depth", "FailIfMajorPerformanceCaveat", "PowerPreference", "PremultipliedAlpha", "PreserveDrawingBuffer", "Stencil"];
    }
  }]);

  return GlContextAttribute;
}(_Types.Union);

exports.GlContextAttribute = GlContextAttribute;

function GlContextAttribute$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.DataTypes.GlContextAttribute", [], GlContextAttribute, function () {
    return [[["Item", _Reflection.bool_type]], [["Item", _Reflection.bool_type]], [["Item", _Reflection.bool_type]], [["Item", _Reflection.bool_type]], [["Item", _Reflection.bool_type]], [["Item", _Reflection.string_type]], [["Item", _Reflection.bool_type]], [["Item", _Reflection.bool_type]], [["Item", _Reflection.bool_type]]];
  });
}

var GlPixelStorage = /*#__PURE__*/function (_Union2) {
  _inherits(GlPixelStorage, _Union2);

  var _super2 = _createSuper(GlPixelStorage);

  function GlPixelStorage(tag) {
    var _this2;

    _classCallCheck(this, GlPixelStorage);

    _this2 = _super2.call(this);
    _this2.tag = tag | 0;

    for (var _len2 = arguments.length, fields = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      fields[_key2 - 1] = arguments[_key2];
    }

    _this2.fields = fields;
    return _this2;
  }

  _createClass(GlPixelStorage, [{
    key: "cases",
    value: function cases() {
      return ["PACK_ALIGNMENT", "UNPACK_ALIGNMENT", "UNPACK_FLIP_Y_WEBGL", "UNPACK_PREMULTIPLY_ALPHA_WEBGL", "UNPACK_COLORSPACE_CONVERSION_WEBGL", "PACK_ROW_LENGTH", "PACK_SKIP_PIXELS", "PACK_SKIP_ROWS", "UNPACK_ROW_LENGTH", "UNPACK_IMAGE_HEIGHT", "UNPACK_SKIP_PIXELS", "UNPACK_SKIP_ROWS", "UNPACK_SKIP_IMAGES"];
    }
  }]);

  return GlPixelStorage;
}(_Types.Union);

exports.GlPixelStorage = GlPixelStorage;

function GlPixelStorage$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.DataTypes.GlPixelStorage", [], GlPixelStorage, function () {
    return [[["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlPixelAlign", _Reflection.int32_type, [["ONE", 1], ["TWO", 2], ["FOUR", 4], ["EIGHT", 8]])]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlPixelAlign", _Reflection.int32_type, [["ONE", 1], ["TWO", 2], ["FOUR", 4], ["EIGHT", 8]])]], [], [], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlPixelConversion", _Reflection.int32_type, [["NONE", 0], ["BROWSER_DEFAULT_WEBGL", 37444]])]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]]];
  });
}

var GlTexturePixels = /*#__PURE__*/function (_Union3) {
  _inherits(GlTexturePixels, _Union3);

  var _super3 = _createSuper(GlTexturePixels);

  function GlTexturePixels(tag) {
    var _this3;

    _classCallCheck(this, GlTexturePixels);

    _this3 = _super3.call(this);
    _this3.tag = tag | 0;

    for (var _len3 = arguments.length, fields = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
      fields[_key3 - 1] = arguments[_key3];
    }

    _this3.fields = fields;
    return _this3;
  }

  _createClass(GlTexturePixels, [{
    key: "cases",
    value: function cases() {
      return ["PixelData", "PixelImageData", "PixelHtmlImage", "PixelCanvas", "PixelVideo", "PixelBitmap"];
    }
  }]);

  return GlTexturePixels;
}(_Types.Union);

exports.GlTexturePixels = GlTexturePixels;

function GlTexturePixels$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.DataTypes.GlTexturePixels", [], GlTexturePixels, function () {
    return [[["Item", (0, _Reflection.class_type)("Fable.Core.JS.TypedArray")]], [["Item", (0, _Reflection.class_type)("Browser.Types.ImageData")]], [["Item", (0, _Reflection.class_type)("Browser.Types.HTMLImageElement")]], [["Item", (0, _Reflection.class_type)("Browser.Types.HTMLCanvasElement")]], [["Item", (0, _Reflection.class_type)("Browser.Types.HTMLVideoElement")]], [["Item", (0, _Reflection.class_type)("Wil.Browser.Types.BrowserExtensions.ImageBitmap")]]];
  });
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js"}],"../JS/.fable/fable-library.3.0.0/List.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.empty = empty;
exports.singleton = singleton;
exports.cons = cons;
exports.head = head;
exports.tryHead = tryHead;
exports.tail = tail;
exports.last = last;
exports.tryLast = tryLast;
exports.compareWith = compareWith;
exports.foldIndexedAux = foldIndexedAux;
exports.foldIndexed = foldIndexed;
exports.fold = fold;
exports.reverse = reverse;
exports.foldBack = foldBack;
exports.toSeq = toSeq;
exports.ofSeq = ofSeq;
exports.concat = concat;
exports.foldIndexed2Aux = foldIndexed2Aux;
exports.foldIndexed2 = foldIndexed2;
exports.fold2 = fold2;
exports.foldBack2 = foldBack2;
exports.unfold = unfold;
exports.foldIndexed3Aux = foldIndexed3Aux;
exports.foldIndexed3 = foldIndexed3;
exports.fold3 = fold3;
exports.scan = scan;
exports.scanBack = scanBack;
exports.length = length;
exports.append = append;
exports.collect = collect;
exports.map = map;
exports.mapIndexed = mapIndexed;
exports.indexed = indexed;
exports.map2 = map2;
exports.mapIndexed2 = mapIndexed2;
exports.map3 = map3;
exports.mapIndexed3 = mapIndexed3;
exports.mapFold = mapFold;
exports.mapFoldBack = mapFoldBack;
exports.iterate = iterate;
exports.iterate2 = iterate2;
exports.iterateIndexed = iterateIndexed;
exports.iterateIndexed2 = iterateIndexed2;
exports.ofArrayWithTail = ofArrayWithTail;
exports.ofArray = ofArray;
exports.isEmpty = isEmpty;
exports.tryPickIndexedAux = tryPickIndexedAux;
exports.tryPickIndexed = tryPickIndexed;
exports.tryPick = tryPick;
exports.pick = pick;
exports.tryFindIndexed = tryFindIndexed;
exports.tryFind = tryFind;
exports.findIndexed = findIndexed;
exports.find = find;
exports.findBack = findBack;
exports.tryFindBack = tryFindBack;
exports.tryFindIndex = tryFindIndex;
exports.tryFindIndexBack = tryFindIndexBack;
exports.findIndex = findIndex;
exports.findIndexBack = findIndexBack;
exports.item = item;
exports.tryItem = tryItem;
exports.filter = filter;
exports.partition = partition;
exports.choose = choose;
exports.contains = contains;
exports.except = except;
exports.initialize = initialize;
exports.replicate = replicate;
exports.reduce = reduce;
exports.reduceBack = reduceBack;
exports.forAll = forAll;
exports.forAll2 = forAll2;
exports.exists = exists;
exports.exists2 = exists2;
exports.unzip = unzip;
exports.unzip3 = unzip3;
exports.zip = zip;
exports.zip3 = zip3;
exports.sort = sort;
exports.sortBy = sortBy;
exports.sortDescending = sortDescending;
exports.sortByDescending = sortByDescending;
exports.sortWith = sortWith;
exports.sum = sum;
exports.sumBy = sumBy;
exports.maxBy = maxBy;
exports.max = max;
exports.minBy = minBy;
exports.min = min;
exports.average = average;
exports.averageBy = averageBy;
exports.permute = permute;
exports.chunkBySize = chunkBySize;
exports.skip = skip;
exports.skipWhile = skipWhile;
exports.takeSplitAux = takeSplitAux;
exports.take = take;
exports.takeWhile = takeWhile;
exports.truncate = truncate;
exports.splitAt = splitAt;
exports.outOfRange = outOfRange;
exports.getSlice = getSlice;
exports.distinctBy = distinctBy;
exports.distinct = distinct;
exports.exactlyOne = exactlyOne;
exports.groupBy = groupBy;
exports.countBy = countBy;
exports.where = where;
exports.pairwise = pairwise;
exports.windowed = windowed;
exports.splitInto = splitInto;
exports.transpose = transpose;

var _Types = require("./Types.js");

var _Option = require("./Option.js");

var _Seq = require("./Seq.js");

var _Util = require("./Util.js");

var _Array = require("./Array.js");

var _MutableSet = require("./MutableSet.js");

var _MapUtil = require("./MapUtil.js");

var _MutableMap = require("./MutableMap.js");

function empty() {
  return new _Types.List();
}

function singleton(x) {
  return new _Types.List(x, empty());
}

function cons(x, xs) {
  return new _Types.List(x, xs);
}

function head(_arg1) {
  if (_arg1.tail != null) {
    return _arg1.head;
  } else {
    throw new Error("List was empty");
  }
}

function tryHead(_arg1) {
  if (_arg1.tail != null) {
    return (0, _Option.some)(_arg1.head);
  } else {
    return void 0;
  }
}

function tail(_arg1) {
  if (_arg1.tail != null) {
    return _arg1.tail;
  } else {
    throw new Error("List was empty");
  }
}

function last(_arg1_mut) {
  last: while (true) {
    var _arg1 = _arg1_mut;

    if (_arg1.tail != null) {
      if (_arg1.tail.tail == null) {
        return _arg1.head;
      } else {
        _arg1_mut = _arg1.tail;
        continue last;
      }
    } else {
      throw new Error("List was empty");
    }

    break;
  }
}

function tryLast(_arg1_mut) {
  tryLast: while (true) {
    var _arg1 = _arg1_mut;

    if (_arg1.tail != null) {
      if (_arg1.tail.tail == null) {
        return (0, _Option.some)(_arg1.head);
      } else {
        _arg1_mut = _arg1.tail;
        continue tryLast;
      }
    } else {
      return void 0;
    }

    break;
  }
}

function compareWith(comparer, xs, ys) {
  if (xs === ys) {
    return 0;
  } else {
    var loop = function loop(xs_1_mut, ys_1_mut) {
      loop: while (true) {
        var xs_1 = xs_1_mut,
            ys_1 = ys_1_mut;
        var matchValue = [xs_1, ys_1];

        if (matchValue[0].tail != null) {
          if (matchValue[1].tail != null) {
            var matchValue_1 = comparer(matchValue[0].head, matchValue[1].head) | 0;

            if (matchValue_1 === 0) {
              xs_1_mut = matchValue[0].tail;
              ys_1_mut = matchValue[1].tail;
              continue loop;
            } else {
              return matchValue_1 | 0;
            }
          } else {
            return 1;
          }
        } else if (matchValue[1].tail == null) {
          return 0;
        } else {
          return -1;
        }

        break;
      }
    };

    return loop(xs, ys) | 0;
  }
}

function foldIndexedAux(f_mut, i_mut, acc_mut, _arg1_mut) {
  foldIndexedAux: while (true) {
    var f = f_mut,
        i = i_mut,
        acc = acc_mut,
        _arg1 = _arg1_mut;

    if (_arg1.tail != null) {
      f_mut = f;
      i_mut = i + 1;
      acc_mut = f(i, acc, _arg1.head);
      _arg1_mut = _arg1.tail;
      continue foldIndexedAux;
    } else {
      return acc;
    }

    break;
  }
}

function foldIndexed(f, state, xs) {
  return foldIndexedAux(f, 0, state, xs);
}

function fold(f_mut, state_mut, xs_mut) {
  fold: while (true) {
    var f = f_mut,
        state = state_mut,
        xs = xs_mut;

    if (xs.tail != null) {
      f_mut = f;
      state_mut = f(state, xs.head);
      xs_mut = xs.tail;
      continue fold;
    } else {
      return state;
    }

    break;
  }
}

function reverse(xs) {
  return fold(function (acc, x) {
    return new _Types.List(x, acc);
  }, new _Types.List(), xs);
}

function foldBack(f, xs, state) {
  return fold(function (acc, x) {
    return f(x, acc);
  }, state, reverse(xs));
}

function toSeq(xs) {
  return (0, _Seq.map)(function (x) {
    return x;
  }, xs);
}

function ofSeq(xs) {
  return reverse((0, _Seq.fold)(function (acc, x) {
    return new _Types.List(x, acc);
  }, new _Types.List(), xs));
}

function concat(lists) {
  return reverse((0, _Seq.fold)(function (state, xs) {
    return fold(function (acc, x) {
      return new _Types.List(x, acc);
    }, state, xs);
  }, new _Types.List(), lists));
}

function foldIndexed2Aux(f_mut, i_mut, acc_mut, bs_mut, cs_mut) {
  foldIndexed2Aux: while (true) {
    var f = f_mut,
        i = i_mut,
        acc = acc_mut,
        bs = bs_mut,
        cs = cs_mut;
    var matchValue = [bs, cs];
    var pattern_matching_result = void 0,
        x = void 0,
        xs = void 0,
        y = void 0,
        ys = void 0;

    if (matchValue[0].tail != null) {
      if (matchValue[1].tail != null) {
        pattern_matching_result = 1;
        x = matchValue[0].head;
        xs = matchValue[0].tail;
        y = matchValue[1].head;
        ys = matchValue[1].tail;
      } else {
        pattern_matching_result = 2;
      }
    } else if (matchValue[1].tail == null) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 2;
    }

    switch (pattern_matching_result) {
      case 0:
        {
          return acc;
        }

      case 1:
        {
          f_mut = f;
          i_mut = i + 1;
          acc_mut = f(i, acc, x, y);
          bs_mut = xs;
          cs_mut = ys;
          continue foldIndexed2Aux;
        }

      case 2:
        {
          throw new Error("Lists had different lengths");
        }
    }

    break;
  }
}

function foldIndexed2(f, state, xs, ys) {
  return foldIndexed2Aux(f, 0, state, xs, ys);
}

function fold2(f, state, xs, ys) {
  return (0, _Seq.fold2)(f, state, xs, ys);
}

function foldBack2(f, xs, ys, state) {
  return (0, _Seq.foldBack2)(f, xs, ys, state);
}

function unfold(f, state) {
  var unfoldInner = function unfoldInner(acc_mut, state_1_mut) {
    unfoldInner: while (true) {
      var acc = acc_mut,
          state_1 = state_1_mut;
      var matchValue = f(state_1);

      if (matchValue != null) {
        acc_mut = new _Types.List(matchValue[0], acc);
        state_1_mut = matchValue[1];
        continue unfoldInner;
      } else {
        return reverse(acc);
      }

      break;
    }
  };

  return unfoldInner(new _Types.List(), state);
}

function foldIndexed3Aux(f_mut, i_mut, acc_mut, bs_mut, cs_mut, ds_mut) {
  foldIndexed3Aux: while (true) {
    var f = f_mut,
        i = i_mut,
        acc = acc_mut,
        bs = bs_mut,
        cs = cs_mut,
        ds = ds_mut;
    var matchValue = [bs, cs, ds];
    var pattern_matching_result = void 0,
        x = void 0,
        xs = void 0,
        y = void 0,
        ys = void 0,
        z = void 0,
        zs = void 0;

    if (matchValue[0].tail != null) {
      if (matchValue[1].tail != null) {
        if (matchValue[2].tail != null) {
          pattern_matching_result = 1;
          x = matchValue[0].head;
          xs = matchValue[0].tail;
          y = matchValue[1].head;
          ys = matchValue[1].tail;
          z = matchValue[2].head;
          zs = matchValue[2].tail;
        } else {
          pattern_matching_result = 2;
        }
      } else {
        pattern_matching_result = 2;
      }
    } else if (matchValue[1].tail == null) {
      if (matchValue[2].tail == null) {
        pattern_matching_result = 0;
      } else {
        pattern_matching_result = 2;
      }
    } else {
      pattern_matching_result = 2;
    }

    switch (pattern_matching_result) {
      case 0:
        {
          return acc;
        }

      case 1:
        {
          f_mut = f;
          i_mut = i + 1;
          acc_mut = f(i, acc, x, y, z);
          bs_mut = xs;
          cs_mut = ys;
          ds_mut = zs;
          continue foldIndexed3Aux;
        }

      case 2:
        {
          throw new Error("Lists had different lengths");
        }
    }

    break;
  }
}

function foldIndexed3(f, seed, xs, ys, zs) {
  return foldIndexed3Aux(f, 0, seed, xs, ys, zs);
}

function fold3(f, state, xs, ys, zs) {
  return foldIndexed3(function (_arg1, acc, x, y, z) {
    return f(acc, x, y, z);
  }, state, xs, ys, zs);
}

function scan(f, state, xs) {
  return ofSeq((0, _Seq.scan)(f, state, xs));
}

function scanBack(f, xs, state) {
  return ofSeq((0, _Seq.scanBack)(f, xs, state));
}

function length(xs) {
  return fold(function (acc, _arg1) {
    return acc + 1;
  }, 0, xs);
}

function append(xs, ys) {
  return fold(function (acc, x) {
    return new _Types.List(x, acc);
  }, ys, reverse(xs));
}

function collect(f, xs) {
  return ofSeq((0, _Seq.collect)(f, xs));
}

function map(f, xs) {
  return reverse(fold(function (acc, x) {
    return new _Types.List(f(x), acc);
  }, new _Types.List(), xs));
}

function mapIndexed(f, xs) {
  return reverse(foldIndexed(function (i, acc, x) {
    return new _Types.List(f(i, x), acc);
  }, new _Types.List(), xs));
}

function indexed(xs) {
  return mapIndexed(function (i, x) {
    return [i, x];
  }, xs);
}

function map2(f, xs, ys) {
  return reverse(fold2(function (acc, x, y) {
    return new _Types.List(f(x, y), acc);
  }, new _Types.List(), xs, ys));
}

function mapIndexed2(f, xs, ys) {
  return reverse(foldIndexed2(function (i, acc, x, y) {
    return new _Types.List(f(i, x, y), acc);
  }, new _Types.List(), xs, ys));
}

function map3(f, xs, ys, zs) {
  return reverse(fold3(function (acc, x, y, z) {
    return new _Types.List(f(x, y, z), acc);
  }, new _Types.List(), xs, ys, zs));
}

function mapIndexed3(f, xs, ys, zs) {
  return reverse(foldIndexed3(function (i, acc, x, y, z) {
    return new _Types.List(f(i, x, y, z), acc);
  }, new _Types.List(), xs, ys, zs));
}

function mapFold(f, s, xs) {
  var patternInput_1 = fold(function (tupledArg, x) {
    var patternInput = f(tupledArg[1], x);
    return [new _Types.List(patternInput[0], tupledArg[0]), patternInput[1]];
  }, [new _Types.List(), s], xs);
  return [reverse(patternInput_1[0]), patternInput_1[1]];
}

function mapFoldBack(f, xs, s) {
  return mapFold(function (s_1, v) {
    return f(v, s_1);
  }, s, reverse(xs));
}

function iterate(f, xs) {
  fold(function (unitVar0, x) {
    f(x);
  }, void 0, xs);
}

function iterate2(f, xs, ys) {
  fold2(function (unitVar0, x, y) {
    f(x, y);
  }, void 0, xs, ys);
}

function iterateIndexed(f, xs) {
  foldIndexed(function (i, unitVar1, x) {
    f(i, x);
  }, void 0, xs);
}

function iterateIndexed2(f, xs, ys) {
  foldIndexed2(function (i, unitVar1, x, y) {
    f(i, x, y);
  }, void 0, xs, ys);
}

function ofArrayWithTail(xs, tail_1) {
  var res = tail_1;

  for (var i = (0, _Util.count)(xs) - 1; i >= 0; i--) {
    res = new _Types.List(xs[i], res);
  }

  return res;
}

function ofArray(xs) {
  return ofArrayWithTail(xs, new _Types.List());
}

function isEmpty(_arg1) {
  if (_arg1.tail == null) {
    return true;
  } else {
    return false;
  }
}

function tryPickIndexedAux(f_mut, i_mut, _arg1_mut) {
  tryPickIndexedAux: while (true) {
    var f = f_mut,
        i = i_mut,
        _arg1 = _arg1_mut;

    if (_arg1.tail != null) {
      var result = f(i, _arg1.head);

      if (result == null) {
        f_mut = f;
        i_mut = i + 1;
        _arg1_mut = _arg1.tail;
        continue tryPickIndexedAux;
      } else {
        return result;
      }
    } else {
      return void 0;
    }

    break;
  }
}

function tryPickIndexed(f, xs) {
  return tryPickIndexedAux(f, 0, xs);
}

function tryPick(f, xs) {
  return tryPickIndexed(function (_arg1, x) {
    return f(x);
  }, xs);
}

function pick(f, xs) {
  var matchValue = tryPick(f, xs);

  if (matchValue != null) {
    return (0, _Option.value)(matchValue);
  } else {
    throw new Error("List did not contain any matching elements");
  }
}

function tryFindIndexed(f, xs) {
  return tryPickIndexed(function (i, x) {
    return f(i, x) ? (0, _Option.some)(x) : void 0;
  }, xs);
}

function tryFind(f, xs) {
  return tryPickIndexed(function (_arg1, x) {
    return f(x) ? (0, _Option.some)(x) : void 0;
  }, xs);
}

function findIndexed(f, xs) {
  var matchValue = tryFindIndexed(f, xs);

  if (matchValue != null) {
    return (0, _Option.value)(matchValue);
  } else {
    throw new Error("List did not contain any matching elements");
  }
}

function find(f, xs) {
  return findIndexed(function (_arg1, x) {
    return f(x);
  }, xs);
}

function findBack(f, xs) {
  return find(f, reverse(xs));
}

function tryFindBack(f, xs) {
  return tryFind(f, reverse(xs));
}

function tryFindIndex(f, xs) {
  return tryPickIndexed(function (i, x) {
    return f(x) ? i : void 0;
  }, xs);
}

function tryFindIndexBack(f, xs) {
  return (0, _Array.tryFindIndexBack)(f, Array.from(xs));
}

function findIndex(f, xs) {
  var matchValue = tryFindIndex(f, xs);

  if (matchValue != null) {
    return matchValue | 0;
  } else {
    throw new Error("List did not contain any matching elements");
  }
}

function findIndexBack(f, xs) {
  return (0, _Array.findIndexBack)(f, Array.from(xs));
}

function item(n, xs) {
  return findIndexed(function (i, _arg1) {
    return n === i;
  }, xs);
}

function tryItem(n, xs) {
  return tryFindIndexed(function (i, _arg1) {
    return n === i;
  }, xs);
}

function filter(f, xs) {
  return reverse(fold(function (acc, x) {
    return f(x) ? new _Types.List(x, acc) : acc;
  }, new _Types.List(), xs));
}

function partition(f, xs) {
  return fold((0, _Util.uncurry)(2, function (tupledArg) {
    var lacc = tupledArg[0];
    var racc = tupledArg[1];
    return function (x) {
      return f(x) ? [new _Types.List(x, lacc), racc] : [lacc, new _Types.List(x, racc)];
    };
  }), [new _Types.List(), new _Types.List()], reverse(xs));
}

function choose(f, xs) {
  return reverse(fold(function (acc, x) {
    var matchValue = f(x);
    return matchValue == null ? acc : new _Types.List((0, _Option.value)(matchValue), acc);
  }, new _Types.List(), xs));
}

function contains(value, list, eq) {
  var loop = function loop(xs_mut) {
    loop: while (true) {
      var xs = xs_mut;

      if (xs.tail != null) {
        if (eq.Equals(value, xs.head)) {
          return true;
        } else {
          xs_mut = xs.tail;
          continue loop;
        }
      } else {
        return false;
      }

      break;
    }
  };

  return loop(list);
}

function except(itemsToExclude, array, eq) {
  if (isEmpty(array)) {
    return array;
  } else {
    var cached = new _MutableSet.HashSet(itemsToExclude, eq);
    return filter(function (arg00) {
      return (0, _MapUtil.addToSet)(arg00, cached);
    }, array);
  }
}

function initialize(n, f) {
  var xs = new _Types.List();

  for (var i = 0; i <= n - 1; i++) {
    xs = new _Types.List(f(i), xs);
  }

  return reverse(xs);
}

function replicate(n, x) {
  return initialize(n, function (_arg1) {
    return x;
  });
}

function reduce(f, _arg1) {
  if (_arg1.tail != null) {
    return fold(f, _arg1.head, _arg1.tail);
  } else {
    throw new Error("List was empty");
  }
}

function reduceBack(f, _arg1) {
  if (_arg1.tail != null) {
    return foldBack(f, _arg1.tail, _arg1.head);
  } else {
    throw new Error("List was empty");
  }
}

function forAll(f, xs) {
  return fold(function (acc, x) {
    return acc ? f(x) : false;
  }, true, xs);
}

function forAll2(f, xs, ys) {
  return fold2(function (acc, x, y) {
    return acc ? f(x, y) : false;
  }, true, xs, ys);
}

function exists(f_mut, _arg1_mut) {
  exists: while (true) {
    var f = f_mut,
        _arg1 = _arg1_mut;

    if (_arg1.tail != null) {
      if (f(_arg1.head)) {
        return true;
      } else {
        f_mut = f;
        _arg1_mut = _arg1.tail;
        continue exists;
      }
    } else {
      return false;
    }

    break;
  }
}

function exists2(f_mut, bs_mut, cs_mut) {
  exists2: while (true) {
    var f = f_mut,
        bs = bs_mut,
        cs = cs_mut;
    var matchValue = [bs, cs];
    var pattern_matching_result = void 0,
        x = void 0,
        xs = void 0,
        y = void 0,
        ys = void 0;

    if (matchValue[0].tail != null) {
      if (matchValue[1].tail != null) {
        pattern_matching_result = 1;
        x = matchValue[0].head;
        xs = matchValue[0].tail;
        y = matchValue[1].head;
        ys = matchValue[1].tail;
      } else {
        pattern_matching_result = 2;
      }
    } else if (matchValue[1].tail == null) {
      pattern_matching_result = 0;
    } else {
      pattern_matching_result = 2;
    }

    switch (pattern_matching_result) {
      case 0:
        {
          return false;
        }

      case 1:
        {
          if (f(x, y)) {
            return true;
          } else {
            f_mut = f;
            bs_mut = xs;
            cs_mut = ys;
            continue exists2;
          }
        }

      case 2:
        {
          throw new Error("Lists had different lengths");
        }
    }

    break;
  }
}

function unzip(xs) {
  return foldBack(function (tupledArg, tupledArg_1) {
    return [new _Types.List(tupledArg[0], tupledArg_1[0]), new _Types.List(tupledArg[1], tupledArg_1[1])];
  }, xs, [new _Types.List(), new _Types.List()]);
}

function unzip3(xs) {
  return foldBack(function (tupledArg, tupledArg_1) {
    return [new _Types.List(tupledArg[0], tupledArg_1[0]), new _Types.List(tupledArg[1], tupledArg_1[1]), new _Types.List(tupledArg[2], tupledArg_1[2])];
  }, xs, [new _Types.List(), new _Types.List(), new _Types.List()]);
}

function zip(xs, ys) {
  return map2(function (x, y) {
    return [x, y];
  }, xs, ys);
}

function zip3(xs, ys, zs) {
  return map3(function (x, y, z) {
    return [x, y, z];
  }, xs, ys, zs);
}

function sort(xs, comparer) {
  var xs_1;
  return ofArray((xs_1 = Array.from(xs), (xs_1.sort(function (x, y) {
    return comparer.Compare(x, y);
  }), xs_1)));
}

function sortBy(projection, xs, comparer) {
  var xs_1;
  return ofArray((xs_1 = Array.from(xs), (xs_1.sort(function (x, y) {
    return comparer.Compare(projection(x), projection(y));
  }), xs_1)));
}

function sortDescending(xs, comparer) {
  var xs_1;
  return ofArray((xs_1 = Array.from(xs), (xs_1.sort(function (x, y) {
    return comparer.Compare(x, y) * -1;
  }), xs_1)));
}

function sortByDescending(projection, xs, comparer) {
  var xs_1;
  return ofArray((xs_1 = Array.from(xs), (xs_1.sort(function (x, y) {
    return comparer.Compare(projection(x), projection(y)) * -1;
  }), xs_1)));
}

function sortWith(comparer, xs) {
  var comparer_1, xs_1;
  return ofArray((comparer_1 = comparer, (xs_1 = Array.from(xs), (xs_1.sort(comparer_1), xs_1))));
}

function sum(xs, adder) {
  return fold(function (acc, x) {
    return adder.Add(acc, x);
  }, adder.GetZero(), xs);
}

function sumBy(f, xs, adder) {
  return fold(function (acc, x) {
    return adder.Add(acc, f(x));
  }, adder.GetZero(), xs);
}

function maxBy(projection, xs, comparer) {
  return reduce(function (x, y) {
    return comparer.Compare(projection(y), projection(x)) > 0 ? y : x;
  }, xs);
}

function max(li, comparer) {
  return reduce(function (x, y) {
    return comparer.Compare(y, x) > 0 ? y : x;
  }, li);
}

function minBy(projection, xs, comparer) {
  return reduce(function (x, y) {
    return comparer.Compare(projection(y), projection(x)) > 0 ? x : y;
  }, xs);
}

function min(xs, comparer) {
  return reduce(function (x, y) {
    return comparer.Compare(y, x) > 0 ? x : y;
  }, xs);
}

function average(xs, averager) {
  return averager.DivideByInt(fold(function (acc, x) {
    return averager.Add(acc, x);
  }, averager.GetZero(), xs), length(xs));
}

function averageBy(f, xs, averager) {
  return averager.DivideByInt(fold(function (acc, x) {
    return averager.Add(acc, f(x));
  }, averager.GetZero(), xs), length(xs));
}

function permute(f, xs) {
  return ofArray((0, _Array.permute)(f, Array.from(xs)));
}

function chunkBySize(chunkSize, xs) {
  return map(ofArray, ofArray((0, _Array.chunkBySize)(chunkSize, Array.from(xs))));
}

function skip(i, xs) {
  var skipInner = function skipInner(i_1_mut, xs_1_mut) {
    skipInner: while (true) {
      var i_1 = i_1_mut,
          xs_1 = xs_1_mut;
      var matchValue = [i_1, xs_1];

      if (matchValue[0] === 0) {
        return xs_1;
      } else if (matchValue[1].tail != null) {
        i_1_mut = i_1 - 1;
        xs_1_mut = matchValue[1].tail;
        continue skipInner;
      } else {
        throw new Error("The input sequence has an insufficient number of elements.");
      }

      break;
    }
  };

  var matchValue_1 = [i, xs];

  if (matchValue_1[0] < 0) {
    throw new Error("The input must be non-negative.");
  } else {
    var pattern_matching_result, i_4, xs_4;

    if (matchValue_1[0] === 0) {
      pattern_matching_result = 0;
    } else if (matchValue_1[0] === 1) {
      if (matchValue_1[1].tail != null) {
        pattern_matching_result = 1;
      } else {
        pattern_matching_result = 2;
        i_4 = matchValue_1[0];
        xs_4 = matchValue_1[1];
      }
    } else {
      pattern_matching_result = 2;
      i_4 = matchValue_1[0];
      xs_4 = matchValue_1[1];
    }

    switch (pattern_matching_result) {
      case 0:
        {
          return xs;
        }

      case 1:
        {
          return matchValue_1[1].tail;
        }

      case 2:
        {
          return skipInner(i_4, xs_4);
        }
    }
  }
}

function skipWhile(predicate_mut, xs_mut) {
  skipWhile: while (true) {
    var predicate = predicate_mut,
        xs = xs_mut;
    var pattern_matching_result = void 0,
        h_1 = void 0,
        t_1 = void 0;

    if (xs.tail != null) {
      if (predicate(xs.head)) {
        pattern_matching_result = 0;
        h_1 = xs.head;
        t_1 = xs.tail;
      } else {
        pattern_matching_result = 1;
      }
    } else {
      pattern_matching_result = 1;
    }

    switch (pattern_matching_result) {
      case 0:
        {
          predicate_mut = predicate;
          xs_mut = t_1;
          continue skipWhile;
        }

      case 1:
        {
          return xs;
        }
    }

    break;
  }
}

function takeSplitAux(error_mut, i_mut, acc_mut, xs_mut) {
  takeSplitAux: while (true) {
    var error = error_mut,
        i = i_mut,
        acc = acc_mut,
        xs = xs_mut;
    var matchValue = [i, xs];

    if (matchValue[0] === 0) {
      return [reverse(acc), xs];
    } else if (matchValue[1].tail != null) {
      error_mut = error;
      i_mut = i - 1;
      acc_mut = new _Types.List(matchValue[1].head, acc);
      xs_mut = matchValue[1].tail;
      continue takeSplitAux;
    } else if (error) {
      throw new Error("The input sequence has an insufficient number of elements.");
    } else {
      return [reverse(acc), xs];
    }

    break;
  }
}

function take(i, xs) {
  var matchValue = [i, xs];

  if (matchValue[0] < 0) {
    throw new Error("The input must be non-negative.");
  } else {
    var pattern_matching_result, i_3, xs_1;

    if (matchValue[0] === 0) {
      pattern_matching_result = 0;
    } else if (matchValue[0] === 1) {
      if (matchValue[1].tail != null) {
        pattern_matching_result = 1;
      } else {
        pattern_matching_result = 2;
        i_3 = matchValue[0];
        xs_1 = matchValue[1];
      }
    } else {
      pattern_matching_result = 2;
      i_3 = matchValue[0];
      xs_1 = matchValue[1];
    }

    switch (pattern_matching_result) {
      case 0:
        {
          return new _Types.List();
        }

      case 1:
        {
          return new _Types.List(matchValue[1].head, new _Types.List());
        }

      case 2:
        {
          return takeSplitAux(true, i_3, new _Types.List(), xs_1)[0];
        }
    }
  }
}

function takeWhile(predicate, xs) {
  if (xs.tail != null) {
    if (xs.tail.tail == null) {
      if (predicate(xs.head)) {
        return xs;
      } else {
        return xs.tail;
      }
    } else if (!predicate(xs.head)) {
      return new _Types.List();
    } else {
      return new _Types.List(xs.head, takeWhile(predicate, xs.tail));
    }
  } else {
    return xs;
  }
}

function truncate(i, xs) {
  var matchValue = [i, xs];

  if (matchValue[0] < 0) {
    throw new Error("The input must be non-negative.");
  } else {
    var pattern_matching_result, i_3, xs_1;

    if (matchValue[0] === 0) {
      pattern_matching_result = 0;
    } else if (matchValue[0] === 1) {
      if (matchValue[1].tail != null) {
        pattern_matching_result = 1;
      } else {
        pattern_matching_result = 2;
        i_3 = matchValue[0];
        xs_1 = matchValue[1];
      }
    } else {
      pattern_matching_result = 2;
      i_3 = matchValue[0];
      xs_1 = matchValue[1];
    }

    switch (pattern_matching_result) {
      case 0:
        {
          return new _Types.List();
        }

      case 1:
        {
          return new _Types.List(matchValue[1].head, new _Types.List());
        }

      case 2:
        {
          return takeSplitAux(false, i_3, new _Types.List(), xs_1)[0];
        }
    }
  }
}

function splitAt(i, xs) {
  var matchValue = [i, xs];

  if (matchValue[0] < 0) {
    throw new Error("The input must be non-negative.");
  } else {
    var pattern_matching_result, i_3, xs_2;

    if (matchValue[0] === 0) {
      pattern_matching_result = 0;
    } else if (matchValue[0] === 1) {
      if (matchValue[1].tail != null) {
        pattern_matching_result = 1;
      } else {
        pattern_matching_result = 2;
        i_3 = matchValue[0];
        xs_2 = matchValue[1];
      }
    } else {
      pattern_matching_result = 2;
      i_3 = matchValue[0];
      xs_2 = matchValue[1];
    }

    switch (pattern_matching_result) {
      case 0:
        {
          return [new _Types.List(), xs];
        }

      case 1:
        {
          return [new _Types.List(matchValue[1].head, new _Types.List()), matchValue[1].tail];
        }

      case 2:
        {
          return takeSplitAux(true, i_3, new _Types.List(), xs_2);
        }
    }
  }
}

function outOfRange() {
  throw new Error("Index out of range");
}

function getSlice(lower, upper, xs) {
  var lower_1 = (0, _Option.defaultArg)(lower, 0) | 0;
  var hasUpper = upper != null;

  if (lower_1 < 0) {
    return outOfRange();
  } else if (hasUpper ? upper < lower_1 : false) {
    return new _Types.List();
  } else {
    var lastIndex = -1;
    var res = foldIndexed(function (i, acc, x) {
      lastIndex = i;

      if (lower_1 <= i ? !hasUpper ? true : i <= upper : false) {
        return new _Types.List(x, acc);
      } else {
        return acc;
      }
    }, new _Types.List(), xs);

    if (lower_1 > lastIndex + 1 ? true : hasUpper ? upper > lastIndex : false) {
      outOfRange();
    }

    return reverse(res);
  }
}

function distinctBy(projection, xs, eq) {
  var hashSet = new _MutableSet.HashSet([], eq);
  return filter(function (arg) {
    return (0, _MapUtil.addToSet)(projection(arg), hashSet);
  }, xs);
}

function distinct(xs, eq) {
  return distinctBy(function (x) {
    return x;
  }, xs, eq);
}

function exactlyOne(xs) {
  if (xs.tail != null) {
    if (xs.tail.tail != null) {
      throw new Error("Input list too long\\nParameter name: list");
    } else {
      return xs.head;
    }
  } else {
    throw new Error("The input sequence was empty\\nParameter name: list");
  }
}

function groupBy(projection, xs, eq) {
  var dict = new _MutableMap.Dictionary([], eq);
  var keys = new _Types.List();
  iterate(function (v) {
    var key = projection(v);
    var matchValue;
    var outArg = null;
    matchValue = [(0, _MapUtil.tryGetValue)(dict, key, new _Types.FSharpRef(function () {
      return outArg;
    }, function (v_1) {
      outArg = v_1;
    })), outArg];

    if (matchValue[0]) {
      dict.set(key, new _Types.List(v, matchValue[1]));
    } else {
      (0, _MapUtil.addToDict)(dict, key, new _Types.List(v, new _Types.List()));
      keys = new _Types.List(key, keys);
    }
  }, xs);
  var result = new _Types.List();
  iterate(function (key_1) {
    result = new _Types.List([key_1, reverse((0, _MapUtil.getItemFromDict)(dict, key_1))], result);
  }, keys);
  return result;
}

function countBy(projection, xs, eq) {
  var dict = new _MutableMap.Dictionary([], eq);
  var keys = new _Types.List();
  iterate(function (v) {
    var key = projection(v);
    var matchValue;
    var outArg = 0;
    matchValue = [(0, _MapUtil.tryGetValue)(dict, key, new _Types.FSharpRef(function () {
      return outArg;
    }, function (v_1) {
      outArg = v_1;
    })), outArg];

    if (matchValue[0]) {
      dict.set(key, matchValue[1] + 1);
    } else {
      dict.set(key, 1);
      keys = new _Types.List(key, keys);
    }
  }, xs);
  var result = new _Types.List();
  iterate(function (key_1) {
    result = new _Types.List([key_1, (0, _MapUtil.getItemFromDict)(dict, key_1)], result);
  }, keys);
  return result;
}

function where(predicate, source) {
  return filter(predicate, source);
}

function pairwise(source) {
  return ofSeq((0, _Seq.pairwise)(source));
}

function windowed(windowSize, source) {
  if (windowSize <= 0) {
    throw new Error("windowSize must be positive");
  }

  var res = new _Types.List();

  for (var i = length(source); i >= windowSize; i--) {
    res = new _Types.List(getSlice(i - windowSize, i - 1, source), res);
  }

  return res;
}

function splitInto(chunks, source) {
  return map(ofArray, ofArray((0, _Array.splitInto)(chunks, Array.from(source))));
}

function transpose(lists) {
  return ofSeq((0, _Seq.map)(ofSeq, (0, _Seq.transpose)(lists)));
}
},{"./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","./Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","./MutableSet.js":"../JS/.fable/fable-library.3.0.0/MutableSet.js","./MapUtil.js":"../JS/.fable/fable-library.3.0.0/MapUtil.js","./MutableMap.js":"../JS/.fable/fable-library.3.0.0/MutableMap.js"}],"../JS/.fable/fable-library.3.0.0/FSharp.Collections.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.HashIdentity_FromFunctions = HashIdentity_FromFunctions;
exports.HashIdentity_Structural = HashIdentity_Structural;
exports.HashIdentity_Reference = HashIdentity_Reference;
exports.ComparisonIdentity_FromFunction = ComparisonIdentity_FromFunction;
exports.ComparisonIdentity_Structural = ComparisonIdentity_Structural;

var _Util = require("./Util.js");

function HashIdentity_FromFunctions(hash, eq) {
  return {
    Equals: function Equals(x, y) {
      return eq(x, y);
    },
    GetHashCode: function GetHashCode(x_1) {
      return hash(x_1);
    }
  };
}

function HashIdentity_Structural() {
  return HashIdentity_FromFunctions(_Util.structuralHash, _Util.equals);
}

function HashIdentity_Reference() {
  return HashIdentity_FromFunctions(_Util.physicalHash, function (e1, e2) {
    return e1 === e2;
  });
}

function ComparisonIdentity_FromFunction(comparer) {
  return {
    Compare: function Compare(x, y) {
      return comparer(x, y);
    }
  };
}

function ComparisonIdentity_Structural() {
  return ComparisonIdentity_FromFunction(_Util.compare);
}
},{"./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/.fable/fable-library.3.0.0/System.Text.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.StringBuilder$reflection = StringBuilder$reflection;
exports.StringBuilder_$ctor_Z18115A39 = StringBuilder_$ctor_Z18115A39;
exports.StringBuilder_$ctor_Z524259A4 = StringBuilder_$ctor_Z524259A4;
exports.StringBuilder_$ctor_Z721C83C5 = StringBuilder_$ctor_Z721C83C5;
exports.StringBuilder_$ctor = StringBuilder_$ctor;
exports.StringBuilder__Append_Z721C83C5 = StringBuilder__Append_Z721C83C5;
exports.StringBuilder__Append_244C7CD6 = StringBuilder__Append_244C7CD6;
exports.StringBuilder__Append_Z524259A4 = StringBuilder__Append_Z524259A4;
exports.StringBuilder__Append_5E38073B = StringBuilder__Append_5E38073B;
exports.StringBuilder__Append_Z1FBCCD16 = StringBuilder__Append_Z1FBCCD16;
exports.StringBuilder__Append_4E60E31B = StringBuilder__Append_4E60E31B;
exports.StringBuilder__Append_695F1130 = StringBuilder__Append_695F1130;
exports.StringBuilder__Append_43A65C09 = StringBuilder__Append_43A65C09;
exports.StringBuilder__AppendFormat_433E080 = StringBuilder__AppendFormat_433E080;
exports.StringBuilder__AppendLine = StringBuilder__AppendLine;
exports.StringBuilder__AppendLine_Z721C83C5 = StringBuilder__AppendLine_Z721C83C5;
exports.StringBuilder__get_Length = StringBuilder__get_Length;
exports.StringBuilder__ToString_Z37302880 = StringBuilder__ToString_Z37302880;
exports.StringBuilder__Clear = StringBuilder__Clear;
exports.StringBuilder = void 0;

var _String = require("./String.js");

var _Reflection = require("./Reflection.js");

var _Util = require("./Util.js");

var _Types = require("./Types.js");

var _Seq = require("./Seq.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var StringBuilder = /*#__PURE__*/function () {
  function StringBuilder(value, capacity) {
    _classCallCheck(this, StringBuilder);

    this.buf = [];

    if (!(0, _String.isNullOrEmpty)(value)) {
      void this.buf.push(value);
    }
  }

  _createClass(StringBuilder, [{
    key: "toString",
    value: function toString() {
      var __ = this;

      return (0, _String.join)("", __.buf);
    }
  }]);

  return StringBuilder;
}();

exports.StringBuilder = StringBuilder;

function StringBuilder$reflection() {
  return (0, _Reflection.class_type)("System.Text.StringBuilder", void 0, StringBuilder);
}

function StringBuilder_$ctor_Z18115A39(value, capacity) {
  return new StringBuilder(value, capacity);
}

function StringBuilder_$ctor_Z524259A4(capacity) {
  return StringBuilder_$ctor_Z18115A39("", capacity);
}

function StringBuilder_$ctor_Z721C83C5(value) {
  return StringBuilder_$ctor_Z18115A39(value, 16);
}

function StringBuilder_$ctor() {
  return StringBuilder_$ctor_Z18115A39("", 16);
}

function StringBuilder__Append_Z721C83C5(x, s) {
  void x.buf.push(s);
  return x;
}

function StringBuilder__Append_244C7CD6(x, c) {
  void x.buf.push(c);
  return x;
}

function StringBuilder__Append_Z524259A4(x, o) {
  void x.buf.push((0, _Util.int32ToString)(o));
  return x;
}

function StringBuilder__Append_5E38073B(x, o) {
  void x.buf.push(o.toString());
  return x;
}

function StringBuilder__Append_Z1FBCCD16(x, o) {
  void x.buf.push((0, _Types.toString)(o));
  return x;
}

function StringBuilder__Append_4E60E31B(x, o) {
  void x.buf.push((0, _Types.toString)(o));
  return x;
}

function StringBuilder__Append_695F1130(x, cs) {
  void x.buf.push(cs.join(''));
  return x;
}

function StringBuilder__Append_43A65C09(x, s) {
  void x.buf.push((0, _Types.toString)(s));
  return x;
}

function StringBuilder__AppendFormat_433E080(x, fmt, o) {
  void x.buf.push((0, _String.format)(fmt, o));
  return x;
}

function StringBuilder__AppendLine(x) {
  void x.buf.push("\n");
  return x;
}

function StringBuilder__AppendLine_Z721C83C5(x, s) {
  void x.buf.push(s);
  void x.buf.push("\n");
  return x;
}

function StringBuilder__get_Length(x) {
  return (0, _Seq.sumBy)(function (str) {
    return str.length;
  }, x.buf, {
    GetZero: function GetZero() {
      return 0;
    },
    Add: function Add(x_1, y) {
      return x_1 + y;
    }
  });
}

function StringBuilder__ToString_Z37302880(x, firstIndex, length) {
  return (0, _String.substring)((0, _Types.toString)(x), firstIndex, length);
}

function StringBuilder__Clear(x) {
  (0, _Util.clear)(x.buf);
  return x;
}
},{"./String.js":"../JS/.fable/fable-library.3.0.0/String.js","./Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","./Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js"}],"../JS/.fable/fable-library.3.0.0/FSharp.Core.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LanguagePrimitives_FastGenericComparer = LanguagePrimitives_FastGenericComparer;
exports.LanguagePrimitives_FastGenericComparerFromTable = LanguagePrimitives_FastGenericComparerFromTable;
exports.LanguagePrimitives_FastGenericEqualityComparer = LanguagePrimitives_FastGenericEqualityComparer;
exports.LanguagePrimitives_FastGenericEqualityComparerFromTable = LanguagePrimitives_FastGenericEqualityComparerFromTable;
exports.Operators_Failure = Operators_Failure;
exports.Operators_FailurePattern = Operators_FailurePattern;
exports.Operators_NullArg = Operators_NullArg;
exports.Operators_Using = Operators_Using;
exports.Operators_Lock = Operators_Lock;
exports.ExtraTopLevelOperators_LazyPattern = ExtraTopLevelOperators_LazyPattern;
exports.PrintfModule_PrintFormatToStringBuilderThen = PrintfModule_PrintFormatToStringBuilderThen;
exports.PrintfModule_PrintFormatToStringBuilder = PrintfModule_PrintFormatToStringBuilder;
exports.LanguagePrimitives_GenericEqualityERComparer = exports.LanguagePrimitives_GenericEqualityComparer = void 0;

var _Util = require("./Util.js");

var _FSharpCollections = require("./FSharp.Collections.js");

var _SystemText = require("./System.Text.js");

var _LanguagePrimitives_G, _LanguagePrimitives_G2;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var LanguagePrimitives_GenericEqualityComparer = (_LanguagePrimitives_G = {}, _defineProperty(_LanguagePrimitives_G, "System.Collections.IEqualityComparer.Equals541DA560", function SystemCollectionsIEqualityComparerEquals541DA560(x, y) {
  return (0, _Util.equals)(x, y);
}), _defineProperty(_LanguagePrimitives_G, "System.Collections.IEqualityComparer.GetHashCode4E60E31B", function SystemCollectionsIEqualityComparerGetHashCode4E60E31B(x_1) {
  return (0, _Util.structuralHash)(x_1);
}), _LanguagePrimitives_G);
exports.LanguagePrimitives_GenericEqualityComparer = LanguagePrimitives_GenericEqualityComparer;
var LanguagePrimitives_GenericEqualityERComparer = (_LanguagePrimitives_G2 = {}, _defineProperty(_LanguagePrimitives_G2, "System.Collections.IEqualityComparer.Equals541DA560", function SystemCollectionsIEqualityComparerEquals541DA560(x, y) {
  return (0, _Util.equals)(x, y);
}), _defineProperty(_LanguagePrimitives_G2, "System.Collections.IEqualityComparer.GetHashCode4E60E31B", function SystemCollectionsIEqualityComparerGetHashCode4E60E31B(x_1) {
  return (0, _Util.structuralHash)(x_1);
}), _LanguagePrimitives_G2);
exports.LanguagePrimitives_GenericEqualityERComparer = LanguagePrimitives_GenericEqualityERComparer;

function LanguagePrimitives_FastGenericComparer() {
  return (0, _FSharpCollections.ComparisonIdentity_Structural)();
}

function LanguagePrimitives_FastGenericComparerFromTable() {
  return (0, _FSharpCollections.ComparisonIdentity_Structural)();
}

function LanguagePrimitives_FastGenericEqualityComparer() {
  return (0, _FSharpCollections.HashIdentity_Structural)();
}

function LanguagePrimitives_FastGenericEqualityComparerFromTable() {
  return (0, _FSharpCollections.HashIdentity_Structural)();
}

function Operators_Failure(message) {
  return new Error(message);
}

function Operators_FailurePattern(exn) {
  return exn.message;
}

function Operators_NullArg(x) {
  throw new Error(x);
}

function Operators_Using(resource, action) {
  try {
    return action(resource);
  } finally {
    if ((0, _Util.equals)(resource, null)) {} else {
      resource.Dispose();
    }
  }
}

function Operators_Lock(_lockObj, action) {
  return action();
}

function ExtraTopLevelOperators_LazyPattern(input) {
  return input.Value;
}

function PrintfModule_PrintFormatToStringBuilderThen(continuation, builder, format) {
  return format.cont(function (s) {
    var value = (0, _SystemText.StringBuilder__Append_Z721C83C5)(builder, s);
    void value;
    return continuation();
  });
}

function PrintfModule_PrintFormatToStringBuilder(builder, format) {
  return PrintfModule_PrintFormatToStringBuilderThen(function () {
    void undefined;
  }, builder, format);
}
},{"./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./FSharp.Collections.js":"../JS/.fable/fable-library.3.0.0/FSharp.Collections.js","./System.Text.js":"../JS/.fable/fable-library.3.0.0/System.Text.js"}],"../JS/.fable/fable-library.3.0.0/Map.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MapTreeLeaf$2$reflection = MapTreeLeaf$2$reflection;
exports.MapTreeLeaf$2_$ctor_5BDDA1 = MapTreeLeaf$2_$ctor_5BDDA1;
exports.MapTreeLeaf$2__get_Key = MapTreeLeaf$2__get_Key;
exports.MapTreeLeaf$2__get_Value = MapTreeLeaf$2__get_Value;
exports.MapTreeNode$2$reflection = MapTreeNode$2$reflection;
exports.MapTreeNode$2_$ctor_499A11FD = MapTreeNode$2_$ctor_499A11FD;
exports.MapTreeNode$2__get_Left = MapTreeNode$2__get_Left;
exports.MapTreeNode$2__get_Right = MapTreeNode$2__get_Right;
exports.MapTreeNode$2__get_Height = MapTreeNode$2__get_Height;
exports.MapTreeModule_empty = MapTreeModule_empty;
exports.MapTreeModule_sizeAux = MapTreeModule_sizeAux;
exports.MapTreeModule_size = MapTreeModule_size;
exports.MapTreeModule_mk = MapTreeModule_mk;
exports.MapTreeModule_rebalance = MapTreeModule_rebalance;
exports.MapTreeModule_add = MapTreeModule_add;
exports.MapTreeModule_tryFind = MapTreeModule_tryFind;
exports.MapTreeModule_find = MapTreeModule_find;
exports.MapTreeModule_partition1 = MapTreeModule_partition1;
exports.MapTreeModule_partitionAux = MapTreeModule_partitionAux;
exports.MapTreeModule_partition = MapTreeModule_partition;
exports.MapTreeModule_filter1 = MapTreeModule_filter1;
exports.MapTreeModule_filterAux = MapTreeModule_filterAux;
exports.MapTreeModule_filter = MapTreeModule_filter;
exports.MapTreeModule_spliceOutSuccessor = MapTreeModule_spliceOutSuccessor;
exports.MapTreeModule_remove = MapTreeModule_remove;
exports.MapTreeModule_change = MapTreeModule_change;
exports.MapTreeModule_mem = MapTreeModule_mem;
exports.MapTreeModule_iterOpt = MapTreeModule_iterOpt;
exports.MapTreeModule_iter = MapTreeModule_iter;
exports.MapTreeModule_tryPickOpt = MapTreeModule_tryPickOpt;
exports.MapTreeModule_tryPick = MapTreeModule_tryPick;
exports.MapTreeModule_existsOpt = MapTreeModule_existsOpt;
exports.MapTreeModule_exists = MapTreeModule_exists;
exports.MapTreeModule_forallOpt = MapTreeModule_forallOpt;
exports.MapTreeModule_forall = MapTreeModule_forall;
exports.MapTreeModule_map = MapTreeModule_map;
exports.MapTreeModule_mapiOpt = MapTreeModule_mapiOpt;
exports.MapTreeModule_mapi = MapTreeModule_mapi;
exports.MapTreeModule_foldBackOpt = MapTreeModule_foldBackOpt;
exports.MapTreeModule_foldBack = MapTreeModule_foldBack;
exports.MapTreeModule_foldOpt = MapTreeModule_foldOpt;
exports.MapTreeModule_fold = MapTreeModule_fold;
exports.MapTreeModule_foldSectionOpt = MapTreeModule_foldSectionOpt;
exports.MapTreeModule_foldSection = MapTreeModule_foldSection;
exports.MapTreeModule_toList = MapTreeModule_toList;
exports.MapTreeModule_toArray = MapTreeModule_toArray;
exports.MapTreeModule_ofList = MapTreeModule_ofList;
exports.MapTreeModule_mkFromEnumerator = MapTreeModule_mkFromEnumerator;
exports.MapTreeModule_ofArray = MapTreeModule_ofArray;
exports.MapTreeModule_ofSeq = MapTreeModule_ofSeq;
exports.MapTreeModule_copyToArray = MapTreeModule_copyToArray;
exports.MapTreeModule_MapIterator$2$reflection = MapTreeModule_MapIterator$2$reflection;
exports.MapTreeModule_collapseLHS = MapTreeModule_collapseLHS;
exports.MapTreeModule_mkIterator = MapTreeModule_mkIterator;
exports.MapTreeModule_notStarted = MapTreeModule_notStarted;
exports.MapTreeModule_alreadyFinished = MapTreeModule_alreadyFinished;
exports.MapTreeModule_current = MapTreeModule_current;
exports.MapTreeModule_moveNext = MapTreeModule_moveNext;
exports.MapTreeModule_mkIEnumerator = MapTreeModule_mkIEnumerator;
exports.MapTreeModule_toSeq = MapTreeModule_toSeq;
exports.FSharpMap$reflection = FSharpMap$reflection;
exports.FSharpMap_$ctor = FSharpMap_$ctor;
exports.FSharpMap_get_Empty = FSharpMap_get_Empty;
exports.FSharpMap_Create = FSharpMap_Create;
exports.FSharpMap__get_Comparer = FSharpMap__get_Comparer;
exports.FSharpMap__get_Tree = FSharpMap__get_Tree;
exports.FSharpMap__Add = FSharpMap__Add;
exports.FSharpMap__Change = FSharpMap__Change;
exports.FSharpMap__get_IsEmpty = FSharpMap__get_IsEmpty;
exports.FSharpMap__get_Item = FSharpMap__get_Item;
exports.FSharpMap__TryPick = FSharpMap__TryPick;
exports.FSharpMap__Exists = FSharpMap__Exists;
exports.FSharpMap__Filter = FSharpMap__Filter;
exports.FSharpMap__ForAll = FSharpMap__ForAll;
exports.FSharpMap__Fold = FSharpMap__Fold;
exports.FSharpMap__FoldSection = FSharpMap__FoldSection;
exports.FSharpMap__Iterate = FSharpMap__Iterate;
exports.FSharpMap__MapRange = FSharpMap__MapRange;
exports.FSharpMap__Map = FSharpMap__Map;
exports.FSharpMap__Partition = FSharpMap__Partition;
exports.FSharpMap__get_Count = FSharpMap__get_Count;
exports.FSharpMap__ContainsKey = FSharpMap__ContainsKey;
exports.FSharpMap__Remove = FSharpMap__Remove;
exports.FSharpMap__TryGetValue = FSharpMap__TryGetValue;
exports.FSharpMap__TryFind = FSharpMap__TryFind;
exports.FSharpMap__ToList = FSharpMap__ToList;
exports.FSharpMap__ToArray = FSharpMap__ToArray;
exports.FSharpMap__ComputeHashCode = FSharpMap__ComputeHashCode;
exports.isEmpty = isEmpty;
exports.add = add;
exports.change = change;
exports.find = find;
exports.tryFind = tryFind;
exports.remove = remove;
exports.containsKey = containsKey;
exports.iterate = iterate;
exports.tryPick = tryPick;
exports.pick = pick;
exports.exists = exists;
exports.filter = filter;
exports.partition = partition;
exports.forAll = forAll;
exports.map = map;
exports.fold = fold;
exports.foldBack = foldBack;
exports.toSeq = toSeq;
exports.findKey = findKey;
exports.tryFindKey = tryFindKey;
exports.ofList = ofList;
exports.ofSeq = ofSeq;
exports.ofArray = ofArray;
exports.toList = toList;
exports.toArray = toArray;
exports.empty = empty;
exports.createMutable = createMutable;
exports.groupBy = groupBy;
exports.countBy = countBy;
exports.count = count;
exports.FSharpMap = exports.MapTreeModule_MapIterator$2 = exports.MapTreeNode$2 = exports.MapTreeLeaf$2 = void 0;

var _Reflection = require("./Reflection.js");

var _Option = require("./Option.js");

var _Types = require("./Types.js");

var _List = require("./List.js");

var _Util = require("./Util.js");

var _Seq = require("./Seq.js");

var _String = require("./String.js");

var _FSharpCore = require("./FSharp.Core.js");

var _MutableMap = require("./MutableMap.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var MapTreeLeaf$2 = function MapTreeLeaf$2(k, v) {
  _classCallCheck(this, MapTreeLeaf$2);

  this.k = k;
  this.v = v;
};

exports.MapTreeLeaf$2 = MapTreeLeaf$2;

function MapTreeLeaf$2$reflection(gen0, gen1) {
  return (0, _Reflection.class_type)("Map.MapTreeLeaf`2", [gen0, gen1], MapTreeLeaf$2);
}

function MapTreeLeaf$2_$ctor_5BDDA1(k, v) {
  return new MapTreeLeaf$2(k, v);
}

function MapTreeLeaf$2__get_Key(_) {
  return _.k;
}

function MapTreeLeaf$2__get_Value(_) {
  return _.v;
}

var MapTreeNode$2 = /*#__PURE__*/function (_MapTreeLeaf$) {
  _inherits(MapTreeNode$2, _MapTreeLeaf$);

  var _super = _createSuper(MapTreeNode$2);

  function MapTreeNode$2(k, v, left, right, h) {
    var _this;

    _classCallCheck(this, MapTreeNode$2);

    _this = _super.call(this, k, v);
    _this.left = left;
    _this.right = right;
    _this.h = h;
    return _this;
  }

  return MapTreeNode$2;
}(MapTreeLeaf$2);

exports.MapTreeNode$2 = MapTreeNode$2;

function MapTreeNode$2$reflection(gen0, gen1) {
  return (0, _Reflection.class_type)("Map.MapTreeNode`2", [gen0, gen1], MapTreeNode$2, MapTreeLeaf$2$reflection(gen0, gen1));
}

function MapTreeNode$2_$ctor_499A11FD(k, v, left, right, h) {
  return new MapTreeNode$2(k, v, left, right, h);
}

function MapTreeNode$2__get_Left(_) {
  return _.left;
}

function MapTreeNode$2__get_Right(_) {
  return _.right;
}

function MapTreeNode$2__get_Height(_) {
  return _.h;
}

function MapTreeModule_empty() {
  return void 0;
}

function MapTreeModule_sizeAux(acc_mut, m_mut) {
  MapTreeModule_sizeAux: while (true) {
    var acc = acc_mut,
        m = m_mut;

    if (m != null) {
      var m2 = m;

      if (m2 instanceof MapTreeNode$2) {
        acc_mut = MapTreeModule_sizeAux(acc + 1, MapTreeNode$2__get_Left(m2));
        m_mut = MapTreeNode$2__get_Right(m2);
        continue MapTreeModule_sizeAux;
      } else {
        return acc + 1 | 0;
      }
    } else {
      return acc | 0;
    }

    break;
  }
}

function MapTreeModule_size(x) {
  return MapTreeModule_sizeAux(0, x);
}

function MapTreeModule_mk(l, k, v, r) {
  var hl;
  var m = l;

  if (m != null) {
    var m2 = m;
    hl = m2 instanceof MapTreeNode$2 ? MapTreeNode$2__get_Height(m2) : 1;
  } else {
    hl = 0;
  }

  var hr;
  var m_1 = r;

  if (m_1 != null) {
    var m2_1 = m_1;
    hr = m2_1 instanceof MapTreeNode$2 ? MapTreeNode$2__get_Height(m2_1) : 1;
  } else {
    hr = 0;
  }

  var m_2 = (hl < hr ? hr : hl) | 0;

  if (m_2 === 0) {
    return MapTreeLeaf$2_$ctor_5BDDA1(k, v);
  } else {
    return MapTreeNode$2_$ctor_499A11FD(k, v, l, r, m_2 + 1);
  }
}

function MapTreeModule_rebalance(t1, k, v, t2) {
  var m_2, m2_2, m_3, m2_3;
  var t1h;
  var m = t1;

  if (m != null) {
    var m2 = m;
    t1h = m2 instanceof MapTreeNode$2 ? MapTreeNode$2__get_Height(m2) : 1;
  } else {
    t1h = 0;
  }

  var t2h;
  var m_1 = t2;

  if (m_1 != null) {
    var m2_1 = m_1;
    t2h = m2_1 instanceof MapTreeNode$2 ? MapTreeNode$2__get_Height(m2_1) : 1;
  } else {
    t2h = 0;
  }

  if (t2h > t1h + 2) {
    var matchValue = t2;

    if (matchValue instanceof MapTreeNode$2) {
      if ((m_2 = MapTreeNode$2__get_Left(matchValue), m_2 != null ? (m2_2 = m_2, m2_2 instanceof MapTreeNode$2 ? MapTreeNode$2__get_Height(m2_2) : 1) : 0) > t1h + 1) {
        var matchValue_1 = MapTreeNode$2__get_Left(matchValue);

        if (matchValue_1 instanceof MapTreeNode$2) {
          return MapTreeModule_mk(MapTreeModule_mk(t1, k, v, MapTreeNode$2__get_Left(matchValue_1)), MapTreeLeaf$2__get_Key(matchValue_1), MapTreeLeaf$2__get_Value(matchValue_1), MapTreeModule_mk(MapTreeNode$2__get_Right(matchValue_1), MapTreeLeaf$2__get_Key(matchValue), MapTreeLeaf$2__get_Value(matchValue), MapTreeNode$2__get_Right(matchValue)));
        } else {
          throw new Error("internal error: Map.rebalance");
        }
      } else {
        return MapTreeModule_mk(MapTreeModule_mk(t1, k, v, MapTreeNode$2__get_Left(matchValue)), MapTreeLeaf$2__get_Key(matchValue), MapTreeLeaf$2__get_Value(matchValue), MapTreeNode$2__get_Right(matchValue));
      }
    } else {
      throw new Error("internal error: Map.rebalance");
    }
  } else if (t1h > t2h + 2) {
    var matchValue_2 = t1;

    if (matchValue_2 instanceof MapTreeNode$2) {
      if ((m_3 = MapTreeNode$2__get_Right(matchValue_2), m_3 != null ? (m2_3 = m_3, m2_3 instanceof MapTreeNode$2 ? MapTreeNode$2__get_Height(m2_3) : 1) : 0) > t2h + 1) {
        var matchValue_3 = MapTreeNode$2__get_Right(matchValue_2);

        if (matchValue_3 instanceof MapTreeNode$2) {
          return MapTreeModule_mk(MapTreeModule_mk(MapTreeNode$2__get_Left(matchValue_2), MapTreeLeaf$2__get_Key(matchValue_2), MapTreeLeaf$2__get_Value(matchValue_2), MapTreeNode$2__get_Left(matchValue_3)), MapTreeLeaf$2__get_Key(matchValue_3), MapTreeLeaf$2__get_Value(matchValue_3), MapTreeModule_mk(MapTreeNode$2__get_Right(matchValue_3), k, v, t2));
        } else {
          throw new Error("internal error: Map.rebalance");
        }
      } else {
        return MapTreeModule_mk(MapTreeNode$2__get_Left(matchValue_2), MapTreeLeaf$2__get_Key(matchValue_2), MapTreeLeaf$2__get_Value(matchValue_2), MapTreeModule_mk(MapTreeNode$2__get_Right(matchValue_2), k, v, t2));
      }
    } else {
      throw new Error("internal error: Map.rebalance");
    }
  } else {
    return MapTreeModule_mk(t1, k, v, t2);
  }
}

function MapTreeModule_add(comparer, k, v, m) {
  if (m != null) {
    var m2 = m;
    var c = comparer.Compare(k, MapTreeLeaf$2__get_Key(m2)) | 0;

    if (m2 instanceof MapTreeNode$2) {
      if (c < 0) {
        return MapTreeModule_rebalance(MapTreeModule_add(comparer, k, v, MapTreeNode$2__get_Left(m2)), MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), MapTreeNode$2__get_Right(m2));
      } else if (c === 0) {
        return MapTreeNode$2_$ctor_499A11FD(k, v, MapTreeNode$2__get_Left(m2), MapTreeNode$2__get_Right(m2), MapTreeNode$2__get_Height(m2));
      } else {
        return MapTreeModule_rebalance(MapTreeNode$2__get_Left(m2), MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), MapTreeModule_add(comparer, k, v, MapTreeNode$2__get_Right(m2)));
      }
    } else if (c < 0) {
      return MapTreeNode$2_$ctor_499A11FD(k, v, MapTreeModule_empty(), m, 2);
    } else if (c === 0) {
      return MapTreeLeaf$2_$ctor_5BDDA1(k, v);
    } else {
      return MapTreeNode$2_$ctor_499A11FD(k, v, m, MapTreeModule_empty(), 2);
    }
  } else {
    return MapTreeLeaf$2_$ctor_5BDDA1(k, v);
  }
}

function MapTreeModule_tryFind(comparer_mut, k_mut, m_mut) {
  MapTreeModule_tryFind: while (true) {
    var comparer = comparer_mut,
        k = k_mut,
        m = m_mut;

    if (m != null) {
      var m2 = m;
      var c = comparer.Compare(k, MapTreeLeaf$2__get_Key(m2)) | 0;

      if (c === 0) {
        return (0, _Option.some)(MapTreeLeaf$2__get_Value(m2));
      } else if (m2 instanceof MapTreeNode$2) {
        comparer_mut = comparer;
        k_mut = k;
        m_mut = c < 0 ? MapTreeNode$2__get_Left(m2) : MapTreeNode$2__get_Right(m2);
        continue MapTreeModule_tryFind;
      } else {
        return void 0;
      }
    } else {
      return void 0;
    }

    break;
  }
}

function MapTreeModule_find(comparer, k, m) {
  var matchValue = MapTreeModule_tryFind(comparer, k, m);

  if (matchValue == null) {
    throw new Error();
  } else {
    return (0, _Option.value)(matchValue);
  }
}

function MapTreeModule_partition1(comparer, f, k, v, acc1, acc2) {
  if (f(k, v)) {
    return [MapTreeModule_add(comparer, k, v, acc1), acc2];
  } else {
    return [acc1, MapTreeModule_add(comparer, k, v, acc2)];
  }
}

function MapTreeModule_partitionAux(comparer_mut, f_mut, m_mut, acc_0_mut, acc_1_mut) {
  MapTreeModule_partitionAux: while (true) {
    var comparer = comparer_mut,
        f = f_mut,
        m = m_mut,
        acc_0 = acc_0_mut,
        acc_1 = acc_1_mut;
    var acc = [acc_0, acc_1];

    if (m != null) {
      var m2 = m;

      if (m2 instanceof MapTreeNode$2) {
        var acc_2 = MapTreeModule_partitionAux(comparer, f, MapTreeNode$2__get_Right(m2), acc[0], acc[1]);
        var acc_3 = MapTreeModule_partition1(comparer, f, MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), acc_2[0], acc_2[1]);
        comparer_mut = comparer;
        f_mut = f;
        m_mut = MapTreeNode$2__get_Left(m2);
        acc_0_mut = acc_3[0];
        acc_1_mut = acc_3[1];
        continue MapTreeModule_partitionAux;
      } else {
        return MapTreeModule_partition1(comparer, f, MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), acc[0], acc[1]);
      }
    } else {
      return acc;
    }

    break;
  }
}

function MapTreeModule_partition(comparer, f, m) {
  return MapTreeModule_partitionAux(comparer, f, m, MapTreeModule_empty(), MapTreeModule_empty());
}

function MapTreeModule_filter1(comparer, f, k, v, acc) {
  if (f(k, v)) {
    return MapTreeModule_add(comparer, k, v, acc);
  } else {
    return acc;
  }
}

function MapTreeModule_filterAux(comparer_mut, f_mut, m_mut, acc_mut) {
  MapTreeModule_filterAux: while (true) {
    var comparer = comparer_mut,
        f = f_mut,
        m = m_mut,
        acc = acc_mut;

    if (m != null) {
      var m2 = m;

      if (m2 instanceof MapTreeNode$2) {
        var acc_1 = MapTreeModule_filterAux(comparer, f, MapTreeNode$2__get_Left(m2), acc);
        var acc_2 = MapTreeModule_filter1(comparer, f, MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), acc_1);
        comparer_mut = comparer;
        f_mut = f;
        m_mut = MapTreeNode$2__get_Right(m2);
        acc_mut = acc_2;
        continue MapTreeModule_filterAux;
      } else {
        return MapTreeModule_filter1(comparer, f, MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), acc);
      }
    } else {
      return acc;
    }

    break;
  }
}

function MapTreeModule_filter(comparer, f, m) {
  return MapTreeModule_filterAux(comparer, f, m, MapTreeModule_empty());
}

function MapTreeModule_spliceOutSuccessor(m) {
  if (m != null) {
    var m2 = m;

    if (m2 instanceof MapTreeNode$2) {
      if (MapTreeNode$2__get_Left(m2) == null) {
        return [MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), MapTreeNode$2__get_Right(m2)];
      } else {
        var patternInput = MapTreeModule_spliceOutSuccessor(MapTreeNode$2__get_Left(m2));
        return [patternInput[0], patternInput[1], MapTreeModule_mk(patternInput[2], MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), MapTreeNode$2__get_Right(m2))];
      }
    } else {
      return [MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), MapTreeModule_empty()];
    }
  } else {
    throw new Error("internal error: Map.spliceOutSuccessor");
  }
}

function MapTreeModule_remove(comparer, k, m) {
  if (m != null) {
    var m2 = m;
    var c = comparer.Compare(k, MapTreeLeaf$2__get_Key(m2)) | 0;

    if (m2 instanceof MapTreeNode$2) {
      if (c < 0) {
        return MapTreeModule_rebalance(MapTreeModule_remove(comparer, k, MapTreeNode$2__get_Left(m2)), MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), MapTreeNode$2__get_Right(m2));
      } else if (c === 0) {
        if (MapTreeNode$2__get_Left(m2) == null) {
          return MapTreeNode$2__get_Right(m2);
        } else if (MapTreeNode$2__get_Right(m2) == null) {
          return MapTreeNode$2__get_Left(m2);
        } else {
          var patternInput = MapTreeModule_spliceOutSuccessor(MapTreeNode$2__get_Right(m2));
          return MapTreeModule_mk(MapTreeNode$2__get_Left(m2), patternInput[0], patternInput[1], patternInput[2]);
        }
      } else {
        return MapTreeModule_rebalance(MapTreeNode$2__get_Left(m2), MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), MapTreeModule_remove(comparer, k, MapTreeNode$2__get_Right(m2)));
      }
    } else if (c === 0) {
      return MapTreeModule_empty();
    } else {
      return m;
    }
  } else {
    return MapTreeModule_empty();
  }
}

function MapTreeModule_change(comparer, k, u, m) {
  if (m != null) {
    var m2 = m;

    if (m2 instanceof MapTreeNode$2) {
      var c = comparer.Compare(k, MapTreeLeaf$2__get_Key(m2)) | 0;

      if (c < 0) {
        return MapTreeModule_rebalance(MapTreeModule_change(comparer, k, u, MapTreeNode$2__get_Left(m2)), MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), MapTreeNode$2__get_Right(m2));
      } else if (c === 0) {
        var matchValue_1 = u((0, _Option.some)(MapTreeLeaf$2__get_Value(m2)));

        if (matchValue_1 != null) {
          return MapTreeNode$2_$ctor_499A11FD(k, (0, _Option.value)(matchValue_1), MapTreeNode$2__get_Left(m2), MapTreeNode$2__get_Right(m2), MapTreeNode$2__get_Height(m2));
        } else if (MapTreeNode$2__get_Left(m2) == null) {
          return MapTreeNode$2__get_Right(m2);
        } else if (MapTreeNode$2__get_Right(m2) == null) {
          return MapTreeNode$2__get_Left(m2);
        } else {
          var patternInput = MapTreeModule_spliceOutSuccessor(MapTreeNode$2__get_Right(m2));
          return MapTreeModule_mk(MapTreeNode$2__get_Left(m2), patternInput[0], patternInput[1], patternInput[2]);
        }
      } else {
        return MapTreeModule_rebalance(MapTreeNode$2__get_Left(m2), MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), MapTreeModule_change(comparer, k, u, MapTreeNode$2__get_Right(m2)));
      }
    } else {
      var c_1 = comparer.Compare(k, MapTreeLeaf$2__get_Key(m2)) | 0;

      if (c_1 < 0) {
        var matchValue_2 = u(void 0);

        if (matchValue_2 != null) {
          return MapTreeNode$2_$ctor_499A11FD(k, (0, _Option.value)(matchValue_2), MapTreeModule_empty(), m, 2);
        } else {
          return m;
        }
      } else if (c_1 === 0) {
        var matchValue_3 = u((0, _Option.some)(MapTreeLeaf$2__get_Value(m2)));

        if (matchValue_3 != null) {
          return MapTreeLeaf$2_$ctor_5BDDA1(k, (0, _Option.value)(matchValue_3));
        } else {
          return MapTreeModule_empty();
        }
      } else {
        var matchValue_4 = u(void 0);

        if (matchValue_4 != null) {
          return MapTreeNode$2_$ctor_499A11FD(k, (0, _Option.value)(matchValue_4), m, MapTreeModule_empty(), 2);
        } else {
          return m;
        }
      }
    }
  } else {
    var matchValue = u(void 0);

    if (matchValue != null) {
      return MapTreeLeaf$2_$ctor_5BDDA1(k, (0, _Option.value)(matchValue));
    } else {
      return m;
    }
  }
}

function MapTreeModule_mem(comparer_mut, k_mut, m_mut) {
  MapTreeModule_mem: while (true) {
    var comparer = comparer_mut,
        k = k_mut,
        m = m_mut;

    if (m != null) {
      var m2 = m;
      var c = comparer.Compare(k, MapTreeLeaf$2__get_Key(m2)) | 0;

      if (m2 instanceof MapTreeNode$2) {
        if (c < 0) {
          comparer_mut = comparer;
          k_mut = k;
          m_mut = MapTreeNode$2__get_Left(m2);
          continue MapTreeModule_mem;
        } else if (c === 0) {
          return true;
        } else {
          comparer_mut = comparer;
          k_mut = k;
          m_mut = MapTreeNode$2__get_Right(m2);
          continue MapTreeModule_mem;
        }
      } else {
        return c === 0;
      }
    } else {
      return false;
    }

    break;
  }
}

function MapTreeModule_iterOpt(f_mut, m_mut) {
  MapTreeModule_iterOpt: while (true) {
    var f = f_mut,
        m = m_mut;

    if (m != null) {
      var m2 = m;

      if (m2 instanceof MapTreeNode$2) {
        MapTreeModule_iterOpt(f, MapTreeNode$2__get_Left(m2));
        f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2));
        f_mut = f;
        m_mut = MapTreeNode$2__get_Right(m2);
        continue MapTreeModule_iterOpt;
      } else {
        f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2));
      }
    }

    break;
  }
}

function MapTreeModule_iter(f, m) {
  MapTreeModule_iterOpt(f, m);
}

function MapTreeModule_tryPickOpt(f_mut, m_mut) {
  MapTreeModule_tryPickOpt: while (true) {
    var f = f_mut,
        m = m_mut;

    if (m != null) {
      var m2 = m;

      if (m2 instanceof MapTreeNode$2) {
        var matchValue = MapTreeModule_tryPickOpt(f, MapTreeNode$2__get_Left(m2));

        if (matchValue == null) {
          var matchValue_1 = f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2));

          if (matchValue_1 == null) {
            f_mut = f;
            m_mut = MapTreeNode$2__get_Right(m2);
            continue MapTreeModule_tryPickOpt;
          } else {
            return matchValue_1;
          }
        } else {
          return matchValue;
        }
      } else {
        return f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2));
      }
    } else {
      return void 0;
    }

    break;
  }
}

function MapTreeModule_tryPick(f, m) {
  return MapTreeModule_tryPickOpt(f, m);
}

function MapTreeModule_existsOpt(f_mut, m_mut) {
  MapTreeModule_existsOpt: while (true) {
    var f = f_mut,
        m = m_mut;

    if (m != null) {
      var m2 = m;

      if (m2 instanceof MapTreeNode$2) {
        if (MapTreeModule_existsOpt(f, MapTreeNode$2__get_Left(m2)) ? true : f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2))) {
          return true;
        } else {
          f_mut = f;
          m_mut = MapTreeNode$2__get_Right(m2);
          continue MapTreeModule_existsOpt;
        }
      } else {
        return f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2));
      }
    } else {
      return false;
    }

    break;
  }
}

function MapTreeModule_exists(f, m) {
  return MapTreeModule_existsOpt(f, m);
}

function MapTreeModule_forallOpt(f_mut, m_mut) {
  MapTreeModule_forallOpt: while (true) {
    var f = f_mut,
        m = m_mut;

    if (m != null) {
      var m2 = m;

      if (m2 instanceof MapTreeNode$2) {
        if (MapTreeModule_forallOpt(f, MapTreeNode$2__get_Left(m2)) ? f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2)) : false) {
          f_mut = f;
          m_mut = MapTreeNode$2__get_Right(m2);
          continue MapTreeModule_forallOpt;
        } else {
          return false;
        }
      } else {
        return f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2));
      }
    } else {
      return true;
    }

    break;
  }
}

function MapTreeModule_forall(f, m) {
  return MapTreeModule_forallOpt(f, m);
}

function MapTreeModule_map(f, m) {
  if (m != null) {
    var m2 = m;

    if (m2 instanceof MapTreeNode$2) {
      var l2 = MapTreeModule_map(f, MapTreeNode$2__get_Left(m2));
      var v2 = f(MapTreeLeaf$2__get_Value(m2));
      var r2 = MapTreeModule_map(f, MapTreeNode$2__get_Right(m2));
      return MapTreeNode$2_$ctor_499A11FD(MapTreeLeaf$2__get_Key(m2), v2, l2, r2, MapTreeNode$2__get_Height(m2));
    } else {
      return MapTreeLeaf$2_$ctor_5BDDA1(MapTreeLeaf$2__get_Key(m2), f(MapTreeLeaf$2__get_Value(m2)));
    }
  } else {
    return MapTreeModule_empty();
  }
}

function MapTreeModule_mapiOpt(f, m) {
  if (m != null) {
    var m2 = m;

    if (m2 instanceof MapTreeNode$2) {
      var l2 = MapTreeModule_mapiOpt(f, MapTreeNode$2__get_Left(m2));
      var v2 = f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2));
      var r2 = MapTreeModule_mapiOpt(f, MapTreeNode$2__get_Right(m2));
      return MapTreeNode$2_$ctor_499A11FD(MapTreeLeaf$2__get_Key(m2), v2, l2, r2, MapTreeNode$2__get_Height(m2));
    } else {
      return MapTreeLeaf$2_$ctor_5BDDA1(MapTreeLeaf$2__get_Key(m2), f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2)));
    }
  } else {
    return MapTreeModule_empty();
  }
}

function MapTreeModule_mapi(f, m) {
  return MapTreeModule_mapiOpt(f, m);
}

function MapTreeModule_foldBackOpt(f_mut, m_mut, x_mut) {
  MapTreeModule_foldBackOpt: while (true) {
    var f = f_mut,
        m = m_mut,
        x = x_mut;

    if (m != null) {
      var m2 = m;

      if (m2 instanceof MapTreeNode$2) {
        var x_1 = MapTreeModule_foldBackOpt(f, MapTreeNode$2__get_Right(m2), x);
        var x_2 = f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), x_1);
        f_mut = f;
        m_mut = MapTreeNode$2__get_Left(m2);
        x_mut = x_2;
        continue MapTreeModule_foldBackOpt;
      } else {
        return f(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), x);
      }
    } else {
      return x;
    }

    break;
  }
}

function MapTreeModule_foldBack(f, m, x) {
  return MapTreeModule_foldBackOpt(f, m, x);
}

function MapTreeModule_foldOpt(f_mut, x_mut, m_mut) {
  MapTreeModule_foldOpt: while (true) {
    var f = f_mut,
        x = x_mut,
        m = m_mut;

    if (m != null) {
      var m2 = m;

      if (m2 instanceof MapTreeNode$2) {
        f_mut = f;
        x_mut = f(MapTreeModule_foldOpt(f, x, MapTreeNode$2__get_Left(m2)), MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2));
        m_mut = MapTreeNode$2__get_Right(m2);
        continue MapTreeModule_foldOpt;
      } else {
        return f(x, MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2));
      }
    } else {
      return x;
    }

    break;
  }
}

function MapTreeModule_fold(f, x, m) {
  return MapTreeModule_foldOpt(f, x, m);
}

function MapTreeModule_foldSectionOpt(comparer, lo, hi, f, m, x) {
  var foldFromTo = function foldFromTo(f_1_mut, m_1_mut, x_1_mut) {
    foldFromTo: while (true) {
      var f_1 = f_1_mut,
          m_1 = m_1_mut,
          x_1 = x_1_mut;

      if (m_1 != null) {
        var m2 = m_1;

        if (m2 instanceof MapTreeNode$2) {
          var cLoKey = comparer.Compare(lo, MapTreeLeaf$2__get_Key(m2)) | 0;
          var cKeyHi = comparer.Compare(MapTreeLeaf$2__get_Key(m2), hi) | 0;
          var x_2 = cLoKey < 0 ? foldFromTo(f_1, MapTreeNode$2__get_Left(m2), x_1) : x_1;
          var x_3 = (cLoKey <= 0 ? cKeyHi <= 0 : false) ? f_1(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), x_2) : x_2;

          if (cKeyHi < 0) {
            f_1_mut = f_1;
            m_1_mut = MapTreeNode$2__get_Right(m2);
            x_1_mut = x_3;
            continue foldFromTo;
          } else {
            return x_3;
          }
        } else if (comparer.Compare(lo, MapTreeLeaf$2__get_Key(m2)) <= 0 ? comparer.Compare(MapTreeLeaf$2__get_Key(m2), hi) <= 0 : false) {
          return f_1(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2), x_1);
        } else {
          return x_1;
        }
      } else {
        return x_1;
      }

      break;
    }
  };

  if (comparer.Compare(lo, hi) === 1) {
    return x;
  } else {
    return foldFromTo(f, m, x);
  }
}

function MapTreeModule_foldSection(comparer, lo, hi, f, m, x) {
  return MapTreeModule_foldSectionOpt(comparer, lo, hi, f, m, x);
}

function MapTreeModule_toList(m) {
  var loop = function loop(m_1_mut, acc_mut) {
    loop: while (true) {
      var m_1 = m_1_mut,
          acc = acc_mut;

      if (m_1 != null) {
        var m2 = m_1;

        if (m2 instanceof MapTreeNode$2) {
          m_1_mut = MapTreeNode$2__get_Left(m2);
          acc_mut = new _Types.List([MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2)], loop(MapTreeNode$2__get_Right(m2), acc));
          continue loop;
        } else {
          return new _Types.List([MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2)], acc);
        }
      } else {
        return acc;
      }

      break;
    }
  };

  return loop(m, new _Types.List());
}

function MapTreeModule_toArray(m) {
  return Array.from(MapTreeModule_toList(m));
}

function MapTreeModule_ofList(comparer, l) {
  return (0, _List.fold)(function (acc, tupledArg) {
    return MapTreeModule_add(comparer, tupledArg[0], tupledArg[1], acc);
  }, MapTreeModule_empty(), l);
}

function MapTreeModule_mkFromEnumerator(comparer_mut, acc_mut, e_mut) {
  MapTreeModule_mkFromEnumerator: while (true) {
    var comparer = comparer_mut,
        acc = acc_mut,
        e = e_mut;

    if (e["System.Collections.IEnumerator.MoveNext"]()) {
      var patternInput = e["System.Collections.Generic.IEnumerator`1.get_Current"]();
      comparer_mut = comparer;
      acc_mut = MapTreeModule_add(comparer, patternInput[0], patternInput[1], acc);
      e_mut = e;
      continue MapTreeModule_mkFromEnumerator;
    } else {
      return acc;
    }

    break;
  }
}

function MapTreeModule_ofArray(comparer, arr) {
  var res = MapTreeModule_empty();

  for (var idx = 0; idx <= arr.length - 1; idx++) {
    var forLoopVar = arr[idx];
    res = MapTreeModule_add(comparer, forLoopVar[0], forLoopVar[1], res);
  }

  return res;
}

function MapTreeModule_ofSeq(comparer, c) {
  if ((0, _Util.isArrayLike)(c)) {
    return MapTreeModule_ofArray(comparer, c);
  } else if (c instanceof _Types.List) {
    return MapTreeModule_ofList(comparer, c);
  } else {
    var ie = (0, _Seq.getEnumerator)(c);

    try {
      return MapTreeModule_mkFromEnumerator(comparer, MapTreeModule_empty(), ie);
    } finally {
      ie.Dispose();
    }
  }
}

function MapTreeModule_copyToArray(m, arr, i) {
  var j = i | 0;
  MapTreeModule_iter(function (x, y) {
    arr[j] = [x, y];
    j = j + 1;
  }, m);
}

var MapTreeModule_MapIterator$2 = /*#__PURE__*/function (_Record) {
  _inherits(MapTreeModule_MapIterator$2, _Record);

  var _super2 = _createSuper(MapTreeModule_MapIterator$2);

  function MapTreeModule_MapIterator$2(stack, started) {
    var _this2;

    _classCallCheck(this, MapTreeModule_MapIterator$2);

    _this2 = _super2.call(this);
    _this2.stack = stack;
    _this2.started = started;
    return _this2;
  }

  return MapTreeModule_MapIterator$2;
}(_Types.Record);

exports.MapTreeModule_MapIterator$2 = MapTreeModule_MapIterator$2;

function MapTreeModule_MapIterator$2$reflection(gen0, gen1) {
  return (0, _Reflection.record_type)("Map.MapTreeModule.MapIterator`2", [gen0, gen1], MapTreeModule_MapIterator$2, function () {
    return [["stack", (0, _Reflection.list_type)((0, _Reflection.option_type)(MapTreeLeaf$2$reflection(gen0, gen1)))], ["started", _Reflection.bool_type]];
  });
}

function MapTreeModule_collapseLHS(stack_mut) {
  MapTreeModule_collapseLHS: while (true) {
    var stack = stack_mut;

    if (stack.tail != null) {
      var rest = stack.tail;
      var m = stack.head;

      if (m != null) {
        var m2 = m;

        if (m2 instanceof MapTreeNode$2) {
          stack_mut = new _Types.List(MapTreeNode$2__get_Left(m2), new _Types.List(MapTreeLeaf$2_$ctor_5BDDA1(MapTreeLeaf$2__get_Key(m2), MapTreeLeaf$2__get_Value(m2)), new _Types.List(MapTreeNode$2__get_Right(m2), rest)));
          continue MapTreeModule_collapseLHS;
        } else {
          return stack;
        }
      } else {
        stack_mut = rest;
        continue MapTreeModule_collapseLHS;
      }
    } else {
      return new _Types.List();
    }

    break;
  }
}

function MapTreeModule_mkIterator(m) {
  return new MapTreeModule_MapIterator$2(MapTreeModule_collapseLHS(new _Types.List(m, new _Types.List())), false);
}

function MapTreeModule_notStarted() {
  throw new Error("enumeration not started");
}

function MapTreeModule_alreadyFinished() {
  throw new Error("enumeration already finished");
}

function MapTreeModule_current(i) {
  if (i.started) {
    var matchValue = i.stack;

    if (matchValue.tail != null) {
      if (matchValue.head != null) {
        var m = matchValue.head;

        if (m instanceof MapTreeNode$2) {
          throw new Error("Please report error: Map iterator, unexpected stack for current");
        } else {
          return [MapTreeLeaf$2__get_Key(m), MapTreeLeaf$2__get_Value(m)];
        }
      } else {
        throw new Error("Please report error: Map iterator, unexpected stack for current");
      }
    } else {
      return MapTreeModule_alreadyFinished();
    }
  } else {
    return MapTreeModule_notStarted();
  }
}

function MapTreeModule_moveNext(i) {
  if (i.started) {
    var matchValue = i.stack;

    if (matchValue.tail != null) {
      if (matchValue.head != null) {
        var m = matchValue.head;

        if (m instanceof MapTreeNode$2) {
          throw new Error("Please report error: Map iterator, unexpected stack for moveNext");
        } else {
          i.stack = MapTreeModule_collapseLHS(matchValue.tail);
          return !(i.stack.tail == null);
        }
      } else {
        throw new Error("Please report error: Map iterator, unexpected stack for moveNext");
      }
    } else {
      return false;
    }
  } else {
    i.started = true;
    return !(i.stack.tail == null);
  }
}

function MapTreeModule_mkIEnumerator(m) {
  var _ref;

  var i = MapTreeModule_mkIterator(m);
  return _ref = {}, _defineProperty(_ref, "System.Collections.Generic.IEnumerator`1.get_Current", function SystemCollectionsGenericIEnumerator1Get_Current() {
    return MapTreeModule_current(i);
  }), _defineProperty(_ref, "System.Collections.IEnumerator.get_Current", function SystemCollectionsIEnumeratorGet_Current() {
    return MapTreeModule_current(i);
  }), _defineProperty(_ref, "System.Collections.IEnumerator.MoveNext", function SystemCollectionsIEnumeratorMoveNext() {
    return MapTreeModule_moveNext(i);
  }), _defineProperty(_ref, "System.Collections.IEnumerator.Reset", function SystemCollectionsIEnumeratorReset() {
    i = MapTreeModule_mkIterator(m);
  }), _defineProperty(_ref, "Dispose", function Dispose() {}), _ref;
}

function MapTreeModule_toSeq(s) {
  return (0, _Seq.unfold)(function (en_1) {
    if (en_1["System.Collections.IEnumerator.MoveNext"]()) {
      return [en_1["System.Collections.Generic.IEnumerator`1.get_Current"](), en_1];
    } else {
      return void 0;
    }
  }, MapTreeModule_mkIEnumerator(s));
}

var FSharpMap = /*#__PURE__*/function () {
  function FSharpMap(comparer, tree) {
    _classCallCheck(this, FSharpMap);

    this.comparer = comparer;
    this.tree = tree;
  }

  _createClass(FSharpMap, [{
    key: "GetHashCode",
    value: function GetHashCode() {
      var this$ = this;
      return FSharpMap__ComputeHashCode(this$) | 0;
    }
  }, {
    key: "Equals",
    value: function Equals(that) {
      var this$ = this;

      if (that instanceof FSharpMap) {
        var e1 = (0, _Seq.getEnumerator)(this$);

        try {
          var e2 = (0, _Seq.getEnumerator)(that);

          try {
            var loop = function loop() {
              var m1 = e1["System.Collections.IEnumerator.MoveNext"]();

              if (m1 === e2["System.Collections.IEnumerator.MoveNext"]()) {
                if (!m1) {
                  return true;
                } else {
                  var e1c = e1["System.Collections.Generic.IEnumerator`1.get_Current"]();
                  var e2c = e2["System.Collections.Generic.IEnumerator`1.get_Current"]();

                  if ((0, _Util.equals)(e1c[0], e2c[0]) ? (0, _Util.equals)(e1c[1], e2c[1]) : false) {
                    return loop();
                  } else {
                    return false;
                  }
                }
              } else {
                return false;
              }
            };

            return loop();
          } finally {
            e2.Dispose();
          }
        } finally {
          e1.Dispose();
        }
      } else {
        return false;
      }
    }
  }, {
    key: "toString",
    value: function toString() {
      var this$ = this;
      return "map [" + (0, _String.join)("; ", (0, _Seq.map)(function (kv) {
        return (0, _String.format)("({0}, {1})", kv[0], kv[1]);
      }, this$)) + "]";
    }
  }, {
    key: "GetEnumerator",
    value: function GetEnumerator() {
      var __ = this;

      return MapTreeModule_mkIEnumerator(__.tree);
    }
  }, {
    key: Symbol.iterator,
    value: function value() {
      return (0, _Seq.toIterator)(this.GetEnumerator());
    }
  }, {
    key: "System.Collections.IEnumerable.GetEnumerator",
    value: function SystemCollectionsIEnumerableGetEnumerator() {
      var __ = this;

      return MapTreeModule_mkIEnumerator(__.tree);
    }
  }, {
    key: "CompareTo",
    value: function CompareTo(obj) {
      var m = this;

      if (obj instanceof FSharpMap) {
        return (0, _Seq.compareWith)(function (kvp1, kvp2) {
          var c = m.comparer.Compare(kvp1[0], kvp2[0]) | 0;
          return (c !== 0 ? c : (0, _Util.compare)(kvp1[1], kvp2[1])) | 0;
        }, m, obj) | 0;
      } else {
        throw new Error("not comparable\\nParameter name: obj");
      }
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Add2B595",
    value: function SystemCollectionsGenericICollection1Add2B595(x) {
      void x;
      throw new Error("Map cannot be mutated");
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Clear",
    value: function SystemCollectionsGenericICollection1Clear() {
      throw new Error("Map cannot be mutated");
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Remove2B595",
    value: function SystemCollectionsGenericICollection1Remove2B595(x) {
      void x;
      throw new Error("Map cannot be mutated");
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Contains2B595",
    value: function SystemCollectionsGenericICollection1Contains2B595(x) {
      var m = this;
      return FSharpMap__ContainsKey(m, x[0]) ? (0, _Util.equals)(FSharpMap__get_Item(m, x[0]), x[1]) : false;
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.CopyToZ2E171D71",
    value: function SystemCollectionsGenericICollection1CopyToZ2E171D71(arr, i) {
      var m = this;
      MapTreeModule_copyToArray(m.tree, arr, i);
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.get_IsReadOnly",
    value: function SystemCollectionsGenericICollection1Get_IsReadOnly() {
      return true;
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.get_Count",
    value: function SystemCollectionsGenericICollection1Get_Count() {
      var m = this;
      return FSharpMap__get_Count(m) | 0;
    }
  }, {
    key: "System.Collections.Generic.IReadOnlyCollection`1.get_Count",
    value: function SystemCollectionsGenericIReadOnlyCollection1Get_Count() {
      var m = this;
      return FSharpMap__get_Count(m) | 0;
    }
  }, {
    key: "clear",
    value: function clear() {
      throw new Error("Map cannot be mutated");
    }
  }, {
    key: "delete",
    value: function _delete(_arg1) {
      throw new Error("Map cannot be mutated");
      return false;
    }
  }, {
    key: "entries",
    value: function entries() {
      var m = this;
      return (0, _Seq.map)(function (p) {
        return [p[0], p[1]];
      }, m);
    }
  }, {
    key: "get",
    value: function get(k) {
      var m = this;
      return FSharpMap__get_Item(m, k);
    }
  }, {
    key: "has",
    value: function has(k) {
      var m = this;
      return FSharpMap__ContainsKey(m, k);
    }
  }, {
    key: "keys",
    value: function keys() {
      var m = this;
      return (0, _Seq.map)(function (p) {
        return p[0];
      }, m);
    }
  }, {
    key: "set",
    value: function set(k, v) {
      var m = this;
      throw new Error("Map cannot be mutated");
      return m;
    }
  }, {
    key: "values",
    value: function values() {
      var m = this;
      return (0, _Seq.map)(function (p) {
        return p[1];
      }, m);
    }
  }, {
    key: "forEach",
    value: function forEach(f, thisArg) {
      var m = this;
      (0, _Seq.iterate)(function (p) {
        f(p[1], p[0], m);
      }, m);
    }
  }, {
    key: Symbol.toStringTag,
    get: function get() {
      return "FSharpMap";
    }
  }, {
    key: "size",
    get: function get() {
      var m = this;
      return FSharpMap__get_Count(m) | 0;
    }
  }]);

  return FSharpMap;
}();

exports.FSharpMap = FSharpMap;

function FSharpMap$reflection(gen0, gen1) {
  return (0, _Reflection.class_type)("Map.FSharpMap", [gen0, gen1], FSharpMap);
}

function FSharpMap_$ctor(comparer, tree) {
  return new FSharpMap(comparer, tree);
}

(function () {
  FSharpMap.empty = FSharpMap_$ctor((0, _FSharpCore.LanguagePrimitives_FastGenericComparer)(), MapTreeModule_empty());
})();

function FSharpMap_get_Empty() {
  return FSharpMap.empty;
}

function FSharpMap_Create(ie) {
  var comparer = (0, _FSharpCore.LanguagePrimitives_FastGenericComparer)();
  return FSharpMap_$ctor(comparer, MapTreeModule_ofSeq(comparer, ie));
}

function FSharpMap__get_Comparer(m) {
  return m.comparer;
}

function FSharpMap__get_Tree(m) {
  return m.tree;
}

function FSharpMap__Add(m, key, value) {
  return FSharpMap_$ctor(m.comparer, MapTreeModule_add(m.comparer, key, value, m.tree));
}

function FSharpMap__Change(m, key, f) {
  return FSharpMap_$ctor(m.comparer, MapTreeModule_change(m.comparer, key, f, m.tree));
}

function FSharpMap__get_IsEmpty(m) {
  return m.tree == null;
}

function FSharpMap__get_Item(m, key) {
  return MapTreeModule_find(m.comparer, key, m.tree);
}

function FSharpMap__TryPick(m, f) {
  return MapTreeModule_tryPick(f, m.tree);
}

function FSharpMap__Exists(m, predicate) {
  return MapTreeModule_exists(predicate, m.tree);
}

function FSharpMap__Filter(m, predicate) {
  return FSharpMap_$ctor(m.comparer, MapTreeModule_filter(m.comparer, predicate, m.tree));
}

function FSharpMap__ForAll(m, predicate) {
  return MapTreeModule_forall(predicate, m.tree);
}

function FSharpMap__Fold(m, f, acc) {
  return MapTreeModule_foldBack(f, m.tree, acc);
}

function FSharpMap__FoldSection(m, lo, hi, f, acc) {
  return MapTreeModule_foldSection(m.comparer, lo, hi, f, m.tree, acc);
}

function FSharpMap__Iterate(m, f) {
  MapTreeModule_iter(f, m.tree);
}

function FSharpMap__MapRange(m, f) {
  return FSharpMap_$ctor(m.comparer, MapTreeModule_map(f, m.tree));
}

function FSharpMap__Map(m, f) {
  return FSharpMap_$ctor(m.comparer, MapTreeModule_mapi(f, m.tree));
}

function FSharpMap__Partition(m, predicate) {
  var patternInput = MapTreeModule_partition(m.comparer, predicate, m.tree);
  return [FSharpMap_$ctor(m.comparer, patternInput[0]), FSharpMap_$ctor(m.comparer, patternInput[1])];
}

function FSharpMap__get_Count(m) {
  return MapTreeModule_size(m.tree);
}

function FSharpMap__ContainsKey(m, key) {
  return MapTreeModule_mem(m.comparer, key, m.tree);
}

function FSharpMap__Remove(m, key) {
  return FSharpMap_$ctor(m.comparer, MapTreeModule_remove(m.comparer, key, m.tree));
}

function FSharpMap__TryGetValue(__, key, value) {
  var matchValue = MapTreeModule_tryFind(__.comparer, key, __.tree);

  if (matchValue == null) {
    return false;
  } else {
    var v = (0, _Option.value)(matchValue);
    value.contents = v;
    return true;
  }
}

function FSharpMap__TryFind(m, key) {
  return MapTreeModule_tryFind(m.comparer, key, m.tree);
}

function FSharpMap__ToList(m) {
  return MapTreeModule_toList(m.tree);
}

function FSharpMap__ToArray(m) {
  return MapTreeModule_toArray(m.tree);
}

function FSharpMap__ComputeHashCode(this$) {
  var combineHash = function combineHash(x, y) {
    return (x << 1) + y + 631;
  };

  var res = 0;
  var enumerator = (0, _Seq.getEnumerator)(this$);

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var activePatternResult4281 = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]();
      res = combineHash(res, (0, _Util.structuralHash)(activePatternResult4281[0]));
      res = combineHash(res, (0, _Util.structuralHash)(activePatternResult4281[1]));
    }
  } finally {
    enumerator.Dispose();
  }

  return res | 0;
}

function isEmpty(table) {
  return FSharpMap__get_IsEmpty(table);
}

function add(key, value, table) {
  return FSharpMap__Add(table, key, value);
}

function change(key, f, table) {
  return FSharpMap__Change(table, key, f);
}

function find(key, table) {
  return FSharpMap__get_Item(table, key);
}

function tryFind(key, table) {
  return FSharpMap__TryFind(table, key);
}

function remove(key, table) {
  return FSharpMap__Remove(table, key);
}

function containsKey(key, table) {
  return FSharpMap__ContainsKey(table, key);
}

function iterate(action, table) {
  FSharpMap__Iterate(table, action);
}

function tryPick(chooser, table) {
  return FSharpMap__TryPick(table, chooser);
}

function pick(chooser, table) {
  var matchValue = tryPick(chooser, table);

  if (matchValue != null) {
    return (0, _Option.value)(matchValue);
  } else {
    throw new Error();
  }
}

function exists(predicate, table) {
  return FSharpMap__Exists(table, predicate);
}

function filter(predicate, table) {
  return FSharpMap__Filter(table, predicate);
}

function partition(predicate, table) {
  return FSharpMap__Partition(table, predicate);
}

function forAll(predicate, table) {
  return FSharpMap__ForAll(table, predicate);
}

function map(mapping, table) {
  return FSharpMap__Map(table, mapping);
}

function fold(folder, state, table) {
  return MapTreeModule_fold(folder, state, FSharpMap__get_Tree(table));
}

function foldBack(folder, table, state) {
  return MapTreeModule_foldBack(folder, FSharpMap__get_Tree(table), state);
}

function toSeq(table) {
  return (0, _Seq.map)(function (kvp) {
    return [kvp[0], kvp[1]];
  }, table);
}

function findKey(predicate, table) {
  return (0, _Seq.pick)(function (kvp) {
    var k = kvp[0];

    if (predicate(k, kvp[1])) {
      return (0, _Option.some)(k);
    } else {
      return void 0;
    }
  }, table);
}

function tryFindKey(predicate, table) {
  return (0, _Seq.tryPick)(function (kvp) {
    var k = kvp[0];

    if (predicate(k, kvp[1])) {
      return (0, _Option.some)(k);
    } else {
      return void 0;
    }
  }, table);
}

function ofList(elements) {
  return FSharpMap_Create(elements);
}

function ofSeq(elements) {
  return FSharpMap_Create(elements);
}

function ofArray(elements) {
  var comparer = (0, _FSharpCore.LanguagePrimitives_FastGenericComparer)();
  return FSharpMap_$ctor(comparer, MapTreeModule_ofArray(comparer, elements));
}

function toList(table) {
  return FSharpMap__ToList(table);
}

function toArray(table) {
  return FSharpMap__ToArray(table);
}

function empty() {
  return FSharpMap_get_Empty();
}

function createMutable(source, comparer) {
  return (0, _MutableMap.Dictionary_$ctor_6623D9B3)(source, comparer);
}

function groupBy(projection, xs, comparer) {
  var dict = createMutable((0, _Seq.empty)(), comparer);
  var enumerator = (0, _Seq.getEnumerator)(xs);

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var v = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]();
      var key = projection(v);

      if (dict.has(key)) {
        void dict.get(key).push(v);
      } else {
        var value = dict.set(key, [v]);
        void value;
      }
    }
  } finally {
    enumerator.Dispose();
  }

  return (0, _Seq.map)(function (tupledArg) {
    return [tupledArg[0], tupledArg[1]];
  }, dict.entries());
}

function countBy(projection, xs, comparer) {
  var dict = createMutable((0, _Seq.empty)(), comparer);
  var enumerator = (0, _Seq.getEnumerator)(xs);

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var key = projection(enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]());
      var value_1 = dict.has(key) ? dict.set(key, dict.get(key) + 1) : dict.set(key, 1);
      void value_1;
    }
  } finally {
    enumerator.Dispose();
  }

  return dict.entries();
}

function count(table) {
  return FSharpMap__get_Count(table);
}
},{"./Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","./List.js":"../JS/.fable/fable-library.3.0.0/List.js","./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","./String.js":"../JS/.fable/fable-library.3.0.0/String.js","./FSharp.Core.js":"../JS/.fable/fable-library.3.0.0/FSharp.Core.js","./MutableMap.js":"../JS/.fable/fable-library.3.0.0/MutableMap.js"}],"../JS/core/utils.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isPowerOf2 = isPowerOf2;
exports.adjustOffset = adjustOffset;
exports.boolToInt = boolToInt;
exports.clipString = clipString;
exports.clipArray = clipArray;
exports.clipObj = clipObj;
exports.enumName = enumName;
exports.stringJoin = stringJoin;
exports.addLineNumbers = addLineNumbers;
exports.DEG_PER_RAD = exports.RAD_PER_DEG = exports.ONE_DEGREE = exports.ONE_RADIAN = void 0;

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _RegExp = require("../.fable/fable-library.3.0.0/RegExp.js");

function isPowerOf2(x) {
  return (x & x - 1) === 0;
}

function adjustOffset(offset, align) {
  return ~~Math.ceil(offset / align) * align;
}

function boolToInt(b) {
  if (b) {
    return 1;
  } else {
    return 0;
  }
}

var ONE_RADIAN = 180 / 3.141592653589793;
exports.ONE_RADIAN = ONE_RADIAN;
var ONE_DEGREE = 3.141592653589793 / 180;
exports.ONE_DEGREE = ONE_DEGREE;
var RAD_PER_DEG = ONE_DEGREE * 1;
exports.RAD_PER_DEG = RAD_PER_DEG;
var DEG_PER_RAD = ONE_RADIAN * 1;
exports.DEG_PER_RAD = DEG_PER_RAD;

function clipString(count, str) {
  if (str.length > count) {
    return (0, _String.substring)(str, 0, count - 3) + "...";
  } else {
    return str;
  }
}

function clipArray(count, arr) {
  return clipString(count, (0, _String.toText)((0, _String.printf)("%A"))(arr));
}

function clipObj(count, o) {
  var copyOfStruct;
  return clipString(count, (copyOfStruct = o, (0, _Types.toString)(copyOfStruct)));
}

function enumName(enumType, value) {
  return (0, _Reflection.getEnumName)(enumType, value);
}

function stringJoin(sep, str) {
  return (0, _String.join)(sep, str);
}

function addLineNumbers(txt) {
  return stringJoin("\r\n", (0, _Array.mapIndexed)(function (i, s) {
    return (0, _String.toText)((0, _String.interpolate)("%4i%P(): %P()", [i + 1, s]));
  }, (0, _RegExp.split)(txt, "\r?\n")));
}
},{"../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","../.fable/fable-library.3.0.0/RegExp.js":"../JS/.fable/fable-library.3.0.0/RegExp.js"}],"../JS/js/typedarray_utils.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.bufferView = bufferView;
exports.bufferView2 = bufferView2;
exports.bufferView3 = bufferView3;
exports.toArrayBufferViewFloat32 = toArrayBufferViewFloat32;
exports.toArrayBufferViewUint16 = toArrayBufferViewUint16;
exports.int8Array = int8Array;
exports.uint8Array = uint8Array;
exports.int32Array = int32Array;
exports.uint32Array = uint32Array;
exports.float32Array = float32Array;
exports.writeFloat32View = writeFloat32View;
exports.writeInt8View = writeInt8View;
exports.writeUint8View = writeUint8View;
exports.writeInt16View = writeInt16View;
exports.writeUint16View = writeUint16View;
exports.writeInt32View = writeInt32View;
exports.Int8ArrayFactory$reflection = Int8ArrayFactory$reflection;
exports.Int8ArrayFactory_$ctor = Int8ArrayFactory_$ctor;
exports.float32ArrayFactory = exports.uint32ArrayFactory = exports.int32ArrayFactory = exports.uint16ArrayFactory = exports.int16ArrayFactory = exports.uint8ArrayFactory = exports.int8ArrayFactory = exports.Int8ArrayFactory = exports.isLittleEndian = exports.emptyFloat32Array = exports.emptyInt32Array = exports.emptyUint8Array = exports.emptyInt8Array = void 0;

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _uint8ArrayFactory, _int16ArrayFactory, _uint16ArrayFactory, _int32ArrayFactory, _uint32ArrayFactory, _float32ArrayFactory;

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function bufferView(data) {
  return data;
}

function bufferView2(data) {
  return data;
}

function bufferView3(data) {
  return data;
}

function toArrayBufferViewFloat32(arr) {
  return new Float32Array(arr);
}

function toArrayBufferViewUint16(arr) {
  return new Uint16Array(arr);
}

function int8Array(arr) {
  return new Int8Array(arr);
}

function uint8Array(arr) {
  return new Uint8Array(arr);
}

function int32Array(arr) {
  return new Int32Array(arr);
}

function uint32Array(arr) {
  return new Uint32Array(arr);
}

function float32Array(arr) {
  return new Float32Array(arr);
}

var emptyInt8Array = int8Array(0);
exports.emptyInt8Array = emptyInt8Array;
var emptyUint8Array = uint8Array(0);
exports.emptyUint8Array = emptyUint8Array;
var emptyInt32Array = int32Array(0);
exports.emptyInt32Array = emptyInt32Array;
var emptyFloat32Array = float32Array(0);
exports.emptyFloat32Array = emptyFloat32Array;
var isLittleEndian = int32Array(int8Array((0, _List.ofArray)([1, 0, 0, 0])))[0] === 1;
exports.isLittleEndian = isLittleEndian;

function writeFloat32View(view, ofs, value) {
  view.setFloat32(ofs, value, isLittleEndian);
  return 4;
}

function writeInt8View(view, ofs, value) {
  view.setInt8(ofs, (value + 0x80 & 0xFF) - 0x80);
  return 1;
}

function writeUint8View(view, ofs, value) {
  view.setUint8(ofs, value & 0xFF);
  return 1;
}

function writeInt16View(view, ofs, value) {
  view.setInt16(ofs, (value + 0x8000 & 0xFFFF) - 0x8000, isLittleEndian);
  return 2;
}

function writeUint16View(view, ofs, value) {
  view.setUint16(ofs, value & 0xFFFF, isLittleEndian);
  return 2;
}

function writeInt32View(view, ofs, value) {
  view.setInt32(ofs, value, isLittleEndian);
  return 4;
}

var Int8ArrayFactory = /*#__PURE__*/function () {
  function Int8ArrayFactory() {
    _classCallCheck(this, Int8ArrayFactory);
  }

  _createClass(Int8ArrayFactory, [{
    key: "Create",
    value: function Create(size) {
      return new Int8Array(size);
    }
  }, {
    key: "Create",
    value: function Create(typedArray) {
      return new Int8Array(typedArray);
    }
  }, {
    key: "Create",
    value: function Create(data) {
      return new Int8Array(data);
    }
  }, {
    key: "Create",
    value: function Create(buffer, offset, length) {
      return new Int8Array(buffer, offset, length);
    }
  }]);

  return Int8ArrayFactory;
}();

exports.Int8ArrayFactory = Int8ArrayFactory;

function Int8ArrayFactory$reflection() {
  return (0, _Reflection.class_type)("Wil.Js.TypedArrayUtils.Int8ArrayFactory", void 0, Int8ArrayFactory);
}

function Int8ArrayFactory_$ctor() {
  return new Int8ArrayFactory();
}

var int8ArrayFactory = Int8ArrayFactory_$ctor();
exports.int8ArrayFactory = int8ArrayFactory;
var uint8ArrayFactory = (_uint8ArrayFactory = {
  Create: function Create(size) {
    return new Uint8Array(size);
  }
}, _defineProperty(_uint8ArrayFactory, "Create", function Create(typedArray) {
  return new Uint8Array(typedArray);
}), _defineProperty(_uint8ArrayFactory, "Create", function Create(data) {
  return new Uint8Array(data);
}), _defineProperty(_uint8ArrayFactory, "Create", function Create(buffer, offset, length) {
  return new Uint8Array(buffer, offset, length);
}), _uint8ArrayFactory);
exports.uint8ArrayFactory = uint8ArrayFactory;
var int16ArrayFactory = (_int16ArrayFactory = {
  Create: function Create(size) {
    return new Int16Array(size);
  }
}, _defineProperty(_int16ArrayFactory, "Create", function Create(typedArray) {
  return new Int16Array(typedArray);
}), _defineProperty(_int16ArrayFactory, "Create", function Create(data) {
  return new Int16Array(data);
}), _defineProperty(_int16ArrayFactory, "Create", function Create(buffer, offset, length) {
  return new Int16Array(buffer, offset, length);
}), _int16ArrayFactory);
exports.int16ArrayFactory = int16ArrayFactory;
var uint16ArrayFactory = (_uint16ArrayFactory = {
  Create: function Create(size) {
    return new Uint16Array(size);
  }
}, _defineProperty(_uint16ArrayFactory, "Create", function Create(typedArray) {
  return new Uint16Array(typedArray);
}), _defineProperty(_uint16ArrayFactory, "Create", function Create(data) {
  return new Uint16Array(data);
}), _defineProperty(_uint16ArrayFactory, "Create", function Create(buffer, offset, length) {
  return new Uint16Array(buffer, offset, length);
}), _uint16ArrayFactory);
exports.uint16ArrayFactory = uint16ArrayFactory;
var int32ArrayFactory = (_int32ArrayFactory = {
  Create: function Create(size) {
    return new Int32Array(size);
  }
}, _defineProperty(_int32ArrayFactory, "Create", function Create(typedArray) {
  return new Int32Array(typedArray);
}), _defineProperty(_int32ArrayFactory, "Create", function Create(data) {
  return new Int32Array(data);
}), _defineProperty(_int32ArrayFactory, "Create", function Create(buffer, offset, length) {
  return new Int32Array(buffer, offset, length);
}), _int32ArrayFactory);
exports.int32ArrayFactory = int32ArrayFactory;
var uint32ArrayFactory = (_uint32ArrayFactory = {
  Create: function Create(size) {
    return new Uint32Array(size);
  }
}, _defineProperty(_uint32ArrayFactory, "Create", function Create(typedArray) {
  return new Uint32Array(typedArray);
}), _defineProperty(_uint32ArrayFactory, "Create", function Create(data) {
  return new Uint32Array(data);
}), _defineProperty(_uint32ArrayFactory, "Create", function Create(buffer, offset, length) {
  return new Uint32Array(buffer, offset, length);
}), _uint32ArrayFactory);
exports.uint32ArrayFactory = uint32ArrayFactory;
var float32ArrayFactory = (_float32ArrayFactory = {
  Create: function Create(size) {
    return new Float32Array(size);
  }
}, _defineProperty(_float32ArrayFactory, "Create", function Create(typedArray) {
  return new Float32Array(typedArray);
}), _defineProperty(_float32ArrayFactory, "Create", function Create(data) {
  return new Float32Array(data);
}), _defineProperty(_float32ArrayFactory, "Create", function Create(buffer, offset, length) {
  return new Float32Array(buffer, offset, length);
}), _float32ArrayFactory);
exports.float32ArrayFactory = float32ArrayFactory;
},{"../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js"}],"../JS/webgl_core/webgl_types.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GlTypeInfo$reflection = GlTypeInfo$reflection;
exports.glTypeInfo = glTypeInfo;
exports.addGlTypeInfo = addGlTypeInfo;
exports.getGlTypeInfo = getGlTypeInfo;
exports.GlDrawMethod$reflection = GlDrawMethod$reflection;
exports.getViewWriter = getViewWriter;
exports.GlPixelConversionT = exports.GlPixelAlignT = exports.GlPixelStoreParamT = exports.GlCompareModeT = exports.GlCompareFuncT = exports.GlWrapModeT = exports.GlMinFilterT = exports.GlMagFilterT = exports.GlTextureParamT = exports.GlTextureTypeT = exports.GlColorFormatT = exports.GlInternalColorFormatT = exports.GlTextureUnitT = exports.GlBlendModeT = exports.GlBlendFactorT = exports.GlCapabilityT = exports.GlCullModeT = exports.GlDrawMethod = exports.GlClearBitT = exports.GlDrawPrimitiveT = exports.GlBufferUsageT = exports.GlTextureTargetT = exports.GlBufferTargetT = exports.GlProgParamNameT = exports.GlIndexedParamT = exports.GlBlockParamT = exports.GlUniformParamT = exports.glTypeInfos = exports.Vec4BaseAlign = exports.FloatByteSize = exports.BaseUnit = exports.GlTypeInfo = exports.GlIndicesTypeT = exports.GlTypeT = void 0;

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _Map = require("../.fable/fable-library.3.0.0/Map.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _utils = require("../core/utils.js");

var _typedarray_utils = require("../js/typedarray_utils.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var GlTypeT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlType", _Reflection.int32_type, [["Unknown", 0], ["BYTE", 5120], ["SHORT", 5122], ["BOOL", 35670], ["BOOL_VEC2", 35671], ["BOOL_VEC3", 35672], ["BOOL_VEC4", 35673], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["FLOAT_MAT2x3", 35685], ["FLOAT_MAT2", 35674], ["FLOAT_MAT2x4", 35686], ["FLOAT_MAT3", 35675], ["FLOAT_MAT3x2", 35687], ["FLOAT_MAT3x4", 35688], ["FLOAT_MAT4", 35676], ["FLOAT_MAT4x2", 35689], ["FLOAT_MAT4x3", 35690], ["FLOAT_VEC2", 35664], ["FLOAT_VEC3", 35665], ["FLOAT_VEC4", 35666], ["INT", 5124], ["INT_VEC2", 35667], ["INT_VEC3", 35668], ["INT_VEC4", 35669], ["INT_SAMPLER_2D", 36298], ["INT_SAMPLER_2D_ARRAY", 36303], ["INT_SAMPLER_3D", 36299], ["INT_SAMPLER_CUBE", 36300], ["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["UNSIGNED_INT_SAMPLER_2D", 36306], ["UNSIGNED_INT_SAMPLER_2D_ARRAY", 36311], ["UNSIGNED_INT_SAMPLER_3D", 36307], ["UNSIGNED_INT_SAMPLER_CUBE", 36308], ["UNSIGNED_INT_VEC2", 36294], ["UNSIGNED_INT_VEC3", 36295], ["UNSIGNED_INT_VEC4", 36296], ["SAMPLER_2D", 35678], ["SAMPLER_2D_ARRAY", 36289], ["SAMPLER_2D_ARRAY_SHADOW", 36292], ["SAMPLER_2D_SHADOW", 35682], ["SAMPLER_3D", 35679], ["SAMPLER_CUBE", 35680], ["SAMPLER_CUBE_SHADOW", 36293]]);
exports.GlTypeT = GlTypeT;
var GlIndicesTypeT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlIndicesType", _Reflection.int32_type, [["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125]]);
exports.GlIndicesTypeT = GlIndicesTypeT;

var GlTypeInfo = /*#__PURE__*/function (_Record) {
  _inherits(GlTypeInfo, _Record);

  var _super = _createSuper(GlTypeInfo);

  function GlTypeInfo(Type, BaseType, ElementCount, ByteSize, BaseAlign, IsMatrix, MatrixColCount, MatrixRowCount, TypeArrayCreator) {
    var _this;

    _classCallCheck(this, GlTypeInfo);

    _this = _super.call(this);
    _this.Type = Type | 0;
    _this.BaseType = BaseType | 0;
    _this.ElementCount = ElementCount | 0;
    _this.ByteSize = ByteSize | 0;
    _this.BaseAlign = BaseAlign | 0;
    _this.IsMatrix = IsMatrix;
    _this.MatrixColCount = MatrixColCount | 0;
    _this.MatrixRowCount = MatrixRowCount | 0;
    _this.TypeArrayCreator = TypeArrayCreator;
    return _this;
  }

  return GlTypeInfo;
}(_Types.Record);

exports.GlTypeInfo = GlTypeInfo;

function GlTypeInfo$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Types.WebglTypes.GlTypeInfo", [], GlTypeInfo, function () {
    return [["Type", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlType", _Reflection.int32_type, [["Unknown", 0], ["BYTE", 5120], ["SHORT", 5122], ["BOOL", 35670], ["BOOL_VEC2", 35671], ["BOOL_VEC3", 35672], ["BOOL_VEC4", 35673], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["FLOAT_MAT2x3", 35685], ["FLOAT_MAT2", 35674], ["FLOAT_MAT2x4", 35686], ["FLOAT_MAT3", 35675], ["FLOAT_MAT3x2", 35687], ["FLOAT_MAT3x4", 35688], ["FLOAT_MAT4", 35676], ["FLOAT_MAT4x2", 35689], ["FLOAT_MAT4x3", 35690], ["FLOAT_VEC2", 35664], ["FLOAT_VEC3", 35665], ["FLOAT_VEC4", 35666], ["INT", 5124], ["INT_VEC2", 35667], ["INT_VEC3", 35668], ["INT_VEC4", 35669], ["INT_SAMPLER_2D", 36298], ["INT_SAMPLER_2D_ARRAY", 36303], ["INT_SAMPLER_3D", 36299], ["INT_SAMPLER_CUBE", 36300], ["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["UNSIGNED_INT_SAMPLER_2D", 36306], ["UNSIGNED_INT_SAMPLER_2D_ARRAY", 36311], ["UNSIGNED_INT_SAMPLER_3D", 36307], ["UNSIGNED_INT_SAMPLER_CUBE", 36308], ["UNSIGNED_INT_VEC2", 36294], ["UNSIGNED_INT_VEC3", 36295], ["UNSIGNED_INT_VEC4", 36296], ["SAMPLER_2D", 35678], ["SAMPLER_2D_ARRAY", 36289], ["SAMPLER_2D_ARRAY_SHADOW", 36292], ["SAMPLER_2D_SHADOW", 35682], ["SAMPLER_3D", 35679], ["SAMPLER_CUBE", 35680], ["SAMPLER_CUBE_SHADOW", 36293]])], ["BaseType", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlType", _Reflection.int32_type, [["Unknown", 0], ["BYTE", 5120], ["SHORT", 5122], ["BOOL", 35670], ["BOOL_VEC2", 35671], ["BOOL_VEC3", 35672], ["BOOL_VEC4", 35673], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["FLOAT_MAT2x3", 35685], ["FLOAT_MAT2", 35674], ["FLOAT_MAT2x4", 35686], ["FLOAT_MAT3", 35675], ["FLOAT_MAT3x2", 35687], ["FLOAT_MAT3x4", 35688], ["FLOAT_MAT4", 35676], ["FLOAT_MAT4x2", 35689], ["FLOAT_MAT4x3", 35690], ["FLOAT_VEC2", 35664], ["FLOAT_VEC3", 35665], ["FLOAT_VEC4", 35666], ["INT", 5124], ["INT_VEC2", 35667], ["INT_VEC3", 35668], ["INT_VEC4", 35669], ["INT_SAMPLER_2D", 36298], ["INT_SAMPLER_2D_ARRAY", 36303], ["INT_SAMPLER_3D", 36299], ["INT_SAMPLER_CUBE", 36300], ["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["UNSIGNED_INT_SAMPLER_2D", 36306], ["UNSIGNED_INT_SAMPLER_2D_ARRAY", 36311], ["UNSIGNED_INT_SAMPLER_3D", 36307], ["UNSIGNED_INT_SAMPLER_CUBE", 36308], ["UNSIGNED_INT_VEC2", 36294], ["UNSIGNED_INT_VEC3", 36295], ["UNSIGNED_INT_VEC4", 36296], ["SAMPLER_2D", 35678], ["SAMPLER_2D_ARRAY", 36289], ["SAMPLER_2D_ARRAY_SHADOW", 36292], ["SAMPLER_2D_SHADOW", 35682], ["SAMPLER_3D", 35679], ["SAMPLER_CUBE", 35680], ["SAMPLER_CUBE_SHADOW", 36293]])], ["ElementCount", _Reflection.int32_type], ["ByteSize", _Reflection.int32_type], ["BaseAlign", _Reflection.int32_type], ["IsMatrix", _Reflection.bool_type], ["MatrixColCount", _Reflection.int32_type], ["MatrixRowCount", _Reflection.int32_type], ["TypeArrayCreator", (0, _Reflection.class_type)("Wil.Js.TypedArrayUtils.ITypedArrayFactory")]];
  });
}

function glTypeInfo(t, bt, ec, bs, ba, im, mcc, mrc, tac) {
  return new GlTypeInfo(t, bt, ec, bs, ba, im, mcc, mrc, tac);
}

var BaseUnit = 4;
exports.BaseUnit = BaseUnit;
var FloatByteSize = 4;
exports.FloatByteSize = FloatByteSize;
var Vec4BaseAlign = 4 * BaseUnit;
exports.Vec4BaseAlign = Vec4BaseAlign;
var glTypeInfos = (0, _Util.createAtom)((0, _Map.ofSeq)([], {
  Compare: _Util.comparePrimitives
}));
exports.glTypeInfos = glTypeInfos;

function addGlTypeInfo(ti) {
  glTypeInfos((0, _Map.FSharpMap__Add)(glTypeInfos(), ti.Type, ti), true);
}

function getGlTypeInfo(t) {
  var matchValue = (0, _Map.tryFind)(t, glTypeInfos());

  if (matchValue == null) {
    throw new Error((0, _String.toText)((0, _String.interpolate)("Could not get type info for %P()", [(0, _utils.enumName)(GlTypeT, t)])));
  } else {
    var info = matchValue;
    return info;
  }
}

addGlTypeInfo(glTypeInfo(5120, 5120, 1, 1, 1 * BaseUnit, false, 0, 0, _typedarray_utils.int8ArrayFactory));
addGlTypeInfo(glTypeInfo(5121, 5121, 1, 1, 1 * BaseUnit, false, 0, 0, _typedarray_utils.uint8ArrayFactory));
addGlTypeInfo(glTypeInfo(5122, 5122, 1, 2, 1 * BaseUnit, false, 0, 0, _typedarray_utils.int16ArrayFactory));
addGlTypeInfo(glTypeInfo(5123, 5123, 1, 2, 1 * BaseUnit, false, 0, 0, _typedarray_utils.uint16ArrayFactory));
addGlTypeInfo(glTypeInfo(5124, 5124, 1, FloatByteSize, 1 * BaseUnit, false, 0, 0, _typedarray_utils.int32ArrayFactory));
addGlTypeInfo(glTypeInfo(5126, 5126, 1, FloatByteSize, 1 * BaseUnit, false, 0, 0, _typedarray_utils.float32ArrayFactory));
addGlTypeInfo(glTypeInfo(35674, 5126, 2 * 2, 2 * 2 * FloatByteSize, Vec4BaseAlign, true, 2, 2, _typedarray_utils.float32ArrayFactory));
addGlTypeInfo(glTypeInfo(35685, 5126, 2 * 3, 2 * 3 * FloatByteSize, Vec4BaseAlign, true, 2, 3, _typedarray_utils.float32ArrayFactory));
addGlTypeInfo(glTypeInfo(35675, 5126, 3 * 3, 3 * 3 * FloatByteSize, Vec4BaseAlign, true, 3, 3, _typedarray_utils.float32ArrayFactory));
addGlTypeInfo(glTypeInfo(35676, 5126, 4 * 4, 4 * 4 * FloatByteSize, Vec4BaseAlign, true, 4, 4, _typedarray_utils.float32ArrayFactory));
addGlTypeInfo(glTypeInfo(35664, 5126, 2, 2 * FloatByteSize, 2 * BaseUnit, false, 0, 0, _typedarray_utils.float32ArrayFactory));
addGlTypeInfo(glTypeInfo(35665, 5126, 3, 3 * FloatByteSize, Vec4BaseAlign, false, 0, 0, _typedarray_utils.float32ArrayFactory));
addGlTypeInfo(glTypeInfo(35666, 5126, 4, 4 * FloatByteSize, Vec4BaseAlign, false, 0, 0, _typedarray_utils.float32ArrayFactory));
addGlTypeInfo(glTypeInfo(35667, 5124, 2, 2 * FloatByteSize, 2 * BaseUnit, false, 0, 0, _typedarray_utils.int32ArrayFactory));
addGlTypeInfo(glTypeInfo(35668, 5124, 3, 3 * FloatByteSize, Vec4BaseAlign, false, 0, 0, _typedarray_utils.int32ArrayFactory));
addGlTypeInfo(glTypeInfo(35669, 5124, 4, 4 * FloatByteSize, Vec4BaseAlign, false, 0, 0, _typedarray_utils.int32ArrayFactory));
addGlTypeInfo(glTypeInfo(35670, 5125, 1, FloatByteSize, 1 * BaseUnit, false, 0, 0, _typedarray_utils.uint32ArrayFactory));
addGlTypeInfo(glTypeInfo(5125, 5125, 1, FloatByteSize, 1 * BaseUnit, false, 0, 0, _typedarray_utils.uint32ArrayFactory));
addGlTypeInfo(glTypeInfo(35678, 5124, 1, FloatByteSize, 1 * BaseUnit, false, 0, 0, _typedarray_utils.int32ArrayFactory));
addGlTypeInfo(glTypeInfo(35679, 5124, 1, FloatByteSize, 1 * BaseUnit, false, 0, 0, _typedarray_utils.int32ArrayFactory));
var GlUniformParamT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlUniformParam", _Reflection.int32_type, [["UNIFORM_TYPE", 35383], ["UNIFORM_SIZE", 35384], ["UNIFORM_BLOCK_INDEX", 35386], ["UNIFORM_OFFSET", 35387], ["UNIFORM_ARRAY_STRIDE", 35388], ["UNIFORM_MATRIX_STRIDE", 35389], ["UNIFORM_IS_ROW_MAJOR", 35390]]);
exports.GlUniformParamT = GlUniformParamT;
var GlBlockParamT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlBlockParam", _Reflection.int32_type, [["UNIFORM_BLOCK_BINDING", 35391], ["UNIFORM_BLOCK_DATA_SIZE", 35392], ["UNIFORM_BLOCK_ACTIVE_UNIFORMS", 35394], ["UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES", 35395], ["UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER", 35396], ["UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER", 35398]]);
exports.GlBlockParamT = GlBlockParamT;
var GlIndexedParamT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlIndexedParam", _Reflection.int32_type, [["TRANSFORM_FEEDBACK_BUFFER_BINDING", 35983], ["TRANSFORM_FEEDBACK_BUFFER_SIZE", 35973], ["TRANSFORM_FEEDBACK_BUFFER_START", 35972], ["UNIFORM_BUFFER_BINDING", 35368], ["UNIFORM_BUFFER_SIZE", 35370], ["UNIFORM_BUFFER_START", 35369]]);
exports.GlIndexedParamT = GlIndexedParamT;
var GlProgParamNameT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlProgParamName", _Reflection.int32_type, [["DELETE_STATUS", 35712], ["LINK_STATUS", 35714], ["VALIDATE_STATUS", 35715], ["ATTACHED_SHADERS", 35717], ["ACTIVE_ATTRIBUTES", 35721], ["ACTIVE_UNIFORMS", 35718], ["TRANSFORM_FEEDBACK_BUFFER_MODE", 35967], ["TRANSFORM_FEEDBACK_VARYINGS", 35971], ["ACTIVE_UNIFORM_BLOCKS", 35382]]);
exports.GlProgParamNameT = GlProgParamNameT;
var GlBufferTargetT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlBufferTarget", _Reflection.int32_type, [["ARRAY_BUFFER", 34962], ["ELEMENT_ARRAY_BUFFER", 34963], ["UNIFORM_BUFFER", 35345], ["TRANSFORM_FEEDBACK_BUFFER", 35982]]);
exports.GlBufferTargetT = GlBufferTargetT;
var GlTextureTargetT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlTextureTarget", _Reflection.int32_type, [["TEXTURE_2D", 3553], ["TEXTURE_CUBE_MAP_POSITIVE_X", 34069], ["TEXTURE_CUBE_MAP_NEGATIVE_X", 34070], ["TEXTURE_CUBE_MAP_POSITIVE_Y", 34071], ["TEXTURE_CUBE_MAP_NEGATIVE_Y", 34072], ["TEXTURE_CUBE_MAP_POSITIVE_Z", 34073], ["TEXTURE_CUBE_MAP_NEGATIVE_Z", 34074]]);
exports.GlTextureTargetT = GlTextureTargetT;
var GlBufferUsageT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlBufferUsage", _Reflection.int32_type, [["STREAM_DRAW", 35040], ["STATIC_DRAW", 35044], ["DYNAMIC_DRAW", 35048]]);
exports.GlBufferUsageT = GlBufferUsageT;
var GlDrawPrimitiveT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlDrawPrimitive", _Reflection.int32_type, [["POINTS", 0], ["LINES", 1], ["LINE_LOOP", 2], ["LINE_STRIP", 3], ["TRIANGLES", 4], ["TRIANGLE_STRIP", 5], ["TRIANGLE_FAN", 6]]);
exports.GlDrawPrimitiveT = GlDrawPrimitiveT;
var GlClearBitT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlClearBit", _Reflection.int32_type, [["COLOR_BUFFER_BIT", 16384], ["DEPTH_BUFFER_BIT", 256], ["STENCIL_BUFFER_BIT", 1024]]);
exports.GlClearBitT = GlClearBitT;

var GlDrawMethod = /*#__PURE__*/function (_Union) {
  _inherits(GlDrawMethod, _Union);

  var _super2 = _createSuper(GlDrawMethod);

  function GlDrawMethod(tag) {
    var _this2;

    _classCallCheck(this, GlDrawMethod);

    _this2 = _super2.call(this);
    _this2.tag = tag | 0;

    for (var _len = arguments.length, fields = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      fields[_key - 1] = arguments[_key];
    }

    _this2.fields = fields;
    return _this2;
  }

  _createClass(GlDrawMethod, [{
    key: "cases",
    value: function cases() {
      return ["DRAW_ARRAYS", "DRAW_ELEMENTS", "DRAW_ARRAYS_INSTANCED", "DRAW_ELEMENTS_INSTANCED", "Unknown"];
    }
  }]);

  return GlDrawMethod;
}(_Types.Union);

exports.GlDrawMethod = GlDrawMethod;

function GlDrawMethod$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Types.WebglTypes.GlDrawMethod", [], GlDrawMethod, function () {
    return [[], [], [], [], []];
  });
}

var GlCullModeT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlCullMode", _Reflection.int32_type, [["FRONT", 1028], ["BACK", 1029], ["FRONT_AND_BACK", 1032]]);
exports.GlCullModeT = GlCullModeT;
var GlCapabilityT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlCapability", _Reflection.int32_type, [["BLEND", 3042], ["CULL_FACE", 2884], ["DEPTH_TEST", 2929], ["DITHER", 3024], ["POLYGON_OFFSET_FILL", 32823], ["SAMPLE_ALPHA_TO_COVERAGE", 32926], ["SAMPLE_COVERAGE", 32928], ["SCISSOR_TEST", 3089], ["STENCIL_TEST", 2960], ["RASTERIZER_DISCARD", 35977]]);
exports.GlCapabilityT = GlCapabilityT;
var GlBlendFactorT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlBlendFactor", _Reflection.int32_type, [["ZERO", 0], ["ONE", 1], ["SRC_COLOR", 768], ["ONE_MINUS_SRC_COLOR", 769], ["SRC_ALPHA", 770], ["ONE_MINUS_SRC_ALPHA", 771], ["DST_ALPHA", 772], ["ONE_MINUS_DST_ALPHA", 773], ["DST_COLOR", 774], ["ONE_MINUS_DST_COLOR", 775], ["SRC_ALPHA_SATURATE", 776], ["CONSTANT_COLOR", 32769], ["ONE_MINUS_CONSTANT_COLOR", 32770], ["CONSTANT_ALPHA", 32771], ["ONE_MINUS_CONSTANT_ALPHA", 32772]]);
exports.GlBlendFactorT = GlBlendFactorT;
var GlBlendModeT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlBlendMode", _Reflection.int32_type, [["FUNC_ADD", 32774], ["FUNC_SUBTRACT", 32778], ["FUNC_REVERSE_SUBTRACT", 32779], ["MIN", 32775], ["MAX", 32776]]);
exports.GlBlendModeT = GlBlendModeT;
var GlTextureUnitT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlTextureUnit", _Reflection.int32_type, [["TEXTURE0", 33984], ["TEXTURE1", 33985], ["TEXTURE2", 33986], ["TEXTURE3", 33987], ["TEXTURE4", 33988], ["TEXTURE5", 33989], ["TEXTURE6", 33990], ["TEXTURE7", 33991], ["TEXTURE8", 33992], ["TEXTURE9", 33993], ["TEXTURE10", 33994], ["TEXTURE11", 33995], ["TEXTURE12", 33996], ["TEXTURE13", 33997], ["TEXTURE14", 33998], ["TEXTURE15", 33999], ["TEXTURE16", 34000], ["TEXTURE17", 34001], ["TEXTURE18", 34002], ["TEXTURE19", 34003], ["TEXTURE20", 34004], ["TEXTURE21", 34005], ["TEXTURE22", 34006], ["TEXTURE23", 34007], ["TEXTURE24", 34008], ["TEXTURE25", 34009], ["TEXTURE26", 34010], ["TEXTURE27", 34011], ["TEXTURE28", 34012], ["TEXTURE29", 34013], ["TEXTURE30", 34014], ["TEXTURE31", 34015]]);
exports.GlTextureUnitT = GlTextureUnitT;
var GlInternalColorFormatT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlInternalColorFormat", _Reflection.int32_type, [["RGB", 6407], ["RGBA", 6408], ["LUMINANCE", 6409], ["LUMINANCE_ALPHA", 6410], ["ALPHA", 6406], ["R8", 33321], ["R16F", 33325], ["R32F", 33326], ["R8UI", 33330], ["RG8", 33323], ["RG16F", 33327], ["RG32F", 33328], ["RG8UI", 33336], ["RGB8", 32849], ["SRGB8", 35905], ["RGB565", 36194], ["R11F_G11F_B10F", 35898], ["RGB9_E5", 35901], ["RGB16F", 34843], ["RGB32F", 34837], ["RGB8UI", 36221], ["RGBA8", 32856], ["SRGB8_ALPHA8", 35907], ["RGB5_A1", 32855], ["RGB10_A2", 32857], ["RGBA4", 32854], ["RGBA16F", 34842], ["RGBA32F", 34836], ["RGBA8UI", 36220], ["R8_SNORM", 36756], ["RG8_SNORM", 36757], ["RGB8_SNORM", 36758], ["RGBA8_SNORM", 36759], ["RGB10_A2UI", 36975], ["R8I", 33329], ["R16I", 33331], ["R16UI", 33332], ["R32I", 33333], ["R32UI", 33334], ["RG8I", 33335], ["RG16I", 33337], ["RG16UI", 33338], ["RG32I", 33339], ["RG32UI", 33340], ["RGB16I", 36233], ["RGB16UI", 36215], ["RGB32I", 36227], ["RGB32UI", 36209], ["RGBA8I", 36238], ["RGBA16I", 36232], ["RGBA16UI", 36214], ["RGBA32I", 36226], ["RGBA32UI", 36208], ["DEPTH_COMPONENT16", 33189], ["DEPTH_COMPONENT24", 33190], ["DEPTH_COMPONENT32F", 36012], ["DEPTH24_STENCIL8", 35056], ["DEPTH32F_STENCIL8", 36013]]);
exports.GlInternalColorFormatT = GlInternalColorFormatT;
var GlColorFormatT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlColorFormat", _Reflection.int32_type, [["RGB", 6407], ["RGBA", 6408], ["LUMINANCE_ALPHA", 6410], ["LUMINANCE", 6409], ["ALPHA", 6406], ["RED", 6403], ["RED_INTEGER", 36244], ["RG", 33319], ["RG_INTEGER", 33320], ["RGB_INTEGER", 36248], ["RGBA_INTEGER", 36249], ["DEPTH_COMPONENT", 6402], ["DEPTH_STENCIL", 34041]]);
exports.GlColorFormatT = GlColorFormatT;
var GlTextureTypeT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlTextureType", _Reflection.int32_type, [["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT_4_4_4_4", 32819], ["UNSIGNED_SHORT_5_5_5_1", 32820], ["UNSIGNED_SHORT_5_6_5", 33635], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["BYTE", 5120], ["SHORT", 5122], ["INT", 5124], ["UNSIGNED_INT_2_10_10_10_REV", 33640], ["UNSIGNED_INT_10F_11F_11F_REV", 35899], ["UNSIGNED_INT_5_9_9_9_REV", 35902], ["FLOAT_32_UNSIGNED_INT_24_8_REV", 36269]]);
exports.GlTextureTypeT = GlTextureTypeT;
var GlTextureParamT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlTextureParam", _Reflection.int32_type, [["TEXTURE_MAG_FILTER", 10240], ["TEXTURE_MIN_FILTER", 10241], ["TEXTURE_WRAP_S", 10242], ["TEXTURE_WRAP_T", 10243], ["TEXTURE_WRAP_R", 32882], ["TEXTURE_MIN_LOD", 33082], ["TEXTURE_MAX_LOD", 33083], ["TEXTURE_BASE_LEVEL", 33084], ["TEXTURE_MAX_LEVEL", 33085], ["TEXTURE_COMPARE_MODE", 34892], ["TEXTURE_COMPARE_FUNC", 34893]]);
exports.GlTextureParamT = GlTextureParamT;
var GlMagFilterT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlMagFilter", _Reflection.int32_type, [["NEAREST", 9728], ["LINEAR", 9729]]);
exports.GlMagFilterT = GlMagFilterT;
var GlMinFilterT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlMinFilter", _Reflection.int32_type, [["NEAREST", 9728], ["LINEAR", 9729], ["NEAREST_MIPMAP_NEAREST", 9984], ["LINEAR_MIPMAP_NEAREST", 9985], ["NEAREST_MIPMAP_LINEAR", 9986], ["LINEAR_MIPMAP_LINEAR", 9987]]);
exports.GlMinFilterT = GlMinFilterT;
var GlWrapModeT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlWrapMode", _Reflection.int32_type, [["REPEAT", 10497], ["CLAMP_TO_EDGE", 33071], ["MIRRORED_REPEAT", 33648]]);
exports.GlWrapModeT = GlWrapModeT;
var GlCompareFuncT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlCompareFunc", _Reflection.int32_type, [["NEVER", 512], ["LESS", 513], ["EQUAL", 514], ["LEQUAL", 515], ["GREATER", 516], ["NOTEQUAL", 517], ["GEQUAL", 518], ["ALWAYS", 519]]);
exports.GlCompareFuncT = GlCompareFuncT;
var GlCompareModeT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlCompareMode", _Reflection.int32_type, [["NONE", 0], ["COMPARE_REF_TO_TEXTURE", 34894]]);
exports.GlCompareModeT = GlCompareModeT;
var GlPixelStoreParamT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlPixelStoreParam", _Reflection.int32_type, [["PACK_ALIGNMENT", 3333], ["UNPACK_ALIGNMENT", 3317], ["UNPACK_FLIP_Y_WEBGL", 37440], ["UNPACK_PREMULTIPLY_ALPHA_WEBGL", 37441], ["UNPACK_COLORSPACE_CONVERSION_WEBGL", 37443], ["PACK_ROW_LENGTH", 3330], ["PACK_SKIP_PIXELS", 3332], ["PACK_SKIP_ROWS", 3331], ["UNPACK_ROW_LENGTH", 3314], ["UNPACK_IMAGE_HEIGHT", 32878], ["UNPACK_SKIP_PIXELS", 3316], ["UNPACK_SKIP_ROWS", 3315], ["UNPACK_SKIP_IMAGES", 32877]]);
exports.GlPixelStoreParamT = GlPixelStoreParamT;
var GlPixelAlignT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlPixelAlign", _Reflection.int32_type, [["ONE", 1], ["TWO", 2], ["FOUR", 4], ["EIGHT", 8]]);
exports.GlPixelAlignT = GlPixelAlignT;
var GlPixelConversionT = (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlPixelConversion", _Reflection.int32_type, [["NONE", 0], ["BROWSER_DEFAULT_WEBGL", 37444]]);
exports.GlPixelConversionT = GlPixelConversionT;

function getViewWriter(dataType) {
  switch (dataType) {
    case 5120:
      {
        return function (view_1) {
          return function (ofs_1) {
            return function (value_1) {
              return (0, _typedarray_utils.writeInt8View)(view_1, ofs_1, value_1);
            };
          };
        };
      }

    case 5121:
      {
        return function (view_2) {
          return function (ofs_2) {
            return function (value_2) {
              return (0, _typedarray_utils.writeUint8View)(view_2, ofs_2, value_2);
            };
          };
        };
      }

    case 5122:
      {
        return function (view_3) {
          return function (ofs_3) {
            return function (value_3) {
              return (0, _typedarray_utils.writeInt16View)(view_3, ofs_3, value_3);
            };
          };
        };
      }

    case 5123:
      {
        return function (view_4) {
          return function (ofs_4) {
            return function (value_4) {
              return (0, _typedarray_utils.writeUint16View)(view_4, ofs_4, value_4);
            };
          };
        };
      }

    case 5124:
      {
        return function (view_6) {
          return function (ofs_6) {
            return function (value_6) {
              return (0, _typedarray_utils.writeInt32View)(view_6, ofs_6, value_6);
            };
          };
        };
      }

    case 5126:
      {
        return function (view) {
          return function (ofs) {
            return function (value) {
              return (0, _typedarray_utils.writeFloat32View)(view, ofs, value);
            };
          };
        };
      }

    case 5131:
      {
        return function (view_5) {
          return function (ofs_5) {
            return function (value_5) {
              return (0, _typedarray_utils.writeInt16View)(view_5, ofs_5, value_5);
            };
          };
        };
      }

    case 35664:
      {
        return function (view_11) {
          return function (ofs_11) {
            return function (value_11) {
              return (0, _typedarray_utils.writeFloat32View)(view_11, ofs_11, value_11);
            };
          };
        };
      }

    case 35665:
      {
        return function (view_12) {
          return function (ofs_12) {
            return function (value_12) {
              return (0, _typedarray_utils.writeFloat32View)(view_12, ofs_12, value_12);
            };
          };
        };
      }

    case 35666:
      {
        return function (view_13) {
          return function (ofs_13) {
            return function (value_13) {
              return (0, _typedarray_utils.writeFloat32View)(view_13, ofs_13, value_13);
            };
          };
        };
      }

    case 35670:
      {
        return function (view_7) {
          return function (ofs_7) {
            return function (value_7) {
              return (0, _typedarray_utils.writeInt32View)(view_7, ofs_7, value_7);
            };
          };
        };
      }

    case 35674:
      {
        return function (view_8) {
          return function (ofs_8) {
            return function (value_8) {
              return (0, _typedarray_utils.writeFloat32View)(view_8, ofs_8, value_8);
            };
          };
        };
      }

    case 35675:
      {
        return function (view_9) {
          return function (ofs_9) {
            return function (value_9) {
              return (0, _typedarray_utils.writeFloat32View)(view_9, ofs_9, value_9);
            };
          };
        };
      }

    case 35676:
      {
        return function (view_10) {
          return function (ofs_10) {
            return function (value_10) {
              return (0, _typedarray_utils.writeFloat32View)(view_10, ofs_10, value_10);
            };
          };
        };
      }

    default:
      {
        throw new Error("No view writer for type: " + (0, _Types.toString)(dataType));
      }
  }
}
},{"../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/Map.js":"../JS/.fable/fable-library.3.0.0/Map.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../core/utils.js":"../JS/core/utils.js","../js/typedarray_utils.js":"../JS/js/typedarray_utils.js"}],"../JS/.fable/fable-library.3.0.0/Set.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SetTreeLeaf$1$reflection = SetTreeLeaf$1$reflection;
exports.SetTreeLeaf$1_$ctor_2B595 = SetTreeLeaf$1_$ctor_2B595;
exports.SetTreeLeaf$1__get_Key = SetTreeLeaf$1__get_Key;
exports.SetTreeNode$1$reflection = SetTreeNode$1$reflection;
exports.SetTreeNode$1_$ctor_Z6E7BE5F7 = SetTreeNode$1_$ctor_Z6E7BE5F7;
exports.SetTreeNode$1__get_Left = SetTreeNode$1__get_Left;
exports.SetTreeNode$1__get_Right = SetTreeNode$1__get_Right;
exports.SetTreeNode$1__get_Height = SetTreeNode$1__get_Height;
exports.SetTreeModule_empty = SetTreeModule_empty;
exports.SetTreeModule_countAux = SetTreeModule_countAux;
exports.SetTreeModule_count = SetTreeModule_count;
exports.SetTreeModule_mk = SetTreeModule_mk;
exports.SetTreeModule_rebalance = SetTreeModule_rebalance;
exports.SetTreeModule_add = SetTreeModule_add;
exports.SetTreeModule_balance = SetTreeModule_balance;
exports.SetTreeModule_split = SetTreeModule_split;
exports.SetTreeModule_spliceOutSuccessor = SetTreeModule_spliceOutSuccessor;
exports.SetTreeModule_remove = SetTreeModule_remove;
exports.SetTreeModule_mem = SetTreeModule_mem;
exports.SetTreeModule_iter = SetTreeModule_iter;
exports.SetTreeModule_foldBackOpt = SetTreeModule_foldBackOpt;
exports.SetTreeModule_foldBack = SetTreeModule_foldBack;
exports.SetTreeModule_foldOpt = SetTreeModule_foldOpt;
exports.SetTreeModule_fold = SetTreeModule_fold;
exports.SetTreeModule_forall = SetTreeModule_forall;
exports.SetTreeModule_exists = SetTreeModule_exists;
exports.SetTreeModule_subset = SetTreeModule_subset;
exports.SetTreeModule_properSubset = SetTreeModule_properSubset;
exports.SetTreeModule_filterAux = SetTreeModule_filterAux;
exports.SetTreeModule_filter = SetTreeModule_filter;
exports.SetTreeModule_diffAux = SetTreeModule_diffAux;
exports.SetTreeModule_diff = SetTreeModule_diff;
exports.SetTreeModule_union = SetTreeModule_union;
exports.SetTreeModule_intersectionAux = SetTreeModule_intersectionAux;
exports.SetTreeModule_intersection = SetTreeModule_intersection;
exports.SetTreeModule_partition1 = SetTreeModule_partition1;
exports.SetTreeModule_partitionAux = SetTreeModule_partitionAux;
exports.SetTreeModule_partition = SetTreeModule_partition;
exports.SetTreeModule_minimumElementAux = SetTreeModule_minimumElementAux;
exports.SetTreeModule_minimumElementOpt = SetTreeModule_minimumElementOpt;
exports.SetTreeModule_maximumElementAux = SetTreeModule_maximumElementAux;
exports.SetTreeModule_maximumElementOpt = SetTreeModule_maximumElementOpt;
exports.SetTreeModule_minimumElement = SetTreeModule_minimumElement;
exports.SetTreeModule_maximumElement = SetTreeModule_maximumElement;
exports.SetTreeModule_SetIterator$1$reflection = SetTreeModule_SetIterator$1$reflection;
exports.SetTreeModule_collapseLHS = SetTreeModule_collapseLHS;
exports.SetTreeModule_mkIterator = SetTreeModule_mkIterator;
exports.SetTreeModule_notStarted = SetTreeModule_notStarted;
exports.SetTreeModule_alreadyFinished = SetTreeModule_alreadyFinished;
exports.SetTreeModule_current = SetTreeModule_current;
exports.SetTreeModule_moveNext = SetTreeModule_moveNext;
exports.SetTreeModule_mkIEnumerator = SetTreeModule_mkIEnumerator;
exports.SetTreeModule_compareStacks = SetTreeModule_compareStacks;
exports.SetTreeModule_compare = SetTreeModule_compare;
exports.SetTreeModule_choose = SetTreeModule_choose;
exports.SetTreeModule_toList = SetTreeModule_toList;
exports.SetTreeModule_copyToArray = SetTreeModule_copyToArray;
exports.SetTreeModule_toArray = SetTreeModule_toArray;
exports.SetTreeModule_mkFromEnumerator = SetTreeModule_mkFromEnumerator;
exports.SetTreeModule_ofSeq = SetTreeModule_ofSeq;
exports.SetTreeModule_ofArray = SetTreeModule_ofArray;
exports.FSharpSet$reflection = FSharpSet$reflection;
exports.FSharpSet_$ctor = FSharpSet_$ctor;
exports.FSharpSet__get_Comparer = FSharpSet__get_Comparer;
exports.FSharpSet__get_Tree = FSharpSet__get_Tree;
exports.FSharpSet_Empty = FSharpSet_Empty;
exports.FSharpSet__Add = FSharpSet__Add;
exports.FSharpSet__Remove = FSharpSet__Remove;
exports.FSharpSet__get_Count = FSharpSet__get_Count;
exports.FSharpSet__Contains = FSharpSet__Contains;
exports.FSharpSet__Iterate = FSharpSet__Iterate;
exports.FSharpSet__Fold = FSharpSet__Fold;
exports.FSharpSet__get_IsEmpty = FSharpSet__get_IsEmpty;
exports.FSharpSet__Partition = FSharpSet__Partition;
exports.FSharpSet__Filter = FSharpSet__Filter;
exports.FSharpSet__Map = FSharpSet__Map;
exports.FSharpSet__Exists = FSharpSet__Exists;
exports.FSharpSet__ForAll = FSharpSet__ForAll;
exports.FSharpSet_op_Subtraction = FSharpSet_op_Subtraction;
exports.FSharpSet_op_Addition = FSharpSet_op_Addition;
exports.FSharpSet_Intersection = FSharpSet_Intersection;
exports.FSharpSet_IntersectionMany = FSharpSet_IntersectionMany;
exports.FSharpSet_Equality = FSharpSet_Equality;
exports.FSharpSet_Compare = FSharpSet_Compare;
exports.FSharpSet__get_Choose = FSharpSet__get_Choose;
exports.FSharpSet__get_MinimumElement = FSharpSet__get_MinimumElement;
exports.FSharpSet__get_MaximumElement = FSharpSet__get_MaximumElement;
exports.FSharpSet__IsSubsetOf = FSharpSet__IsSubsetOf;
exports.FSharpSet__IsSupersetOf = FSharpSet__IsSupersetOf;
exports.FSharpSet__IsProperSubsetOf = FSharpSet__IsProperSubsetOf;
exports.FSharpSet__IsProperSupersetOf = FSharpSet__IsProperSupersetOf;
exports.FSharpSet__ToList = FSharpSet__ToList;
exports.FSharpSet__ToArray = FSharpSet__ToArray;
exports.FSharpSet__ComputeHashCode = FSharpSet__ComputeHashCode;
exports.isEmpty = isEmpty;
exports.contains = contains;
exports.add = add;
exports.singleton = singleton;
exports.remove = remove;
exports.union = union;
exports.unionMany = unionMany;
exports.intersect = intersect;
exports.intersectMany = intersectMany;
exports.iterate = iterate;
exports.empty = empty;
exports.forAll = forAll;
exports.exists = exists;
exports.filter = filter;
exports.partition = partition;
exports.fold = fold;
exports.foldBack = foldBack;
exports.map = map;
exports.count = count;
exports.ofList = ofList;
exports.ofArray = ofArray;
exports.toList = toList;
exports.toArray = toArray;
exports.toSeq = toSeq;
exports.ofSeq = ofSeq;
exports.difference = difference;
exports.isSubset = isSubset;
exports.isSuperset = isSuperset;
exports.isProperSubset = isProperSubset;
exports.isProperSuperset = isProperSuperset;
exports.minElement = minElement;
exports.maxElement = maxElement;
exports.createMutable = createMutable;
exports.distinct = distinct;
exports.distinctBy = distinctBy;
exports.unionWith = unionWith;
exports.intersectWith = intersectWith;
exports.exceptWith = exceptWith;
exports.isSubsetOf = isSubsetOf;
exports.isSupersetOf = isSupersetOf;
exports.isProperSubsetOf = isProperSubsetOf;
exports.isProperSupersetOf = isProperSupersetOf;
exports.FSharpSet = exports.SetTreeModule_SetIterator$1 = exports.SetTreeNode$1 = exports.SetTreeLeaf$1 = void 0;

var _Reflection = require("./Reflection.js");

var _Option = require("./Option.js");

var _Types = require("./Types.js");

var _Seq = require("./Seq.js");

var _Array = require("./Array.js");

var _String = require("./String.js");

var _Util = require("./Util.js");

var _MutableSet = require("./MutableSet.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SetTreeLeaf$1 = function SetTreeLeaf$1(k) {
  _classCallCheck(this, SetTreeLeaf$1);

  this.k = k;
};

exports.SetTreeLeaf$1 = SetTreeLeaf$1;

function SetTreeLeaf$1$reflection(gen0) {
  return (0, _Reflection.class_type)("Set.SetTreeLeaf`1", [gen0], SetTreeLeaf$1);
}

function SetTreeLeaf$1_$ctor_2B595(k) {
  return new SetTreeLeaf$1(k);
}

function SetTreeLeaf$1__get_Key(_) {
  return _.k;
}

var SetTreeNode$1 = /*#__PURE__*/function (_SetTreeLeaf$) {
  _inherits(SetTreeNode$1, _SetTreeLeaf$);

  var _super = _createSuper(SetTreeNode$1);

  function SetTreeNode$1(v, left, right, h) {
    var _this;

    _classCallCheck(this, SetTreeNode$1);

    _this = _super.call(this, v);
    _this.left = left;
    _this.right = right;
    _this.h = h;
    return _this;
  }

  return SetTreeNode$1;
}(SetTreeLeaf$1);

exports.SetTreeNode$1 = SetTreeNode$1;

function SetTreeNode$1$reflection(gen0) {
  return (0, _Reflection.class_type)("Set.SetTreeNode`1", [gen0], SetTreeNode$1, SetTreeLeaf$1$reflection(gen0));
}

function SetTreeNode$1_$ctor_Z6E7BE5F7(v, left, right, h) {
  return new SetTreeNode$1(v, left, right, h);
}

function SetTreeNode$1__get_Left(_) {
  return _.left;
}

function SetTreeNode$1__get_Right(_) {
  return _.right;
}

function SetTreeNode$1__get_Height(_) {
  return _.h;
}

function SetTreeModule_empty() {
  return void 0;
}

function SetTreeModule_countAux(t_mut, acc_mut) {
  SetTreeModule_countAux: while (true) {
    var t = t_mut,
        acc = acc_mut;

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        t_mut = SetTreeNode$1__get_Left(t2);
        acc_mut = SetTreeModule_countAux(SetTreeNode$1__get_Right(t2), acc + 1);
        continue SetTreeModule_countAux;
      } else {
        return acc + 1 | 0;
      }
    } else {
      return acc | 0;
    }

    break;
  }
}

function SetTreeModule_count(s) {
  return SetTreeModule_countAux(s, 0);
}

function SetTreeModule_mk(l, k, r) {
  var hl;
  var t = l;

  if (t != null) {
    var t2 = t;
    hl = t2 instanceof SetTreeNode$1 ? SetTreeNode$1__get_Height(t2) : 1;
  } else {
    hl = 0;
  }

  var hr;
  var t_1 = r;

  if (t_1 != null) {
    var t2_1 = t_1;
    hr = t2_1 instanceof SetTreeNode$1 ? SetTreeNode$1__get_Height(t2_1) : 1;
  } else {
    hr = 0;
  }

  var m = (hl < hr ? hr : hl) | 0;

  if (m === 0) {
    return SetTreeLeaf$1_$ctor_2B595(k);
  } else {
    return SetTreeNode$1_$ctor_Z6E7BE5F7(k, l, r, m + 1);
  }
}

function SetTreeModule_rebalance(t1, v, t2) {
  var t_2, t2_3, t_3, t2_4;
  var t1h;
  var t = t1;

  if (t != null) {
    var t2_1 = t;
    t1h = t2_1 instanceof SetTreeNode$1 ? SetTreeNode$1__get_Height(t2_1) : 1;
  } else {
    t1h = 0;
  }

  var t2h;
  var t_1 = t2;

  if (t_1 != null) {
    var t2_2 = t_1;
    t2h = t2_2 instanceof SetTreeNode$1 ? SetTreeNode$1__get_Height(t2_2) : 1;
  } else {
    t2h = 0;
  }

  if (t2h > t1h + 2) {
    var matchValue = t2;

    if (matchValue instanceof SetTreeNode$1) {
      if ((t_2 = SetTreeNode$1__get_Left(matchValue), t_2 != null ? (t2_3 = t_2, t2_3 instanceof SetTreeNode$1 ? SetTreeNode$1__get_Height(t2_3) : 1) : 0) > t1h + 1) {
        var matchValue_1 = SetTreeNode$1__get_Left(matchValue);

        if (matchValue_1 instanceof SetTreeNode$1) {
          return SetTreeModule_mk(SetTreeModule_mk(t1, v, SetTreeNode$1__get_Left(matchValue_1)), SetTreeLeaf$1__get_Key(matchValue_1), SetTreeModule_mk(SetTreeNode$1__get_Right(matchValue_1), SetTreeLeaf$1__get_Key(matchValue), SetTreeNode$1__get_Right(matchValue)));
        } else {
          throw new Error("internal error: Set.rebalance");
        }
      } else {
        return SetTreeModule_mk(SetTreeModule_mk(t1, v, SetTreeNode$1__get_Left(matchValue)), SetTreeLeaf$1__get_Key(matchValue), SetTreeNode$1__get_Right(matchValue));
      }
    } else {
      throw new Error("internal error: Set.rebalance");
    }
  } else if (t1h > t2h + 2) {
    var matchValue_2 = t1;

    if (matchValue_2 instanceof SetTreeNode$1) {
      if ((t_3 = SetTreeNode$1__get_Right(matchValue_2), t_3 != null ? (t2_4 = t_3, t2_4 instanceof SetTreeNode$1 ? SetTreeNode$1__get_Height(t2_4) : 1) : 0) > t2h + 1) {
        var matchValue_3 = SetTreeNode$1__get_Right(matchValue_2);

        if (matchValue_3 instanceof SetTreeNode$1) {
          return SetTreeModule_mk(SetTreeModule_mk(SetTreeNode$1__get_Left(matchValue_2), SetTreeLeaf$1__get_Key(matchValue_2), SetTreeNode$1__get_Left(matchValue_3)), SetTreeLeaf$1__get_Key(matchValue_3), SetTreeModule_mk(SetTreeNode$1__get_Right(matchValue_3), v, t2));
        } else {
          throw new Error("internal error: Set.rebalance");
        }
      } else {
        return SetTreeModule_mk(SetTreeNode$1__get_Left(matchValue_2), SetTreeLeaf$1__get_Key(matchValue_2), SetTreeModule_mk(SetTreeNode$1__get_Right(matchValue_2), v, t2));
      }
    } else {
      throw new Error("internal error: Set.rebalance");
    }
  } else {
    return SetTreeModule_mk(t1, v, t2);
  }
}

function SetTreeModule_add(comparer, k, t) {
  if (t != null) {
    var t2 = t;
    var c = comparer.Compare(k, SetTreeLeaf$1__get_Key(t2)) | 0;

    if (t2 instanceof SetTreeNode$1) {
      if (c < 0) {
        return SetTreeModule_rebalance(SetTreeModule_add(comparer, k, SetTreeNode$1__get_Left(t2)), SetTreeLeaf$1__get_Key(t2), SetTreeNode$1__get_Right(t2));
      } else if (c === 0) {
        return t;
      } else {
        return SetTreeModule_rebalance(SetTreeNode$1__get_Left(t2), SetTreeLeaf$1__get_Key(t2), SetTreeModule_add(comparer, k, SetTreeNode$1__get_Right(t2)));
      }
    } else {
      var c_1 = comparer.Compare(k, SetTreeLeaf$1__get_Key(t2)) | 0;

      if (c_1 < 0) {
        return SetTreeNode$1_$ctor_Z6E7BE5F7(k, SetTreeModule_empty(), t, 2);
      } else if (c_1 === 0) {
        return t;
      } else {
        return SetTreeNode$1_$ctor_Z6E7BE5F7(k, t, SetTreeModule_empty(), 2);
      }
    }
  } else {
    return SetTreeLeaf$1_$ctor_2B595(k);
  }
}

function SetTreeModule_balance(comparer, t1, k, t2) {
  if (t1 != null) {
    var t1$0027 = t1;

    if (t2 != null) {
      var t2$0027 = t2;

      if (t1$0027 instanceof SetTreeNode$1) {
        if (t2$0027 instanceof SetTreeNode$1) {
          if (SetTreeNode$1__get_Height(t1$0027) + 2 < SetTreeNode$1__get_Height(t2$0027)) {
            return SetTreeModule_rebalance(SetTreeModule_balance(comparer, t1, k, SetTreeNode$1__get_Left(t2$0027)), SetTreeLeaf$1__get_Key(t2$0027), SetTreeNode$1__get_Right(t2$0027));
          } else if (SetTreeNode$1__get_Height(t2$0027) + 2 < SetTreeNode$1__get_Height(t1$0027)) {
            return SetTreeModule_rebalance(SetTreeNode$1__get_Left(t1$0027), SetTreeLeaf$1__get_Key(t1$0027), SetTreeModule_balance(comparer, SetTreeNode$1__get_Right(t1$0027), k, t2));
          } else {
            return SetTreeModule_mk(t1, k, t2);
          }
        } else {
          return SetTreeModule_add(comparer, k, SetTreeModule_add(comparer, SetTreeLeaf$1__get_Key(t2$0027), t1));
        }
      } else {
        return SetTreeModule_add(comparer, k, SetTreeModule_add(comparer, SetTreeLeaf$1__get_Key(t1$0027), t2));
      }
    } else {
      return SetTreeModule_add(comparer, k, t1);
    }
  } else {
    return SetTreeModule_add(comparer, k, t2);
  }
}

function SetTreeModule_split(comparer, pivot, t) {
  if (t != null) {
    var t2 = t;

    if (t2 instanceof SetTreeNode$1) {
      var c = comparer.Compare(pivot, SetTreeLeaf$1__get_Key(t2)) | 0;

      if (c < 0) {
        var patternInput = SetTreeModule_split(comparer, pivot, SetTreeNode$1__get_Left(t2));
        return [patternInput[0], patternInput[1], SetTreeModule_balance(comparer, patternInput[2], SetTreeLeaf$1__get_Key(t2), SetTreeNode$1__get_Right(t2))];
      } else if (c === 0) {
        return [SetTreeNode$1__get_Left(t2), true, SetTreeNode$1__get_Right(t2)];
      } else {
        var patternInput_1 = SetTreeModule_split(comparer, pivot, SetTreeNode$1__get_Right(t2));
        return [SetTreeModule_balance(comparer, SetTreeNode$1__get_Left(t2), SetTreeLeaf$1__get_Key(t2), patternInput_1[0]), patternInput_1[1], patternInput_1[2]];
      }
    } else {
      var c_1 = comparer.Compare(SetTreeLeaf$1__get_Key(t2), pivot) | 0;

      if (c_1 < 0) {
        return [t, false, SetTreeModule_empty()];
      } else if (c_1 === 0) {
        return [SetTreeModule_empty(), true, SetTreeModule_empty()];
      } else {
        return [SetTreeModule_empty(), false, t];
      }
    }
  } else {
    return [SetTreeModule_empty(), false, SetTreeModule_empty()];
  }
}

function SetTreeModule_spliceOutSuccessor(t) {
  if (t != null) {
    var t2 = t;

    if (t2 instanceof SetTreeNode$1) {
      if (SetTreeNode$1__get_Left(t2) == null) {
        return [SetTreeLeaf$1__get_Key(t2), SetTreeNode$1__get_Right(t2)];
      } else {
        var patternInput = SetTreeModule_spliceOutSuccessor(SetTreeNode$1__get_Left(t2));
        return [patternInput[0], SetTreeModule_mk(patternInput[1], SetTreeLeaf$1__get_Key(t2), SetTreeNode$1__get_Right(t2))];
      }
    } else {
      return [SetTreeLeaf$1__get_Key(t2), SetTreeModule_empty()];
    }
  } else {
    throw new Error("internal error: Set.spliceOutSuccessor");
  }
}

function SetTreeModule_remove(comparer, k, t) {
  if (t != null) {
    var t2 = t;
    var c = comparer.Compare(k, SetTreeLeaf$1__get_Key(t2)) | 0;

    if (t2 instanceof SetTreeNode$1) {
      if (c < 0) {
        return SetTreeModule_rebalance(SetTreeModule_remove(comparer, k, SetTreeNode$1__get_Left(t2)), SetTreeLeaf$1__get_Key(t2), SetTreeNode$1__get_Right(t2));
      } else if (c === 0) {
        if (SetTreeNode$1__get_Left(t2) == null) {
          return SetTreeNode$1__get_Right(t2);
        } else if (SetTreeNode$1__get_Right(t2) == null) {
          return SetTreeNode$1__get_Left(t2);
        } else {
          var patternInput = SetTreeModule_spliceOutSuccessor(SetTreeNode$1__get_Right(t2));
          return SetTreeModule_mk(SetTreeNode$1__get_Left(t2), patternInput[0], patternInput[1]);
        }
      } else {
        return SetTreeModule_rebalance(SetTreeNode$1__get_Left(t2), SetTreeLeaf$1__get_Key(t2), SetTreeModule_remove(comparer, k, SetTreeNode$1__get_Right(t2)));
      }
    } else if (c === 0) {
      return SetTreeModule_empty();
    } else {
      return t;
    }
  } else {
    return t;
  }
}

function SetTreeModule_mem(comparer_mut, k_mut, t_mut) {
  SetTreeModule_mem: while (true) {
    var comparer = comparer_mut,
        k = k_mut,
        t = t_mut;

    if (t != null) {
      var t2 = t;
      var c = comparer.Compare(k, SetTreeLeaf$1__get_Key(t2)) | 0;

      if (t2 instanceof SetTreeNode$1) {
        if (c < 0) {
          comparer_mut = comparer;
          k_mut = k;
          t_mut = SetTreeNode$1__get_Left(t2);
          continue SetTreeModule_mem;
        } else if (c === 0) {
          return true;
        } else {
          comparer_mut = comparer;
          k_mut = k;
          t_mut = SetTreeNode$1__get_Right(t2);
          continue SetTreeModule_mem;
        }
      } else {
        return c === 0;
      }
    } else {
      return false;
    }

    break;
  }
}

function SetTreeModule_iter(f_mut, t_mut) {
  SetTreeModule_iter: while (true) {
    var f = f_mut,
        t = t_mut;

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        SetTreeModule_iter(f, SetTreeNode$1__get_Left(t2));
        f(SetTreeLeaf$1__get_Key(t2));
        f_mut = f;
        t_mut = SetTreeNode$1__get_Right(t2);
        continue SetTreeModule_iter;
      } else {
        f(SetTreeLeaf$1__get_Key(t2));
      }
    }

    break;
  }
}

function SetTreeModule_foldBackOpt(f_mut, t_mut, x_mut) {
  SetTreeModule_foldBackOpt: while (true) {
    var f = f_mut,
        t = t_mut,
        x = x_mut;

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        f_mut = f;
        t_mut = SetTreeNode$1__get_Left(t2);
        x_mut = f(SetTreeLeaf$1__get_Key(t2), SetTreeModule_foldBackOpt(f, SetTreeNode$1__get_Right(t2), x));
        continue SetTreeModule_foldBackOpt;
      } else {
        return f(SetTreeLeaf$1__get_Key(t2), x);
      }
    } else {
      return x;
    }

    break;
  }
}

function SetTreeModule_foldBack(f, m, x) {
  return SetTreeModule_foldBackOpt(f, m, x);
}

function SetTreeModule_foldOpt(f_mut, x_mut, t_mut) {
  SetTreeModule_foldOpt: while (true) {
    var f = f_mut,
        x = x_mut,
        t = t_mut;

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        f_mut = f;
        x_mut = f(SetTreeModule_foldOpt(f, x, SetTreeNode$1__get_Left(t2)), SetTreeLeaf$1__get_Key(t2));
        t_mut = SetTreeNode$1__get_Right(t2);
        continue SetTreeModule_foldOpt;
      } else {
        return f(x, SetTreeLeaf$1__get_Key(t2));
      }
    } else {
      return x;
    }

    break;
  }
}

function SetTreeModule_fold(f, x, m) {
  return SetTreeModule_foldOpt(f, x, m);
}

function SetTreeModule_forall(f_mut, t_mut) {
  SetTreeModule_forall: while (true) {
    var f = f_mut,
        t = t_mut;

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        if (f(SetTreeLeaf$1__get_Key(t2)) ? SetTreeModule_forall(f, SetTreeNode$1__get_Left(t2)) : false) {
          f_mut = f;
          t_mut = SetTreeNode$1__get_Right(t2);
          continue SetTreeModule_forall;
        } else {
          return false;
        }
      } else {
        return f(SetTreeLeaf$1__get_Key(t2));
      }
    } else {
      return true;
    }

    break;
  }
}

function SetTreeModule_exists(f_mut, t_mut) {
  SetTreeModule_exists: while (true) {
    var f = f_mut,
        t = t_mut;

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        if (f(SetTreeLeaf$1__get_Key(t2)) ? true : SetTreeModule_exists(f, SetTreeNode$1__get_Left(t2))) {
          return true;
        } else {
          f_mut = f;
          t_mut = SetTreeNode$1__get_Right(t2);
          continue SetTreeModule_exists;
        }
      } else {
        return f(SetTreeLeaf$1__get_Key(t2));
      }
    } else {
      return false;
    }

    break;
  }
}

function SetTreeModule_subset(comparer, a, b) {
  return SetTreeModule_forall(function (x) {
    return SetTreeModule_mem(comparer, x, b);
  }, a);
}

function SetTreeModule_properSubset(comparer, a, b) {
  if (SetTreeModule_forall(function (x) {
    return SetTreeModule_mem(comparer, x, b);
  }, a)) {
    return SetTreeModule_exists(function (x_1) {
      return !SetTreeModule_mem(comparer, x_1, a);
    }, b);
  } else {
    return false;
  }
}

function SetTreeModule_filterAux(comparer_mut, f_mut, t_mut, acc_mut) {
  SetTreeModule_filterAux: while (true) {
    var comparer = comparer_mut,
        f = f_mut,
        t = t_mut,
        acc = acc_mut;

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        var acc_1 = f(SetTreeLeaf$1__get_Key(t2)) ? SetTreeModule_add(comparer, SetTreeLeaf$1__get_Key(t2), acc) : acc;
        comparer_mut = comparer;
        f_mut = f;
        t_mut = SetTreeNode$1__get_Left(t2);
        acc_mut = SetTreeModule_filterAux(comparer, f, SetTreeNode$1__get_Right(t2), acc_1);
        continue SetTreeModule_filterAux;
      } else if (f(SetTreeLeaf$1__get_Key(t2))) {
        return SetTreeModule_add(comparer, SetTreeLeaf$1__get_Key(t2), acc);
      } else {
        return acc;
      }
    } else {
      return acc;
    }

    break;
  }
}

function SetTreeModule_filter(comparer, f, s) {
  return SetTreeModule_filterAux(comparer, f, s, SetTreeModule_empty());
}

function SetTreeModule_diffAux(comparer_mut, t_mut, acc_mut) {
  SetTreeModule_diffAux: while (true) {
    var comparer = comparer_mut,
        t = t_mut,
        acc = acc_mut;

    if (acc == null) {
      return acc;
    } else if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        comparer_mut = comparer;
        t_mut = SetTreeNode$1__get_Left(t2);
        acc_mut = SetTreeModule_diffAux(comparer, SetTreeNode$1__get_Right(t2), SetTreeModule_remove(comparer, SetTreeLeaf$1__get_Key(t2), acc));
        continue SetTreeModule_diffAux;
      } else {
        return SetTreeModule_remove(comparer, SetTreeLeaf$1__get_Key(t2), acc);
      }
    } else {
      return acc;
    }

    break;
  }
}

function SetTreeModule_diff(comparer, a, b) {
  return SetTreeModule_diffAux(comparer, b, a);
}

function SetTreeModule_union(comparer, t1, t2) {
  if (t1 != null) {
    var t1$0027 = t1;

    if (t2 != null) {
      var t2$0027 = t2;

      if (t1$0027 instanceof SetTreeNode$1) {
        if (t2$0027 instanceof SetTreeNode$1) {
          if (SetTreeNode$1__get_Height(t1$0027) > SetTreeNode$1__get_Height(t2$0027)) {
            var patternInput = SetTreeModule_split(comparer, SetTreeLeaf$1__get_Key(t1$0027), t2);
            return SetTreeModule_balance(comparer, SetTreeModule_union(comparer, SetTreeNode$1__get_Left(t1$0027), patternInput[0]), SetTreeLeaf$1__get_Key(t1$0027), SetTreeModule_union(comparer, SetTreeNode$1__get_Right(t1$0027), patternInput[2]));
          } else {
            var patternInput_1 = SetTreeModule_split(comparer, SetTreeLeaf$1__get_Key(t2$0027), t1);
            return SetTreeModule_balance(comparer, SetTreeModule_union(comparer, SetTreeNode$1__get_Left(t2$0027), patternInput_1[0]), SetTreeLeaf$1__get_Key(t2$0027), SetTreeModule_union(comparer, SetTreeNode$1__get_Right(t2$0027), patternInput_1[2]));
          }
        } else {
          return SetTreeModule_add(comparer, SetTreeLeaf$1__get_Key(t2$0027), t1);
        }
      } else {
        return SetTreeModule_add(comparer, SetTreeLeaf$1__get_Key(t1$0027), t2);
      }
    } else {
      return t1;
    }
  } else {
    return t2;
  }
}

function SetTreeModule_intersectionAux(comparer_mut, b_mut, t_mut, acc_mut) {
  SetTreeModule_intersectionAux: while (true) {
    var comparer = comparer_mut,
        b = b_mut,
        t = t_mut,
        acc = acc_mut;

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        var acc_1 = SetTreeModule_intersectionAux(comparer, b, SetTreeNode$1__get_Right(t2), acc);
        var acc_2 = SetTreeModule_mem(comparer, SetTreeLeaf$1__get_Key(t2), b) ? SetTreeModule_add(comparer, SetTreeLeaf$1__get_Key(t2), acc_1) : acc_1;
        comparer_mut = comparer;
        b_mut = b;
        t_mut = SetTreeNode$1__get_Left(t2);
        acc_mut = acc_2;
        continue SetTreeModule_intersectionAux;
      } else if (SetTreeModule_mem(comparer, SetTreeLeaf$1__get_Key(t2), b)) {
        return SetTreeModule_add(comparer, SetTreeLeaf$1__get_Key(t2), acc);
      } else {
        return acc;
      }
    } else {
      return acc;
    }

    break;
  }
}

function SetTreeModule_intersection(comparer, a, b) {
  return SetTreeModule_intersectionAux(comparer, b, a, SetTreeModule_empty());
}

function SetTreeModule_partition1(comparer, f, k, acc1, acc2) {
  if (f(k)) {
    return [SetTreeModule_add(comparer, k, acc1), acc2];
  } else {
    return [acc1, SetTreeModule_add(comparer, k, acc2)];
  }
}

function SetTreeModule_partitionAux(comparer_mut, f_mut, t_mut, acc_0_mut, acc_1_mut) {
  SetTreeModule_partitionAux: while (true) {
    var comparer = comparer_mut,
        f = f_mut,
        t = t_mut,
        acc_0 = acc_0_mut,
        acc_1 = acc_1_mut;
    var acc = [acc_0, acc_1];

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        var acc_2 = SetTreeModule_partitionAux(comparer, f, SetTreeNode$1__get_Right(t2), acc[0], acc[1]);
        var acc_3 = SetTreeModule_partition1(comparer, f, SetTreeLeaf$1__get_Key(t2), acc_2[0], acc_2[1]);
        comparer_mut = comparer;
        f_mut = f;
        t_mut = SetTreeNode$1__get_Left(t2);
        acc_0_mut = acc_3[0];
        acc_1_mut = acc_3[1];
        continue SetTreeModule_partitionAux;
      } else {
        return SetTreeModule_partition1(comparer, f, SetTreeLeaf$1__get_Key(t2), acc[0], acc[1]);
      }
    } else {
      return acc;
    }

    break;
  }
}

function SetTreeModule_partition(comparer, f, s) {
  return SetTreeModule_partitionAux(comparer, f, s, SetTreeModule_empty(), SetTreeModule_empty());
}

function SetTreeModule_minimumElementAux(t_mut, n_mut) {
  SetTreeModule_minimumElementAux: while (true) {
    var t = t_mut,
        n = n_mut;

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        t_mut = SetTreeNode$1__get_Left(t2);
        n_mut = SetTreeLeaf$1__get_Key(t2);
        continue SetTreeModule_minimumElementAux;
      } else {
        return SetTreeLeaf$1__get_Key(t2);
      }
    } else {
      return n;
    }

    break;
  }
}

function SetTreeModule_minimumElementOpt(t) {
  if (t != null) {
    var t2 = t;

    if (t2 instanceof SetTreeNode$1) {
      return (0, _Option.some)(SetTreeModule_minimumElementAux(SetTreeNode$1__get_Left(t2), SetTreeLeaf$1__get_Key(t2)));
    } else {
      return (0, _Option.some)(SetTreeLeaf$1__get_Key(t2));
    }
  } else {
    return void 0;
  }
}

function SetTreeModule_maximumElementAux(t_mut, n_mut) {
  SetTreeModule_maximumElementAux: while (true) {
    var t = t_mut,
        n = n_mut;

    if (t != null) {
      var t2 = t;

      if (t2 instanceof SetTreeNode$1) {
        t_mut = SetTreeNode$1__get_Right(t2);
        n_mut = SetTreeLeaf$1__get_Key(t2);
        continue SetTreeModule_maximumElementAux;
      } else {
        return SetTreeLeaf$1__get_Key(t2);
      }
    } else {
      return n;
    }

    break;
  }
}

function SetTreeModule_maximumElementOpt(t) {
  if (t != null) {
    var t2 = t;

    if (t2 instanceof SetTreeNode$1) {
      return (0, _Option.some)(SetTreeModule_maximumElementAux(SetTreeNode$1__get_Right(t2), SetTreeLeaf$1__get_Key(t2)));
    } else {
      return (0, _Option.some)(SetTreeLeaf$1__get_Key(t2));
    }
  } else {
    return void 0;
  }
}

function SetTreeModule_minimumElement(s) {
  var matchValue = SetTreeModule_minimumElementOpt(s);

  if (matchValue == null) {
    throw new Error("Set contains no elements");
  } else {
    return (0, _Option.value)(matchValue);
  }
}

function SetTreeModule_maximumElement(s) {
  var matchValue = SetTreeModule_maximumElementOpt(s);

  if (matchValue == null) {
    throw new Error("Set contains no elements");
  } else {
    return (0, _Option.value)(matchValue);
  }
}

var SetTreeModule_SetIterator$1 = /*#__PURE__*/function (_Record) {
  _inherits(SetTreeModule_SetIterator$1, _Record);

  var _super2 = _createSuper(SetTreeModule_SetIterator$1);

  function SetTreeModule_SetIterator$1(stack, started) {
    var _this2;

    _classCallCheck(this, SetTreeModule_SetIterator$1);

    _this2 = _super2.call(this);
    _this2.stack = stack;
    _this2.started = started;
    return _this2;
  }

  return SetTreeModule_SetIterator$1;
}(_Types.Record);

exports.SetTreeModule_SetIterator$1 = SetTreeModule_SetIterator$1;

function SetTreeModule_SetIterator$1$reflection(gen0) {
  return (0, _Reflection.record_type)("Set.SetTreeModule.SetIterator`1", [gen0], SetTreeModule_SetIterator$1, function () {
    return [["stack", (0, _Reflection.list_type)((0, _Reflection.option_type)(SetTreeLeaf$1$reflection(gen0)))], ["started", _Reflection.bool_type]];
  });
}

function SetTreeModule_collapseLHS(stack_mut) {
  SetTreeModule_collapseLHS: while (true) {
    var stack = stack_mut;

    if (stack.tail != null) {
      var x = stack.head;
      var rest = stack.tail;

      if (x != null) {
        var x2 = x;

        if (x2 instanceof SetTreeNode$1) {
          stack_mut = new _Types.List(SetTreeNode$1__get_Left(x2), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x2)), new _Types.List(SetTreeNode$1__get_Right(x2), rest)));
          continue SetTreeModule_collapseLHS;
        } else {
          return stack;
        }
      } else {
        stack_mut = rest;
        continue SetTreeModule_collapseLHS;
      }
    } else {
      return new _Types.List();
    }

    break;
  }
}

function SetTreeModule_mkIterator(s) {
  return new SetTreeModule_SetIterator$1(SetTreeModule_collapseLHS(new _Types.List(s, new _Types.List())), false);
}

function SetTreeModule_notStarted() {
  throw new Error("Enumeration not started");
}

function SetTreeModule_alreadyFinished() {
  throw new Error("Enumeration already started");
}

function SetTreeModule_current(i) {
  if (i.started) {
    var matchValue = i.stack;

    if (matchValue.tail == null) {
      return SetTreeModule_alreadyFinished();
    } else if (matchValue.head != null) {
      var t = matchValue.head;
      return SetTreeLeaf$1__get_Key(t);
    } else {
      throw new Error("Please report error: Set iterator, unexpected stack for current");
    }
  } else {
    return SetTreeModule_notStarted();
  }
}

function SetTreeModule_moveNext(i) {
  if (i.started) {
    var matchValue = i.stack;

    if (matchValue.tail != null) {
      if (matchValue.head != null) {
        var t = matchValue.head;

        if (t instanceof SetTreeNode$1) {
          throw new Error("Please report error: Set iterator, unexpected stack for moveNext");
        } else {
          i.stack = SetTreeModule_collapseLHS(matchValue.tail);
          return !(i.stack.tail == null);
        }
      } else {
        throw new Error("Please report error: Set iterator, unexpected stack for moveNext");
      }
    } else {
      return false;
    }
  } else {
    i.started = true;
    return !(i.stack.tail == null);
  }
}

function SetTreeModule_mkIEnumerator(s) {
  var _ref;

  var i = SetTreeModule_mkIterator(s);
  return _ref = {}, _defineProperty(_ref, "System.Collections.Generic.IEnumerator`1.get_Current", function SystemCollectionsGenericIEnumerator1Get_Current() {
    return SetTreeModule_current(i);
  }), _defineProperty(_ref, "System.Collections.IEnumerator.get_Current", function SystemCollectionsIEnumeratorGet_Current() {
    return SetTreeModule_current(i);
  }), _defineProperty(_ref, "System.Collections.IEnumerator.MoveNext", function SystemCollectionsIEnumeratorMoveNext() {
    return SetTreeModule_moveNext(i);
  }), _defineProperty(_ref, "System.Collections.IEnumerator.Reset", function SystemCollectionsIEnumeratorReset() {
    i = SetTreeModule_mkIterator(s);
  }), _defineProperty(_ref, "Dispose", function Dispose() {}), _ref;
}

function SetTreeModule_compareStacks(comparer_mut, l1_mut, l2_mut) {
  SetTreeModule_compareStacks: while (true) {
    var comparer = comparer_mut,
        l1 = l1_mut,
        l2 = l2_mut;
    var matchValue = [l1, l2];

    if (matchValue[0].tail != null) {
      if (matchValue[1].tail != null) {
        if (matchValue[1].head != null) {
          if (matchValue[0].head != null) {
            var x1_3 = matchValue[0].head;
            var x2_3 = matchValue[1].head;

            if (x1_3 instanceof SetTreeNode$1) {
              if (SetTreeNode$1__get_Left(x1_3) == null) {
                if (x2_3 instanceof SetTreeNode$1) {
                  if (SetTreeNode$1__get_Left(x2_3) == null) {
                    var c = comparer.Compare(SetTreeLeaf$1__get_Key(x1_3), SetTreeLeaf$1__get_Key(x2_3)) | 0;

                    if (c !== 0) {
                      return c | 0;
                    } else {
                      comparer_mut = comparer;
                      l1_mut = new _Types.List(SetTreeNode$1__get_Right(x1_3), matchValue[0].tail);
                      l2_mut = new _Types.List(SetTreeNode$1__get_Right(x2_3), matchValue[1].tail);
                      continue SetTreeModule_compareStacks;
                    }
                  } else {
                    var matchValue_3 = [l1, l2];
                    var pattern_matching_result = void 0,
                        t1_6 = void 0,
                        x1_4 = void 0,
                        t2_6 = void 0,
                        x2_4 = void 0;

                    if (matchValue_3[0].tail != null) {
                      if (matchValue_3[0].head != null) {
                        pattern_matching_result = 0;
                        t1_6 = matchValue_3[0].tail;
                        x1_4 = matchValue_3[0].head;
                      } else if (matchValue_3[1].tail != null) {
                        if (matchValue_3[1].head != null) {
                          pattern_matching_result = 1;
                          t2_6 = matchValue_3[1].tail;
                          x2_4 = matchValue_3[1].head;
                        } else {
                          pattern_matching_result = 2;
                        }
                      } else {
                        pattern_matching_result = 2;
                      }
                    } else if (matchValue_3[1].tail != null) {
                      if (matchValue_3[1].head != null) {
                        pattern_matching_result = 1;
                        t2_6 = matchValue_3[1].tail;
                        x2_4 = matchValue_3[1].head;
                      } else {
                        pattern_matching_result = 2;
                      }
                    } else {
                      pattern_matching_result = 2;
                    }

                    switch (pattern_matching_result) {
                      case 0:
                        {
                          if (x1_4 instanceof SetTreeNode$1) {
                            comparer_mut = comparer;
                            l1_mut = new _Types.List(SetTreeNode$1__get_Left(x1_4), new _Types.List(SetTreeNode$1_$ctor_Z6E7BE5F7(SetTreeLeaf$1__get_Key(x1_4), SetTreeModule_empty(), SetTreeNode$1__get_Right(x1_4), 0), t1_6));
                            l2_mut = l2;
                            continue SetTreeModule_compareStacks;
                          } else {
                            comparer_mut = comparer;
                            l1_mut = new _Types.List(SetTreeModule_empty(), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x1_4)), t1_6));
                            l2_mut = l2;
                            continue SetTreeModule_compareStacks;
                          }
                        }

                      case 1:
                        {
                          if (x2_4 instanceof SetTreeNode$1) {
                            comparer_mut = comparer;
                            l1_mut = l1;
                            l2_mut = new _Types.List(SetTreeNode$1__get_Left(x2_4), new _Types.List(SetTreeNode$1_$ctor_Z6E7BE5F7(SetTreeLeaf$1__get_Key(x2_4), SetTreeModule_empty(), SetTreeNode$1__get_Right(x2_4), 0), t2_6));
                            continue SetTreeModule_compareStacks;
                          } else {
                            comparer_mut = comparer;
                            l1_mut = l1;
                            l2_mut = new _Types.List(SetTreeModule_empty(), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x2_4)), t2_6));
                            continue SetTreeModule_compareStacks;
                          }
                        }

                      case 2:
                        {
                          throw new Error("unexpected state in SetTree.compareStacks");
                        }
                    }
                  }
                } else {
                  var c_1 = comparer.Compare(SetTreeLeaf$1__get_Key(x1_3), SetTreeLeaf$1__get_Key(x2_3)) | 0;

                  if (c_1 !== 0) {
                    return c_1 | 0;
                  } else {
                    comparer_mut = comparer;
                    l1_mut = new _Types.List(SetTreeNode$1__get_Right(x1_3), matchValue[0].tail);
                    l2_mut = new _Types.List(SetTreeModule_empty(), matchValue[1].tail);
                    continue SetTreeModule_compareStacks;
                  }
                }
              } else {
                var matchValue_4 = [l1, l2];
                var pattern_matching_result_1 = void 0,
                    t1_7 = void 0,
                    x1_5 = void 0,
                    t2_7 = void 0,
                    x2_5 = void 0;

                if (matchValue_4[0].tail != null) {
                  if (matchValue_4[0].head != null) {
                    pattern_matching_result_1 = 0;
                    t1_7 = matchValue_4[0].tail;
                    x1_5 = matchValue_4[0].head;
                  } else if (matchValue_4[1].tail != null) {
                    if (matchValue_4[1].head != null) {
                      pattern_matching_result_1 = 1;
                      t2_7 = matchValue_4[1].tail;
                      x2_5 = matchValue_4[1].head;
                    } else {
                      pattern_matching_result_1 = 2;
                    }
                  } else {
                    pattern_matching_result_1 = 2;
                  }
                } else if (matchValue_4[1].tail != null) {
                  if (matchValue_4[1].head != null) {
                    pattern_matching_result_1 = 1;
                    t2_7 = matchValue_4[1].tail;
                    x2_5 = matchValue_4[1].head;
                  } else {
                    pattern_matching_result_1 = 2;
                  }
                } else {
                  pattern_matching_result_1 = 2;
                }

                switch (pattern_matching_result_1) {
                  case 0:
                    {
                      if (x1_5 instanceof SetTreeNode$1) {
                        comparer_mut = comparer;
                        l1_mut = new _Types.List(SetTreeNode$1__get_Left(x1_5), new _Types.List(SetTreeNode$1_$ctor_Z6E7BE5F7(SetTreeLeaf$1__get_Key(x1_5), SetTreeModule_empty(), SetTreeNode$1__get_Right(x1_5), 0), t1_7));
                        l2_mut = l2;
                        continue SetTreeModule_compareStacks;
                      } else {
                        comparer_mut = comparer;
                        l1_mut = new _Types.List(SetTreeModule_empty(), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x1_5)), t1_7));
                        l2_mut = l2;
                        continue SetTreeModule_compareStacks;
                      }
                    }

                  case 1:
                    {
                      if (x2_5 instanceof SetTreeNode$1) {
                        comparer_mut = comparer;
                        l1_mut = l1;
                        l2_mut = new _Types.List(SetTreeNode$1__get_Left(x2_5), new _Types.List(SetTreeNode$1_$ctor_Z6E7BE5F7(SetTreeLeaf$1__get_Key(x2_5), SetTreeModule_empty(), SetTreeNode$1__get_Right(x2_5), 0), t2_7));
                        continue SetTreeModule_compareStacks;
                      } else {
                        comparer_mut = comparer;
                        l1_mut = l1;
                        l2_mut = new _Types.List(SetTreeModule_empty(), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x2_5)), t2_7));
                        continue SetTreeModule_compareStacks;
                      }
                    }

                  case 2:
                    {
                      throw new Error("unexpected state in SetTree.compareStacks");
                    }
                }
              }
            } else if (x2_3 instanceof SetTreeNode$1) {
              if (SetTreeNode$1__get_Left(x2_3) == null) {
                var c_2 = comparer.Compare(SetTreeLeaf$1__get_Key(x1_3), SetTreeLeaf$1__get_Key(x2_3)) | 0;

                if (c_2 !== 0) {
                  return c_2 | 0;
                } else {
                  comparer_mut = comparer;
                  l1_mut = new _Types.List(SetTreeModule_empty(), matchValue[0].tail);
                  l2_mut = new _Types.List(SetTreeNode$1__get_Right(x2_3), matchValue[1].tail);
                  continue SetTreeModule_compareStacks;
                }
              } else {
                var matchValue_5 = [l1, l2];
                var pattern_matching_result_2 = void 0,
                    t1_8 = void 0,
                    x1_6 = void 0,
                    t2_8 = void 0,
                    x2_6 = void 0;

                if (matchValue_5[0].tail != null) {
                  if (matchValue_5[0].head != null) {
                    pattern_matching_result_2 = 0;
                    t1_8 = matchValue_5[0].tail;
                    x1_6 = matchValue_5[0].head;
                  } else if (matchValue_5[1].tail != null) {
                    if (matchValue_5[1].head != null) {
                      pattern_matching_result_2 = 1;
                      t2_8 = matchValue_5[1].tail;
                      x2_6 = matchValue_5[1].head;
                    } else {
                      pattern_matching_result_2 = 2;
                    }
                  } else {
                    pattern_matching_result_2 = 2;
                  }
                } else if (matchValue_5[1].tail != null) {
                  if (matchValue_5[1].head != null) {
                    pattern_matching_result_2 = 1;
                    t2_8 = matchValue_5[1].tail;
                    x2_6 = matchValue_5[1].head;
                  } else {
                    pattern_matching_result_2 = 2;
                  }
                } else {
                  pattern_matching_result_2 = 2;
                }

                switch (pattern_matching_result_2) {
                  case 0:
                    {
                      if (x1_6 instanceof SetTreeNode$1) {
                        comparer_mut = comparer;
                        l1_mut = new _Types.List(SetTreeNode$1__get_Left(x1_6), new _Types.List(SetTreeNode$1_$ctor_Z6E7BE5F7(SetTreeLeaf$1__get_Key(x1_6), SetTreeModule_empty(), SetTreeNode$1__get_Right(x1_6), 0), t1_8));
                        l2_mut = l2;
                        continue SetTreeModule_compareStacks;
                      } else {
                        comparer_mut = comparer;
                        l1_mut = new _Types.List(SetTreeModule_empty(), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x1_6)), t1_8));
                        l2_mut = l2;
                        continue SetTreeModule_compareStacks;
                      }
                    }

                  case 1:
                    {
                      if (x2_6 instanceof SetTreeNode$1) {
                        comparer_mut = comparer;
                        l1_mut = l1;
                        l2_mut = new _Types.List(SetTreeNode$1__get_Left(x2_6), new _Types.List(SetTreeNode$1_$ctor_Z6E7BE5F7(SetTreeLeaf$1__get_Key(x2_6), SetTreeModule_empty(), SetTreeNode$1__get_Right(x2_6), 0), t2_8));
                        continue SetTreeModule_compareStacks;
                      } else {
                        comparer_mut = comparer;
                        l1_mut = l1;
                        l2_mut = new _Types.List(SetTreeModule_empty(), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x2_6)), t2_8));
                        continue SetTreeModule_compareStacks;
                      }
                    }

                  case 2:
                    {
                      throw new Error("unexpected state in SetTree.compareStacks");
                    }
                }
              }
            } else {
              var c_3 = comparer.Compare(SetTreeLeaf$1__get_Key(x1_3), SetTreeLeaf$1__get_Key(x2_3)) | 0;

              if (c_3 !== 0) {
                return c_3 | 0;
              } else {
                comparer_mut = comparer;
                l1_mut = matchValue[0].tail;
                l2_mut = matchValue[1].tail;
                continue SetTreeModule_compareStacks;
              }
            }
          } else {
            var x2 = matchValue[1].head;
            var matchValue_1 = [l1, l2];
            var pattern_matching_result_3 = void 0,
                t1_2 = void 0,
                x1 = void 0,
                t2_2 = void 0,
                x2_1 = void 0;

            if (matchValue_1[0].tail != null) {
              if (matchValue_1[0].head != null) {
                pattern_matching_result_3 = 0;
                t1_2 = matchValue_1[0].tail;
                x1 = matchValue_1[0].head;
              } else if (matchValue_1[1].tail != null) {
                if (matchValue_1[1].head != null) {
                  pattern_matching_result_3 = 1;
                  t2_2 = matchValue_1[1].tail;
                  x2_1 = matchValue_1[1].head;
                } else {
                  pattern_matching_result_3 = 2;
                }
              } else {
                pattern_matching_result_3 = 2;
              }
            } else if (matchValue_1[1].tail != null) {
              if (matchValue_1[1].head != null) {
                pattern_matching_result_3 = 1;
                t2_2 = matchValue_1[1].tail;
                x2_1 = matchValue_1[1].head;
              } else {
                pattern_matching_result_3 = 2;
              }
            } else {
              pattern_matching_result_3 = 2;
            }

            switch (pattern_matching_result_3) {
              case 0:
                {
                  if (x1 instanceof SetTreeNode$1) {
                    comparer_mut = comparer;
                    l1_mut = new _Types.List(SetTreeNode$1__get_Left(x1), new _Types.List(SetTreeNode$1_$ctor_Z6E7BE5F7(SetTreeLeaf$1__get_Key(x1), SetTreeModule_empty(), SetTreeNode$1__get_Right(x1), 0), t1_2));
                    l2_mut = l2;
                    continue SetTreeModule_compareStacks;
                  } else {
                    comparer_mut = comparer;
                    l1_mut = new _Types.List(SetTreeModule_empty(), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x1)), t1_2));
                    l2_mut = l2;
                    continue SetTreeModule_compareStacks;
                  }
                }

              case 1:
                {
                  if (x2_1 instanceof SetTreeNode$1) {
                    comparer_mut = comparer;
                    l1_mut = l1;
                    l2_mut = new _Types.List(SetTreeNode$1__get_Left(x2_1), new _Types.List(SetTreeNode$1_$ctor_Z6E7BE5F7(SetTreeLeaf$1__get_Key(x2_1), SetTreeModule_empty(), SetTreeNode$1__get_Right(x2_1), 0), t2_2));
                    continue SetTreeModule_compareStacks;
                  } else {
                    comparer_mut = comparer;
                    l1_mut = l1;
                    l2_mut = new _Types.List(SetTreeModule_empty(), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x2_1)), t2_2));
                    continue SetTreeModule_compareStacks;
                  }
                }

              case 2:
                {
                  throw new Error("unexpected state in SetTree.compareStacks");
                }
            }
          }
        } else if (matchValue[0].head != null) {
          var x1_1 = matchValue[0].head;
          var matchValue_2 = [l1, l2];
          var pattern_matching_result_4 = void 0,
              t1_4 = void 0,
              x1_2 = void 0,
              t2_4 = void 0,
              x2_2 = void 0;

          if (matchValue_2[0].tail != null) {
            if (matchValue_2[0].head != null) {
              pattern_matching_result_4 = 0;
              t1_4 = matchValue_2[0].tail;
              x1_2 = matchValue_2[0].head;
            } else if (matchValue_2[1].tail != null) {
              if (matchValue_2[1].head != null) {
                pattern_matching_result_4 = 1;
                t2_4 = matchValue_2[1].tail;
                x2_2 = matchValue_2[1].head;
              } else {
                pattern_matching_result_4 = 2;
              }
            } else {
              pattern_matching_result_4 = 2;
            }
          } else if (matchValue_2[1].tail != null) {
            if (matchValue_2[1].head != null) {
              pattern_matching_result_4 = 1;
              t2_4 = matchValue_2[1].tail;
              x2_2 = matchValue_2[1].head;
            } else {
              pattern_matching_result_4 = 2;
            }
          } else {
            pattern_matching_result_4 = 2;
          }

          switch (pattern_matching_result_4) {
            case 0:
              {
                if (x1_2 instanceof SetTreeNode$1) {
                  comparer_mut = comparer;
                  l1_mut = new _Types.List(SetTreeNode$1__get_Left(x1_2), new _Types.List(SetTreeNode$1_$ctor_Z6E7BE5F7(SetTreeLeaf$1__get_Key(x1_2), SetTreeModule_empty(), SetTreeNode$1__get_Right(x1_2), 0), t1_4));
                  l2_mut = l2;
                  continue SetTreeModule_compareStacks;
                } else {
                  comparer_mut = comparer;
                  l1_mut = new _Types.List(SetTreeModule_empty(), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x1_2)), t1_4));
                  l2_mut = l2;
                  continue SetTreeModule_compareStacks;
                }
              }

            case 1:
              {
                if (x2_2 instanceof SetTreeNode$1) {
                  comparer_mut = comparer;
                  l1_mut = l1;
                  l2_mut = new _Types.List(SetTreeNode$1__get_Left(x2_2), new _Types.List(SetTreeNode$1_$ctor_Z6E7BE5F7(SetTreeLeaf$1__get_Key(x2_2), SetTreeModule_empty(), SetTreeNode$1__get_Right(x2_2), 0), t2_4));
                  continue SetTreeModule_compareStacks;
                } else {
                  comparer_mut = comparer;
                  l1_mut = l1;
                  l2_mut = new _Types.List(SetTreeModule_empty(), new _Types.List(SetTreeLeaf$1_$ctor_2B595(SetTreeLeaf$1__get_Key(x2_2)), t2_4));
                  continue SetTreeModule_compareStacks;
                }
              }

            case 2:
              {
                throw new Error("unexpected state in SetTree.compareStacks");
              }
          }
        } else {
          comparer_mut = comparer;
          l1_mut = matchValue[0].tail;
          l2_mut = matchValue[1].tail;
          continue SetTreeModule_compareStacks;
        }
      } else {
        return 1;
      }
    } else if (matchValue[1].tail == null) {
      return 0;
    } else {
      return -1;
    }

    break;
  }
}

function SetTreeModule_compare(comparer, t1, t2) {
  if (t1 == null) {
    if (t2 == null) {
      return 0;
    } else {
      return -1;
    }
  } else if (t2 == null) {
    return 1;
  } else {
    return SetTreeModule_compareStacks(comparer, new _Types.List(t1, new _Types.List()), new _Types.List(t2, new _Types.List())) | 0;
  }
}

function SetTreeModule_choose(s) {
  return SetTreeModule_minimumElement(s);
}

function SetTreeModule_toList(t) {
  var loop = function loop(t$0027_mut, acc_mut) {
    loop: while (true) {
      var t$0027 = t$0027_mut,
          acc = acc_mut;

      if (t$0027 != null) {
        var t2 = t$0027;

        if (t2 instanceof SetTreeNode$1) {
          t$0027_mut = SetTreeNode$1__get_Left(t2);
          acc_mut = new _Types.List(SetTreeLeaf$1__get_Key(t2), loop(SetTreeNode$1__get_Right(t2), acc));
          continue loop;
        } else {
          return new _Types.List(SetTreeLeaf$1__get_Key(t2), acc);
        }
      } else {
        return acc;
      }

      break;
    }
  };

  return loop(t, new _Types.List());
}

function SetTreeModule_copyToArray(s, arr, i) {
  var j = i | 0;
  SetTreeModule_iter(function (x) {
    arr[j] = x;
    j = j + 1;
  }, s);
}

function SetTreeModule_toArray(s) {
  var n = SetTreeModule_count(s) | 0;
  var res = new Array(n);
  SetTreeModule_copyToArray(s, res, 0);
  return res;
}

function SetTreeModule_mkFromEnumerator(comparer_mut, acc_mut, e_mut) {
  SetTreeModule_mkFromEnumerator: while (true) {
    var comparer = comparer_mut,
        acc = acc_mut,
        e = e_mut;

    if (e["System.Collections.IEnumerator.MoveNext"]()) {
      comparer_mut = comparer;
      acc_mut = SetTreeModule_add(comparer, e["System.Collections.Generic.IEnumerator`1.get_Current"](), acc);
      e_mut = e;
      continue SetTreeModule_mkFromEnumerator;
    } else {
      return acc;
    }

    break;
  }
}

function SetTreeModule_ofSeq(comparer, c) {
  var ie = (0, _Seq.getEnumerator)(c);

  try {
    return SetTreeModule_mkFromEnumerator(comparer, SetTreeModule_empty(), ie);
  } finally {
    ie.Dispose();
  }
}

function SetTreeModule_ofArray(comparer, l) {
  return (0, _Array.fold)(function (acc, k) {
    return SetTreeModule_add(comparer, k, acc);
  }, SetTreeModule_empty(), l);
}

var FSharpSet = /*#__PURE__*/function () {
  function FSharpSet(comparer, tree) {
    _classCallCheck(this, FSharpSet);

    this.comparer = comparer;
    this.tree = tree;
  }

  _createClass(FSharpSet, [{
    key: "GetHashCode",
    value: function GetHashCode() {
      var this$ = this;
      return FSharpSet__ComputeHashCode(this$) | 0;
    }
  }, {
    key: "Equals",
    value: function Equals(that) {
      var this$ = this;
      return that instanceof FSharpSet ? SetTreeModule_compare(FSharpSet__get_Comparer(this$), FSharpSet__get_Tree(this$), FSharpSet__get_Tree(that)) === 0 : false;
    }
  }, {
    key: "toString",
    value: function toString() {
      var this$ = this;
      return "set [" + (0, _String.join)("; ", (0, _Seq.map)(function (x) {
        var copyOfStruct = x;
        return (0, _Types.toString)(copyOfStruct);
      }, this$)) + "]";
    }
  }, {
    key: "CompareTo",
    value: function CompareTo(that) {
      var s = this;
      return SetTreeModule_compare(FSharpSet__get_Comparer(s), FSharpSet__get_Tree(s), FSharpSet__get_Tree(that)) | 0;
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Add2B595",
    value: function SystemCollectionsGenericICollection1Add2B595(x) {
      void x;
      throw new Error("ReadOnlyCollection");
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Clear",
    value: function SystemCollectionsGenericICollection1Clear() {
      throw new Error("ReadOnlyCollection");
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Remove2B595",
    value: function SystemCollectionsGenericICollection1Remove2B595(x) {
      void x;
      throw new Error("ReadOnlyCollection");
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.Contains2B595",
    value: function SystemCollectionsGenericICollection1Contains2B595(x) {
      var s = this;
      return SetTreeModule_mem(FSharpSet__get_Comparer(s), x, FSharpSet__get_Tree(s));
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.CopyToZ2E171D71",
    value: function SystemCollectionsGenericICollection1CopyToZ2E171D71(arr, i) {
      var s = this;
      SetTreeModule_copyToArray(FSharpSet__get_Tree(s), arr, i);
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.get_IsReadOnly",
    value: function SystemCollectionsGenericICollection1Get_IsReadOnly() {
      return true;
    }
  }, {
    key: "System.Collections.Generic.ICollection`1.get_Count",
    value: function SystemCollectionsGenericICollection1Get_Count() {
      var s = this;
      return FSharpSet__get_Count(s) | 0;
    }
  }, {
    key: "System.Collections.Generic.IReadOnlyCollection`1.get_Count",
    value: function SystemCollectionsGenericIReadOnlyCollection1Get_Count() {
      var s = this;
      return FSharpSet__get_Count(s) | 0;
    }
  }, {
    key: "GetEnumerator",
    value: function GetEnumerator() {
      var s = this;
      return SetTreeModule_mkIEnumerator(FSharpSet__get_Tree(s));
    }
  }, {
    key: Symbol.iterator,
    value: function value() {
      return (0, _Seq.toIterator)(this.GetEnumerator());
    }
  }, {
    key: "System.Collections.IEnumerable.GetEnumerator",
    value: function SystemCollectionsIEnumerableGetEnumerator() {
      var s = this;
      return SetTreeModule_mkIEnumerator(FSharpSet__get_Tree(s));
    }
  }, {
    key: "add",
    value: function add(k) {
      var s = this;
      throw new Error("Set cannot be mutated");
      return s;
    }
  }, {
    key: "clear",
    value: function clear() {
      throw new Error("Set cannot be mutated");
    }
  }, {
    key: "delete",
    value: function _delete(k) {
      throw new Error("Set cannot be mutated");
      return false;
    }
  }, {
    key: "has",
    value: function has(k) {
      var s = this;
      return FSharpSet__Contains(s, k);
    }
  }, {
    key: "keys",
    value: function keys() {
      var s = this;
      return (0, _Seq.map)(function (x) {
        return x;
      }, s);
    }
  }, {
    key: "values",
    value: function values() {
      var s = this;
      return (0, _Seq.map)(function (x) {
        return x;
      }, s);
    }
  }, {
    key: "entries",
    value: function entries() {
      var s = this;
      return (0, _Seq.map)(function (v) {
        return [v, v];
      }, s);
    }
  }, {
    key: "forEach",
    value: function forEach(f, thisArg) {
      var s = this;
      (0, _Seq.iterate)(function (x) {
        f(x, x, s);
      }, s);
    }
  }, {
    key: Symbol.toStringTag,
    get: function get() {
      return "FSharpSet";
    }
  }, {
    key: "size",
    get: function get() {
      var s = this;
      return FSharpSet__get_Count(s) | 0;
    }
  }]);

  return FSharpSet;
}();

exports.FSharpSet = FSharpSet;

function FSharpSet$reflection(gen0) {
  return (0, _Reflection.class_type)("Set.FSharpSet", [gen0], FSharpSet);
}

function FSharpSet_$ctor(comparer, tree) {
  return new FSharpSet(comparer, tree);
}

function FSharpSet__get_Comparer(set$) {
  return set$.comparer;
}

function FSharpSet__get_Tree(set$) {
  return set$.tree;
}

function FSharpSet_Empty(comparer) {
  return FSharpSet_$ctor(comparer, SetTreeModule_empty());
}

function FSharpSet__Add(s, value) {
  return FSharpSet_$ctor(FSharpSet__get_Comparer(s), SetTreeModule_add(FSharpSet__get_Comparer(s), value, FSharpSet__get_Tree(s)));
}

function FSharpSet__Remove(s, value) {
  return FSharpSet_$ctor(FSharpSet__get_Comparer(s), SetTreeModule_remove(FSharpSet__get_Comparer(s), value, FSharpSet__get_Tree(s)));
}

function FSharpSet__get_Count(s) {
  return SetTreeModule_count(FSharpSet__get_Tree(s));
}

function FSharpSet__Contains(s, value) {
  return SetTreeModule_mem(FSharpSet__get_Comparer(s), value, FSharpSet__get_Tree(s));
}

function FSharpSet__Iterate(s, x) {
  SetTreeModule_iter(x, FSharpSet__get_Tree(s));
}

function FSharpSet__Fold(s, f, z) {
  var f_1 = f;
  return SetTreeModule_fold(function (x, z_1) {
    return f_1(z_1, x);
  }, z, FSharpSet__get_Tree(s));
}

function FSharpSet__get_IsEmpty(s) {
  return FSharpSet__get_Tree(s) == null;
}

function FSharpSet__Partition(s, f) {
  if (FSharpSet__get_Tree(s) == null) {
    return [s, s];
  } else {
    var patternInput = SetTreeModule_partition(FSharpSet__get_Comparer(s), f, FSharpSet__get_Tree(s));
    return [FSharpSet_$ctor(FSharpSet__get_Comparer(s), patternInput[0]), FSharpSet_$ctor(FSharpSet__get_Comparer(s), patternInput[1])];
  }
}

function FSharpSet__Filter(s, f) {
  if (FSharpSet__get_Tree(s) == null) {
    return s;
  } else {
    return FSharpSet_$ctor(FSharpSet__get_Comparer(s), SetTreeModule_filter(FSharpSet__get_Comparer(s), f, FSharpSet__get_Tree(s)));
  }
}

function FSharpSet__Map(s, f, comparer) {
  return FSharpSet_$ctor(comparer, SetTreeModule_fold(function (acc, k) {
    return SetTreeModule_add(comparer, f(k), acc);
  }, SetTreeModule_empty(), FSharpSet__get_Tree(s)));
}

function FSharpSet__Exists(s, f) {
  return SetTreeModule_exists(f, FSharpSet__get_Tree(s));
}

function FSharpSet__ForAll(s, f) {
  return SetTreeModule_forall(f, FSharpSet__get_Tree(s));
}

function FSharpSet_op_Subtraction(set1, set2) {
  if (FSharpSet__get_Tree(set1) == null) {
    return set1;
  } else if (FSharpSet__get_Tree(set2) == null) {
    return set1;
  } else {
    return FSharpSet_$ctor(FSharpSet__get_Comparer(set1), SetTreeModule_diff(FSharpSet__get_Comparer(set1), FSharpSet__get_Tree(set1), FSharpSet__get_Tree(set2)));
  }
}

function FSharpSet_op_Addition(set1, set2) {
  if (FSharpSet__get_Tree(set2) == null) {
    return set1;
  } else if (FSharpSet__get_Tree(set1) == null) {
    return set2;
  } else {
    return FSharpSet_$ctor(FSharpSet__get_Comparer(set1), SetTreeModule_union(FSharpSet__get_Comparer(set1), FSharpSet__get_Tree(set1), FSharpSet__get_Tree(set2)));
  }
}

function FSharpSet_Intersection(a, b) {
  if (FSharpSet__get_Tree(b) == null) {
    return b;
  } else if (FSharpSet__get_Tree(a) == null) {
    return a;
  } else {
    return FSharpSet_$ctor(FSharpSet__get_Comparer(a), SetTreeModule_intersection(FSharpSet__get_Comparer(a), FSharpSet__get_Tree(a), FSharpSet__get_Tree(b)));
  }
}

function FSharpSet_IntersectionMany(sets) {
  return (0, _Seq.reduce)(FSharpSet_Intersection, sets);
}

function FSharpSet_Equality(a, b) {
  return SetTreeModule_compare(FSharpSet__get_Comparer(a), FSharpSet__get_Tree(a), FSharpSet__get_Tree(b)) === 0;
}

function FSharpSet_Compare(a, b) {
  return SetTreeModule_compare(FSharpSet__get_Comparer(a), FSharpSet__get_Tree(a), FSharpSet__get_Tree(b));
}

function FSharpSet__get_Choose(x) {
  return SetTreeModule_choose(FSharpSet__get_Tree(x));
}

function FSharpSet__get_MinimumElement(x) {
  return SetTreeModule_minimumElement(FSharpSet__get_Tree(x));
}

function FSharpSet__get_MaximumElement(x) {
  return SetTreeModule_maximumElement(FSharpSet__get_Tree(x));
}

function FSharpSet__IsSubsetOf(x, otherSet) {
  return SetTreeModule_subset(FSharpSet__get_Comparer(x), FSharpSet__get_Tree(x), FSharpSet__get_Tree(otherSet));
}

function FSharpSet__IsSupersetOf(x, otherSet) {
  return SetTreeModule_subset(FSharpSet__get_Comparer(x), FSharpSet__get_Tree(otherSet), FSharpSet__get_Tree(x));
}

function FSharpSet__IsProperSubsetOf(x, otherSet) {
  return SetTreeModule_properSubset(FSharpSet__get_Comparer(x), FSharpSet__get_Tree(x), FSharpSet__get_Tree(otherSet));
}

function FSharpSet__IsProperSupersetOf(x, otherSet) {
  return SetTreeModule_properSubset(FSharpSet__get_Comparer(x), FSharpSet__get_Tree(otherSet), FSharpSet__get_Tree(x));
}

function FSharpSet__ToList(x) {
  return SetTreeModule_toList(FSharpSet__get_Tree(x));
}

function FSharpSet__ToArray(x) {
  return SetTreeModule_toArray(FSharpSet__get_Tree(x));
}

function FSharpSet__ComputeHashCode(this$) {
  var res = 0;
  var enumerator = (0, _Seq.getEnumerator)(this$);

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var x_1 = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]();
      res = (res << 1) + (0, _Util.structuralHash)(x_1) + 631;
    }
  } finally {
    enumerator.Dispose();
  }

  return Math.abs(res) | 0;
}

function isEmpty(set$) {
  return FSharpSet__get_IsEmpty(set$);
}

function contains(element, set$) {
  return FSharpSet__Contains(set$, element);
}

function add(value, set$) {
  return FSharpSet__Add(set$, value);
}

function singleton(value, comparer) {
  return FSharpSet__Add(FSharpSet_Empty(comparer), value);
}

function remove(value, set$) {
  return FSharpSet__Remove(set$, value);
}

function union(set1, set2) {
  return FSharpSet_op_Addition(set1, set2);
}

function unionMany(sets, comparer) {
  return (0, _Seq.fold)(FSharpSet_op_Addition, FSharpSet_Empty(comparer), sets);
}

function intersect(set1, set2) {
  return FSharpSet_Intersection(set1, set2);
}

function intersectMany(sets) {
  return FSharpSet_IntersectionMany(sets);
}

function iterate(action, set$) {
  FSharpSet__Iterate(set$, action);
}

function empty(comparer) {
  return FSharpSet_Empty(comparer);
}

function forAll(predicate, set$) {
  return FSharpSet__ForAll(set$, predicate);
}

function exists(predicate, set$) {
  return FSharpSet__Exists(set$, predicate);
}

function filter(predicate, set$) {
  return FSharpSet__Filter(set$, predicate);
}

function partition(predicate, set$) {
  return FSharpSet__Partition(set$, predicate);
}

function fold(folder, state, set$) {
  return SetTreeModule_fold(folder, state, FSharpSet__get_Tree(set$));
}

function foldBack(folder, set$, state) {
  return SetTreeModule_foldBack(folder, FSharpSet__get_Tree(set$), state);
}

function map(mapping, set$, comparer) {
  return FSharpSet__Map(set$, mapping, comparer);
}

function count(set$) {
  return FSharpSet__get_Count(set$);
}

function ofList(elements, comparer) {
  return FSharpSet_$ctor(comparer, SetTreeModule_ofSeq(comparer, elements));
}

function ofArray(array, comparer) {
  return FSharpSet_$ctor(comparer, SetTreeModule_ofArray(comparer, array));
}

function toList(set$) {
  return FSharpSet__ToList(set$);
}

function toArray(set$) {
  return FSharpSet__ToArray(set$);
}

function toSeq(set$) {
  return (0, _Seq.map)(function (x) {
    return x;
  }, set$);
}

function ofSeq(elements, comparer) {
  return FSharpSet_$ctor(comparer, SetTreeModule_ofSeq(comparer, elements));
}

function difference(set1, set2) {
  return FSharpSet_op_Subtraction(set1, set2);
}

function isSubset(set1, set2) {
  return SetTreeModule_subset(FSharpSet__get_Comparer(set1), FSharpSet__get_Tree(set1), FSharpSet__get_Tree(set2));
}

function isSuperset(set1, set2) {
  return SetTreeModule_subset(FSharpSet__get_Comparer(set1), FSharpSet__get_Tree(set2), FSharpSet__get_Tree(set1));
}

function isProperSubset(set1, set2) {
  return SetTreeModule_properSubset(FSharpSet__get_Comparer(set1), FSharpSet__get_Tree(set1), FSharpSet__get_Tree(set2));
}

function isProperSuperset(set1, set2) {
  return SetTreeModule_properSubset(FSharpSet__get_Comparer(set1), FSharpSet__get_Tree(set2), FSharpSet__get_Tree(set1));
}

function minElement(set$) {
  return FSharpSet__get_MinimumElement(set$);
}

function maxElement(set$) {
  return FSharpSet__get_MaximumElement(set$);
}

function createMutable(source, comparer) {
  return (0, _MutableSet.HashSet_$ctor_Z6150332D)(source, comparer);
}

function distinct(xs, comparer) {
  return (0, _Seq.delay)(function () {
    var set$ = (0, _MutableSet.HashSet_$ctor_Z6150332D)((0, _Seq.empty)(), comparer);
    return (0, _Seq.collect)(function (x) {
      return (0, _MutableSet.HashSet__Add_2B595)(set$, x) ? (0, _Seq.singleton)(x) : (0, _Seq.empty)();
    }, xs);
  });
}

function distinctBy(projection, xs, comparer) {
  return (0, _Seq.delay)(function () {
    var set$ = (0, _MutableSet.HashSet_$ctor_Z6150332D)((0, _Seq.empty)(), comparer);
    return (0, _Seq.collect)(function (x) {
      return (0, _MutableSet.HashSet__Add_2B595)(set$, projection(x)) ? (0, _Seq.singleton)(x) : (0, _Seq.empty)();
    }, xs);
  });
}

function unionWith(s1, s2) {
  return (0, _Seq.fold)(function (acc, x) {
    return acc.add(x);
  }, s1, s2);
}

function intersectWith(s1, s2, comparer) {
  var s2_1 = ofSeq(s2, comparer);
  var enumerator = (0, _Seq.getEnumerator)(s1.keys());

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var x = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]();

      if (!FSharpSet__Contains(s2_1, x)) {
        var value = s1.delete(x);
        void value;
      }
    }
  } finally {
    enumerator.Dispose();
  }
}

function exceptWith(s1, s2) {
  var enumerator = (0, _Seq.getEnumerator)(s2);

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var value = s1.delete(enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]());
      void value;
    }
  } finally {
    enumerator.Dispose();
  }
}

function isSubsetOf(s1, s2, comparer) {
  return isSubset(ofSeq(s1.values(), comparer), ofSeq(s2, comparer));
}

function isSupersetOf(s1, s2, comparer) {
  return isSuperset(ofSeq(s1.values(), comparer), ofSeq(s2, comparer));
}

function isProperSubsetOf(s1, s2, comparer) {
  return isProperSubset(ofSeq(s1.values(), comparer), ofSeq(s2, comparer));
}

function isProperSupersetOf(s1, s2, comparer) {
  return isProperSuperset(ofSeq(s1.values(), comparer), ofSeq(s2, comparer));
}
},{"./Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","./Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","./Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","./String.js":"../JS/.fable/fable-library.3.0.0/String.js","./Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./MutableSet.js":"../JS/.fable/fable-library.3.0.0/MutableSet.js"}],"../JS/webgl_core/shader_utils.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.WebglShaderUtils_ShaderSources$reflection = WebglShaderUtils_ShaderSources$reflection;
exports.WebglShaderUtils_ShaderSources_$ctor = WebglShaderUtils_ShaderSources_$ctor;
exports.WebglShaderUtils_ShaderSources__get_VertexSources = WebglShaderUtils_ShaderSources__get_VertexSources;
exports.WebglShaderUtils_ShaderSources__get_FragmentSources = WebglShaderUtils_ShaderSources__get_FragmentSources;
exports.WebglShaderUtils_ShaderSources__get_VertexSource_Z721C83C5 = WebglShaderUtils_ShaderSources__get_VertexSource_Z721C83C5;
exports.WebglShaderUtils_ShaderSources__get_FragmentSource_Z721C83C5 = WebglShaderUtils_ShaderSources__get_FragmentSource_Z721C83C5;
exports.WebglShaderUtils_ShaderSources__AddVertexSource_Z384F8060 = WebglShaderUtils_ShaderSources__AddVertexSource_Z384F8060;
exports.WebglShaderUtils_ShaderSources__AddFragmentSource_Z384F8060 = WebglShaderUtils_ShaderSources__AddFragmentSource_Z384F8060;
exports.WebglShaderUtils_addShaderInclude = WebglShaderUtils_addShaderInclude;
exports.WebglShaderUtils_removeShaderInclude = WebglShaderUtils_removeShaderInclude;
exports.WebglShaderUtils_getShaderInclude = WebglShaderUtils_getShaderInclude;
exports.WebglShaderUtils_addVertexShaderSource = WebglShaderUtils_addVertexShaderSource;
exports.WebglShaderUtils_addFragmentShaderSource = WebglShaderUtils_addFragmentShaderSource;
exports.WebglShaderUtils_getVertexShaderSource = WebglShaderUtils_getVertexShaderSource;
exports.WebglShaderUtils_getFragmentShaderSource = WebglShaderUtils_getFragmentShaderSource;
exports.WebglShaderUtils_createShader = WebglShaderUtils_createShader;
exports.WebglShaderUtils_ShaderSources = void 0;

var _Map = require("../.fable/fable-library.3.0.0/Map.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _Set = require("../.fable/fable-library.3.0.0/Set.js");

var _RegExp = require("../.fable/fable-library.3.0.0/RegExp.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var WebglShaderUtils_ShaderSources = function WebglShaderUtils_ShaderSources() {
  _classCallCheck(this, WebglShaderUtils_ShaderSources);

  this.vertexSources = (0, _Map.ofSeq)([], {
    Compare: _Util.comparePrimitives
  });
  this.fragmentSources = (0, _Map.ofSeq)([], {
    Compare: _Util.comparePrimitives
  });
};

exports.WebglShaderUtils_ShaderSources = WebglShaderUtils_ShaderSources;

function WebglShaderUtils_ShaderSources$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.Core.WebglShaderUtils.ShaderSources", void 0, WebglShaderUtils_ShaderSources);
}

function WebglShaderUtils_ShaderSources_$ctor() {
  return new WebglShaderUtils_ShaderSources();
}

function WebglShaderUtils_ShaderSources__get_VertexSources(_) {
  return _.vertexSources;
}

function WebglShaderUtils_ShaderSources__get_FragmentSources(_) {
  return _.fragmentSources;
}

function WebglShaderUtils_ShaderSources__get_VertexSource_Z721C83C5(_, name) {
  var matchValue = (0, _Map.tryFind)(name, _.vertexSources);

  if (matchValue == null) {
    throw new Error((0, _String.toText)((0, _String.interpolate)("Vertex source '%P()' has not been registered", [name])));
  } else {
    var source = matchValue;
    return source;
  }
}

function WebglShaderUtils_ShaderSources__get_FragmentSource_Z721C83C5(_, name) {
  var matchValue = (0, _Map.tryFind)(name, _.fragmentSources);

  if (matchValue == null) {
    throw new Error((0, _String.toText)((0, _String.interpolate)("Fragment source '%P()' has not been registered", [name])));
  } else {
    var source = matchValue;
    return source;
  }
}

function WebglShaderUtils_ShaderSources__AddVertexSource_Z384F8060(_, name, source) {
  _.vertexSources = (0, _Map.FSharpMap__Add)(_.vertexSources, name, source);
}

function WebglShaderUtils_ShaderSources__AddFragmentSource_Z384F8060(_, name, source) {
  _.fragmentSources = (0, _Map.FSharpMap__Add)(_.fragmentSources, name, source);
}

var WebglShaderUtils_shaderIncludes = (0, _Map.empty)();

function WebglShaderUtils_addShaderInclude(name, text) {
  WebglShaderUtils_shaderIncludes = (0, _Map.FSharpMap__Add)(WebglShaderUtils_shaderIncludes, name, text);
}

function WebglShaderUtils_removeShaderInclude(name) {
  WebglShaderUtils_shaderIncludes = (0, _Map.FSharpMap__Remove)(WebglShaderUtils_shaderIncludes, name);
}

function WebglShaderUtils_getShaderInclude(name) {
  var matchValue = (0, _Map.tryFind)(name, WebglShaderUtils_shaderIncludes);

  if (matchValue == null) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Shader include '%P()' not found", [name]));
    throw new Error(msg);
  } else {
    var text = matchValue;
    return text;
  }
}

function WebglShaderUtils_processIncludes(text) {
  var replaced = (0, _Set.ofSeq)([], {
    Compare: _Util.comparePrimitives
  });

  var loop = function loop(text_1) {
    var replaceInclude = function replaceInclude(m) {
      var name = m[1] || "";

      if ((0, _Set.FSharpSet__Contains)(replaced, name)) {
        return "";
      } else {
        replaced = (0, _Set.FSharpSet__Add)(replaced, name);
        var newText;
        var t = WebglShaderUtils_getShaderInclude(name);
        newText = (0, _RegExp.match)(t, "\r?\n$") != null ? t : t + "\n";
        return loop(newText);
      }
    };

    return (0, _RegExp.replace)(text_1, "^#include\\s+(.+)(?:\r?\n)", replaceInclude, 2);
  };

  var replaceMultipleBlankLines = function replaceMultipleBlankLines(text_2) {
    return (0, _RegExp.replace)(text_2, "^(\\s*\r?\n){2,}", "\r\n", 2);
  };

  return loop(text);
}

var WebglShaderUtils_shaderSources = WebglShaderUtils_ShaderSources_$ctor();

function WebglShaderUtils_addVertexShaderSource(name, source) {
  WebglShaderUtils_ShaderSources__AddVertexSource_Z384F8060(WebglShaderUtils_shaderSources, name, source);
}

function WebglShaderUtils_addFragmentShaderSource(name, source) {
  WebglShaderUtils_ShaderSources__AddFragmentSource_Z384F8060(WebglShaderUtils_shaderSources, name, source);
}

function WebglShaderUtils_getVertexShaderSource(name) {
  var res = WebglShaderUtils_processIncludes(WebglShaderUtils_ShaderSources__get_VertexSource_Z721C83C5(WebglShaderUtils_shaderSources, name));
  return res;
}

function WebglShaderUtils_getFragmentShaderSource(name) {
  var res = WebglShaderUtils_processIncludes(WebglShaderUtils_ShaderSources__get_FragmentSource_Z721C83C5(WebglShaderUtils_shaderSources, name));
  return res;
}

function WebglShaderUtils_createShader(gl, typ, source) {
  var shader = gl.createShader(typ);
  gl.shaderSource(shader, source);
  gl.compileShader(shader);
  var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);

  if (success) {
    return shader;
  } else {
    var msg;
    var arg10 = gl.getShaderInfoLog(shader);
    msg = (0, _String.toText)((0, _String.printf)("%s"))(arg10);
    gl.deleteShader(shader);
    var exn = new Error(msg);
    throw exn;
  }
}

function DefaultValues_addInclude(key, source) {
  WebglShaderUtils_addShaderInclude(key, source);
}

function DefaultValues_addVertex(key, source) {
  WebglShaderUtils_addVertexShaderSource(key, source);
}

function DefaultValues_addFragment(key, source) {
  WebglShaderUtils_addFragmentShaderSource(key, source);
}

(0, _List.iterate)(function (tupledArg) {
  DefaultValues_addInclude(tupledArg[0], tupledArg[1]);
}, (0, _List.ofArray)([["precision", "\r\nprecision mediump float;"], ["out-color-fragment", "\r\nout vec4 glFragColor;"], ["init-color", "\r\n  vec4 color = v_fillColor;"], ["set-out-color", "\r\n  glFragColor = color;"], ["transparent-color", "\r\nvec4 transparent = vec4(0.0);"], ["path-params", "\r\nuniform pathParams {\r\n  vec4 strokeColor;\r\n  vec4 fillColor;\r\n  float lineWidth;\r\n};"], ["path-outvars", "\r\nflat out float v_scale;\r\nflat out float v_aliasWidth;\r\nout vec4 v_fillColor;\r\nout vec4 v_strokeColor;\r\nflat out float v_strokeWidth;"], ["path-invars", "\r\nflat in float v_scale;\r\nflat in float v_aliasWidth;\r\nin vec4 v_fillColor;\r\nin vec4 v_strokeColor;\r\nflat in float v_strokeWidth;"], ["global-ubo", "\r\nuniform global {\r\n  vec2 resolution;\r\n  vec2 mouse;\r\n  float time;\r\n  float worldScale;\r\n};"], ["camera-ubo", "\r\nuniform camera {\r\n  vec4 viewport;\r\n  mat4 projMat;\r\n  mat4 viewMat;\r\n  float zoom;\r\n};"], ["model-params", "\r\nuniform model {\r\n  mat4 modelMat;\r\n};\r\n// uniform mat4 modelMat;"], ["coordinate-conversion-vertex", "\r\n#include global-ubo\r\n#include camera-ubo\r\n#include model-params\r\n\r\nvec4 toVec4(vec2 p) { return vec4(p, 0.0, 1.0); }\r\nvec4 toVec4(vec3 p) { return vec4(p, 1.0); }\r\nvec4 modelToClip(vec2 p) { return projMat * viewMat * modelMat * toVec4(p); }\r\nvec4 modelToClip(vec3 p) { return projMat * viewMat * modelMat * vec4(p, 1.0); }\r\nvec4 modelToClip(vec4 p) { return projMat * viewMat * modelMat * p; }\r\nvec4 worldToClip(vec4 p) { return projMat * viewMat * p; }\r\nvec3 clipToNDC(vec4 p) { return p.xyz / p.w; }\r\nvec3 modelToNDC(vec2 p) { return clipToNDC(modelToClip(p)); }\r\nvec3 modelToNDC(vec3 p) { return clipToNDC(modelToClip(p)); }\r\nvec3 modelToNDC(vec4 p) { return clipToNDC(modelToClip(p)); }\r\nvec4 modelToWorld(vec2 p) { return modelMat * toVec4(p); }\r\nvec4 modelToWorld(vec3 p) { return modelMat * toVec4(p); }\r\nvec4 modelToWorld(vec4 p) { return modelMat * p; }\r\nvec4 modelToEye(vec2 p) { return viewMat * modelMat * toVec4(p); }\r\nvec4 modelToEye(vec3 p) { return viewMat * modelMat * toVec4(p); }\r\nvec4 modelToEye(vec4 p) { return viewMat * modelMat * p; }\r\n\r\nvec2 ndcToScreen(vec3 p) {\r\n  // float y = resolution.x - viewport.y;\r\n  // return (p.xy * 0.5 + 0.5) * viewport.zw + vec2(viewport.x, y);\r\n  return (p.xy * 0.5 + 0.5) * viewport.zw + viewport.xy;\r\n}\r\n\r\nvec2 modelToScreen(vec2 p) { return ndcToScreen(modelToNDC(p)); }\r\nvec2 modelToScreen(vec3 p) { return ndcToScreen(modelToNDC(p)); }\r\nvec2 modelToScreen(vec4 p) { return ndcToScreen(modelToNDC(p)); }\r\nvec2 clipToScreen(vec4 p) { return ndcToScreen(clipToNDC(p)); }\r\nvec2 worldToScreen(vec4 p) { return clipToScreen(worldToClip(p)); }\r\n  "], ["mixes", "\r\nint mix(int a, int b, float t) { return int(mix(float(a), float(b), t)); }\r\nbool mix(bool a, bool b, float t) { return bool(mix(float(a), float(b), t)); }"], ["comparisons", "\r\n// step(edge, value)\r\n//   if value < edge then 0 else 1\r\n//   if value >= edge then 1 else 0\r\n//\r\n//   if edge > value then 0 else 1\r\n//   if edge <= value then 1 else 0\r\n//\r\nfloat isGreater(float value, float base) { return 1.0 - step(value, base); }\r\nfloat isGreater(int value, int base) { return 1.0 - step(float(value), float(base)); }\r\n\r\nfloat isGreaterOrEqual(float value, float base) { return step(base, value); }\r\nfloat isGreaterOrEqual(int value, int base) { return step(float(base), float(value)); }\r\n\r\nfloat isLess(float value, float base) { return 1.0 - step(base, value); }\r\nfloat isLess(int value, int base) { return 1.0 - step(float(base), float(value)); }\r\n\r\nfloat isLessOrEqual(float value, float base) { return step(value, base); }\r\nfloat isLessOrEqual(int value, int base) { return step(float(value), float(base)); }\r\n\r\nfloat isEqual(float value, float base) { return step(base, value) * step(value, base); }\r\nfloat isEqual(int value, int base) { return step(float(base), float(value)) * step(float(value), float(base)); }"], ["conditionals", "\r\nbool boolIif[2];\r\nint intIif[2];\r\nfloat floatIif[2];\r\nvec2 vec2Iif[2];\r\nvec3 vec3Iif[2];\r\nvec4 vec4Iif[2];\r\n\r\nbool iif(bool condition, bool thenValue, bool elseValue) {\r\n  boolIif[0] = elseValue;\r\n  boolIif[1] = thenValue;\r\n  return boolIif[int(condition)];\r\n}\r\n\r\nint iif(bool condition, int thenValue, int elseValue) {\r\n intIif[0] = elseValue;\r\n  intIif[1] = thenValue;\r\n  return intIif[int(condition)];\r\n}\r\n\r\nfloat iif(bool condition, float thenValue, float elseValue) {\r\n  floatIif[0] = elseValue;\r\n  floatIif[1] = thenValue;\r\n  return floatIif[int(condition)];\r\n}\r\n\r\nvec2 iif(bool condition, vec2 thenValue, vec2 elseValue) {\r\n  vec2Iif[0] = elseValue;\r\n  vec2Iif[1] = thenValue;\r\n  return vec2Iif[int(condition)];\r\n}\r\n\r\nvec3 iif(bool condition, vec3 thenValue, vec3 elseValue) {\r\n  vec3Iif[0] = elseValue;\r\n  vec3Iif[1] = thenValue;\r\n  return vec3Iif[int(condition)];\r\n}\r\n\r\nvec4 iif(bool condition, vec4 thenValue, vec4 elseValue) {\r\n  vec4Iif[0] = elseValue;\r\n  vec4Iif[1] = thenValue;\r\n  return vec4Iif[int(condition)];\r\n}\r\n\r\nbool iif(float condition, bool thenValue, bool elseValue) {\r\n  boolIif[0] = elseValue;\r\n  boolIif[1] = thenValue;\r\n  return boolIif[int(clamp(condition, 0.0, 1.0))];\r\n}\r\n\r\nint iif(float condition, int thenValue, int elseValue) {\r\n  intIif[0] = elseValue;\r\n  intIif[1] = thenValue;\r\n  return intIif[int(clamp(condition, 0.0, 1.0))];\r\n}\r\n\r\nfloat iif(float condition, float thenValue, float elseValue) {\r\n  floatIif[0] = elseValue;\r\n  floatIif[1] = thenValue;\r\n  return floatIif[int(clamp(condition, 0.0, 1.0))];\r\n}\r\n\r\nvec2 iif(float condition, vec2 thenValue, vec2 elseValue) {\r\n  vec2Iif[0] = elseValue;\r\n  vec2Iif[1] = thenValue;\r\n  return vec2Iif[int(clamp(condition, 0.0, 1.0))];\r\n}\r\n\r\nvec3 iif(float condition, vec3 thenValue, vec3 elseValue) {\r\n  vec3Iif[0] = elseValue;\r\n  vec3Iif[1] = thenValue;\r\n  return vec3Iif[int(clamp(condition, 0.0, 1.0))];\r\n}\r\n\r\nvec4 iif(float condition, vec4 thenValue, vec4 elseValue) {\r\n  vec4Iif[0] = elseValue;\r\n  vec4Iif[1] = thenValue;\r\n  return vec4Iif[int(clamp(condition, 0.0, 1.0))];\r\n}"], ["math-consts", "\r\n// #define PI = 3.14156265358979323846\r\n// #define TWO_PI = 6.28318530718\r\nconst float PI = 3.14156265358979323846;\r\nconst float TWO_PI = 6.28318530718;\r\n  "], ["path-consts", "\r\nconst int FILL_STROKE = 1;\r\nconst int FILL_FILL = 2;\r\nconst int FILL_BORDER = 3;\r\n  "], ["quad-params", "\r\nuniform quadParams {\r\n  vec2 size;\r\n  vec4 strokeColor;\r\n  vec4 fillColor;\r\n  int fillType;\r\n  float lineWidth;\r\n  float aliasWidth;\r\n  float angle;\r\n  int instanceCount;\r\n};"], ["quad-points-strip", "\r\nvec2 quadPointsStrip[] = vec2[] (\r\n  vec2(-0.5,  0.5),\r\n  vec2(-0.5, -0.5),\r\n  vec2( 0.5,  0.5),\r\n  vec2( 0.5, -0.5)\r\n);"], ["quad-points-strip-right", "\r\nvec2 quadPointsStripRight[] = vec2[] (\r\n  vec2(0.0,  0.5),\r\n  vec2(0.0, -0.5),\r\n  vec2(1.0,  0.5),\r\n  vec2(1.0, -0.5)\r\n);"], ["quad-common", "\r\nstruct QuadParams {\r\n  vec2 screenSize;\r\n  vec2 size;\r\n  vec2 halfSize;\r\n  vec2 centerScreen;\r\n  vec2 center;\r\n  vec2 bottomLeft;\r\n  vec2 topRight;\r\n  vec2 rotation;\r\n  vec4 strokeColor;\r\n  vec4 fillColor;\r\n  int fillType;\r\n  float pixelScale;\r\n  float strokeWidth;\r\n  float aliasWidth;\r\n  int instance;\r\n  int instanceCount;\r\n};"], ["quad-outvars", "\r\n#include quad-common\r\nflat out QuadParams v_params;"], ["quad-invars", "\r\n#include quad-common\r\nflat in QuadParams v_params;"], ["calc-quad-vertexid", "\r\n  int vertexIndex = gl_VertexID % 4;"], ["calc-scaled-quad-points", "\r\n  vec2 rotation = vec2(cos(angle), sin(angle));\r\n\r\n  vec2 pointsT[] = vec2[] (\r\n    rotate(points[0] * size, rotation),\r\n    rotate(points[1] * size, rotation),\r\n    rotate(points[2] * size, rotation),\r\n    rotate(points[3] * size, rotation)\r\n  );"], ["calc-quad-dim", "\r\n  vec2 topLeft = pointsT[0];\r\n  vec2 bottomLeft = pointsT[1];\r\n  vec2 topRight = pointsT[2];\r\n  vec2 topLeftS = modelToScreen(topLeft);\r\n  vec2 bottomLeftS = modelToScreen(bottomLeft);\r\n  vec2 topRightS = modelToScreen(topRight);"], ["calc-quad-center", "\r\n  vec2 center = (bottomLeftS + topRightS) * 0.5;"], ["calc-quad-rotation", "\r\n  vec2 ab = topRightS - topLeftS;\r\n  float currentAngle = -atan(ab.y, ab.x);\r\n  rotation = vec2(cos(currentAngle), sin(currentAngle));"], ["calc-quad-vertex", "\r\n  float aliasOffsetX = mix(-aliasWidth, aliasWidth, float(vertexIndex > 1));\r\n  float aliasOffsetY = mix(-aliasWidth, aliasWidth, step(float(vertexIndex % 2), 0.0));\r\n  vec2 lr = normalize(topRight - topLeft) * aliasOffsetX;\r\n  vec2 bt = normalize(topLeft - bottomLeft) * aliasOffsetY;\r\n  vec2 vertex = pointsT[vertexIndex] + lr + bt; "], ["set-quad-position", "\r\n  gl_Position = modelToClip(vertex);"], ["set-quad-params", "\r\n  vec2 size = vec2(length(topRightS - topLeftS), length(topLeftS - bottomLeftS));\r\n  float quadSize = max(size.x, size.y);\r\n  float screenSize = max(resolution.x, resolution.y);\r\n  float pixelScale = screenSize / quadSize / screenSize;\r\n\r\n  v_params.size = size;\r\n  v_params.screenSize = resolution;\r\n  v_params.halfSize = size * 0.5;\r\n  v_params.centerScreen = center;\r\n  v_params.rotation = rotation;\r\n  v_params.strokeColor = strokeColor;\r\n  v_params.fillColor = fillColor;\r\n  v_params.fillType = fillType;\r\n  v_params.pixelScale = pixelScale;\r\n  v_params.strokeWidth = lineWidth * worldScale * zoom;\r\n  v_params.aliasWidth = aliasWidth * worldScale;\r\n  v_params.instance = gl_InstanceID;\r\n  v_params.instanceCount = instanceCount;"], ["vec2", "\r\nfloat dot(vec2 v) { return dot(v, v); }\r\nvec2 perp(vec2 v) { return vec2(-v.y, v.x); }\r\nvec2 perpRight(vec2 v) { return vec2(v.y, -v.x); }\r\nfloat cross(vec2 v1, vec2 v2) { return v1.x * v2.y - v1.y * v2.x; }\r\nbool isLeftOf(vec2 v1, vec2 v2) { return cross(v1, v2) < 0.0; }\r\nbool isRightOf(vec2 v1, vec2 v2) { return cross(v1, v2) > 0.0; }\r\nvec2 faceToward(vec2 v1, vec2 v2) { return v1 * sign(dot(v1, v2)); }\r\n\r\nvec2 perpToward(vec2 v, vec2 toward) {\r\n  float sgn = sign(cross(toward, v));\r\n  return vec2(sgn * v.y, -sgn * v.x);\r\n}\r\n\r\nvec2 rotate(vec2 v, vec2 rotation) {\r\n  return vec2(rotation.x * v.x - rotation.y * v.y, rotation.y * v.x + rotation.x * v.y);\r\n}"], ["line-utils", "\r\n#include vec2\r\n\r\nvec2 closestLinePoint(vec2 p, vec2 normal, vec2 linePoint) {\r\n  float d = dot(normal, linePoint);  // Distance to origin.\r\n  float t = d - dot(normal, p);\r\n  return p + normal * t;\r\n}\r\n\r\nfloat distToLine(vec2 p, vec2 normal, vec2 linePoint) {\r\n  float d = dot(normal, linePoint);\r\n  return dot(normal, p) - d;\r\n}\r\n\r\nvec2 closestSegmentPoint(vec2 p, vec2 a, vec2 b) {\r\n  vec2 ab = b - a;\r\n  float t = dot(p - a, ab) / dot(ab, ab);\r\n  t = clamp(t, 0.0, 1.0);\r\n  return a + t * ab;\r\n}\r\n\r\nfloat closestSegmentTimePoint(vec2 p, vec2 a, vec2 b) {\r\n  vec2 ab = b - a;\r\n  float t = dot(p - a, ab) / dot(ab, ab);\r\n  return clamp(t, 0.0, 1.0);\r\n}\r\n\r\nfloat signedDistToSegment(vec2 p, vec2 a, vec2 b, out float t) {\r\n  vec2 ab = b - a;\r\n  vec2 ap = p - a;\r\n  vec2 normal = perp(ab);\r\n  t = dot(ap, ab) / dot(ab, ab);\r\n\r\n  if (t <= 0.0) {\r\n    t = 0.0;\r\n    return length(ap);\r\n  }\r\n\r\n  if (t >= 1.0) {\r\n    t = 1.0;\r\n    return length(p - b);\r\n  }\r\n\r\n  return dot(ap, normal) / dot(ab, ab);\r\n}\r\n\r\nfloat signedDistToSegment(vec2 p, vec2 a, vec2 b) {\r\n  float t;\r\n  return signedDistToSegment(p, a, b, t);\r\n}\r\n\r\nfloat sqrDistToSegment(vec2 p, vec2 a, vec2 b) {\r\n  vec2 ab = b - a;\r\n  vec2 ap = p - a;\r\n\r\n  float e = dot(ap, ab);\r\n  if (e <= 0.0) return dot(ap, ap);\r\n  float f = dot(ab, ab);\r\n  \r\n  if (e >= f) {\r\n    vec2 bp = p - b;\r\n    return dot(bp, bp);\r\n  }\r\n\r\n  return dot(ap, ap) - e * e / f;\r\n}\r\n\r\nfloat distToSegment(vec2 p, vec2 a, vec2 b) { return sqrt(sqrDistToSegment(p, a, b)); }\r\n\r\nvec2 rayLineIntersection(vec2 rayStart, vec2 rayDir, vec2 normal, vec2 linePoint) {\r\n  float d = dot(normal, linePoint);   // Distance to origin.\r\n  float t = (d - dot(normal, rayStart)) / dot(normal, rayDir);\r\n  return rayStart + rayDir * t;\r\n}\r\n\r\nvec2 LineLineIntersection(vec2 point1, vec2 dir1, vec2 point2, vec2 dir2) {\r\n  float t = cross(dir2, (point2 - point1)) / cross(dir2, dir1);\r\n  return point1 + dir1 * t;\r\n}"], ["sdf-consts", "\r\nconst int SDF_CUSTOM = 0;\r\nconst int SDF_LINE = 1;\r\nconst int SDF_CIRCLE = 2;\r\nconst int SDF_SQUARE = 3;\r\n  "], ["sdf-outvars", "\r\n#include quad-common\r\nflat out QuadParams v_sdfParams;"], ["sdf-invars", "\r\n#include quad-common\r\nflat in QuadParams v_sdfParams;"], ["sdf-line-outvars", "\r\n#include sdf-line-common\r\nflat out SdfLineParams v_sdfLineParams;\r\nflat out SdfLineParams v_sdfPriorLineParams;\r\nflat out SdfLineParams v_sdfNextLineParams;"], ["sdf-line-invars", "\r\n#include sdf-line-common\r\nflat in SdfLineParams v_sdfLineParams;\r\nflat in SdfLineParams v_sdfPriorLineParams;\r\nflat in SdfLineParams v_sdfNextLineParams;"], ["sdf-utils", "\r\n#include path-consts\r\n#include transparent-color\r\n#include quad-common\r\nvec2 sdfToLocalOrient(vec2 p, vec2 center, vec2 rotation) {\r\n  p = p - center;\r\n  return vec2(rotation.x * p.x - rotation.y * p.y, rotation.y * p.x + rotation.x * p.y);\r\n}\r\n\r\nvec2 sdfToLocalOrient(vec2 p, QuadParams sp) {\r\n  return sdfToLocalOrient(p, sp.center, sp.rotation);\r\n}\r\n\r\nQuadParams sdfToLocal1(QuadParams params) {\r\n  QuadParams sp = params;\r\n  float size = max(sp.size.x, sp.size.y);\r\n\r\n  // WTF: Same calculation as vertex shader but doesn't work!!!\r\n  // float quadSize = size;\r\n  // float screenSize = max(sp.screenSize.x, sp.screenSize.y);\r\n  // float strokeScale = screenSize / quadSize;\r\n  // sp.strokeWidth = sp.strokeWidth / screenSize * strokeScale;\r\n\r\n  sp.strokeWidth = sp.strokeWidth * sp.pixelScale;\r\n  sp.center = vec2(0.0);\r\n  sp.bottomLeft = vec2(-0.5);\r\n  sp.topRight = vec2(0.5);\r\n  return sp;\r\n}\r\n\r\nvec2 sdfPointToLocal1(vec2 p, QuadParams sp) {\r\n  vec2 rotation = sp.rotation;\r\n  p = p - sp.centerScreen;\r\n  p = vec2(rotation.x * p.x - rotation.y * p.y, rotation.y * p.x + rotation.x * p.y);\r\n  p /= sp.size;\r\n  return p;\r\n}\r\n\r\nfloat sdfUnion(float distance1, float distance2) { return min(distance1, distance2); }\r\nfloat sdfUnion(float d1, float d2, float d3) { return min(min(d1, d2), d3); }\r\nfloat sdfUnion(float d1, float d2, float d3, float d4) { return min(min(min(d1, d2), d3), d4); }\r\nfloat sdfDiff(float distance1, float distance2) { return max(distance1, -distance2); }\r\nfloat sdfDiff(float d1, float d2, float d3) { return max(max(d1, -d2), -d3); }\r\nfloat sdfDiff(float d1, float d2, float d3, float d4) { return max(max(max(d1, -d2), -d3), -d4); }\r\nfloat sdfIntersect(float distance1, float distance2) { return max(distance1, distance2); }\r\nfloat sdfIntersect(float d1, float d2, float d3) { return max(max(d1, d2), d3); }\r\nfloat sdfIntersect(float d1, float d2, float d3, float d4) { return max(max(max(d1, d2), d3), d4); }\r\n\r\nvec4 sdfStroke(float distance, vec4 strokeColor, float strokeWidth, float aliasWidth) {\r\n  float edgeDist = 0.0;\r\n  float strokeDist = edgeDist - strokeWidth;\r\n  float innerEdgeDist = strokeDist - aliasWidth;\r\n  float pct = smoothstep(edgeDist, aliasWidth, distance);\r\n  vec4 edgeColor = mix(strokeColor, transparent, pct);\r\n  pct = smoothstep(innerEdgeDist, strokeDist, distance);\r\n  vec4 innerEdgeColor = mix(transparent, strokeColor, pct);\r\n  vec4 color = transparent;\r\n  color = mix(color, innerEdgeColor, float(distance >= innerEdgeDist));\r\n  color = mix(color, strokeColor, float(distance >= strokeDist));\r\n  color = mix(color, edgeColor, float(distance > edgeDist));\r\n  return color;\r\n}\r\n\r\nvec4 sdfFill(float distance, vec4 fillColor, float aliasWidth) {\r\n  float edgeDist = 0.0;\r\n  float pct = smoothstep(edgeDist, aliasWidth, distance);\r\n  vec4 edgeColor = mix(fillColor, transparent, pct);\r\n  edgeColor = mix(fillColor, vec4(0.3, 0.3, 0.3, 0.4), pct);\r\n  vec4 color = fillColor;\r\n  color = mix(color, edgeColor, float(distance >= edgeDist));\r\n  // color = mix(color, transparent, float(distance > edgeDist + aliasWidth));\r\n  color = mix(color, transparent, float(distance > 0.0 && aliasWidth == 0.0));\r\n  return color;\r\n}\r\n\r\nvec4 sdfBorder(float distance, vec4 fillColor, vec4 strokeColor, float strokeWidth, float aliasWidth) {\r\n  float edgeDist = 0.0;\r\n  float strokeDist = edgeDist - strokeWidth;\r\n  float innerEdgeDist = strokeDist - aliasWidth;\r\n  float pct = smoothstep(edgeDist, aliasWidth, distance);\r\n  vec4 edgeColor = mix(strokeColor, transparent, pct);\r\n  pct = smoothstep(innerEdgeDist, strokeDist, distance);\r\n  vec4 innerEdgeColor = mix(fillColor, strokeColor, pct);\r\n  vec4 color = fillColor;\r\n  color = mix(color, innerEdgeColor, float(distance >= innerEdgeDist));\r\n  color = mix(color, strokeColor, float(distance >= strokeDist));\r\n  color = mix(color, edgeColor, float(distance > edgeDist));\r\n  return color;\r\n}\r\n\r\nvec4 sdfDraw(float distance, QuadParams params) {\r\n  switch (params.fillType) {\r\n    case FILL_STROKE: return sdfStroke(distance, params.strokeColor, params.strokeWidth, params.aliasWidth);\r\n    case FILL_FILL: return sdfFill(distance, params.fillColor, params.aliasWidth);\r\n    case FILL_BORDER: return sdfBorder(distance, params.fillColor, params.strokeColor, params.strokeWidth, params.aliasWidth);\r\n    default: return transparent;\r\n  }\r\n}\r\n\r\nfloat sdfRect(vec2 p, vec2 bottomLeft, vec2 topRight) {\r\n  vec2 center = (bottomLeft + topRight) * 0.5;\r\n  vec2 extent = topRight - center;\r\n  float dist = max(abs(p.x - center.x) - extent.x, abs(p.y - center.y) - extent.y);\r\n  return dist;\r\n}\r\n\r\nfloat sdfCircle(vec2 p, vec2 center, float radius) {\r\n  float dist = length(p - center) - radius;\r\n  return dist;\r\n}\r\n\r\nfloat sdfCircle(vec2 p, float centerX, float radius) {\r\n  return sdfCircle(p, vec2(centerX, 0.0), radius);\r\n}\r\n\r\nfloat sdfCircle(vec2 p, float centerX, float centerY, float radius) {\r\n  return sdfCircle(p, vec2(centerX, centerY), radius);\r\n}\r\n  "], ["sdf-line-common", "\r\nstruct SdfLineParams {\r\n  int startCap;\r\n  int endCap;\r\n  vec2 position;\r\n  vec2 rotation;\r\n  vec2 bottomLeft;\r\n  vec2 topRight;\r\n  vec2 startBottomLeft;\r\n  vec2 endTopRight;\r\n  vec2 join1;\r\n  vec2 join2;\r\n  vec2 join3;\r\n  vec2 miterPoint;\r\n  float aliasWidth;\r\n  float hasPrior;\r\n  float hasNext;\r\n};\r\n\r\nfloat sdfRect(vec2 p, vec2 bottomLeft, vec2 topRight, bool include) {\r\n  vec2 center = (bottomLeft + topRight) * 0.5;\r\n  vec2 extent = topRight - center;\r\n  float dist = max(abs(p.x - center.x) - extent.x, abs(p.y - center.y) - extent.y);\r\n  return mix(0.00001, dist, include);\r\n}\r\n\r\nfloat sdfCircle(vec2 p, vec2 center, float radius, bool include) {\r\n  float dist = length(p - center) - radius;\r\n  return mix(0.00001, dist, include);\r\n}\r\n\r\nfloat sdfCircle(vec2 p, float centerX, float radius, bool include) {\r\n  return sdfCircle(p, vec2(centerX, 0.0), radius, include);\r\n}\r\n\r\nfloat sdfCircle(vec2 p, float centerX, float centerY, float radius, bool include) {\r\n  return sdfCircle(p, vec2(centerX, centerY), radius, include);\r\n}\r\n  "], ["sdf-line-utils", "\r\nstruct SdfLineValues {\r\n  int startCap;\r\n  int endCap;\r\n  vec2 position;\r\n  vec2 rotation;\r\n  vec2 startBottomLeft;\r\n  vec2 endTopRight;\r\n  vec2 bottomLeft;\r\n  vec2 topRight;\r\n  vec2 b;\r\n  vec2 d;\r\n  vec2 e;\r\n  vec2 miterPoint;\r\n  float radius;\r\n};\r\n\r\nfloat sdfSegment(vec2 p, SdfLineValues values) {\r\n  return sdfRect(p, values.bottomLeft, values.topRight, true);\r\n}\r\n\r\nfloat sdfSegmentLeftSquare(vec2 p, SdfLineValues values, bool include) {\r\n  return sdfRect(p, values.startBottomLeft, values.topRight, include);\r\n}\r\n\r\nfloat sdfSegmentRightSquare(vec2 p, SdfLineValues values, bool include) {\r\n  return sdfRect(p, values.bottomLeft, values.endTopRight, include);\r\n}\r\n\r\nfloat sdfSegmentLeftRound(vec2 p, SdfLineValues values, bool include) {\r\n  return sdfCircle(p, values.bottomLeft.x, values.radius, include);\r\n}\r\n\r\nfloat sdfSegmentRightRound(vec2 p, SdfLineValues values, bool include) {\r\n  return sdfCircle(p, values.topRight.x, values.radius, include);\r\n}\r\n  "], ["sdf-linepath-fragment", "\r\n#include line-consts\r\n#include vec2\r\n#include sdf-utils\r\n#include sdf-line-utils\r\n\r\nSdfLineValues sdfLinePathValues(SdfLineParams params) {\r\n  SdfLineValues result;\r\n  vec2 pos = params.position;\r\n  vec2 rot = params.rotation;\r\n  result.startCap = params.startCap;\r\n  result.endCap = params.endCap;\r\n  result.position = pos;\r\n  result.rotation = rot;\r\n  result.startBottomLeft = sdfToLocalOrient(params.startBottomLeft, pos, rot);\r\n  result.endTopRight = sdfToLocalOrient(params.endTopRight, pos, rot);\r\n  result.bottomLeft = sdfToLocalOrient(params.bottomLeft, pos, rot);\r\n  result.topRight = sdfToLocalOrient(params.topRight, pos, rot);\r\n  result.b = sdfToLocalOrient(params.join1, pos, rot);\r\n  result.d = sdfToLocalOrient(params.join2, pos, rot);\r\n  result.e = sdfToLocalOrient(params.join3, pos, rot);\r\n  result.miterPoint = sdfToLocalOrient(params.miterPoint, pos, rot);\r\n  result.radius = abs(result.bottomLeft.x - result.startBottomLeft.x);\r\n  return result;\r\n}\r\n\r\nfloat sdfSegmentJoinBevel(vec2 p, SdfLineValues values, bool include) {\r\n  vec2 b = values.b;\r\n  vec2 d = values.d;\r\n  vec2 e = values.e;\r\n\r\n  float s1 = cross(p - b, (d - b));          // Positive if bp is right of bd, negative if left.\r\n  float s2 = cross(p - d, normalize(e - d)); // Normalize to reduce aliasing.\r\n  float s3 = cross(p - e, (b - e));\r\n  float square = sdfSegmentRightSquare(p, values, include);\r\n\r\n  float dist = sdfIntersect(s1, s2, s3, square);\r\n  return mix(0.00001, dist, include);\r\n}\r\n\r\nfloat sdfSegmentJoinMiter(vec2 p, SdfLineValues values, bool include) {\r\n  vec2 b = values.b;\r\n  vec2 d = values.d;\r\n  vec2 e = values.e;\r\n  vec2 m = values.miterPoint;\r\n\r\n  float s1 = cross(p - b, (d - b));\r\n  float s2 = cross(p - d, normalize(m - d)); // Normalize outer edges to reduce aliasing.\r\n  float s3 = cross(p - m, normalize(e - m));\r\n  float s4 = cross(p - e, (b - e));\r\n  float dist = sdfIntersect(s1, s2, s3, s4);\r\n  return mix(0.00001, dist, include);\r\n}\r\n\r\nfloat sdfLinePath(vec2 p, SdfLineValues values) {\r\n  float startCap =\r\n    sdfSegmentLeftSquare(p, values, values.startCap == CAP_SQUARE) +\r\n    sdfSegmentLeftRound(p, values, values.startCap == CAP_ROUND);\r\n\r\n  float endCap =\r\n    sdfSegmentRightRound(p, values, values.endCap == CAP_ROUND) +\r\n    sdfSegmentRightSquare(p, values, values.endCap == CAP_SQUARE) +\r\n    sdfSegmentJoinBevel(p, values, values.endCap == JOIN_BEVEL) +\r\n    sdfSegmentJoinMiter(p, values, values.endCap == JOIN_MITER) +\r\n    sdfSegmentRightRound(p, values, values.endCap == JOIN_ROUND);\r\n  \r\n  startCap = mix(startCap, 10.0, startCap == 0.00002);\r\n  endCap = mix(endCap, 10.0, endCap == 0.00005);\r\n  return sdfUnion(sdfSegment(p, values), startCap, endCap);\r\n}\r\n\r\nvec4 sdfDrawLinePath(SdfLineParams lineParams, SdfLineParams priorParams, SdfLineParams nextParams, vec4 color, float aliasWidth) {\r\n  SdfLineValues values = sdfLinePathValues(lineParams);\r\n  vec2 p = sdfToLocalOrient(gl_FragCoord.xy, values.position, values.rotation);\r\n  float line = sdfLinePath(p, values);\r\n\r\n  values = sdfLinePathValues(priorParams);\r\n  p = sdfToLocalOrient(gl_FragCoord.xy, values.position, values.rotation);\r\n  float prior = sdfLinePath(p, values);\r\n  float priorIntersect = sdfIntersect(line, prior);\r\n  priorIntersect = mix(10.0, priorIntersect, lineParams.hasPrior == 1.0);\r\n\r\n  values = sdfLinePathValues(nextParams);\r\n  p = sdfToLocalOrient(gl_FragCoord.xy, values.position, values.rotation);\r\n  float next = sdfSegment(p, values);\r\n  float intersect = sdfIntersect(line, next);\r\n  intersect = mix(10.0, sdfIntersect(line, next), lineParams.hasNext == 1.0);\r\n  line = mix(line, sdfDiff(line, next), lineParams.hasNext == 1.0);\r\n\r\n  intersect = min(intersect, priorIntersect);\r\n  aliasWidth = mix(aliasWidth, 0.0, intersect <= line);\r\n  return sdfFill(line, color, aliasWidth);\r\n}\r\n  "], ["circle-outvars", "\r\nflat out float v_isCircle;\r\nflat out float v_isSemicircle;\r\nflat out float v_isWedge;\r\nflat out vec2 v_circleCenter;\r\nflat out vec2 v_radiusDirection;\r\nflat out float v_wedgeCrossLimit;"], ["circle-invars", "\r\nflat in float v_isCircle;\r\nflat in float v_isSemicircle;\r\nflat in float v_isWedge;\r\nflat in vec2 v_circleCenter;\r\nflat in vec2 v_radiusDirection;\r\nflat in float v_wedgeCrossLimit;"], ["plots-fragment", "\r\nfloat plotPct(float targetY, float y, float width) {\r\n  return step(abs(targetY - y), width);\r\n}\r\n\r\nfloat smoothPlotPct(float targetY, float y, float width) {\r\n  return smoothstep(targetY - width, targetY, y) - smoothstep(targetY, targetY + width,  y);\r\n}\r\n\r\nfloat innerEdge(in float radius, in float width, in float dist) {\r\n  return step(radius - width, dist);\r\n}\r\n\r\nfloat smoothEdge(in float radius, in float width, in float dist) {\r\n  return smoothstep(radius - width, radius + width, dist);\r\n}\r\n\r\nfloat smoothInnerEdge(in float radius, in float width, in float dist) {\r\n  return smoothstep(radius - width, radius, dist);\r\n}\r\n\r\nfloat smoothOuterEdge(in float radius, in float width, in float dist) {\r\n  return smoothstep(radius, radius + width, dist);\r\n}"], ["circles-fragment", "\r\n#include transparent-color\r\n#include plots-fragment\r\n#include conditionals\r\n#include vec2\r\n#line 328\r\nfloat circleDist(in vec2 center, in float radius, in vec2 p){\r\n  // vec2 cp = p - center;\r\n\t// return dot(cp, cp) * 4.0;\r\n  return distance(p, center);\r\n}\r\n\r\nvec4 semicircle(vec2 center, vec2 radiusDirection, vec4 fillColor, vec2 p) {\r\n  float radius = length(radiusDirection);\r\n  vec2 fragDirection = p - center;\r\n  float dist = length(fragDirection);\r\n  float delta = fwidth(dist);\r\n  float pct = smoothEdge(radius, delta, dist);\r\n  vec4 color = mix(fillColor, transparent, pct);\r\n  vec4 innerColor = iif(dist <= radius, fillColor, transparent);\r\n  float dotDR = dot(fragDirection, radiusDirection);\r\n  return iif(dist < (radius - delta), innerColor, color);\r\n}\r\n\r\nvec4 wedge(vec2 center, vec2 radiusDirection, float wedgeCrossLimit, vec4 fillColor, vec2 p) {\r\n  float radius = length(radiusDirection);\r\n  vec2 fragDirection = p - center;\r\n  float wedgeCross = abs(cross(normalize(fragDirection), normalize(radiusDirection)));\r\n  float dist = length(fragDirection);\r\n  float delta = fwidth(dist);\r\n  float pct = smoothEdge(radius, delta, dist);\r\n  vec4 color = mix(fillColor, transparent, pct);\r\n  vec4 innerColor = iif(dist <= radius, fillColor, transparent);\r\n  bool isInCircle = dist <= radius;\r\n  bool isInSemiCircle = isInCircle && dot(fragDirection, radiusDirection) >= 0.0;\r\n  bool isInWedge = isInSemiCircle && wedgeCross <= wedgeCrossLimit;\r\n  // bool isOnSide = isInWedge && abs(wedgeCross - wedgeCrossLimit) <= 0.01;\r\n  color = iif(isInSemiCircle && isInWedge, color, transparent);\r\n  color = iif(dist < (radius - delta), innerColor, color);\r\n  // TODO: Smooth sides.\r\n  return color;\r\n}\r\n\r\nvec4 circle(vec2 center, float radius, vec4 fillColor, vec2 p) {\r\n  float dist = circleDist(center, radius, p);\r\n  float pct = smoothEdge(radius, fwidth(dist), dist);\r\n  return mix(fillColor, transparent, pct);\r\n}\r\n\r\nvec4 circle(vec2 center, float radius, float strokeWidth, vec4 fillColor, vec4 strokeColor, vec2 p) {\r\n  vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\r\n  float bw = max(strokeWidth, 0.0001);\r\n  float dist = circleDist(center, radius, p);\r\n  float fillPct = innerEdge(radius, bw, dist);\r\n  float bmult = step(radius, dist);\r\n  vec4 fill = mix(fillColor, strokeColor, fillPct);\r\n  return mix(fill, transparent, bmult);\r\n}\r\n\r\nvec4 smoothCircle(vec2 center, float radius, float strokeWidth, vec4 fillColor, vec4 strokeColor, vec2 p) {\r\n  vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\r\n  float bw = max(strokeWidth, 0.0001);\r\n  float iw = bw * 0.01;\r\n  float ow = bw * 0.02;\r\n  float ir = radius - bw + iw;\r\n  float or = radius - ow;\r\n  float dist = circleDist(center, radius, p);\r\n  float fillPct = smoothInnerEdge(ir, iw, dist);\r\n  float bordPct = smoothOuterEdge(or, ow, dist);\r\n  vec4 fill = mix(fillColor, strokeColor, fillPct);\r\n  vec4 bord = mix(strokeColor, transparent, bordPct);\r\n  float bmult = 1.0 - step(bordPct, 0.0);\r\n  return mix(fill, bord, bmult);\r\n}"], ["circle-color-fragment", "\r\n  vec4 circleColor = circle(v_circleCenter, length(v_radiusDirection), v_fillColor, gl_FragCoord.xy);\r\n  color = iif(v_isCircle, circleColor, color);"], ["circle-color-discard-fragment", "\r\n  vec4 circleColor = circle(v_circleCenter, length(v_radiusDirection), v_fillColor, gl_FragCoord.xy);\r\n  if (v_isCircle == 1.0 && circleColor == transparent) discard;\r\n  color = iif(v_isCircle, circleColor, color);"], ["semicircle-color-fragment", "\r\n  vec4 semicircleColor = semicircle(v_circleCenter, v_radiusDirection, v_fillColor, gl_FragCoord.xy);\r\n  color = iif(v_isSemicircle, semicircleColor, color);"], ["semicircle-color-discard-fragment", "\r\n  vec4 semicircleColor = semicircle(v_circleCenter, v_radiusDirection, v_fillColor, gl_FragCoord.xy);\r\n  if (v_isSemicircle == 1.0 && semicircleColor == transparent) discard;\r\n  color = iif(v_isSemicircle, semicircleColor, color);"], ["wedge-color-fragment", "\r\n  vec4 wedgeColor = wedge(v_circleCenter, v_radiusDirection, v_wedgeCrossLimit, v_fillColor, gl_FragCoord.xy);\r\n  color = iif(v_isWedge, wedgeColor, color);"], ["wedge-color-discard-fragment", "\r\n  vec4 wedgeColor = wedge(v_circleCenter, v_radiusDirection, v_wedgeCrossLimit, v_fillColor, gl_FragCoord.xy);\r\n  if (v_isWedge == 1.0 && wedgeColor == transparent) discard;\r\n  color = iif(v_isWedge, wedgeColor, color);"], ["line-consts", "\r\nconst int CAP_BUTT = 0;\r\nconst int CAP_ROUND = 1;\r\nconst int CAP_SQUARE = 2;\r\nconst int JOIN_ROUND = 3;\r\nconst int JOIN_BEVEL = 4;\r\nconst int JOIN_MITER = 5;"], ["lines2d-vertex", "\r\n#include line-consts\r\n#include coordinate-conversion-vertex\r\n#include conditionals\r\n#include vec2\r\n#line 433\r\n\r\nconst int CAP_LINE = 6;\r\n\r\nconst vec2 emptyVertex = vec2(0.0);\r\n\r\nbool capFlags[] = bool[7](false, false, false, false, false, false, false);\r\nvec2 tp[3];\r\n\r\nconst vec2 lineTemplate[] = vec2[18](\r\n  // Start\r\n  vec2(0.5, -0.5),\r\n  vec2(0.0, -0.5),\r\n  vec2(0.5,  0.5),\r\n\r\n  vec2(0.0, -0.5),\r\n  vec2(0.0,  0.5),\r\n  vec2(0.5,  0.5),\r\n\r\n  // Line\r\n  vec2(0.0, -0.5),\r\n  vec2(1.0, -0.5),\r\n  vec2(0.0,  0.5),\r\n\r\n  vec2(1.0, -0.5),\r\n  vec2(1.0,  0.5),\r\n  vec2(0.0,  0.5),\r\n\r\n  // End\r\n  vec2(0.0, -0.5),\r\n  vec2(0.5, -0.5),\r\n  vec2(0.0,  0.5),\r\n\r\n  vec2(0.5, -0.5),\r\n  vec2(0.5,  0.5),\r\n  vec2(0.0,  0.5)\r\n);\r\n\r\nvoid setCapFlag(int cap, bool value) {\r\n  capFlags[CAP_BUTT] = false;\r\n  capFlags[CAP_SQUARE] = false;\r\n  capFlags[CAP_ROUND] = false;\r\n  capFlags[JOIN_ROUND] = false;\r\n  capFlags[JOIN_BEVEL] = false;\r\n  capFlags[JOIN_MITER] = false;\r\n  capFlags[CAP_LINE] = false;\r\n  capFlags[cap] = value;\r\n}\r\n\r\nvec2 addSquareCap(vec2 point, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex) {\r\n  vec2 offset = lineTemplate[vertexIndex];\r\n  vec2 vertex = point + direction * (lineWidth * offset.x) + leftNormal * (lineWidth * offset.y);\r\n  return iif(capFlags[CAP_SQUARE], vertex, emptyVertex);\r\n}\r\n\r\nvec2 addRoundCap(vec2 point, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isSemicircle, inout vec2 center, inout vec2 radiusDir) {\r\n  bool isActive = capFlags[CAP_ROUND];\r\n\r\n  vec2 sCircleEdge = modelToScreen(point + direction * (lineWidth * 0.5));\r\n  isSemicircle = iif(isActive, 1.0, isSemicircle);\r\n  center = iif(isActive, modelToScreen(point), center);\r\n  radiusDir = iif(isActive, sCircleEdge - center, radiusDir);\r\n\r\n  vec2 offset = lineTemplate[vertexIndex];\r\n  vec2 vertex = point + direction * (lineWidth * offset.x) + leftNormal * (lineWidth * offset.y);\r\n  return iif(isActive, vertex, emptyVertex);\r\n}\r\n\r\nvoid joinCommon(vec2 a, vec2 b, vec2 c, vec2 ab, float lineWidth, out vec2 d, out vec2 e, out vec2 bd, out vec2 be) {\r\n  float halfLineWidth = lineWidth * 0.5;\r\n  vec2 cb = b - c;\r\n  vec2 abDirection = normalize(ab);\r\n  vec2 joinDirection = ab + cb;\r\n  vec2 abNormal = perpToward(abDirection, joinDirection);\r\n  vec2 cbNormal = perpToward(normalize(cb), joinDirection);\r\n  vec2 p1 = b + abNormal * halfLineWidth;\r\n  vec2 p2 = b + cbNormal * halfLineWidth;\r\n  vec2 b1 = p1 - b;\r\n  vec2 b2 = p2 - b;\r\n  // Make sure correct winding in case face culling is enabled.\r\n  bool p2IsRight = isRightOf(b2, b1);\r\n  d = iif(p2IsRight, p2, p1);\r\n  e = iif(p2IsRight, p1, p2);\r\n  bd = iif(p2IsRight, b2, b1);\r\n  be = iif(p2IsRight, b1, b2);\r\n}\r\n\r\nvec2 addRoundJoin(vec2 a, vec2 b, vec2 c, vec2 ab, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isWedge, inout vec2 center, inout vec2 radiusDir, inout float wedgeCrossLimit) {\r\n  int vertexID = vertexIndex % 6;\r\n  bool isActive = capFlags[JOIN_ROUND];\r\n\r\n  vec2 d;\r\n  vec2 e;\r\n  vec2 bd;\r\n  vec2 be;\r\n  joinCommon(a, b, c, ab, lineWidth, d, e, bd, be);\r\n  vec2 circleEdge = b + normalize(bd + be) * (lineWidth * 0.5);\r\n\r\n  vec2 sD = modelToScreen(d);\r\n  vec2 sCircleEdge = modelToScreen(circleEdge);\r\n  // WEIRD:  Is this a bug in GLSL? radiusDir is not set correctly!!! (capFlags as float).\r\n  // isWedge = mix(isWedge, 1.0, isActive);\r\n  // center = mix(center, modelToScreen(b), isActive);\r\n  // radiusDir = mix(radiusDir, sCircleEdge - center, isActive);\r\n  // wedgeCrossLimit = mix(wedgeCrossLimit, cross(normalize(sD - center), radiusDir), isActive);\r\n\r\n  isWedge = iif(isActive, 1.0, isWedge);\r\n  center = iif(isActive, modelToScreen(b), center);\r\n  radiusDir = iif(isActive, sCircleEdge - center, radiusDir);\r\n  wedgeCrossLimit = iif(isActive, cross(normalize(sD - center), normalize(radiusDir)), wedgeCrossLimit);\r\n\r\n  vec2 offset = lineTemplate[vertexIndex];\r\n  vec2 vertex = b + ab * (lineWidth * offset.x) + leftNormal * (lineWidth * offset.y);\r\n  return iif(isActive, vertex, emptyVertex);\r\n}\r\n\r\nvec2 addBevel(vec2 a, vec2 b, vec2 c, vec2 ab, float lineWidth, int vertexIndex) {\r\n  int vertexID = vertexIndex % 6;\r\n  int id = vertexID % 3;         // Vertex index for the current triangle.\r\n\r\n  vec2 d;\r\n  vec2 e;\r\n  vec2 bd;\r\n  vec2 be;\r\n  joinCommon(a, b, c, ab, lineWidth, d, e, bd, be);\r\n\r\n  tp[0] = b;\r\n  tp[1] = d;\r\n  tp[2] = e;\r\n  return iif(capFlags[JOIN_BEVEL] && vertexID < 3, tp[id], emptyVertex); // Only using first triangle.\r\n}\r\n\r\nvec2 addMiter(vec2 a, vec2 b, vec2 c, vec2 ab, float lineWidth, float miterLimit, int miterFallback, int vertexIndex) {\r\n  int vertexID = vertexIndex % 6;\r\n  int id = vertexID % 3;         // Vertex index for the current triangle.\r\n  float isFirstTriangle = float(vertexID < 3);\r\n\r\n  vec2 d;\r\n  vec2 e;\r\n  vec2 bd;\r\n  vec2 be;\r\n  joinCommon(a, b, c, ab, lineWidth, d, e, bd, be);\r\n  vec2 miter = normalize(bd + be);\r\n\r\n  // Find the intersection of miter and the segment (2D sdfPlane) going through d.\r\n  vec2 normal = normalize(bd); // Normal to the sdfPlane.\r\n  float nd = dot(normal, d);   // Distance to origin.\r\n  float t = (nd - dot(normal, b)) / dot(normal, miter);\r\n  vec2 miterPoint = b + miter * t;\r\n\r\n  bool useFallback = t > miterLimit;\r\n  capFlags[miterFallback] = capFlags[miterFallback] || (useFallback && capFlags[JOIN_MITER]);\r\n  capFlags[JOIN_MITER] = capFlags[JOIN_MITER] && !useFallback;\r\n\r\n  tp[0] = b;\r\n  tp[1] = iif(isFirstTriangle, d, miterPoint);\r\n  tp[2] = iif(isFirstTriangle, miterPoint, e);\r\n\r\n  // BUG: Another weird case. Does not work correctly. 0.0 should return vec2(0.0) and 1.0 the original.\r\n  // Using mix doesn't work either.\r\n  // return tp[id] * vec2(capFlags[JOIN_MITER]);\r\n\r\n  return iif(capFlags[JOIN_MITER], tp[id], emptyVertex);\r\n}\r\n\r\nvec2 addCap(int cap, vec2 point, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isSemicircle, inout vec2 center, inout vec2 radiusDir) {\r\n  return addSquareCap(point, direction, leftNormal, lineWidth, vertexIndex)\r\n    + addRoundCap(point, direction, leftNormal, lineWidth, vertexIndex, isSemicircle, center, radiusDir);\r\n}\r\n\r\nvec2 addCap(int cap, float miterLimit, int miterFallback, vec2 point, vec2 a, vec2 b, vec2 c, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isSemicircle, inout float isWedge, inout vec2 center, inout vec2 radiusDir, inout float wedgeCrossLimit) {\r\n  return addMiter(a, b, c, direction, lineWidth, miterLimit, miterFallback, vertexIndex)\r\n    + addSquareCap(point, direction, leftNormal, lineWidth, vertexIndex)\r\n    + addRoundCap(point, direction, leftNormal, lineWidth, vertexIndex, isSemicircle, center, radiusDir)\r\n    + addRoundJoin(a, b, c, direction, leftNormal, lineWidth, vertexIndex, isWedge, center, radiusDir, wedgeCrossLimit)\r\n    + addBevel(a, b, c, direction, lineWidth, vertexIndex);\r\n}\r\n\r\nvec2 line2d(vec2 a, vec2 direction, vec2 leftNormal, float lineWidth, int vertexID) {\r\n  vec2 offset = lineTemplate[vertexID + 6];\r\n  return a + direction * offset.x + leftNormal * (lineWidth * offset.y);\r\n}\r\n\r\nvec2 _line2d(vec2 a, vec2 direction, vec2 leftNormal, float lineWidth, int vertexID) {\r\n  vec2 vertex = line2d(a, direction, leftNormal, lineWidth, vertexID);\r\n  return iif(capFlags[CAP_LINE], vertex, emptyVertex);\r\n}\r\n\r\nvec2 line2d(vec2 a, vec2 b, float lineWidth, int cap, int vertexIndex, inout float isSemicircle, inout vec2 center, inout vec2 radiusDir) {\r\n  int section = vertexIndex / 6;\r\n  int vertexID = vertexIndex % 6;\r\n\r\n  vec2 direction = b - a;\r\n  vec2 normalizedDirection = normalize(direction);\r\n  vec2 leftNormal = perp(normalizedDirection);\r\n  setCapFlag(cap, section == 0);\r\n  vec2 startVertex = addCap(cap, a, -normalizedDirection, leftNormal, lineWidth, vertexIndex, isSemicircle, center, radiusDir);\r\n  setCapFlag(CAP_LINE, section == 1);\r\n  vec2 lineVertex = _line2d(a, direction, leftNormal, lineWidth, vertexID);\r\n  setCapFlag(cap, section == 2);\r\n  vec2 endVertex = addCap(cap, b, normalizedDirection, leftNormal, lineWidth, vertexIndex, isSemicircle, center, radiusDir);\r\n  return startVertex + lineVertex + endVertex;\r\n}\r\n\r\nvec3 linepath2d(vec2 a, vec2 b, vec2 c, float lineWidth, int lineCap, int lineJoin, float miterLimit, int miterFallback, int instance, int instanceCount, int vertexIndex, inout float isSemicircle, inout float isWedge, inout vec2 center, inout vec2 radiusDir, inout float wedgeCrossLimit) {\r\n  int section = vertexIndex / 6;\r\n  int vertexID = vertexIndex % 6;\r\n\r\n  int startCap = int(mix(float(CAP_BUTT), float(lineCap), float(instance == 0)));\r\n  int endCap = int(mix(float(lineJoin), float(lineCap), float(instance == instanceCount - 1)));\r\n  // endCap = int(mix(float(lineCap), float(lineCap), float(instance == instanceCount - 1)));\r\n\r\n  vec2 direction = b - a;\r\n  vec2 normalizedDirection = normalize(direction);\r\n  vec2 leftNormal = perp(normalizedDirection);\r\n  setCapFlag(startCap, section == 0);\r\n  vec2 startVertex = addCap(startCap, miterLimit, miterFallback, a, a, b, c, -normalizedDirection, leftNormal, lineWidth, vertexIndex, isSemicircle, isWedge, center, radiusDir, wedgeCrossLimit);\r\n  setCapFlag(CAP_LINE, section == 1);\r\n  vec2 lineVertex = _line2d(a, direction, leftNormal, lineWidth, vertexID);\r\n  setCapFlag(endCap, section == 2);\r\n  vec2 endVertex = addCap(endCap, miterLimit, miterFallback, b, a, b, c, normalizedDirection, leftNormal, lineWidth, vertexIndex, isSemicircle, isWedge, center, radiusDir, wedgeCrossLimit);\r\n  vec2 vertex = startVertex + lineVertex + endVertex;\r\n  return vec3(vertex, float(instanceCount - instance) * 0.00001);\r\n}"], ["lines2d2-vertex", "\r\n#include line-consts\r\n#include coordinate-conversion-vertex\r\n#include conditionals\r\n#include vec2\r\n#include line-utils\r\n#line 679\r\n\r\nconst int CAP_LINE = 6;\r\nint section;\r\n\r\nconst vec2 emptyVertex = vec2(0.0);\r\n\r\nbool capFlags[] = bool[7](false, false, false, false, false, false, false);\r\nvec2 tp[4];\r\n\r\nconst vec2 lineTemplate[] = vec2[11](\r\n  // Start\r\n  vec2(0.5, -0.5),\r\n  vec2(0.0, -0.5),\r\n  vec2(0.5,  0.5),\r\n  vec2(0.0,  0.5),\r\n\r\n  // Line\r\n  vec2(0.0,  0.5),\r\n  vec2(0.0, -0.5),\r\n  vec2(1.0,  0.5),\r\n  vec2(1.0, -0.5),\r\n\r\n  // End\r\n  vec2(0.5,  0.5),\r\n  vec2(0.5, -0.5),\r\n  vec2(0.5, -0.5)\r\n);\r\n\r\n// vec2 texCoords[] = vec2[18] (\r\n// );\r\n\r\nvoid setCapFlag(int cap, bool value) {\r\n  capFlags[CAP_BUTT] = false;\r\n  capFlags[CAP_SQUARE] = false;\r\n  capFlags[CAP_ROUND] = false;\r\n  capFlags[JOIN_ROUND] = false;\r\n  capFlags[JOIN_BEVEL] = false;\r\n  capFlags[JOIN_MITER] = false;\r\n  capFlags[CAP_LINE] = false;\r\n  capFlags[cap] = value;\r\n}\r\n\r\nvec2 addVerticies(bool flag, vec2 offset, vec2 point, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex) {\r\n  vec2 vertex = point + direction * (lineWidth * offset.x) + leftNormal * (lineWidth * offset.y);\r\n  return iif(flag, vertex, emptyVertex);\r\n}\r\n\r\nvec2 processRoundCap(vec2 point, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isSemicircle, inout vec2 center, inout vec2 radiusDir) {\r\n  bool isActive = capFlags[CAP_ROUND];\r\n\r\n  vec2 sCircleEdge = modelToScreen(point + direction * (lineWidth * 0.5));\r\n  isSemicircle = iif(isActive, 1.0, isSemicircle);\r\n  center = iif(isActive, modelToScreen(point), center);\r\n  radiusDir = iif(isActive, sCircleEdge - center, radiusDir);\r\n  return emptyVertex;\r\n}\r\n\r\nvoid joinCommon(vec2 a, vec2 b, vec2 c, vec2 ab, float lineWidth, out vec2 d, out vec2 e, out vec2 bd, out vec2 be, out vec2 miter) {\r\n  float halfLineWidth = lineWidth * 0.5;\r\n  vec2 cb = b - c;\r\n  vec2 abDirection = normalize(ab);\r\n  vec2 joinDirection = ab + cb;\r\n  vec2 abNormal = perpToward(abDirection, joinDirection);\r\n  vec2 cbNormal = perpToward(normalize(cb), joinDirection);\r\n  vec2 p1 = b + abNormal * halfLineWidth;\r\n  vec2 p2 = b + cbNormal * halfLineWidth;\r\n  vec2 b1 = p1 - b;\r\n  vec2 b2 = p2 - b;\r\n  // Make sure correct winding in case face culling is enabled.\r\n  bool p2IsRight = isRightOf(b2, b1);\r\n  d = iif(p2IsRight, p2, p1);\r\n  e = iif(p2IsRight, p1, p2);\r\n  bd = iif(p2IsRight, b2, b1);\r\n  be = iif(p2IsRight, b1, b2);\r\n  miter = normalize(bd + be);\r\n}\r\n\r\nvec2 addBevel(vec2 a, vec2 b, vec2 c, vec2 ab, float lineWidth, int vertexIndex) {\r\n  vec2 d, e, bd, be, miter;\r\n  joinCommon(a, b, c, ab, lineWidth, d, e, bd, be, miter);\r\n\r\n  // Find the closest point on the line (2D sdfPlane) containing de to b.\r\n  vec2 midPoint = (d + e) * 0.5;\r\n\r\n  tp[0] = b;\r\n  tp[1] = e;\r\n  tp[2] = d;\r\n  tp[3] = midPoint;\r\n  return iif(capFlags[JOIN_BEVEL], tp[vertexIndex - 7], emptyVertex);\r\n}\r\n\r\nvec2 addRoundJoin(vec2 a, vec2 b, vec2 c, vec2 ab, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isWedge, inout vec2 center, inout vec2 radiusDir, inout float wedgeCrossLimit) {\r\n  vec2 d, e, bd, be, miter;\r\n  joinCommon(a, b, c, ab, lineWidth, d, e, bd, be, miter);\r\n  bool isActive = capFlags[JOIN_ROUND];\r\n  vec2 circleEdge = b + miter * (lineWidth * 0.5);\r\n\r\n  vec2 sD = modelToScreen(d);\r\n  vec2 circleEdgeS = modelToScreen(circleEdge);\r\n  isWedge = iif(isActive, 1.0, isWedge);\r\n  center = iif(isActive, modelToScreen(b), center);\r\n  radiusDir = iif(isActive, circleEdgeS - center, radiusDir);\r\n  wedgeCrossLimit = iif(isActive, cross(normalize(sD - center), normalize(radiusDir)), wedgeCrossLimit);\r\n\r\n  // Find the intersection of miter and the segment (2D sdfPlane) going through d.\r\n  vec2 normal = bd;            // Normal to the sdfPlane.\r\n  float nd = dot(normal, d);   // Distance to origin.\r\n  float t = (nd - dot(normal, b)) / dot(normal, miter);\r\n  vec2 miterPoint = b + miter * t;\r\n\r\n  tp[0] = b;\r\n  tp[1] = e;\r\n  tp[2] = d;\r\n  tp[3] = miterPoint;\r\n  return iif(isActive, tp[vertexIndex - 7], emptyVertex);\r\n}\r\n\r\nvec2 addMiter(vec2 a, vec2 b, vec2 c, vec2 ab, float lineWidth, float miterLimit, int miterFallback, int vertexIndex) {\r\n  vec2 d, e, bd, be, miter;\r\n  joinCommon(a, b, c, ab, lineWidth, d, e, bd, be, miter);\r\n\r\n  // Find the intersection of miter and the segment (2D sdfPlane) going through d.\r\n  vec2 normal = normalize(bd); // Normal to the sdfPlane.\r\n  float nd = dot(normal, d);   // Distance to origin.\r\n  float t = (nd - dot(normal, b)) / dot(normal, miter);\r\n  vec2 miterPoint = b + miter * t;\r\n\r\n  bool useFallback = t > miterLimit;\r\n  capFlags[miterFallback] = capFlags[miterFallback] || (useFallback && capFlags[JOIN_MITER]);\r\n  capFlags[JOIN_MITER] = capFlags[JOIN_MITER] && !useFallback;\r\n\r\n  bool eIsRight = isRightOf(be, bd);\r\n  tp[0] = b;\r\n  tp[1] = e;\r\n  tp[2] = d;\r\n  tp[3] = miterPoint;\r\n  return iif(capFlags[JOIN_MITER], tp[vertexIndex - 7], emptyVertex);\r\n}\r\n\r\nvec2 addCap(int cap, vec2 point, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isSemicircle, inout vec2 center, inout vec2 radiusDir) {\r\n  vec2 buttOffset = vec2(0.0, lineTemplate[vertexIndex].y);\r\n\r\n  return addVerticies(capFlags[CAP_BUTT], buttOffset, point, direction, leftNormal, lineWidth, vertexIndex)\r\n    + addVerticies(capFlags[CAP_SQUARE], lineTemplate[vertexIndex], point, direction, leftNormal, lineWidth, vertexIndex)\r\n    + addVerticies(capFlags[CAP_ROUND], lineTemplate[vertexIndex], point, direction, leftNormal, lineWidth, vertexIndex)\r\n    + processRoundCap(point, direction, leftNormal, lineWidth, vertexIndex, isSemicircle, center, radiusDir);\r\n}\r\n\r\nvec2 addCap(int cap, float miterLimit, int miterFallback, vec2 point, vec2 a, vec2 b, vec2 c, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isSemicircle, inout float isWedge, inout vec2 center, inout vec2 radiusDir, inout float wedgeCrossLimit) {\r\n  return addMiter(a, b, c, direction, lineWidth, miterLimit, miterFallback, vertexIndex)\r\n    + addRoundJoin(a, b, c, direction, leftNormal, lineWidth, vertexIndex, isWedge, center, radiusDir, wedgeCrossLimit)\r\n    + addBevel(a, b, c, direction, lineWidth, vertexIndex)\r\n    + addCap(cap, point, direction, leftNormal, lineWidth, vertexIndex, isSemicircle, center, radiusDir)\r\n    ;\r\n}\r\n\r\nvec2 line2d(vec2 a, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex) {\r\n  vec2 offset = lineTemplate[vertexIndex];\r\n  return a + direction * offset.x + leftNormal * (lineWidth * offset.y);\r\n}\r\n\r\nvec2 _line2d(vec2 a, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex) {\r\n  vec2 vertex = line2d(a, direction, leftNormal, lineWidth, vertexIndex);\r\n  return iif(capFlags[CAP_LINE], vertex, emptyVertex);\r\n}\r\n\r\nvec2 line2d(vec2 a, vec2 b, float lineWidth, int cap, int vertexIndex, inout float isSemicircle, inout vec2 center, inout vec2 radiusDir) {\r\n  int section = iif(vertexIndex < 4, 0, -1);\r\n  section = iif(vertexIndex > 7, 2, section);\r\n  section = iif(section == -1, 1, section);\r\n\r\n  vec2 direction = b - a;\r\n  vec2 normalizedDirection = normalize(direction);\r\n  vec2 leftNormal = perp(normalizedDirection);\r\n  setCapFlag(cap, section == 0);\r\n  vec2 startVertex = addCap(cap, a, -normalizedDirection, leftNormal, lineWidth, vertexIndex, isSemicircle, center, radiusDir);\r\n  setCapFlag(CAP_LINE, section == 1);\r\n  vec2 lineVertex = _line2d(a, direction, leftNormal, lineWidth, vertexIndex);\r\n  setCapFlag(cap, section == 2);\r\n  vec2 endVertex = addCap(cap, b, normalizedDirection, leftNormal, lineWidth, vertexIndex, isSemicircle, center, radiusDir);\r\n  return startVertex + lineVertex + endVertex;\r\n}\r\n\r\nvec3 linepath2d(vec2 a, vec2 b, vec2 c, float lineWidth, int lineCap, int lineJoin, float miterLimit, int miterFallback, int instance, int instanceCount, int vertexIndex, inout float isSemicircle, inout float isWedge, inout vec2 center, inout vec2 radiusDir, inout float wedgeCrossLimit) {\r\n  int section = iif(vertexIndex < 4, 0, -1);\r\n  section = iif(vertexIndex > 7, 2, section);\r\n  section = iif(section == -1, 1, section);\r\n\r\n  int startCap = iif(instance == 0, lineCap, CAP_BUTT);\r\n  int endCap = iif(instance == instanceCount - 1, lineCap, lineJoin);\r\n  // int endCap = iif(instance == instanceCount - 1, lineCap, lineCap);\r\n\r\n  vec2 direction = b - a;\r\n  vec2 normalizedDirection = normalize(direction);\r\n  vec2 leftNormal = perp(normalizedDirection);\r\n  setCapFlag(startCap, section == 0);\r\n  vec2 startVertex = addCap(startCap, miterLimit, miterFallback, a, a, b, c, -normalizedDirection, leftNormal, lineWidth, vertexIndex, isSemicircle, isWedge, center, radiusDir, wedgeCrossLimit);\r\n  setCapFlag(CAP_LINE, section == 1);\r\n  vec2 lineVertex = _line2d(a, direction, leftNormal, lineWidth, vertexIndex);\r\n  setCapFlag(endCap, section == 2);\r\n  vec2 endVertex = addCap(endCap, miterLimit, miterFallback, b, a, b, c, normalizedDirection, leftNormal, lineWidth, vertexIndex, isSemicircle, isWedge, center, radiusDir, wedgeCrossLimit);\r\n  vec2 vertex = startVertex + lineVertex + endVertex;\r\n  return vec3(vertex, float(instanceCount - instance) * 0.00001);\r\n}"], ["lines2d3-vertex", "\r\n#include line-consts\r\n#include coordinate-conversion-vertex\r\n#include conditionals\r\n#include vec2\r\n#include line-utils\r\n#line 938\r\n\r\nconst int CAP_LINE = 6;\r\nint section;\r\n\r\nconst vec2 emptyVertex = vec2(0.0);\r\n\r\nbool capFlags[] = bool[7](false, false, false, false, false, false, false);\r\nvec2 tp[5];\r\n\r\nconst vec3 lineTemplate[] = vec3[8](\r\n  // Start\r\n  vec3(0.5,  0.5, 0.0),\r\n  vec3(0.5, -0.5, 0.0),\r\n  vec3(0.0,  0.5, 0.0),\r\n  vec3(0.0, -0.5, 0.0),\r\n\r\n  // Line\r\n  vec3(1.0,  0.5, 1.0),\r\n  vec3(1.0, -0.5, 1.0),\r\n\r\n  // End\r\n  vec3(0.5,  0.5, 2.0),\r\n  vec3(0.5, -0.5, 2.0)\r\n);\r\n\r\n// vec2 texCoords[] = vec2[10] (\r\n// );\r\n\r\nvoid setCapFlag(int cap, bool value) {\r\n  capFlags[CAP_BUTT] = false;\r\n  capFlags[CAP_SQUARE] = false;\r\n  capFlags[CAP_ROUND] = false;\r\n  capFlags[JOIN_ROUND] = false;\r\n  capFlags[JOIN_BEVEL] = false;\r\n  capFlags[JOIN_MITER] = false;\r\n  capFlags[CAP_LINE] = false;\r\n  capFlags[cap] = value;\r\n}\r\n\r\nvec2 addVerticies(bool flag, vec2 offset, vec2 point, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex) {\r\n  vec2 vertex = point + direction * (lineWidth * offset.x) + leftNormal * (lineWidth * offset.y);\r\n  return iif(flag, vertex, emptyVertex);\r\n}\r\n\r\nvec2 processRoundCap(vec2 point, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isSemicircle, inout vec2 center, inout vec2 radiusDir) {\r\n  bool isActive = capFlags[CAP_ROUND];\r\n\r\n  vec2 sCircleEdge = modelToScreen(point + direction * (lineWidth * 0.5));\r\n  isSemicircle = iif(isActive, 1.0, isSemicircle);\r\n  center = iif(isActive, modelToScreen(point), center);\r\n  radiusDir = iif(isActive, sCircleEdge - center, radiusDir);\r\n  return emptyVertex;\r\n}\r\n\r\nvoid joinCommon(vec2 a, vec2 b, vec2 c, vec2 ab, float lineWidth, out vec2 d, out vec2 e, out vec2 bd, out vec2 be, out vec2 miter, out bool eIsRight) {\r\n  float halfLineWidth = lineWidth * 0.5;\r\n  vec2 cb = b - c;\r\n  vec2 abDirection = normalize(ab);\r\n  vec2 joinDirection = ab + cb;\r\n  vec2 abNormal = perpToward(abDirection, joinDirection);\r\n  vec2 cbNormal = perpToward(normalize(cb), joinDirection);\r\n  d = b + abNormal * halfLineWidth;\r\n  e = b + cbNormal * halfLineWidth;\r\n  bd = d - b;\r\n  be = e - b;\r\n  miter = normalize(bd + be);\r\n  eIsRight = isRightOf(be, bd);\r\n}\r\n\r\nvoid calcJoinPoints(vec2 b, vec2 d, vec2 e, vec2 middlePoint, bool eIsRight) {\r\n  tp[0] = iif(eIsRight, d, b);\r\n  tp[1] = iif(eIsRight, d, b);\r\n  tp[2] = iif(eIsRight, b, d);\r\n  tp[3] = iif(eIsRight, middlePoint, e);\r\n  tp[4] = iif(eIsRight, e, middlePoint);\r\n}\r\n\r\nvec2 addBevel(vec2 a, vec2 b, vec2 c, vec2 ab, float lineWidth, int vertexIndex) {\r\n  vec2 d, e, bd, be, miter;\r\n  bool eIsRight;\r\n  joinCommon(a, b, c, ab, lineWidth, d, e, bd, be, miter, eIsRight);\r\n\r\n  // Find the midpoint between d and e.\r\n  vec2 midPoint = (d + e) * 0.5;\r\n\r\n  calcJoinPoints(b, d, e, midPoint, eIsRight);\r\n  return iif(capFlags[JOIN_BEVEL], tp[vertexIndex - 5], emptyVertex);\r\n}\r\n\r\nvec2 addRoundJoin(vec2 a, vec2 b, vec2 c, vec2 ab, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isCircle, inout vec2 center, inout vec2 radiusDir) {\r\n  vec2 d, e, bd, be, miter;\r\n  bool eIsRight;\r\n  joinCommon(a, b, c, ab, lineWidth, d, e, bd, be, miter, eIsRight);\r\n  bool isActive = capFlags[JOIN_ROUND];\r\n  vec2 circleEdge = b + miter * (lineWidth * 0.5);\r\n\r\n  vec2 sD = modelToScreen(d);\r\n  vec2 circleEdgeS = modelToScreen(circleEdge);\r\n  isCircle = iif(isActive, 1.0, isCircle);\r\n  center = iif(isActive, modelToScreen(b), center);\r\n  radiusDir = iif(isActive, circleEdgeS - center, radiusDir);\r\n\r\n  // Find the intersection of miter and the line (2D sdfPlane) going through d.\r\n  vec2 miterPoint = LineLineIntersection(b, miter, d, ab);\r\n\r\n  calcJoinPoints(b, d, e, miterPoint, eIsRight);\r\n  return iif(isActive, tp[vertexIndex - 5], emptyVertex);\r\n}\r\n\r\nvec2 addMiter(vec2 a, vec2 b, vec2 c, vec2 ab, float lineWidth, float miterLimit, int miterFallback, int vertexIndex) {\r\n  vec2 d, e, bd, be, miter;\r\n  bool eIsRight;\r\n  joinCommon(a, b, c, ab, lineWidth, d, e, bd, be, miter, eIsRight);\r\n\r\n  // Find the intersection of miter and the line (2D sdfPlane) going through d.\r\n  vec2 miterPoint = LineLineIntersection(b, miter, d, ab);\r\n\r\n  bool useFallback = length(miterPoint - b) > miterLimit;\r\n  capFlags[miterFallback] = capFlags[miterFallback] || (useFallback && capFlags[JOIN_MITER]);\r\n  capFlags[JOIN_MITER] = capFlags[JOIN_MITER] && !useFallback;\r\n\r\n  calcJoinPoints(b, d, e, miterPoint, eIsRight);\r\n  return iif(capFlags[JOIN_MITER], tp[vertexIndex - 5], emptyVertex);\r\n}\r\n\r\nvec2 addCap(int cap, vec2 point, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isCircle, inout vec2 center, inout vec2 radiusDir) {\r\n  vec2 offset = lineTemplate[vertexIndex].xy;\r\n  vec2 buttOffset = vec2(0.0, offset.y);\r\n\r\n  return addVerticies(capFlags[CAP_BUTT], buttOffset, point, direction, leftNormal, lineWidth, vertexIndex)\r\n    + addVerticies(capFlags[CAP_SQUARE], offset, point, direction, leftNormal, lineWidth, vertexIndex)\r\n    + addVerticies(capFlags[CAP_ROUND], offset, point, direction, leftNormal, lineWidth, vertexIndex)\r\n    + processRoundCap(point, direction, leftNormal, lineWidth, vertexIndex, isCircle, center, radiusDir);\r\n}\r\n\r\nvec2 addCapOrJoin(int cap, float miterLimit, int miterFallback, vec2 point, vec2 a, vec2 b, vec2 c, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex, inout float isCircle, inout vec2 center, inout vec2 radiusDir) {\r\n  return addMiter(a, b, c, direction, lineWidth, miterLimit, miterFallback, vertexIndex)\r\n    + addRoundJoin(a, b, c, direction, leftNormal, lineWidth, vertexIndex, isCircle, center, radiusDir)\r\n    + addBevel(a, b, c, direction, lineWidth, vertexIndex)\r\n    + addCap(cap, point, direction, leftNormal, lineWidth, vertexIndex, isCircle, center, radiusDir);\r\n}\r\n\r\nvec2 line2d(vec2 a, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex) {\r\n  vec2 offset = lineTemplate[vertexIndex].xy;\r\n  return a + direction * offset.x + leftNormal * (lineWidth * offset.y);\r\n}\r\n\r\nvec2 _line2d(vec2 a, vec2 direction, vec2 leftNormal, float lineWidth, int vertexIndex) {\r\n  vec2 vertex = line2d(a, direction, leftNormal, lineWidth, vertexIndex);\r\n  return iif(capFlags[CAP_LINE], vertex, emptyVertex);\r\n}\r\n\r\nvec2 line2d(vec2 a, vec2 b, float lineWidth, int cap, int vertexIndex, inout float isCircle, inout vec2 center, inout vec2 radiusDir) {\r\n  int section = int(lineTemplate[vertexIndex].z);\r\n\r\n  vec2 direction = b - a;\r\n  vec2 normalizedDirection = normalize(direction);\r\n  vec2 leftNormal = perp(normalizedDirection);\r\n  setCapFlag(cap, section == 0);\r\n  vec2 startVertex = addCap(cap, a, -normalizedDirection, leftNormal, lineWidth, vertexIndex, isCircle, center, radiusDir);\r\n  setCapFlag(CAP_LINE, section == 1);\r\n  vec2 lineVertex = _line2d(a, direction, leftNormal, lineWidth, vertexIndex);\r\n  setCapFlag(cap, section == 2);\r\n  vec2 endVertex = addCap(cap, b, normalizedDirection, leftNormal, lineWidth, vertexIndex, isCircle, center, radiusDir);\r\n  return startVertex + lineVertex + endVertex;\r\n}\r\n\r\nvec3 linepath2d(vec2 a, vec2 b, vec2 c, float lineWidth, int lineCap, int lineJoin, float miterLimit, int miterFallback, int instance, int instanceCount, int vertexIndex, inout float isCircle, inout vec2 center, inout vec2 radiusDir) {\r\n  int section = int(lineTemplate[vertexIndex].z);\r\n  int startCap = iif(instance == 0, lineCap, CAP_BUTT);\r\n  int endCap = iif(instance == instanceCount - 1, lineCap, lineJoin);\r\n\r\n  vec2 direction = b - a;\r\n  vec2 normalizedDirection = normalize(direction);\r\n  vec2 leftNormal = perp(normalizedDirection);\r\n  setCapFlag(startCap, section == 0);\r\n  vec2 startVertex = addCap(startCap, a, -normalizedDirection, leftNormal, lineWidth, vertexIndex, isCircle, center, radiusDir);\r\n  setCapFlag(CAP_LINE, section == 1);\r\n  vec2 lineVertex = _line2d(a, direction, leftNormal, lineWidth, vertexIndex);\r\n  setCapFlag(endCap, section == 2);\r\n  vec2 endVertex = addCapOrJoin(endCap, miterLimit, miterFallback, b, a, b, c, normalizedDirection, leftNormal, lineWidth, vertexIndex, isCircle, center, radiusDir);\r\n  vec2 vertex = startVertex + lineVertex + endVertex;\r\n  // Fudge the z component to allow removal of rear faces in transparent lines.\r\n  // NEEDS SOME WORK: Does not play well with other objects.\r\n  float z = iif(section == 1, float(instanceCount - instance) * 0.00001, 0.0);\r\n  z = 0.0;\r\n  return vec3(vertex, z);\r\n}"], ["lines2d4-vertex", "\r\n// lines2d4-vertex\r\n#include line-consts\r\n#include sdf-consts\r\n#include coordinate-conversion-vertex\r\n#include line-utils\r\n#line 1396\r\n\r\nvec4 offsets[] = vec4[4] (\r\n  vec4(0.0,  1.1, -1.0, 0.0), // x,y: offset. z: direction to add half line width for caps.\r\n  vec4(0.0, -1.1, -1.0, 0.0), // z: add offset for miter.\r\n  vec4(1.0,  1.1,  1.0, 1.0),\r\n  vec4(1.0, -1.1,  1.0, 1.0)\r\n);\r\n\r\nSdfLineParams createLinePathParams(int instance, int instanceCount, float miterLimit, int miterFallback, int lineCap, int lineJoin, vec2 a, vec2 b, vec2 c, float hlw, out float lineLength, out vec2 rotation) {\r\n  vec2 ab = b - a;\r\n  vec2 cb = b - c;\r\n  lineLength = length(ab);\r\n  vec2 abDir = normalize(ab);\r\n  vec2 abNormal = perp(abDir);\r\n  vec2 cbNormal = perp(normalize(cb));\r\n  vec2 startBottomLeft = a - abDir * hlw + abNormal * -hlw;\r\n  vec2 endTopRight = b + abDir * hlw + abNormal * hlw;\r\n  vec2 bottomLeft = a + abNormal * -hlw;\r\n  vec2 topRight = b + abNormal * hlw;\r\n\r\n  vec2 joinDirection = ab + cb;\r\n  abNormal = faceToward(abNormal, joinDirection);\r\n  cbNormal = faceToward(cbNormal, joinDirection);\r\n  vec2 d = b + cbNormal * hlw;\r\n  vec2 e = b + abNormal * hlw;\r\n  vec2 bd = d - b;\r\n  vec2 be = e - b;\r\n  vec2 miter = normalize(bd + be);\r\n\r\n  // Find the intersection of miter and the line (2D sdfPlane) going through d.\r\n  vec2 miterPoint = LineLineIntersection(b, miter, d, cb);\r\n\r\n  float lineAngle = atan(ab.y, ab.x);\r\n  rotation = vec2(cos(lineAngle), sin(lineAngle));\r\n  lineAngle = -lineAngle; // TODO: Figure out what's going on here with negative.\r\n\r\n  vec2 bS = modelToScreen(b);\r\n  vec2 miterPointS = modelToScreen(miterPoint);\r\n\r\n  float isLastInstance = float(instance == instanceCount - 1);\r\n  int startCap = int(mix(float(CAP_BUTT), float(lineCap), float(instance == 0)));\r\n  int endCap = int(mix(float(lineJoin), float(lineCap), isLastInstance));\r\n  bool useFallback = isLastInstance == 0.0 && endCap == JOIN_MITER && length(miterPointS - bS) > miterLimit;\r\n  endCap = int(mix(float(endCap), float(miterFallback), useFallback));\r\n\r\n  float dIsRight = float(isRightOf(bd, be));\r\n\r\n  SdfLineParams result;\r\n  result.startCap = startCap;\r\n  result.endCap = endCap;\r\n  result.position = modelToScreen(a);\r\n  result.rotation = vec2(cos(lineAngle), sin(lineAngle));\r\n  result.startBottomLeft = modelToScreen(startBottomLeft);\r\n  result.endTopRight = modelToScreen(endTopRight);\r\n  result.bottomLeft = modelToScreen(bottomLeft);\r\n  result.topRight = modelToScreen(topRight);\r\n  result.join1 = bS;\r\n  result.join2 = modelToScreen(mix(e, d, dIsRight));\r\n  result.join3 = modelToScreen(mix(d, e, dIsRight));\r\n  result.miterPoint = miterPointS;\r\n  result.hasPrior = float(instance > 0);\r\n  result.hasNext = float(instance < instanceCount - 1);\r\n  return result;\r\n}\r\n\r\nvec2 linepath2d(vec2 priorA, vec2 a, vec2 b, vec2 c, float lineWidth, int lineCap, int lineJoin, float miterLimit, int miterFallback, int instance, int instanceCount, int vertexIndex, float aliasWidth, float worldScale, out SdfLineParams lineParams, out SdfLineParams priorLineParams, out SdfLineParams nextLineParams) {\r\n  vec2 pts[] = vec2[] (priorA, a, b, c );\r\n  float miterLimitS = miterLimit * worldScale;\r\n  float hlw = lineWidth * 0.5;\r\n\r\n  vec2 rotation;\r\n  float lineLength;\r\n  priorLineParams = createLinePathParams(instance - 1, instanceCount, miterLimitS, miterFallback, lineCap, lineJoin, priorA, a, b, hlw, lineLength, rotation);\r\n  nextLineParams = createLinePathParams(instance + 1, instanceCount, miterLimitS, miterFallback, lineCap, lineJoin, b, c, vec2(0.0, 0.0), hlw, lineLength, rotation);\r\n  lineParams = createLinePathParams(instance, instanceCount, miterLimitS, miterFallback, lineCap, lineJoin, a, b, c, hlw, lineLength, rotation);\r\n  lineParams.aliasWidth = aliasWidth;\r\n\r\n  vec4 offset = offsets[vertexIndex];\r\n  float miterOffset = mix(0.0, offset.w, lineParams.hasNext == 1.0);\r\n  float startHlw = mix(0.0, -hlw, offset.x < 1.0);\r\n  float endHlw = mix(0.0, hlw, offset.x > 0.0 && lineParams.hasNext == 0.0);\r\n  vec2 v = offset.xy * vec2(lineLength, hlw) + vec2(startHlw + endHlw + ((miterLimit * 1.7) * miterOffset), 0.0);\r\n  v = rotate(v, rotation) + a;\r\n  return v;\r\n}"], ["vector2d", "\r\n#include vec2\r\n\r\nconst vec2 vecTemplate[] = vec2[9](\r\n  vec2(0.0, -0.5),\r\n  vec2(0.85, -0.5),\r\n  vec2(0.0,  0.5),\r\n\r\n  vec2(0.85, -0.5),\r\n  vec2(0.85,  0.5),\r\n  vec2(0.0,   0.5),\r\n\r\n  vec2(0.85, -1.0),\r\n  vec2(1.0,  0.0),\r\n  vec2(0.85,  1.0)\r\n);\r\n\r\nvec2 vector2d(vec2 vec, float lineWidth, int vertexID, out float isTip) {\r\n  isTip = step(7.0, float(vertexID));\r\n  vec2 leftNormal = normalize(perp(vec));\r\n  vec2 offset = vecTemplate[vertexID];\r\n  return vec2(0.0) + vec * offset.x + leftNormal * (lineWidth * offset.y);\r\n }"], ["noise-fractal-params", "\r\nuniform noiseFractalParams {\r\n  int octaves;\r\n  vec4 frequency;\r\n  float amplitude;\r\n  float lacunarity;\r\n  float gain;\r\n  float noiseTime;\r\n};"], ["noise-outvars", "\r\nflat out vec4 v_noiseStart;\r\nflat out vec3 v_noiseDim;\r\nflat out vec2 v_noiseCenterLeft;\r\nflat out vec2 v_noiseCenterRight;\r\nflat out vec2 v_noiseCenterTop;\r\nflat out vec2 v_noiseCenterBottom;\r\nflat out float v_noiseRange;"], ["noise-invars", "\r\nuniform sampler2D permTexture;\r\nflat in vec4 v_noiseStart;\r\nflat in vec3 v_noiseDim;\r\nflat in vec2 v_noiseCenterLeft;\r\nflat in vec2 v_noiseCenterRight;\r\nflat in vec2 v_noiseCenterTop;\r\nflat in vec2 v_noiseCenterBottom;\r\nflat in float v_noiseRange;"], ["perlin-noise", "\r\n#include conditionals\r\n#line 1187\r\n\r\nvec2 add(vec2 v, float x, float y) { return vec2(v.x + x, v.y + y); }\r\nvec3 add(vec3 v, float x, float y, float z) { return vec3(v.x + x, v.y + y, v.z + z); }\r\nvec4 add(vec4 v, float x, float y, float z, float w) { return vec4(v.x + x, v.y + y, v.z + z, v.w + w); }\r\n\r\nfloat fade(float t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\r\n\r\nint perm(int idx) { return int(texelFetch(permTexture, ivec2(idx, 0), 0).r * 255.0) & 0xFF; }\r\nint perm(int x, int y) { return perm(perm(x) + y); }\r\nint perm(int x, int y, int z) { return perm(perm(perm(x) + y) + z); }\r\n\r\nfloat grad(int hash, float p) {\r\n  return float[2] (-p, p)[hash & 1];\r\n}\r\n\r\nfloat grad(int hash, vec2 p) {\r\n  // TODO: Test if this is more efficient than using a switch.\r\n  return float[4] (\r\n     p.x + p.y,\r\n    -p.x + p.y,\r\n     p.x - p.y,\r\n    -p.x - p.y\r\n  )[hash & 3];\r\n}\r\n\r\nfloat grad(int hash, vec3 p) {\r\n  // TODO: This is probably less efficient than using a switch. Test.\r\n  return float[16] (\r\n     p.x + p.y,\r\n    -p.x + p.y,\r\n     p.x - p.y,\r\n    -p.x - p.y,\r\n\r\n     p.x + p.z,\r\n    -p.x + p.z,\r\n     p.x - p.z,\r\n    -p.x - p.z,\r\n     p.y + p.z,\r\n    -p.y + p.z,\r\n     p.y - p.z,\r\n    -p.y - p.z, // 12th\r\n     p.x + p.y,\r\n    -p.x + p.y,\r\n    -p.y + p.z,\r\n    -p.y - p.z\r\n  )[hash & 0xF];\r\n}\r\n\r\nfloat grad(int hash, vec4 p) {\r\n  // TODO: This is probably less efficient than using a switch. Test.\r\n  return float[32] (\r\n     p.x +  p.y +  p.w,\r\n    -p.x +  p.y +  p.w,\r\n     p.x + -p.y +  p.w,\r\n    -p.x + -p.y +  p.w,\r\n     \r\n     p.x +  p.z +  p.w,\r\n    -p.x +  p.z +  p.w,\r\n     p.x + -p.z +  p.w,\r\n    -p.x + -p.z +  p.w,\r\n\r\n     p.y +  p.z +  p.w,\r\n    -p.y +  p.z +  p.w,\r\n     p.y + -p.z +  p.w,\r\n    -p.y + -p.z +  p.w,\r\n\r\n     p.x +  p.y + -p.w,\r\n    -p.x +  p.y + -p.w,\r\n     p.x + -p.y + -p.w,\r\n    -p.x + -p.y + -p.w,\r\n\r\n     p.x +  p.z + -p.w,\r\n    -p.x +  p.z + -p.w,\r\n     p.x + -p.z + -p.w,\r\n    -p.x + -p.z + -p.w,\r\n\r\n     p.y +  p.z + -p.w,\r\n    -p.y +  p.z + -p.w,\r\n     p.y + -p.z + -p.w,\r\n    -p.y + -p.z + -p.w,\r\n\r\n     p.x +  p.y +  p.z,\r\n    -p.x +  p.y +  p.z,\r\n     p.x + -p.y + -p.z,\r\n    -p.x + -p.y + -p.z,\r\n\r\n     p.x +  p.y + -p.z,\r\n    -p.x +  p.y + -p.z,\r\n     p.x + -p.y +  p.z,\r\n    -p.x + -p.y +  p.z\r\n   )[hash & 0x1F];\r\n}\r\n\r\nfloat _noise(float p) {\r\n  float p0 = fract(p);\r\n  float p1 = p0 - 1.0;\r\n  \r\n  int idx = int(floor(p));\r\n  int v0 = perm(idx);\r\n  int v1 = perm(idx + 1);\r\n\r\n  float fx = fade(p0);\r\n  return mix(grad(v0, p0), grad(v1, p1), fx);\r\n}\r\n\r\nfloat _noise(vec2 p) {\r\n  vec2 p0 = fract(p);            // By subtracting, we are actually\r\n  vec2 p1 = add(p0, -1.0,  0.0); // Calculating the vector from each\r\n  vec2 p2 = add(p0,  0.0, -1.0); // corner to p.\r\n  vec2 p3 = add(p0, -1.0, -1.0);\r\n\r\n  ivec2 id = ivec2(floor(p));\r\n  int v0 = perm(id.x    , id.y    );\r\n  int v1 = perm(id.x + 1, id.y    );\r\n  int v2 = perm(id.x    , id.y + 1);\r\n  int v3 = perm(id.x + 1, id.y + 1);\r\n\r\n  float fx = fade(p0.x);\r\n  float fy = fade(p0.y);\r\n  float a = mix(grad(v0, p0), grad(v1, p1), fx);\r\n  float b = mix(grad(v2, p2), grad(v3, p3), fx);\r\n  return mix(a, b, fy);\r\n}\r\n\r\nfloat _noise(vec3 p) {\r\n  vec3 p0 = fract(p);\r\n  vec3 p1 = add(p0, -1.0,  0.0,  0.0);\r\n  vec3 p2 = add(p0,  0.0, -1.0,  0.0);\r\n  vec3 p3 = add(p0, -1.0, -1.0,  0.0);\r\n  vec3 p4 = add(p0,  0.0,  0.0, -1.0);\r\n  vec3 p5 = add(p0, -1.0,  0.0, -1.0);\r\n  vec3 p6 = add(p0,  0.0, -1.0, -1.0);\r\n  vec3 p7 = add(p0, -1.0, -1.0, -1.0);\r\n\r\n  ivec3 id = ivec3(floor(p));\r\n  int v0 = perm(id.x    , id.y    , id.z    );\r\n  int v1 = perm(id.x + 1, id.y    , id.z    );\r\n  int v2 = perm(id.x    , id.y + 1, id.z    );\r\n  int v3 = perm(id.x + 1, id.y + 1, id.z    );\r\n  int v4 = perm(id.x    , id.y    , id.z + 1);\r\n  int v5 = perm(id.x + 1, id.y    , id.z + 1);\r\n  int v6 = perm(id.x    , id.y + 1, id.z + 1);\r\n  int v7 = perm(id.x + 1, id.y + 1, id.z + 1);\r\n\r\n  float fx = fade(p0.x);\r\n  float fy = fade(p0.y);\r\n  float fz = fade(p0.z);\r\n  float a1 = mix(grad(v0, p0), grad(v1, p1), fx);\r\n  float b1 = mix(grad(v2, p2), grad(v3, p3), fx);\r\n  float a2 = mix(grad(v4, p4), grad(v5, p5), fx);\r\n  float b2 = mix(grad(v6, p6), grad(v7, p7), fx);\r\n  float c1 = mix(a1, b1, fy);\r\n  float c2 = mix(a2, b2, fy);\r\n  return mix(c1, c2, fz);\r\n}\r\n\r\nfloat noise(float p) {\r\n  float freq = frequency.x;\r\n  float amp = amplitude;\r\n  float result = 0.0;\r\n  int oct = max(octaves, 1);\r\n\r\n  for (int i = 0; i < oct; i++) {\r\n    result += _noise(p * freq) * amp;\r\n    freq *= lacunarity;\r\n    amp *= gain;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfloat noise(vec2 p) {\r\n  vec2 freq = frequency.xy;\r\n  float amp = amplitude;\r\n  float result = 0.0;\r\n  int oct = max(octaves, 1);\r\n\r\n  for (int i = 0; i < oct; i++) {\r\n    result += _noise(p * freq) * amp;\r\n    freq *= lacunarity;\r\n    amp *= gain;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfloat noise(vec3 p) {\r\n  vec3 freq = frequency.xyz;\r\n  float amp = amplitude;\r\n  float result = 0.0;\r\n  int oct = max(octaves, 1);\r\n\r\n  for (int i = 0; i < oct; i++) {\r\n    result += _noise(p * freq) * amp;\r\n    freq *= lacunarity;\r\n    amp *= gain;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfloat turbulence1(vec2 pos, float loFreq, float hiFreq) {\r\n  float t = 0.0;\r\n  vec2 p = vec2(pos.x + 123.456, pos.y);\r\n\r\n  for (float freq = loFreq; freq < hiFreq; freq *= 2.0) {\r\n    t += abs(_noise(p)) / freq;\r\n    p *= 2.0;\r\n  }\r\n\r\n  return t;// - 0.3; // Avg 0.0.\r\n}\r\n\r\nfloat turbulence(vec2 pos, float pixelSize) {\r\n  float t = 0.0;\r\n  vec2 p = pos.xy;\r\n\r\n  for (float scale = 1.0; scale > pixelSize; scale *= 0.5) {\r\n    p /= scale;\r\n    t += abs(_noise(p)) * scale;\r\n  }\r\n\r\n  return t;// - 0.3;\r\n}\r\n\r\nfloat turbulence(vec3 pos, float pixelSize) {\r\n  float t = 0.0;\r\n  vec3 p = pos.xyz;\r\n\r\n  for (float scale = 1.0; scale > pixelSize; scale *= 0.5) {\r\n    p /= scale;\r\n    t += abs(_noise(p)) * scale;\r\n  }\r\n\r\n  return t;// - 0.3;\r\n}\r\n  "]]));
var DefaultValues_shaderIncludeVertexTexture2d0 = "\r\nin vec2 a_texCoords0;\r\nout vec2 v_texCoords0;\r\n";
var DefaultValues_shaderIncludeUseVertexTexture2d0 = "\r\n  gl_Position *= vec4(a_texCoords0 / a_texCoords0, 1.0, 1.0);\r\n";
var DefaultValues_shaderIncludeFragmentTexture2d0 = "\r\nuniform sampler2D u_texture0;\r\nin vec2 v_texCoords0;\r\n";
var DefaultValues_shaderIncludeUseFragmentTexture2d0 = "\r\n  glFragColor *= texture(u_texture0, v_texCoords0);\r\n";

(function () {
  var enumerator = (0, _Seq.getEnumerator)((0, _List.ofSeq)((0, _Seq.rangeNumber)(0, 1, 15)));

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var i = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]() | 0;
      WebglShaderUtils_addShaderInclude((0, _String.toText)((0, _String.interpolate)("vertex-texture2d%P()", [i])), (0, _String.replace)(DefaultValues_shaderIncludeVertexTexture2d0, "0", (0, _String.toText)((0, _String.interpolate)("%P()", [i]))));
      WebglShaderUtils_addShaderInclude((0, _String.toText)((0, _String.interpolate)("use-vertex-texture2d%P()", [i])), (0, _String.replace)(DefaultValues_shaderIncludeUseVertexTexture2d0, "0", (0, _String.toText)((0, _String.interpolate)("%P()", [i]))));
      WebglShaderUtils_addShaderInclude((0, _String.toText)((0, _String.interpolate)("fragment-texture2d%P()", [i])), (0, _String.replace)(DefaultValues_shaderIncludeFragmentTexture2d0, "0", (0, _String.toText)((0, _String.interpolate)("%P()", [i]))));
      WebglShaderUtils_addShaderInclude((0, _String.toText)((0, _String.interpolate)("use-fragment-texture2d%P()", [i])), (0, _String.replace)(DefaultValues_shaderIncludeUseFragmentTexture2d0, "0", (0, _String.toText)((0, _String.interpolate)("%P()", [i]))));
    }
  } finally {
    enumerator.Dispose();
  }
})();

(0, _List.iterate)(function (tupledArg) {
  DefaultValues_addVertex(tupledArg[0], tupledArg[1]);
}, (0, _List.ofArray)([["emptyVertex", "#version 300 es\r\n// emptyVertex\r\nvoid main() {\r\n  gl_Position = vec4(0.0);\r\n}"], ["globalVertex2d", "#version 300 es\r\n// globalVertex2d\r\n#include precision\r\n#include global-ubo\r\n\r\nvoid main() {\r\n  gl_Position = vec4(0.0);\r\n}"], ["sharedCameraVertex2d", "#version 300 es\r\n// sharedCameraVertex2d\r\n#include precision\r\n#include camera-ubo\r\n\r\nvoid main() {\r\n  gl_Position = projMat * viewMat * vec4(0.0);\r\n}"], ["fullSizeVertex2d", "#version 300 es\r\n// fullSizeVertex2d\r\n#include precision\r\n#include global-ubo\r\n#include path-outvars\r\n\r\nvec2 points[] = vec2[4] (\r\n  vec2(-1.0, -1.0),\r\n  vec2(1.0, -1.0),\r\n  vec2(-1.0, 1.0),\r\n  vec2(1.0, 1.0)\r\n);\r\n\r\nvoid main() {\r\n  int vertexID = gl_VertexID % 4;\r\n\r\n  gl_Position = vec4(points[vertexID], 0.0, 1.0);\r\n  // vec4 c[] = vec4[4](\r\n  //   vec4(1.0, 0.0, 0.0, 1.0),\r\n  //   mix(vec4(1.0, 0.0, 0.0, 1.0), vec4(0.0, 0.0, 1.0, 1.0), 0.5),\r\n  //   mix(vec4(1.0, 0.0, 0.0, 1.0), vec4(0.0, 0.0, 1.0, 1.0), 0.5),\r\n  //   vec4(0.0, 0.0, 1.0, 1.0)\r\n  // );\r\n  // v_fillColor = c[vertexID];\r\n}"], ["quadStripVertex2d", "#version 300 es\r\n// quadStripVertex2d\r\n#include precision\r\n#include quad-params\r\n#include quad-outvars\r\n#include quad-points-strip\r\n#include coordinate-conversion-vertex\r\n#include vec2\r\n\r\nvoid main() {\r\n  vec2[] points = quadPointsStrip;\r\n#include calc-quad-vertexid\r\n#include calc-scaled-quad-points\r\n#include calc-quad-dim\r\n#include calc-quad-center\r\n#include calc-quad-rotation\r\n#include calc-quad-vertex\r\n#include set-quad-position\r\n#include set-quad-params\r\n}"], ["quadStripRightVertex2d", "#version 300 es\r\n// quadStripRightVertex2d\r\n#include precision\r\n#include quad-params\r\n#include quad-outvars\r\n#include quad-points-strip-right\r\n#include coordinate-conversion-vertex\r\n#include vec2\r\n\r\nvoid main() {\r\n  vec2[] points = quadPointsStripRight;\r\n#include calc-quad-vertexid\r\n#include calc-scaled-quad-points\r\n#include calc-quad-dim\r\n#include calc-quad-center\r\n#include calc-quad-rotation\r\n#include calc-quad-vertex\r\n#include set-quad-position\r\n#include set-quad-params\r\n}"], ["sdf", "#version 300 es\r\n// sdf\r\n#include precision\r\n#include global-ubo\r\n#include math-consts\r\n#include line-consts\r\n#include path-outvars\r\n#include sdf-consts\r\n#include sdf-outvars\r\n#include coordinate-conversion-vertex\r\n#include vec2\r\n#include lines2d4-vertex\r\n#line 1865\r\n\r\nuniform int instanceCount;\r\n\r\nin vec2 p1;\r\nin vec2 p2;\r\nin vec2 p3;\r\nin vec2 p4;\r\n\r\nvoid main() {\r\n  int lineCap;\r\n  lineCap = CAP_BUTT;\r\n  lineCap = CAP_SQUARE;\r\n  lineCap = CAP_ROUND;\r\n\r\n  int lineJoin;\r\n  lineJoin = JOIN_ROUND;\r\n  // lineJoin = JOIN_BEVEL;\r\n  lineJoin = JOIN_MITER;\r\n\r\n  int vertexIndex = gl_VertexID;\r\n  int triangleID = int(gl_VertexID >= 3);\r\n  int instance = gl_InstanceID;\r\n\r\n  float worldScale = 66.66;\r\n  float lineWidthScale = 1.0 / worldScale;\r\n  float lineWidth = 80.0 * lineWidthScale;\r\n  float hlw = lineWidth * 0.5;\r\n  float strokeWidth = lineWidth * worldScale;\r\n  strokeWidth *= v_scale;\r\n\r\n  float miterLimit = 2.0;\r\n  float miterLimitS = miterLimit * worldScale;\r\n  int miterFallback = JOIN_BEVEL;\r\n\r\n  vec2 priorA = p1;\r\n  vec2 a = p2;\r\n  vec2 b = p3;\r\n  vec2 c = p4;\r\n  \r\n  float angle = fract(time * 0.055) * TWO_PI;\r\n  if (instance == 0) {\r\n    b = rotate(b, vec2(cos(angle), sin(angle)));\r\n  } else {\r\n    a = rotate(a, vec2(cos(angle), sin(angle)));\r\n  }\r\n\r\n  vec2 vertex = linepath2d(priorA, a, b, c, lineWidth, lineCap, lineJoin, miterLimit, miterFallback, instance, instanceCount, vertexIndex, worldScale, v_sdfLineParams, v_sdfPriorLineParams, v_sdfNextLineParams);\r\n\r\n  gl_Position = modelToClip(vertex);\r\n  v_aliasWidth = 2.0;\r\n\r\n  v_strokeWidth = strokeWidth;\r\n  v_strokeColor = vec4(0.0, 1.0, 0.0, 0.2);\r\n  v_strokeColor = vec4(1.0, 0.5, 1.0, 0.4);\r\n  v_fillColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n  if (instanceCount < 2) v_strokeColor = vec4(0.0, 1.0, 0.0, 0.2);\r\n  // if (angle > 0.0) v_fillColor = vec4(0.0, 0.0, 0.0, 1.0);\r\n  // if (triangleID == 1) v_fillColor = vec4(0.0, 0.0, 1.0, 1.0);\r\n}"]]));
(0, _List.iterate)(function (tupledArg) {
  DefaultValues_addFragment(tupledArg[0], tupledArg[1]);
}, (0, _List.ofArray)([["sdf", "#version 300 es\r\n// sdf\r\n#include precision\r\n#include global-ubo\r\n#include transparent-color\r\n#include path-invars\r\n#include out-color-fragment\r\n#include sdf-consts\r\n#include sdf-invars\r\n#include sdf-linepath-fragment\r\n#line 1910\r\n\r\nvoid main() {\r\n  vec4 color = sdfDrawLinePath(\r\n    v_sdfLineParams,\r\n    v_sdfPriorLineParams,\r\n    v_sdfNextLineParams,\r\n    v_strokeColor,\r\n    v_aliasWidth,\r\n    resolution * 0.5);\r\n\r\n  vec2 p = gl_FragCoord.xy;\r\n  // float dist = length(p - v_sdfLineParams.join1);\r\n  // if (dist <= 5.0) color = vec4(0.5, 0.0, 0.0, 1.0);\r\n  // dist = length(p - v_sdfLineParams.join2);\r\n  // if (dist <= 5.0) color = vec4(0.0, 1.0, 0.0, 1.0);\r\n  // dist = length(p - v_sdfLineParams.miterPoint);\r\n  // if (dist <= 5.0) color = vec4(0.0, 0.0, 1.0, 1.0);\r\n  // dist = length(p - v_sdfLineParams.join3);\r\n  // if (dist <= 5.0) color = vec4(1.0, 1.0, 0.0, 1.0);\r\n\r\n  // float dist = length(p - v_sdfLineParams.startBottomLeft);\r\n  // if (dist <= 5.0) color = vec4(0.5, 0.0, 0.0, 1.0);\r\n  // dist = length(p - v_sdfLineParams.bottomLeft);\r\n  // if (dist <= 5.0) color = vec4(0.0, 1.0, 0.0, 1.0);\r\n  // dist = length(p - v_sdfLineParams.topRight);\r\n  // if (dist <= 5.0) color = vec4(0.0, 0.0, 1.0, 1.0);\r\n  // dist = length(p - v_sdfLineParams.endTopRight);\r\n  // if (dist <= 5.0) color = vec4(1.0, 1.0, 0.0, 1.0);\r\n\r\n  glFragColor = color;\r\n}"], ["emptyFragment", "#version 300 es\r\n// emptyFragment\r\n#include precision\r\n#include out-color-fragment\r\n\r\nvoid main() {\r\n  glFragColor = vec4(0.0);\r\n}"], ["simpleFragment2d", "#version 300 es\r\n// simpleFragment2d\r\n#include precision\r\n#include path-invars\r\n#include out-color-fragment\r\n\r\nvoid main() {\r\n  glFragColor = v_fillColor;\r\n}"], ["simpleQuadFragment2d", "#version 300 es\r\n// simpleQuadFragment2d\r\n#include precision\r\n#include quad-common\r\n#include quad-invars\r\n#include out-color-fragment\r\n\r\nvoid main() {\r\n  glFragColor = v_params.fillColor;\r\n}"], ["simpleQuadSdfFragment2d", "#version 300 es\r\n// simpleQuadSdfFragment2d\r\n#include precision\r\n#include global-ubo\r\n#include quad-common\r\n#include quad-invars\r\n#include out-color-fragment\r\n#include sdf-utils\r\n\r\nfloat sdfRect(vec2 p, QuadParams params) {\r\n  vec2 size = params.halfSize;\r\n  return max(abs(p.x) - size.x, abs(p.y) - size.y);\r\n}\r\n\r\nvoid main() {\r\n  vec2 halfResolution = resolution * 0.5;\r\n  vec2 p = sdfToLocalOrient(gl_FragCoord.xy, v_params);\r\n\r\n  vec4 color;\r\n  color = sdfDraw(sdfRect(p, v_params), v_params);\r\n\r\n  glFragColor = color;\r\n}"], ["circleFragment2d", "#version 300 es\r\n// circleFragment2d\r\n#include precision\r\n#include path-invars\r\n#include circle-invars\r\n#include out-color-fragment\r\n#include circles-fragment\r\n\r\nvoid main() {\r\n#include init-color\r\n#include circle-color-fragment\r\n#include set-out-color\r\n}"], ["circleDiscardFragment2d", "#version 300 es\r\n// circleDiscardFragment2d\r\n#include precision\r\n#include path-invars\r\n#include circle-invars\r\n#include out-color-fragment\r\n#include circles-fragment\r\n\r\nvoid main() {\r\n#include init-color\r\n#include circle-color-discard-fragment\r\n#include set-out-color\r\n}"], ["semicircleFragment2d", "#version 300 es\r\n// semicircleFragment2d\r\n#include precision\r\n#include path-invars\r\n#include circle-invars\r\n#include out-color-fragment\r\n#include circles-fragment\r\n\r\nvoid main() {\r\n#include init-color\r\n#include semicircle-color-fragment\r\n#include set-out-color\r\n}"], ["semicircleDiscardFragment2d", "#version 300 es\r\n// semicircleDiscardFragment2d\r\n#include precision\r\n#include path-invars\r\n#include circle-invars\r\n#include out-color-fragment\r\n#include circles-fragment\r\n\r\nvoid main() {\r\n#include init-color\r\n#include semicircle-color-discard-fragment\r\n#include set-out-color\r\n}"], ["semicircleWedgeFragment2d", "#version 300 es\r\n// semicircleWedgeFragment2d\r\n#include precision\r\n#include path-invars\r\n#include circle-invars\r\n#include out-color-fragment\r\n#include circles-fragment\r\n\r\nvoid main() {\r\n#include init-color\r\n#include semicircle-color-fragment\r\n#include wedge-color-fragment\r\n#include set-out-color\r\n}"], ["semicircleWedgeDiscardFragment2d", "#version 300 es\r\n// semicircleWedgeDiscardFragment2d\r\n#include precision\r\n#include path-invars\r\n#include circle-invars\r\n#include out-color-fragment\r\n#include circles-fragment\r\n\r\nvoid main() {\r\n#include init-color\r\n#include semicircle-color-discard-fragment\r\n#include wedge-color-discard-fragment\r\n#include set-out-color\r\n}"], ["linepath2d-fragment", "#version 300 es\r\n// linepath2d-fragment\r\n#include precision\r\n#include global-ubo\r\n#include transparent-color\r\n#include path-invars\r\n#include out-color-fragment\r\n#include sdf-consts\r\n#include sdf-line-invars\r\n#include sdf-linepath-fragment\r\n#line 2085\r\n\r\nvoid main() {\r\n  vec4 color = sdfDrawLinePath(\r\n    v_sdfLineParams,\r\n    v_sdfPriorLineParams,\r\n    v_sdfNextLineParams,\r\n    v_strokeColor,\r\n    v_aliasWidth);\r\n\r\n  glFragColor = color;\r\n}"], ["vectorFragment2d", "#version 300 es\r\n// simpleQuadSdfFragment2d\r\n#include precision\r\n#include math-consts\r\n#include global-ubo\r\n#include quad-common\r\n#include quad-invars\r\n#include out-color-fragment\r\n#include vec2\r\n#include line-utils\r\n#include sdf-utils\r\n#line 2447\r\n\r\nvoid calcSlopeIntercept(vec2 p1, vec2 p2, out float slope, out float xIntercept, out float yIntercept) {\r\n  float run = (p2.x - p1.x);\r\n  slope = (p2.y - p1.y) / run;\r\n  slope = mix(slope, 1.0, run == 0.0);\r\n  yIntercept = p1.y - p1.x * slope;\r\n  xIntercept = yIntercept / slope;\r\n}\r\n\r\nvoid calcRiseRunIntercept(vec2 p1, vec2 p2, out float rise, out float run, out float xIntercept, out float yIntercept) {\r\n  rise = (p2.y - p1.y);\r\n  run = (p2.x - p1.x);\r\n  float slope = rise / run;\r\n  slope = mix(slope, 1.0, run == 0.0);\r\n  yIntercept = p1.y - p1.x * slope;\r\n  xIntercept = yIntercept / slope;\r\n}\r\n\r\nfloat planePointSlope(vec2 p, vec2 p1, vec2 p2) {\r\n  float slope, xIntercept, yIntercept;\r\n  calcSlopeIntercept(p1, p2, slope, xIntercept, yIntercept);\r\n  float run = p2.x - p1.x;\r\n  float result = p.y - p1.y - slope * p.x + slope * p1.x;\r\n  // result = mix(result, p.x - p1.x, step(run, 0.0));\r\n  if (run == 0.0) result = p1.x - p.x;\r\n  return result;\r\n}\r\n\r\nfloat sdfPlaneStandard(vec2 p, vec2 p1, vec2 p2) {\r\n  float rise, run, slope, xIntercept, yIntercept;\r\n  calcRiseRunIntercept(p1, p2, rise, run, xIntercept, yIntercept);\r\n  return -(run * p.y - rise * p.x - yIntercept);\r\n}\r\n\r\nfloat sdfPlane(vec2 p, vec2 p1, vec2 p2) {\r\n  return cross(p - p1, p2 - p1);\r\n}\r\n\r\nfloat sdfPlaneNorm(vec2 p, vec2 p1, vec2 p2) {\r\n  return cross(p - p1, normalize(p2 - p1));\r\n}\r\n\r\nfloat sdfPlaneDot(vec2 p, vec2 p1, vec2 p2) {\r\n  vec2 normal = (perpRight(p2 - p1));\r\n  return dot(p, normal);\r\n}\r\n\r\nfloat sdfPlaneDotNorm(vec2 p, vec2 p1, vec2 p2) {\r\n  vec2 normal = normalize(perpRight(p2 - p1));\r\n  return dot(p, normal);\r\n}\r\n\r\n// https://stackoverflow.com/questions/21087065/tangent-to-circle-from-external-point-p\r\nvec4 calcTangents(vec2 center, float radius, vec2 p) {\r\n  // Center at origin and make unit circle.\r\n  vec2 n = (p - center) / radius;\r\n  float xy = dot(n, n);\r\n\r\n  // TODO: Equals check with epsilon.\r\n  if (xy == 1.0) return vec4(p.x, p.y, p.x, p.y); // Point on circle, one tangent.\r\n  if (xy < 1.0) return vec4(0.0, 0.0, 0.0, 0.0);  // Point in circle, no tangents.\r\n\r\n  float d = n.y * sqrt(xy - 1.0);\r\n  vec2 t1 = vec2((n.x - d) / xy, 0.0);\r\n  vec2 t2 = vec2((n.x + d) / xy, 0.0);\r\n\r\n  if (n.y != 0.0) {\r\n    t1.y = center.y + radius * (1.0 - t1.x * n.x) / n.y;\r\n    t2.y = center.y + radius * (1.0 - t2.x * n.x) / n.y;\r\n  } else {\r\n    d = radius * sqrt(1.0 - t1.x * t1.x);\r\n    t1.y = center.y + d;\r\n    t2.y = center.y - d;\r\n  }\r\n\r\n  // Recenter and scale.\r\n  return vec4(center.x + radius * t1.x, t1.y, center.x + radius * t2.x, t2.y);\r\n}\r\n\r\nfloat sdfTripleCircle(vec2 p, vec2 pos, float radius, out float headRegion) {\r\n  float radius2 = radius + radius;\r\n  float leftOffsetX = sqrt(radius2 * radius2 - radius * radius);\r\n  float centerOffsetX = (leftOffsetX - radius) * 0.5;\r\n  vec2 topCenter = pos + vec2(0.0, radius);\r\n  vec2 bottomCenter = pos + vec2(0.0, -radius);\r\n  vec4 tangents = calcTangents(topCenter, radius, bottomCenter);\r\n  vec2 b = tangents.xy;\r\n  vec2 c = tangents.zw;\r\n  float tanHeight = c.y - pos.y;\r\n\r\n  float topCircle = sdfCircle(p, topCenter, radius);\r\n  float bottomCircle = sdfCircle(p, bottomCenter, radius);\r\n  float leftCircle = sdfCircle(p, pos + vec2(-leftOffsetX, 0.0), radius);\r\n  float rightRect = sdfRect(p, vec2(c.x, pos.y - c.y), vec2(pos.x, pos.y + c.y));\r\n  float headRect = sdfRect(p, vec2(c.x, pos.y - c.y), vec2(1.0, pos.y + c.y));\r\n  headRegion = sdfDiff(headRect, leftCircle);\r\n  return sdfDiff(rightRect, leftCircle, topCircle, bottomCircle);\r\n  return rightRect;\r\n  return sdfUnion(leftCircle, topCircle, bottomCircle, rightRect);\r\n  return sdfUnion(leftCircle, topCircle, bottomCircle);\r\n}\r\n\r\nfloat sdfTripleCircle2(vec2 p, vec2 pos, float radius, float radius2, float pct, out float headRegion) {\r\n  float hyp = radius + radius2;\r\n  float leftOffsetX = sqrt(hyp * hyp - radius * radius) * pct;\r\n  float centerOffsetX = (leftOffsetX - radius) * 0.5;\r\n  vec2 topCenter = pos + vec2(0.0, radius);\r\n  vec2 bottomCenter = pos + vec2(0.0, -radius);\r\n  vec2 leftCenter = pos + vec2(-leftOffsetX, 0.0);\r\n  vec2 ab = normalize(topCenter - leftCenter);\r\n  vec2 c = leftCenter + ab * radius2;\r\n  float th = c.y - pos.y;\r\n\r\n  float topCircle = sdfCircle(p, topCenter, radius);\r\n  float bottomCircle = sdfCircle(p, bottomCenter, radius);\r\n  float leftCircle = sdfCircle(p, leftCenter, radius2);\r\n  float leftCircle2 = sdfCircle(p, leftCenter, radius2 + 0.01);\r\n  float rightRect = sdfRect(p, vec2(c.x, pos.y - th), vec2(pos.x, pos.y + th));\r\n  float headRect = sdfRect(p, vec2(c.x, pos.y - th), vec2(pos.x + 1.0, pos.y + th));\r\n  headRegion = sdfDiff(headRect, leftCircle2);\r\n  return sdfDiff(rightRect, leftCircle, topCircle, bottomCircle);\r\n  return sdfUnion(leftCircle, topCircle, bottomCircle);\r\n  return rightRect;\r\n  return sdfUnion(leftCircle, topCircle, bottomCircle, rightRect);\r\n}\r\n\r\nfloat sdfVector(vec2 p, QuadParams sp, out float body, out float head) {\r\n  vec2 bottomLeft = vec2(-0.5, -0.5);\r\n  vec2 topRight = vec2(0.5, 0.5);\r\n  float height = sp.strokeWidth / 2.0;\r\n  float headWidth = 0.25;\r\n  float headStart = topRight.x - headWidth;\r\n  float radius = sp.strokeWidth * 1.2;\r\n  vec2 m = vec2(headStart - radius, 0.0);\r\n  vec2 a = vec2(topRight.x, 0.0);\r\n  vec4 tangents = calcTangents(m, radius, a);\r\n  vec2 b = tangents.xy;\r\n  vec2 c = tangents.zw;\r\n  float leftPlane = bottomLeft.x - p.x;\r\n  float rightPlane = b.x - p.x;\r\n  float bodyRightPlane = p.x - headStart;\r\n  float bodyLine = abs(p.y) - height;\r\n  float s1 = cross(a - p, normalize(b - a));\r\n  float s2 = cross(c - p, normalize(a - c));\r\n  float leftCircle = sdfCircle(p, m, radius);\r\n  float bodyLeftCircle = sdfCircle(p, m, radius - sp.aliasWidth);\r\n  body = sdfIntersect(bodyLine, leftPlane, bodyRightPlane);\r\n  // body = sdfDiff(body, sdfDiff(rightPlane, bodyLeftCircle));\r\n  body = sdfDiff(body, sdfDiff(rightPlane, leftCircle));\r\n  head = sdfDiff(rightPlane, leftCircle, s1, s2);\r\n  return sdfUnion(body, head);\r\n}\r\n\r\nfloat sdfVector2(vec2 p, QuadParams sp, out float body, out float head) {\r\n  float height = sp.strokeWidth * 0.5;\r\n  vec2 centerRight = vec2(0.5, 0.0);\r\n  float radius = height * 8.0;\r\n  float headRegion;\r\n  head = sdfTripleCircle2(p, centerRight, radius, radius * 1.5, 0.95, headRegion);\r\n  body = abs(p.y) - height;\r\n  body = sdfDiff(body, headRegion);\r\n  return sdfUnion(body, head);\r\n}\r\n\r\nvec4 fill(vec2 p, float distance, vec4 fillColor, float antialias) {\r\n  float len = length(p);\r\n  float aliasWidth = fwidth(len) * 2.0;\r\n  aliasWidth = fwidth(len);\r\n  aliasWidth = mix(aliasWidth, 0.0, step(antialias, 0.0));\r\n  float edgeDist = 0.0;\r\n  float pct = smoothstep(edgeDist, aliasWidth, distance);\r\n  pct = smoothstep(edgeDist - aliasWidth, edgeDist + aliasWidth, distance);\r\n  vec4 edgeColor = mix(fillColor, transparent, pct);\r\n  // edgeColor = mix(fillColor, vec4(0.3, 0.3, 0.3, 0.4), pct);\r\n  vec4 color = fillColor;\r\n  // color = mix(color, edgeColor, step(edgeDist, distance));\r\n  color = mix(color, edgeColor, step(edgeDist - aliasWidth, distance));\r\n  // color = mix(color, transparent, step(edgeDist + aliasWidth, distance));\r\n  color = mix(color, transparent, step(0.0, distance) * step(aliasWidth, 0.0));\r\n  return color;\r\n}\r\n\r\nvec4 border(vec2 p, float distance, vec4 fillColor, vec4 strokeColor, float strokeWidth) {\r\n  float len = length(p);\r\n  float aliasWidth = fwidth(len) * 2.0;\r\n  float edgeDist = 0.0;\r\n  float strokeDist = edgeDist - strokeWidth;\r\n  float innerEdgeDist = strokeDist - aliasWidth;\r\n  float pct = smoothstep(edgeDist, aliasWidth, distance);\r\n  vec4 edgeColor = mix(strokeColor, transparent, pct);\r\n  edgeColor = mix(strokeColor, vec4(0.3, 0.3, 0.3, 0.4), pct);\r\n  pct = smoothstep(innerEdgeDist, strokeDist, distance);\r\n  vec4 innerEdgeColor = mix(fillColor, strokeColor, pct);\r\n  vec4 color = fillColor;\r\n  color = mix(color, innerEdgeColor, step(innerEdgeDist, distance));\r\n  color = mix(color, strokeColor, step(strokeDist, distance));\r\n  color = mix(color, edgeColor, step(edgeDist, distance));\r\n  return color;\r\n}\r\n\r\nfloat sdfGrid(vec2 p, QuadParams sp, out float axes, out float major, out float minor) {\r\n  float axisWidth = 0.03 * 0.5;\r\n  float majorWidth = 0.02 * 0.5;\r\n  float minorWidth = 0.01 * 0.5;\r\n  float mjdist = 0.1;\r\n  float mndist = mjdist * 0.5;\r\n  float xMid = abs(p.y);\r\n  float yMid = abs(p.x);\r\n  float xAxis = xMid - axisWidth * 0.5;\r\n  float xMajor = abs(fract(xMid / mjdist)) * mjdist - majorWidth;\r\n  float xMinor = abs(fract(xMid / mndist)) * mndist - minorWidth;\r\n  float yAxis = yMid - axisWidth * 0.5;\r\n  float yMajor = abs(fract(yMid / mjdist)) * mjdist - majorWidth;\r\n  float yMinor = abs(fract(yMid / mndist)) * mndist - minorWidth;\r\n  axes = min(xMid - axisWidth, yMid - axisWidth);\r\n  major = sdfUnion(xMajor, yMajor);\r\n  major = sdfDiff(major, axes);\r\n  minor = sdfUnion(xMinor, yMinor);\r\n  minor = sdfDiff(minor, axes, major);\r\n  return sdfUnion(axes, major, minor);\r\n}\r\n\r\nfloat sdfGrid2(vec2 p, QuadParams sp, out float axes, out float major, out float minor) {\r\n  float axisWidth = 0.03 * 0.5;\r\n  float majorWidth = 0.02 * 0.5;\r\n  float minorWidth = 0.01 * 0.5;\r\n  float mjw = majorWidth;\r\n  float mnw = minorWidth;\r\n  float mjdist = 0.1;\r\n  float mndist = mjdist * 0.5;\r\n  float xMid = abs(p.y);\r\n  float yMid = abs(p.x);\r\n  float major1 = abs(fract(min(xMid - mjw, yMid - mjw) / mjdist)) * mjdist - mjw;\r\n  float major2 = abs(fract(max(xMid - mjw, yMid - mjw) / mjdist)) * mjdist - mjw;\r\n  float minor1 = abs(fract(min(xMid - mnw, yMid - mnw) / mndist)) * mndist - mnw;\r\n  float minor2 = abs(fract(max(xMid - mnw, yMid - mnw) / mndist)) * mndist - mnw;\r\n  axes = min(xMid - axisWidth, yMid - axisWidth);\r\n  major = sdfUnion(major1, major2);\r\n  major = sdfDiff(major, axes);\r\n  minor = sdfUnion(minor1, minor2);\r\n  minor = sdfDiff(minor, axes, major);\r\n  return sdfUnion(axes, major, minor);\r\n}\r\n\r\nfloat sdfLines(vec2 p, QuadParams sp) {\r\n  vec2 p1 = vec2(0.0, 0.0);\r\n  vec2 p2 = vec2(0.5, 0.0);\r\n  float angle = fract(time * 2.0 * 0.04) * TWO_PI;\r\n  vec2 rot = vec2(cos(angle), sin(angle));\r\n  p2 = rotate(p2, rot);\r\n  vec4 temp = vec4(p1, p2);\r\n  // p1 = temp.zw; p2 = temp.xy;\r\n  vec2 norm = normalize(perpRight(p2 - p1));\r\n  float radius = 0.25;\r\n  vec2 c1 = norm * radius;\r\n  float l1;\r\n  // l1 = planePointSlope(p, p1, p2);\r\n  // l1 = sdfPlaneStandard(p, p1, p2);\r\n  l1 = sdfPlane(p, p1, p2);\r\n  l1 = sdfPlaneNorm(p, p1, p2);\r\n  // l1 = sdfPlaneDot(p, p1, p2);\r\n  // l1 = sdfPlaneDotNorm(p, p1, p2);\r\n  float l2 = abs(sdfPlaneNorm(p, c1, p2));\r\n  return sdfUnion(l1, l2, sdfCircle(p, c1, radius));\r\n}\r\n\r\nfloat sdfLerpX(vec2 p, float d1, float d2, float x1, float x2) {\r\n  float w = x2 - x1;\r\n  float t = p.x / w;\r\n  t = t * t * t;\r\n  t = 0.7;\r\n  return mix(d1, d2, t);\r\n}\r\n\r\nfloat sdfTemp(vec2 p, QuadParams sp, out float shape1, out float shape2) {\r\n  float height = sp.strokeWidth * 0.5;\r\n  vec2 centerRight = vec2(0.5, 0.0);\r\n  vec2 p1 = vec2(-0.25, -0.25);\r\n  vec2 p2 = vec2(0.25, 0.25);\r\n  vec2 p3 = vec2(0.4, 0.0);\r\n  p3 = centerRight + vec2(-0.365, 0.0);\r\n  vec2 c1 = (p1 + p2) * 0.5;\r\n  vec2 c2 = vec2(0.05, 0.0);\r\n  // c2 = centerRight;\r\n  float r1 = height * 5.5;\r\n  float s1 = sdfRect(p, p1, p2);\r\n  float circle = sdfCircle(p, c2, r1);\r\n  float l1 = centerRight.x - 0.35 - p.x;\r\n  float l2 = sdfPlaneNorm(p, p3, vec2(c2.x,   height * 0.005));\r\n  float l3 = -sdfPlaneNorm(p, p3, vec2(c2.x, -height * 0.005));\r\n  float s2 = sdfIntersect(l1, l2, l3);\r\n  float bodyLine = abs(p.y) - height;\r\n  // bodyLine = sdfIntersect(bodyLine, -l1);\r\n  float head = sdfLerpX(p, circle, s2, c2.x, centerRight.x);\r\n  float headRegion;\r\n  float tc;\r\n  // tc = sdfTripleCircle(p, centerRight, height * 8.0, headRegion);\r\n  float radius = height * 8.0;\r\n  tc = sdfTripleCircle2(p, centerRight, radius, radius * 1.5, 0.95, headRegion);\r\n  bodyLine = sdfDiff(bodyLine, headRegion);\r\n  shape1 = bodyLine;\r\n  shape2 = tc;\r\n  // shape1 = 10.0;\r\n  return sdfUnion(shape1, shape2);\r\n  return tc;\r\n  return sdfLerpX(p, circle, s2, c2.x, centerRight.x);\r\n  return s2;\r\n  return sdfLerpX(p, s1, circle, c2.x, c1.x);\r\n  return sdfLerpX(p, s1, circle, c1.x, c2.x);\r\n  return sdfUnion(s1, circle);\r\n}\r\n\r\nfloat easeInQuad(float t) { return t * t; }\r\nfloat easeInCubic(float t) { return t * t * t; }\r\nfloat easeInQuartic(float t) { return t * t * t * t; }\r\nfloat easeOutQuad(float t) { t = 1.0 - t; return 1.0 - (t * t); }\r\nfloat easeOutCubic(float t) { t = 1.0 - t; return 1.0 - (t * t * t); }\r\nfloat easeOutQuartic(float t) { t = 1.0 - t; return 1.0 - (t * t * t * t); }\r\n\r\nfloat easeInBack(float t) {\r\n  const float s = 1.70158;\r\n  return t * t * ((s + 1.0) * t - s);\r\n}\r\n\r\nfloat easeInElastic(float t) {\r\n    return t == 0.0 ? 0.0\r\n      : t == 1.0 ? 1.0\r\n      : (0.04 - 0.04 / t) * sin(25.0 * t) + 1.0;\r\n}\r\n\r\nfloat sdfDistToLerpSegment(vec2 p, vec2 a, vec2 b, float dist, float t, float tx, float ty) {\r\n  if (t <= 0.0) return dist;\r\n  if (t >= 1.0) return dist;\r\n\r\n  vec2 normal = perp(b - a);\r\n  normal = normalize(normal);\r\n  a = vec2(mix(a.x, b.x, tx), mix(a.y, b.y, ty));\r\n  float d = dot(normal, a);\r\n  return dot(normal, p) - d;\r\n}\r\n\r\nfloat calcLerpOffset(vec2 a, vec2 b, float t, float tx, float ty) {\r\n  float len = length(b - a);\r\n  vec2 dir = vec2(1.0, 1.0);\r\n  vec2 normal = perpRight(dir);\r\n  normal = normalize(normal);\r\n  vec2 cd = dir * len;\r\n  vec2 p = dir * t;\r\n  vec2 pp = vec2(mix(0.0, cd.x, tx), mix(0.0, cd.y, ty));\r\n  vec2 ofs = pp - p;\r\n  float result = dot(ofs, normal);\r\n  return result;\r\n}\r\n\r\nfloat sdfDistToLerpSegmentA(vec2 p, vec2 a, vec2 b, float dist, float t, float tx, float ty) {\r\n  if (t <= 0.0) return dist;\r\n  if (t >= 1.0) return dist;\r\n\r\n  vec2 normal = perp(b - a);\r\n  normal = normalize(normal);\r\n  float offset = calcLerpOffset(a, b, t, tx, ty);\r\n  a = a + (b - a) * t;\r\n  a = a + normal * offset;\r\n\r\n  float d = dot(normal, a);\r\n  return dot(normal, p) - d;\r\n}\r\n\r\nfloat sdfVector3(vec2 p, QuadParams sp, out float body, out float head) {\r\n  float height = sp.strokeWidth * 0.5;\r\n  vec2 m = vec2(sp.topRight.x, 0.0);\r\n  vec2 p1 = vec2(sp.topRight.x - height * 12.0,  height * 13.0);\r\n  vec2 p2 = vec2(sp.topRight.x - height * 12.0, -height * 13.0);\r\n  float t;\r\n  float l1 = signedDistToSegment(p, p1, m, t);\r\n  l1 = sdfDistToLerpSegment(p, p1, m, l1, t, t, easeOutCubic(t));\r\n  float l2 = signedDistToSegment(p, m, p2, t);\r\n  l2 = sdfDistToLerpSegment(p, m, p2, l2, t, t, easeInCubic(t));\r\n  float l3 = signedDistToSegment(p, p1, p2, t);\r\n  l3 = sdfDistToLerpSegmentA(p, p2, p1, l3, t, easeInQuad(t), t);\r\n  body = abs(p.y) - height;\r\n  head = sdfIntersect(l1, l2, l3);\r\n  body = sdfDiff(body, (sp.topRight.x + p1.x) * 0.5 - p.x);\r\n  return sdfUnion(body, head);\r\n}\r\n\r\n// TODO: Fix.\r\nfloat sdfBezierSegment(vec2 p, vec2 a, vec2 b, vec2 c) {\r\n  float t;\r\n  float dist = signedDistToSegment(p, a, b, t);\r\n\r\n  float t1 = 1.0 - t;\r\n  vec2 pp = t1 * t1 * a + 2.0 * t1 * t * c + t * t * b;\r\n\r\n  vec2 normal = perp(b - a);\r\n  normal = normalize(normal);\r\n  float d = dot(pp, normal);\r\n  float result = (dot(p, normal) - d);\r\n  // float result = (dot(p, normal) - d) / dot(normal, normal);\r\n  result = mix(result, dist, step(t, 0.0));\r\n  result = mix(result, dist, step(1.0, t));\r\n  return result;\r\n}\r\n\r\nfloat sdfDistToLerpSegmentB(vec2 p, vec2 a, vec2 b, float dist, float t, float tx) {\r\n  vec2 ab = b - a;\r\n  vec2 normal = perp(ab);\r\n  vec2 mid = (a + b) * 0.5;\r\n  vec2 e = a + ab * t;\r\n  vec2 pp;\r\n  // t = tx;\r\n\r\n  if (t < 0.5) {\r\n    vec2 c = mid + normal;\r\n    t = t * 2.0;\r\n    float t1 = 1.0 - t;\r\n    pp = t1 * t1 * a + 2.0 * t1 * t * c + t * t * b;\r\n  } else {\r\n    vec2 c = mid + -normal;\r\n    t = (1.0 - t) * 2.0;\r\n    float t1 = 1.0 - t;\r\n    pp = t1 * t1 * a + 2.0 * t1 * t * c + t * t * b;\r\n  }\r\n\r\n  normal = normalize(normal);\r\n  float d = dot(pp, normal);\r\n  float result = (dot(p, normal) - d);\r\n  // float result = (dot(p, normal) - d) / dot(normal, normal);\r\n  result = mix(result, dist, step(t, 0.0));\r\n  result = mix(result, dist, step(1.0, t));\r\n  return result;\r\n}\r\n\r\nfloat sdfBezierSegment(vec2 p, QuadParams sp) {\r\n  float height = sp.strokeWidth * 0.5;\r\n  vec2 m = vec2(sp.topRight.x, 0.0);\r\n  vec2 p1 = vec2(0.0,  0.0);\r\n  vec2 p2 = vec2(0.0, -0.4);\r\n  vec2 p3 = vec2(0.25, (p1.y + p2.y) * 0.01);\r\n  p3 = vec2(0.3, 0.01);\r\n  // p3 = perp(p2 - p1) * 0.5;\r\n  float angle = fract(time * 2.0 * 0.04) * TWO_PI;\r\n  vec2 rot = vec2(cos(angle), sin(angle));\r\n  // p2 = rotate(p2, rot);\r\n  // p3 = rotate(p3, rot);\r\n  float t;\r\n  float l1 = signedDistToSegment(p, p1, m, t);\r\n  l1 = sdfDistToLerpSegment(p, p1, m, l1, t, t, easeOutCubic(t));\r\n  float l2 = signedDistToSegment(p, m, p2, t);\r\n  l2 = sdfDistToLerpSegment(p, m, p2, l2, t, t, easeInCubic(t));\r\n  float l3 = sdfBezierSegment(p, p2, p1, p3);\r\n  l3 = signedDistToSegment(p, p2, p1, t);\r\n  l3 = sdfDistToLerpSegmentB(p, p2, p1, l3, t, easeInQuad(t));\r\n  // l3 = sdfDistToLerpSegmentA(p, p2, p1, l3, t, smoothstep(0.0, 1.0, t), t);\r\n  // l3 = sdfDistToLerpSegmentA(p, p2, p1, l3, t, t, smoothstep(0.0, 1.0, t));\r\n  float bodyLine = abs(p.y) - height;\r\n  float tip = sdfIntersect(l1, l2, l3);\r\n  bodyLine = sdfDiff(bodyLine, (sp.topRight.x + p1.x) * 0.5 - p.x);\r\n  return l3;\r\n  float head = tip;\r\n  return sdfUnion(bodyLine, head);\r\n}\r\n\r\nvoid main() {\r\n  QuadParams sp = sdfToLocal1(v_params);\r\n  vec2 p = sdfPointToLocal1(gl_FragCoord.xy, sp);\r\n\r\n  float body;\r\n  float head;\r\n  float vec = sdfVector(p, sp, body, head);\r\n  vec = sdfVector2(p, sp, body, head);\r\n  vec = sdfVector3(p, sp, body, head);\r\n\r\n  vec4 color;\r\n  float antialias = 1.0;\r\n  vec4 fillColor = mix(sp.strokeColor, sp.fillColor, step(head, body));\r\n  fillColor = mix(fillColor, sp.fillColor, step(head, 0.0));\r\n  color = fill(p, vec, fillColor, antialias);\r\n  // color = border(p, dist, sp.fillColor, sp.strokeColor, 0.01);\r\n\r\n  float axes;\r\n  float major;\r\n  float minor;\r\n  float dist = sdfGrid(p, sp, axes, major, minor);\r\n  // dist = sdfGrid2(p, sp, axes, major, minor);\r\n  fillColor = sp.fillColor;\r\n  fillColor = transparent;\r\n  fillColor = mix(fillColor, sp.fillColor, float(axes <= 0.0));\r\n  fillColor = mix(fillColor, sp.strokeColor, float(major <= 0.0));\r\n  fillColor = mix(fillColor, vec4(0.1, 0.1, 0.1, 1.0), float(minor <= 0.0));\r\n  // color = fill(p, dist, fillColor, 1.0);\r\n  // color = fill(p, dist, sp.fillColor, 1.0);\r\n\r\n  dist = sdfLines(p, sp);\r\n  // color = fill(p, dist, sp.fillColor, 1.0);\r\n  // color = border(p, dist, sp.fillColor, sp.strokeColor, sp.strokeWidth);\r\n\r\n  float s1;\r\n  float s2;\r\n  dist = sdfTemp(p, sp, s1, s2);\r\n  float intersect = sdfIntersect(s1, s2);\r\n  fillColor = mix(sp.strokeColor, sp.fillColor, step(s2, s1));\r\n  fillColor = mix(fillColor, sp.fillColor, step(intersect, 0.0));\r\n  // color = fill(p, dist, fillColor, 1.0);\r\n\r\n  dist = sdfBezierSegment(p, sp);\r\n  // color = fill(p, dist, sp.strokeColor, 1.0);\r\n\r\n  glFragColor = color;\r\n}"]]));
},{"../.fable/fable-library.3.0.0/Map.js":"../JS/.fable/fable-library.3.0.0/Map.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../.fable/fable-library.3.0.0/Set.js":"../JS/.fable/fable-library.3.0.0/Set.js","../.fable/fable-library.3.0.0/RegExp.js":"../JS/.fable/fable-library.3.0.0/RegExp.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js"}],"../JS/core/optionex.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.call = call;
exports.run = run;
exports.runWhenNone = runWhenNone;
exports.execute = execute;
exports.executeDefault = executeDefault;
exports.calcDef = calcDef;

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

function call(f, opt) {
  if (opt == null) {} else {
    var x = (0, _Option.value)(opt);
    f(x);
  }
}

function run(f, opt) {
  if (opt == null) {} else {
    var x = (0, _Option.value)(opt);
    f(x);
  }
}

function runWhenNone(f, opt) {
  if (opt == null) {
    f();
  }
}

function execute(f, opt) {
  if (opt == null) {
    return void 0;
  } else {
    var x = (0, _Option.value)(opt);
    return (0, _Option.some)(f(x));
  }
}

function executeDefault(def, f, opt) {
  if (opt == null) {
    return def;
  } else {
    var x = (0, _Option.value)(opt);
    return f(x);
  }
}

function calcDef(f, opt) {
  if (opt == null) {
    return f();
  } else {
    var x = (0, _Option.value)(opt);
    return x;
  }
}
},{"../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js"}],"../JS/webgl_core/program_utils.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GlUniformInfo$reflection = GlUniformInfo$reflection;
exports.GlUboInfo$reflection = GlUboInfo$reflection;
exports.GlAttributeInfo$reflection = GlAttributeInfo$reflection;
exports.GlShader$reflection = GlShader$reflection;
exports.GlShaderSet$reflection = GlShaderSet$reflection;
exports.GlProgramInfo$reflection = GlProgramInfo$reflection;
exports.GlProgram_getRootName = GlProgram_getRootName;
exports.GlProgram_Utils_createProgramFromShaders = GlProgram_Utils_createProgramFromShaders;
exports.GlProgram_Utils_createProgram = GlProgram_Utils_createProgram;
exports.GlProgram_Utils_getVertexShader = GlProgram_Utils_getVertexShader;
exports.GlProgram_Utils_getFragmentShader = GlProgram_Utils_getFragmentShader;
exports.GlProgram_Utils_deleteVertexShader = GlProgram_Utils_deleteVertexShader;
exports.GlProgram_Utils_deleteFragmentShader = GlProgram_Utils_deleteFragmentShader;
exports.GlProgram_Utils_getShaderSet = GlProgram_Utils_getShaderSet;
exports.GlProgram_Utils_deleteShaderSet = GlProgram_Utils_deleteShaderSet;
exports.GlProgram_createProgramInfo = GlProgram_createProgramInfo;
exports.GlProgram_deleteProgramInfo = GlProgram_deleteProgramInfo;
exports.GlProgram_emptyProgramInfo = GlProgram_emptyProgramInfo;
exports.GlProgram_emptyUniformInfo = GlProgram_emptyUniformInfo;
exports.GlProgram_emptyUboInfo = GlProgram_emptyUboInfo;
exports.GlProgram_emptyAttributeInfo = GlProgram_emptyAttributeInfo;
exports.GlProgram_getUniform = GlProgram_getUniform;
exports.GlProgram_getUbo = GlProgram_getUbo;
exports.GlProgram_getAttribute = GlProgram_getAttribute;
exports.GlProgram_getUniformOrDefault = GlProgram_getUniformOrDefault;
exports.GlProgram_getUboOrDefault = GlProgram_getUboOrDefault;
exports.GlProgram_getAttributeOrDefault = GlProgram_getAttributeOrDefault;
exports.GlProgramInfo = exports.GlShaderSet = exports.GlShader = exports.GlAttributeInfo = exports.GlUboInfo = exports.GlUniformInfo = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _webgl_types = require("./webgl_types.js");

var _Map = require("../.fable/fable-library.3.0.0/Map.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _shader_utils = require("./shader_utils.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _optionex = require("../core/optionex.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var GlUniformInfo = /*#__PURE__*/function (_Record) {
  _inherits(GlUniformInfo, _Record);

  var _super = _createSuper(GlUniformInfo);

  function GlUniformInfo(Index, Name, RootName, Location, Type, TypeInfo, ElementCount, ByteSize, Length, ArrayIndex, StartIndex, IsArray, BlockIndex, Offset, ArrayStride, MatrixStride, IsRowMajor, Children) {
    var _this;

    _classCallCheck(this, GlUniformInfo);

    _this = _super.call(this);
    _this.Index = Index | 0;
    _this.Name = Name;
    _this.RootName = RootName;
    _this.Location = Location;
    _this.Type = Type | 0;
    _this.TypeInfo = TypeInfo;
    _this.ElementCount = ElementCount | 0;
    _this.ByteSize = ByteSize | 0;
    _this.Length = Length | 0;
    _this.ArrayIndex = ArrayIndex | 0;
    _this.StartIndex = StartIndex | 0;
    _this.IsArray = IsArray;
    _this.BlockIndex = BlockIndex | 0;
    _this.Offset = Offset | 0;
    _this.ArrayStride = ArrayStride | 0;
    _this.MatrixStride = MatrixStride | 0;
    _this.IsRowMajor = IsRowMajor;
    _this.Children = Children;
    return _this;
  }

  return GlUniformInfo;
}(_Types.Record);

exports.GlUniformInfo = GlUniformInfo;

function GlUniformInfo$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Core.GlUniformInfo", [], GlUniformInfo, function () {
    return [["Index", _Reflection.int32_type], ["Name", _Reflection.string_type], ["RootName", _Reflection.string_type], ["Location", (0, _Reflection.class_type)("Browser.Types.WebGLUniformLocation")], ["Type", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlType", _Reflection.int32_type, [["Unknown", 0], ["BYTE", 5120], ["SHORT", 5122], ["BOOL", 35670], ["BOOL_VEC2", 35671], ["BOOL_VEC3", 35672], ["BOOL_VEC4", 35673], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["FLOAT_MAT2x3", 35685], ["FLOAT_MAT2", 35674], ["FLOAT_MAT2x4", 35686], ["FLOAT_MAT3", 35675], ["FLOAT_MAT3x2", 35687], ["FLOAT_MAT3x4", 35688], ["FLOAT_MAT4", 35676], ["FLOAT_MAT4x2", 35689], ["FLOAT_MAT4x3", 35690], ["FLOAT_VEC2", 35664], ["FLOAT_VEC3", 35665], ["FLOAT_VEC4", 35666], ["INT", 5124], ["INT_VEC2", 35667], ["INT_VEC3", 35668], ["INT_VEC4", 35669], ["INT_SAMPLER_2D", 36298], ["INT_SAMPLER_2D_ARRAY", 36303], ["INT_SAMPLER_3D", 36299], ["INT_SAMPLER_CUBE", 36300], ["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["UNSIGNED_INT_SAMPLER_2D", 36306], ["UNSIGNED_INT_SAMPLER_2D_ARRAY", 36311], ["UNSIGNED_INT_SAMPLER_3D", 36307], ["UNSIGNED_INT_SAMPLER_CUBE", 36308], ["UNSIGNED_INT_VEC2", 36294], ["UNSIGNED_INT_VEC3", 36295], ["UNSIGNED_INT_VEC4", 36296], ["SAMPLER_2D", 35678], ["SAMPLER_2D_ARRAY", 36289], ["SAMPLER_2D_ARRAY_SHADOW", 36292], ["SAMPLER_2D_SHADOW", 35682], ["SAMPLER_3D", 35679], ["SAMPLER_CUBE", 35680], ["SAMPLER_CUBE_SHADOW", 36293]])], ["TypeInfo", (0, _webgl_types.GlTypeInfo$reflection)()], ["ElementCount", _Reflection.int32_type], ["ByteSize", _Reflection.int32_type], ["Length", _Reflection.int32_type], ["ArrayIndex", _Reflection.int32_type], ["StartIndex", _Reflection.int32_type], ["IsArray", _Reflection.bool_type], ["BlockIndex", _Reflection.int32_type], ["Offset", _Reflection.int32_type], ["ArrayStride", _Reflection.int32_type], ["MatrixStride", _Reflection.int32_type], ["IsRowMajor", _Reflection.bool_type], ["Children", (0, _Reflection.array_type)(GlUniformInfo$reflection())]];
  });
}

var GlUboInfo = /*#__PURE__*/function (_Record2) {
  _inherits(GlUboInfo, _Record2);

  var _super2 = _createSuper(GlUboInfo);

  function GlUboInfo(Name, BlockIndex, ByteSize, InVertexShader, InFragmentShader, Uniforms) {
    var _this2;

    _classCallCheck(this, GlUboInfo);

    _this2 = _super2.call(this);
    _this2.Name = Name;
    _this2.BlockIndex = BlockIndex | 0;
    _this2.ByteSize = ByteSize | 0;
    _this2.InVertexShader = InVertexShader;
    _this2.InFragmentShader = InFragmentShader;
    _this2.Uniforms = Uniforms;
    return _this2;
  }

  return GlUboInfo;
}(_Types.Record);

exports.GlUboInfo = GlUboInfo;

function GlUboInfo$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Core.GlUboInfo", [], GlUboInfo, function () {
    return [["Name", _Reflection.string_type], ["BlockIndex", _Reflection.int32_type], ["ByteSize", _Reflection.int32_type], ["InVertexShader", _Reflection.bool_type], ["InFragmentShader", _Reflection.bool_type], ["Uniforms", (0, _Reflection.list_type)(GlUniformInfo$reflection())]];
  });
}

var GlAttributeInfo = /*#__PURE__*/function (_Record3) {
  _inherits(GlAttributeInfo, _Record3);

  var _super3 = _createSuper(GlAttributeInfo);

  function GlAttributeInfo(Index, Name, Location, Type, TypeInfo) {
    var _this3;

    _classCallCheck(this, GlAttributeInfo);

    _this3 = _super3.call(this);
    _this3.Index = Index | 0;
    _this3.Name = Name;
    _this3.Location = Location | 0;
    _this3.Type = Type | 0;
    _this3.TypeInfo = TypeInfo;
    return _this3;
  }

  return GlAttributeInfo;
}(_Types.Record);

exports.GlAttributeInfo = GlAttributeInfo;

function GlAttributeInfo$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Core.GlAttributeInfo", [], GlAttributeInfo, function () {
    return [["Index", _Reflection.int32_type], ["Name", _Reflection.string_type], ["Location", _Reflection.int32_type], ["Type", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlType", _Reflection.int32_type, [["Unknown", 0], ["BYTE", 5120], ["SHORT", 5122], ["BOOL", 35670], ["BOOL_VEC2", 35671], ["BOOL_VEC3", 35672], ["BOOL_VEC4", 35673], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["FLOAT_MAT2x3", 35685], ["FLOAT_MAT2", 35674], ["FLOAT_MAT2x4", 35686], ["FLOAT_MAT3", 35675], ["FLOAT_MAT3x2", 35687], ["FLOAT_MAT3x4", 35688], ["FLOAT_MAT4", 35676], ["FLOAT_MAT4x2", 35689], ["FLOAT_MAT4x3", 35690], ["FLOAT_VEC2", 35664], ["FLOAT_VEC3", 35665], ["FLOAT_VEC4", 35666], ["INT", 5124], ["INT_VEC2", 35667], ["INT_VEC3", 35668], ["INT_VEC4", 35669], ["INT_SAMPLER_2D", 36298], ["INT_SAMPLER_2D_ARRAY", 36303], ["INT_SAMPLER_3D", 36299], ["INT_SAMPLER_CUBE", 36300], ["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["UNSIGNED_INT_SAMPLER_2D", 36306], ["UNSIGNED_INT_SAMPLER_2D_ARRAY", 36311], ["UNSIGNED_INT_SAMPLER_3D", 36307], ["UNSIGNED_INT_SAMPLER_CUBE", 36308], ["UNSIGNED_INT_VEC2", 36294], ["UNSIGNED_INT_VEC3", 36295], ["UNSIGNED_INT_VEC4", 36296], ["SAMPLER_2D", 35678], ["SAMPLER_2D_ARRAY", 36289], ["SAMPLER_2D_ARRAY_SHADOW", 36292], ["SAMPLER_2D_SHADOW", 35682], ["SAMPLER_3D", 35679], ["SAMPLER_CUBE", 35680], ["SAMPLER_CUBE_SHADOW", 36293]])], ["TypeInfo", (0, _webgl_types.GlTypeInfo$reflection)()]];
  });
}

var GlShader = /*#__PURE__*/function (_Record4) {
  _inherits(GlShader, _Record4);

  var _super4 = _createSuper(GlShader);

  function GlShader(ShaderId, Shader, ReferenceCount) {
    var _this4;

    _classCallCheck(this, GlShader);

    _this4 = _super4.call(this);
    _this4.ShaderId = ShaderId;
    _this4.Shader = Shader;
    _this4.ReferenceCount = ReferenceCount | 0;
    return _this4;
  }

  return GlShader;
}(_Types.Record);

exports.GlShader = GlShader;

function GlShader$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Core.GlShader", [], GlShader, function () {
    return [["ShaderId", _Reflection.string_type], ["Shader", (0, _Reflection.class_type)("Browser.Types.WebGLShader")], ["ReferenceCount", _Reflection.int32_type]];
  });
}

var GlShaderSet = /*#__PURE__*/function (_Record5) {
  _inherits(GlShaderSet, _Record5);

  var _super5 = _createSuper(GlShaderSet);

  function GlShaderSet(VertexShaderId, FragmentShaderId, VertexShader, FragmentShader, Uniforms, Ubos, Attributes, ReferenceCount) {
    var _this5;

    _classCallCheck(this, GlShaderSet);

    _this5 = _super5.call(this);
    _this5.VertexShaderId = VertexShaderId;
    _this5.FragmentShaderId = FragmentShaderId;
    _this5.VertexShader = VertexShader;
    _this5.FragmentShader = FragmentShader;
    _this5.Uniforms = Uniforms;
    _this5.Ubos = Ubos;
    _this5.Attributes = Attributes;
    _this5.ReferenceCount = ReferenceCount | 0;
    return _this5;
  }

  return GlShaderSet;
}(_Types.Record);

exports.GlShaderSet = GlShaderSet;

function GlShaderSet$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Core.GlShaderSet", [], GlShaderSet, function () {
    return [["VertexShaderId", _Reflection.string_type], ["FragmentShaderId", _Reflection.string_type], ["VertexShader", GlShader$reflection()], ["FragmentShader", GlShader$reflection()], ["Uniforms", (0, _Reflection.list_type)(GlUniformInfo$reflection())], ["Ubos", (0, _Reflection.list_type)(GlUboInfo$reflection())], ["Attributes", (0, _Reflection.list_type)(GlAttributeInfo$reflection())], ["ReferenceCount", _Reflection.int32_type]];
  });
}

var GlProgramInfo = /*#__PURE__*/function (_Record6) {
  _inherits(GlProgramInfo, _Record6);

  var _super6 = _createSuper(GlProgramInfo);

  function GlProgramInfo(Gl, Program, ShaderSet, Uniforms, Ubos, Attributes) {
    var _this6;

    _classCallCheck(this, GlProgramInfo);

    _this6 = _super6.call(this);
    _this6.Gl = Gl;
    _this6.Program = Program;
    _this6.ShaderSet = ShaderSet;
    _this6.Uniforms = Uniforms;
    _this6.Ubos = Ubos;
    _this6.Attributes = Attributes;
    return _this6;
  }

  return GlProgramInfo;
}(_Types.Record);

exports.GlProgramInfo = GlProgramInfo;

function GlProgramInfo$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Core.GlProgramInfo", [], GlProgramInfo, function () {
    return [["Gl", (0, _Reflection.class_type)("Browser.Types.WebGLRenderingContext")], ["Program", (0, _Reflection.class_type)("Browser.Types.WebGLProgram")], ["ShaderSet", GlShaderSet$reflection()], ["Uniforms", (0, _Reflection.list_type)(GlUniformInfo$reflection())], ["Ubos", (0, _Reflection.list_type)(GlUboInfo$reflection())], ["Attributes", (0, _Reflection.list_type)(GlAttributeInfo$reflection())]];
  });
}

var GlProgram__emptyProgramInfo = void 0;
var GlProgram_vertexShaders = (0, _Map.empty)();
var GlProgram_fragmentShaders = (0, _Map.empty)();
var GlProgram_shaderSets = (0, _Map.empty)();

function GlProgram_getRootName(name) {
  var matchValue = name.indexOf("[") | 0;

  if (matchValue === -1) {
    return name;
  } else {
    var index = matchValue | 0;
    return name.slice(0, index - 1 + 1);
  }
}

function GlProgram_Utils_createShaderSetKey(vertexId, fragmentId) {
  return (0, _String.toText)((0, _String.interpolate)("%P()_%P()", [vertexId, fragmentId]));
}

function GlProgram_Utils_createProgramFromShaders(gl, vertexShader, fragmentShader) {
  var program = gl.createProgram();
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);
  gl.linkProgram(program);
  var success = gl.getProgramParameter(program, gl.LINK_STATUS);

  if (success) {
    return program;
  } else {
    var msg = gl.getProgramInfoLog(program);
    gl.deleteProgram(program);
    var exn = new Error(msg);
    throw exn;
  }
}

function GlProgram_Utils_createProgram(gl, vertexSource, fragmentSource) {
  var vertexShader = (0, _shader_utils.WebglShaderUtils_createShader)(gl, gl.VERTEX_SHADER, vertexSource);
  var fragmentShader = (0, _shader_utils.WebglShaderUtils_createShader)(gl, gl.FRAGMENT_SHADER, fragmentSource);
  return GlProgram_Utils_createProgramFromShaders(gl, vertexShader, fragmentShader);
}

function GlProgram_Utils_createUniformInfos(gl, program) {
  var count = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);
  var Indices = Int32Array.from((0, _Seq.rangeNumber)(0, 1, count - 1));

  var getValues = function getValues(pname) {
    return gl.getActiveUniforms(program, Indices, pname);
  };

  var blockIndices = getValues(35386);
  var offsets = getValues(35387);
  var arrayStrides = getValues(35388);
  var matrixStrides = getValues(35389);
  var rowMajors = getValues(35390);

  var createInfo = function createInfo(index) {
    var unitVar;
    var uniform = gl.getActiveUniform(program, index);
    var uniformType = ~~uniform.type | 0;
    var ti = (0, _webgl_types.getGlTypeInfo)(uniformType);
    var isArray = uniform.size > 1;
    var blockIndex = blockIndices[index] | 0;
    var arrayStride = arrayStrides[index] | 0;
    var matrixStride = matrixStrides[index] | 0;
    var length = ~~uniform.size | 0;
    var byteSize = (blockIndex < 0 ? ti.ByteSize * length : isArray ? arrayStride * length : ti.IsMatrix ? ti.MatrixColCount * matrixStride : ti.ByteSize) | 0;
    return new GlUniformInfo(index, uniform.name, GlProgram_getRootName(uniform.name), gl.getUniformLocation(program, uniform.name), uniformType, ti, ti.ElementCount, byteSize, length, -1, -1, isArray, blockIndex, offsets[index], arrayStride, matrixStride, (unitVar = rowMajors[index], false), []);
  };

  var createMatrixColumn = function createMatrixColumn(info, index_1) {
    var matchValue, offset;
    var name = (0, _String.toText)((0, _String.interpolate)("%P()Col%P()", [info.RootName, index_1]));
    var ti_1 = info.TypeInfo;
    var bti = (0, _webgl_types.getGlTypeInfo)(info.TypeInfo.BaseType);
    return new GlUniformInfo(info.Index, name, info.RootName, gl.getUniformLocation(program, name), ti_1.BaseType, bti, ti_1.MatrixRowCount, bti.ByteSize * ti_1.MatrixRowCount, 1, index_1, index_1 * ti_1.MatrixRowCount, false, info.BlockIndex, (matchValue = info.Offset | 0, matchValue === -1 ? info.Offset : (offset = matchValue | 0, offset + info.MatrixStride * index_1)), info.ArrayStride, info.MatrixStride, info.IsRowMajor, info.Children);
  };

  var createMatrixColumns = function createMatrixColumns(info_1) {
    var array = Int32Array.from((0, _Seq.rangeNumber)(0, 1, info_1.TypeInfo.MatrixColCount - 1));
    return (0, _Array.map)((0, _Util.partialApply)(1, createMatrixColumn, [info_1]), array);
  };

  var addMatrixChildren = function addMatrixChildren(info_2) {
    if (info_2.TypeInfo.IsMatrix) {
      return new GlUniformInfo(info_2.Index, info_2.Name, info_2.RootName, info_2.Location, info_2.Type, info_2.TypeInfo, info_2.ElementCount, info_2.ByteSize, info_2.Length, info_2.ArrayIndex, info_2.StartIndex, info_2.IsArray, info_2.BlockIndex, info_2.Offset, info_2.ArrayStride, info_2.MatrixStride, info_2.IsRowMajor, createMatrixColumns(info_2));
    } else {
      return info_2;
    }
  };

  var createArrayElement = function createArrayElement(info_3, index_2) {
    var matchValue_1, offset_1;
    var name_1 = (0, _String.toText)((0, _String.interpolate)("%P()[%P()]", [info_3.RootName, index_2]));
    var ti_2 = info_3.TypeInfo;
    var bti_1 = (0, _webgl_types.getGlTypeInfo)(info_3.TypeInfo.BaseType);
    return new GlUniformInfo(info_3.Index, name_1, info_3.RootName, gl.getUniformLocation(program, name_1), ti_2.BaseType, bti_1, info_3.ElementCount, info_3.TypeInfo.ByteSize, 1, index_2, index_2 * info_3.ElementCount, false, info_3.BlockIndex, (matchValue_1 = info_3.Offset | 0, matchValue_1 === -1 ? info_3.Offset : (offset_1 = matchValue_1 | 0, offset_1 + info_3.ArrayStride * index_2)), info_3.ArrayStride, info_3.MatrixStride, info_3.IsRowMajor, info_3.Children);
  };

  var adjustStartIndices = function adjustStartIndices(info_4) {
    var loop = function loop(parent, info_5) {
      var parentStartIndex = (0, _optionex.executeDefault)(0, function (p) {
        return p.StartIndex;
      }, parent) | 0;
      var info_6 = new GlUniformInfo(info_5.Index, info_5.Name, info_5.RootName, info_5.Location, info_5.Type, info_5.TypeInfo, info_5.ElementCount, info_5.ByteSize, info_5.Length, info_5.ArrayIndex, info_5.ArrayIndex * info_5.ElementCount + parentStartIndex, info_5.IsArray, info_5.BlockIndex, info_5.Offset, info_5.ArrayStride, info_5.MatrixStride, info_5.IsRowMajor, info_5.Children);

      if (info_6.Children.length > 0) {
        var parent_1 = info_6;
        return new GlUniformInfo(info_6.Index, info_6.Name, info_6.RootName, info_6.Location, info_6.Type, info_6.TypeInfo, info_6.ElementCount, info_6.ByteSize, info_6.Length, info_6.ArrayIndex, info_6.StartIndex, info_6.IsArray, info_6.BlockIndex, info_6.Offset, info_6.ArrayStride, info_6.MatrixStride, info_6.IsRowMajor, (0, _Array.map)((0, _Util.partialApply)(1, loop, [parent_1]), info_6.Children));
      } else {
        return info_6;
      }
    };

    return loop(void 0, info_4);
  };

  var adjustOffsets = function adjustOffsets(info_7) {
    var adjustChild = function adjustChild(root, indexer, info_8) {
      return new GlUniformInfo(info_8.Index, info_8.Name, info_8.RootName, info_8.Location, info_8.Type, info_8.TypeInfo, info_8.ElementCount, info_8.ByteSize, info_8.Length, info_8.ArrayIndex, info_8.StartIndex, info_8.IsArray, info_8.BlockIndex, info_8.Offset - root.Offset + indexer.Offset, info_8.ArrayStride, info_8.MatrixStride, info_8.IsRowMajor, (0, _Array.map)((0, _Util.partialApply)(1, adjustChild, [root, indexer]), info_8.Children));
    };

    var adjustIndexer = function adjustIndexer(root_1, indexer_1) {
      return new GlUniformInfo(indexer_1.Index, indexer_1.Name, indexer_1.RootName, indexer_1.Location, indexer_1.Type, indexer_1.TypeInfo, indexer_1.ElementCount, indexer_1.ByteSize, indexer_1.Length, indexer_1.ArrayIndex, indexer_1.StartIndex, indexer_1.IsArray, indexer_1.BlockIndex, indexer_1.Offset, indexer_1.ArrayStride, indexer_1.MatrixStride, indexer_1.IsRowMajor, (0, _Array.map)((0, _Util.partialApply)(1, adjustChild, [root_1, indexer_1]), indexer_1.Children));
    };

    return new GlUniformInfo(info_7.Index, info_7.Name, info_7.RootName, info_7.Location, info_7.Type, info_7.TypeInfo, info_7.ElementCount, info_7.ByteSize, info_7.Length, info_7.ArrayIndex, info_7.StartIndex, info_7.IsArray, info_7.BlockIndex, info_7.Offset, info_7.ArrayStride, info_7.MatrixStride, info_7.IsRowMajor, (0, _Array.map)((0, _Util.partialApply)(1, adjustIndexer, [info_7]), info_7.Children));
  };

  var createArrayElements = function createArrayElements(info_9) {
    var array_5 = Int32Array.from((0, _Seq.rangeNumber)(0, 1, info_9.Length - 1));
    return (0, _Array.map)((0, _Util.partialApply)(1, createArrayElement, [info_9]), array_5);
  };

  var addArrayChildren = function addArrayChildren(info_10) {
    var info_11 = new GlUniformInfo(info_10.Index, info_10.Name, info_10.RootName, info_10.Location, info_10.Type, info_10.TypeInfo, info_10.ElementCount, info_10.ByteSize, info_10.Length, 0, 0, info_10.IsArray, info_10.BlockIndex, info_10.Offset, info_10.ArrayStride, info_10.MatrixStride, info_10.IsRowMajor, info_10.Children);

    if (info_11.IsArray) {
      return adjustOffsets(adjustStartIndices(new GlUniformInfo(info_11.Index, info_11.Name, info_11.RootName, info_11.Location, info_11.Type, info_11.TypeInfo, info_11.ElementCount, info_11.ByteSize, info_11.Length, info_11.ArrayIndex, info_11.StartIndex, info_11.IsArray, info_11.BlockIndex, info_11.Offset, info_11.ArrayStride, info_11.MatrixStride, info_11.IsRowMajor, createArrayElements(info_11))));
    } else {
      return info_11;
    }
  };

  return (0, _Array.map)(function (arg_1) {
    return addArrayChildren(addMatrixChildren(createInfo(arg_1)));
  }, Indices);
}

function GlProgram_Utils_getUboInfos(gl, program, uniforms) {
  var createInfo = function createInfo(i) {
    var getParam = function getParam(pname) {
      return gl.getActiveUniformBlockParameter(program, i, pname);
    };

    return new GlUboInfo(gl.getActiveUniformBlockName(program, i), i, getParam(35392), getParam(35396), getParam(35398), (0, _List.ofArray)(uniforms.filter(function (x) {
      return x.BlockIndex === i;
    })));
  };

  var loop = function loop(ubos_mut, i_1_mut) {
    loop: while (true) {
      var ubos = ubos_mut,
          i_1 = i_1_mut;

      if (i_1 === 0) {
        return ubos;
      } else {
        var i_2 = i_1 | 0;
        ubos_mut = (0, _List.cons)(createInfo(i_2 - 1), ubos);
        i_1_mut = i_2 - 1;
        continue loop;
      }

      break;
    }
  };

  var count = gl.getProgramParameter(program, 35382);
  return loop((0, _List.empty)(), count);
}

function GlProgram_Utils_getAttributeInfos(gl, program) {
  var createInfo = function createInfo(i) {
    var attrib = gl.getActiveAttrib(program, i);
    var attributeType = ~~attrib.type | 0;
    return new GlAttributeInfo(~~i, attrib.name, ~~gl.getAttribLocation(program, attrib.name), attributeType, (0, _webgl_types.getGlTypeInfo)(attributeType));
  };

  var count = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);
  return (0, _List.where)(function (info) {
    return !(info.Name.indexOf("gl_") === 0);
  }, (0, _List.map)(createInfo, (0, _List.ofSeq)((0, _Seq.rangeNumber)(0, 1, count - 1))));
}

function GlProgram_Utils_getVertexShader(gl, shaderId) {
  var matchValue = (0, _Map.tryFind)(shaderId, GlProgram_vertexShaders);

  if (matchValue == null) {
    var source = (0, _shader_utils.WebglShaderUtils_getVertexShaderSource)(shaderId);
    var shader_1 = new GlShader(shaderId, (0, _shader_utils.WebglShaderUtils_createShader)(gl, gl.VERTEX_SHADER, source), 0);
    GlProgram_vertexShaders = (0, _Map.FSharpMap__Add)(GlProgram_vertexShaders, shaderId, shader_1);
    return shader_1;
  } else {
    var shader = matchValue;
    return shader;
  }
}

function GlProgram_Utils_getFragmentShader(gl, shaderId) {
  var matchValue = (0, _Map.tryFind)(shaderId, GlProgram_fragmentShaders);

  if (matchValue == null) {
    var source = (0, _shader_utils.WebglShaderUtils_getFragmentShaderSource)(shaderId);
    var shader_1 = new GlShader(shaderId, (0, _shader_utils.WebglShaderUtils_createShader)(gl, gl.FRAGMENT_SHADER, source), 0);
    GlProgram_fragmentShaders = (0, _Map.FSharpMap__Add)(GlProgram_fragmentShaders, shaderId, shader_1);
    return shader_1;
  } else {
    var shader = matchValue;
    return shader;
  }
}

function GlProgram_Utils_deleteVertexShader(gl, shader) {
  shader.ReferenceCount = shader.ReferenceCount - 1;

  if (shader.ReferenceCount <= 0) {
    GlProgram_vertexShaders = (0, _Map.FSharpMap__Remove)(GlProgram_vertexShaders, shader.ShaderId);
    gl.deleteShader(shader.Shader);
  }
}

function GlProgram_Utils_deleteFragmentShader(gl, shader) {
  shader.ReferenceCount = shader.ReferenceCount - 1;

  if (shader.ReferenceCount <= 0) {
    GlProgram_fragmentShaders = (0, _Map.FSharpMap__Remove)(GlProgram_fragmentShaders, shader.ShaderId);
    gl.deleteShader(shader.Shader);
  }
}

function GlProgram_Utils_getShaderSet(gl, vertexId, fragmentId) {
  var key = GlProgram_Utils_createShaderSetKey(vertexId, fragmentId);
  var matchValue = (0, _Map.tryFind)(key, GlProgram_shaderSets);

  if (matchValue == null) {
    var vertex = GlProgram_Utils_getVertexShader(gl, vertexId);
    var fragment = GlProgram_Utils_getFragmentShader(gl, fragmentId);
    var program = GlProgram_Utils_createProgramFromShaders(gl, vertex.Shader, fragment.Shader);
    var uniforms = GlProgram_Utils_createUniformInfos(gl, program);
    var shaderSet_1 = new GlShaderSet(vertexId, fragmentId, vertex, fragment, (0, _List.ofArray)(uniforms), GlProgram_Utils_getUboInfos(gl, program, uniforms), GlProgram_Utils_getAttributeInfos(gl, program), 1);
    gl.deleteProgram(program);
    GlProgram_shaderSets = (0, _Map.FSharpMap__Add)(GlProgram_shaderSets, key, shaderSet_1);
    return shaderSet_1;
  } else {
    var shaderSet = matchValue;
    shaderSet.ReferenceCount = shaderSet.ReferenceCount + 1;
    return shaderSet;
  }
}

function GlProgram_Utils_deleteShaderSet(gl, shaderSet) {
  shaderSet.ReferenceCount = shaderSet.ReferenceCount - 1;

  if (shaderSet.ReferenceCount <= 0) {
    GlProgram_Utils_deleteVertexShader(gl, shaderSet.VertexShader);
    GlProgram_Utils_deleteFragmentShader(gl, shaderSet.FragmentShader);
    var key = GlProgram_Utils_createShaderSetKey(shaderSet.VertexShaderId, shaderSet.FragmentShaderId);
    GlProgram_shaderSets = (0, _Map.FSharpMap__Remove)(GlProgram_shaderSets, key);
  }
}

function GlProgram_createProgramInfo(gl, vertexId, fragmentId) {
  var updateUniformLocation = function updateUniformLocation(program, uniform) {
    return new GlUniformInfo(uniform.Index, uniform.Name, uniform.RootName, gl.getUniformLocation(program, uniform.Name), uniform.Type, uniform.TypeInfo, uniform.ElementCount, uniform.ByteSize, uniform.Length, uniform.ArrayIndex, uniform.StartIndex, uniform.IsArray, uniform.BlockIndex, uniform.Offset, uniform.ArrayStride, uniform.MatrixStride, uniform.IsRowMajor, (0, _Array.map)((0, _Util.partialApply)(1, updateUniformLocation, [program]), uniform.Children));
  };

  var updateUboUniform = function updateUboUniform(uniforms, ubo) {
    return new GlUboInfo(ubo.Name, ubo.BlockIndex, ubo.ByteSize, ubo.InVertexShader, ubo.InFragmentShader, (0, _List.filter)(function (x) {
      return x.BlockIndex === ubo.BlockIndex;
    }, uniforms));
  };

  var updateAttributeLocation = function updateAttributeLocation(program_1, attribute) {
    return new GlAttributeInfo(attribute.Index, attribute.Name, ~~gl.getAttribLocation(program_1, attribute.Name), attribute.Type, attribute.TypeInfo);
  };

  var vertexSource = (0, _shader_utils.WebglShaderUtils_getVertexShaderSource)(vertexId);
  var fragmentSource = (0, _shader_utils.WebglShaderUtils_getFragmentShaderSource)(fragmentId);
  var program_2 = GlProgram_Utils_createProgram(gl, vertexSource, fragmentSource);
  var shaderSet = GlProgram_Utils_getShaderSet(gl, vertexId, fragmentId);
  shaderSet.VertexShader.ReferenceCount = shaderSet.VertexShader.ReferenceCount + 1;
  shaderSet.FragmentShader.ReferenceCount = shaderSet.FragmentShader.ReferenceCount + 1;
  var uniforms_1 = (0, _List.map)((0, _Util.partialApply)(1, updateUniformLocation, [program_2]), shaderSet.Uniforms);
  return new GlProgramInfo(gl, program_2, shaderSet, (0, _List.filter)(function (u) {
    return u.BlockIndex < 0;
  }, uniforms_1), (0, _List.map)((0, _Util.partialApply)(1, updateUboUniform, [uniforms_1]), shaderSet.Ubos), (0, _List.map)((0, _Util.partialApply)(1, updateAttributeLocation, [program_2]), shaderSet.Attributes));
}

function GlProgram_deleteProgramInfo(info) {
  var isEmpty;

  if (GlProgram__emptyProgramInfo != null) {
    var empty = GlProgram__emptyProgramInfo;
    isEmpty = (0, _Util.equalsSafe)(info, empty);
  } else {
    isEmpty = false;
  }

  if (!isEmpty) {
    GlProgram_Utils_deleteShaderSet(info.Gl, info.ShaderSet);
    info.Gl.deleteProgram(info.Program);
  }
}

function GlProgram_initEmptyProgramInfo(gl) {
  var programInfo = GlProgram_createProgramInfo(gl, "emptyVertex", "emptyFragment");
  GlProgram__emptyProgramInfo = programInfo;
  return programInfo;
}

function GlProgram_emptyProgramInfo(gl) {
  if (GlProgram__emptyProgramInfo == null) {
    return GlProgram_initEmptyProgramInfo(gl);
  } else {
    var programInfo = GlProgram__emptyProgramInfo;
    return programInfo;
  }
}

function GlProgram_emptyUniformInfo(name) {
  return new GlUniformInfo(-1, name, GlProgram_getRootName(name), null, 0, (0, _webgl_types.getGlTypeInfo)(5126), -1, -1, -1, -1, -1, false, -1, -1, -1, -1, false, []);
}

function GlProgram_emptyUboInfo(name) {
  return new GlUboInfo(name, -1, -1, false, false, (0, _List.empty)());
}

function GlProgram_emptyAttributeInfo(name) {
  return new GlAttributeInfo(-1, name, -1, 0, (0, _webgl_types.getGlTypeInfo)(5126));
}

function GlProgram_allUniforms(info) {
  return (0, _Seq.delay)(function () {
    return (0, _Seq.append)(info.Uniforms, (0, _Seq.delay)(function () {
      return (0, _Seq.collect)(function (ubo) {
        return ubo.Uniforms;
      }, info.Ubos);
    }));
  });
}

function GlProgram_getUniform(name, info) {
  return (0, _Seq.tryFind)(function (i) {
    return i.Name === name;
  }, GlProgram_allUniforms(info));
}

function GlProgram_getUbo(name, info) {
  return (0, _List.tryFind)(function (i) {
    return i.Name === name;
  }, info.Ubos);
}

function GlProgram_getAttribute(name, info) {
  return (0, _List.tryFind)(function (i) {
    return i.Name === name;
  }, info.Attributes);
}

function GlProgram_getUniformOrDefault(name, info) {
  var matchValue = GlProgram_getUniform(name, info);

  if (matchValue == null) {
    return GlProgram_emptyUniformInfo(name);
  } else {
    var result = matchValue;
    return result;
  }
}

function GlProgram_getUboOrDefault(name, info) {
  var matchValue = GlProgram_getUbo(name, info);

  if (matchValue == null) {
    return GlProgram_emptyUboInfo(name);
  } else {
    var result = matchValue;
    return result;
  }
}

function GlProgram_getAttributeOrDefault(name, info) {
  var matchValue = GlProgram_getAttribute(name, info);

  if (matchValue == null) {
    return GlProgram_emptyAttributeInfo(name);
  } else {
    var result = matchValue;
    return result;
  }
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./webgl_types.js":"../JS/webgl_core/webgl_types.js","../.fable/fable-library.3.0.0/Map.js":"../JS/.fable/fable-library.3.0.0/Map.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","./shader_utils.js":"../JS/webgl_core/shader_utils.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../core/optionex.js":"../JS/core/optionex.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js"}],"../JS/webgl_core/webgl_browser_types.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GlCommon_getEmptyBuffer = GlCommon_getEmptyBuffer;
exports.GlCommon_useProgram = GlCommon_useProgram;
exports.GlCommon_getUniformBlockIndex = GlCommon_getUniformBlockIndex;
exports.GlCommon_uniformBlockBinding = GlCommon_uniformBlockBinding;
exports.GlCommon_bindVertexArray = GlCommon_bindVertexArray;
exports.GlCommon_bindBuffer = GlCommon_bindBuffer;
exports.GlCommon_bindBufferBase = GlCommon_bindBufferBase;
exports.GlCommon_bufferData = GlCommon_bufferData;
exports.GlCommon_bufferSubData = GlCommon_bufferSubData;
exports.GlCommon_enableVertexAttribArray = GlCommon_enableVertexAttribArray;
exports.GlCommon_vertexAttribPointer = GlCommon_vertexAttribPointer;
exports.GlCommon_vertexAttribDivisor = GlCommon_vertexAttribDivisor;
exports.GlCommon_drawArrays = GlCommon_drawArrays;
exports.GlCommon_drawElements = GlCommon_drawElements;
exports.GlCommon_drawArraysInstanced = GlCommon_drawArraysInstanced;
exports.GlCommon_uniform1i = GlCommon_uniform1i;
exports.GlCommon_uniform2i = GlCommon_uniform2i;
exports.GlCommon_uniform3i = GlCommon_uniform3i;
exports.GlCommon_uniform4i = GlCommon_uniform4i;
exports.GlCommon_uniform1ui = GlCommon_uniform1ui;
exports.GlCommon_uniform2ui = GlCommon_uniform2ui;
exports.GlCommon_uniform3ui = GlCommon_uniform3ui;
exports.GlCommon_uniform4ui = GlCommon_uniform4ui;
exports.GlCommon_uniform1f = GlCommon_uniform1f;
exports.GlCommon_uniform2f = GlCommon_uniform2f;
exports.GlCommon_uniform3f = GlCommon_uniform3f;
exports.GlCommon_uniform4f = GlCommon_uniform4f;
exports.GlCommon_uniform1iv = GlCommon_uniform1iv;
exports.GlCommon_uniform2iv = GlCommon_uniform2iv;
exports.GlCommon_uniform3iv = GlCommon_uniform3iv;
exports.GlCommon_uniform4iv = GlCommon_uniform4iv;
exports.GlCommon_uniform1uiv = GlCommon_uniform1uiv;
exports.GlCommon_uniform2uiv = GlCommon_uniform2uiv;
exports.GlCommon_uniform3uiv = GlCommon_uniform3uiv;
exports.GlCommon_uniform4uiv = GlCommon_uniform4uiv;
exports.GlCommon_uniform1fv = GlCommon_uniform1fv;
exports.GlCommon_uniform2fv = GlCommon_uniform2fv;
exports.GlCommon_uniform3fv = GlCommon_uniform3fv;
exports.GlCommon_uniform4fv = GlCommon_uniform4fv;
exports.GlCommon_uniformMatrix2fv = GlCommon_uniformMatrix2fv;
exports.GlCommon_uniformMatrix3fv = GlCommon_uniformMatrix3fv;
exports.GlCommon_uniformMatrix4fv = GlCommon_uniformMatrix4fv;
exports.GlCommon_uniformMatrix2x3fv = GlCommon_uniformMatrix2x3fv;
exports.GlCommon_uniformMatrix2x4fv = GlCommon_uniformMatrix2x4fv;
exports.GlCommon_uniformMatrix3x2fv = GlCommon_uniformMatrix3x2fv;
exports.GlCommon_uniformMatrix3x4fv = GlCommon_uniformMatrix3x4fv;
exports.GlCommon_uniformMatrix4x2fv = GlCommon_uniformMatrix4x2fv;
exports.GlCommon_uniformMatrix4x3fv = GlCommon_uniformMatrix4x3fv;
exports.GlCommon_enable = GlCommon_enable;
exports.GlCommon_disable = GlCommon_disable;
exports.GlCommon_cullFace = GlCommon_cullFace;
exports.GlCommon_blendColor = GlCommon_blendColor;
exports.GlCommon_blendFunc = GlCommon_blendFunc;
exports.GlCommon_blendFuncSeparate = GlCommon_blendFuncSeparate;
exports.GlCommon_blendEquation = GlCommon_blendEquation;
exports.GlCommon_blendEquationSeparate = GlCommon_blendEquationSeparate;
exports.GlCommon_texImage2DData = GlCommon_texImage2DData;
exports.GlCommon_texImage2DImage = GlCommon_texImage2DImage;
exports.GlCommon_texImage2DCanvas = GlCommon_texImage2DCanvas;
exports.GlCommon_texImage2DVideo = GlCommon_texImage2DVideo;
exports.GlCommon_texImage2DBitmap = GlCommon_texImage2DBitmap;
exports.GlCommon_texImage2D = GlCommon_texImage2D;
exports.GlCommon_texImage2DCanvas2 = GlCommon_texImage2DCanvas2;
exports.GlCommon_texImage2DImage2 = GlCommon_texImage2DImage2;
exports.GlCommon_texImage2DVideo2 = GlCommon_texImage2DVideo2;
exports.GlCommon_texImage2DBitmap2 = GlCommon_texImage2DBitmap2;
exports.GlCommon_texImage2DImageData2 = GlCommon_texImage2DImageData2;
exports.GlCommon_texImage2DData2 = GlCommon_texImage2DData2;

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _utils = require("../core/utils.js");

var _webgl_types = require("./webgl_types.js");

var _typedarray_utils = require("../js/typedarray_utils.js");

var GlCommon_emptyWebGLBuffer = null;

function GlCommon_getEmptyBuffer(gl) {
  if (GlCommon_emptyWebGLBuffer == null) {
    GlCommon_emptyWebGLBuffer = gl.createBuffer();
  }

  return GlCommon_emptyWebGLBuffer;
}

function GlCommon_useProgram(gl, program) {
  gl.useProgram(program);
}

function GlCommon_getUniformBlockIndex(gl, program, blockName) {
  return ~~gl.getUniformBlockIndex(program, blockName);
}

function GlCommon_uniformBlockBinding(gl, program, blockIndex, bufferIndex) {
  gl.uniformBlockBinding(program, blockIndex, bufferIndex);
}

function GlCommon_bindVertexArray(gl, vao) {
  gl.bindVertexArray(vao);
}

function GlCommon_bindBuffer(gl, target, buffer) {
  gl.bindBuffer(target, buffer);
}

function GlCommon_bindBufferBase(gl, target, location, buffer) {
  gl.bindBufferBase(target, location, buffer);
}

function GlCommon_bufferData(gl, target, data, usage) {
  gl.bufferData(target, (0, _typedarray_utils.bufferView3)(data), usage);
}

function GlCommon_bufferSubData(gl, target, dstByteOffset, srcData, srcOffset, length) {
  gl.bufferSubData(target, dstByteOffset, (0, _typedarray_utils.bufferView)(srcData), srcOffset, length);
}

function GlCommon_enableVertexAttribArray(gl, location) {
  gl.enableVertexAttribArray(location);
}

function GlCommon_vertexAttribPointer(gl, location, size, atype, normalize, stride, offset) {
  gl.vertexAttribPointer(location, size, atype, normalize, stride, offset);
}

function GlCommon_vertexAttribDivisor(gl, location, divisor) {
  gl.vertexAttribDivisor(location, divisor);
}

function GlCommon_drawArrays(gl, mode, first, count) {
  gl.drawArrays(mode, first, count);
}

function GlCommon_drawElements(gl, mode, count, indexType, offset) {
  gl.drawElements(mode, count, indexType, offset);
}

function GlCommon_drawArraysInstanced(gl, mode, first, count, instanceCount) {
  gl.drawArraysInstanced(mode, first, count, instanceCount);
}

function GlCommon_loc(location) {
  return location;
}

function GlCommon_uniform1i(gl, location, x) {
  gl.uniform1i(location, x);
}

function GlCommon_uniform2i(gl, location, x, y) {
  gl.uniform2i(location, x, y);
}

function GlCommon_uniform3i(gl, location, x, y, z) {
  gl.uniform3i(location, x, y, z);
}

function GlCommon_uniform4i(gl, location, x, y, z, w) {
  gl.uniform4i(location, x, y, z, w);
}

function GlCommon_uniform1ui(gl, location, x) {
  gl.uniform1ui(location, x);
}

function GlCommon_uniform2ui(gl, location, x, y) {
  gl.uniform2ui(location, x, y);
}

function GlCommon_uniform3ui(gl, location, x, y, z) {
  gl.uniform3ui(location, x, y, z);
}

function GlCommon_uniform4ui(gl, location, x, y, z, w) {
  gl.uniform4ui(location, x, y, z, w);
}

function GlCommon_uniform1f(gl, location, x) {
  gl.uniform1f(location, x);
}

function GlCommon_uniform2f(gl, location, x, y) {
  gl.uniform2f(location, x, y);
}

function GlCommon_uniform3f(gl, location, x, y, z) {
  gl.uniform3f(location, x, y, z);
}

function GlCommon_uniform4f(gl, location, x, y, z, w) {
  gl.uniform4f(location, x, y, z, w);
}

function GlCommon_uniform1iv(gl, location, arr) {
  gl.uniform1iv(location, (0, _typedarray_utils.int32Array)(arr));
}

function GlCommon_uniform2iv(gl, location, arr) {
  gl.uniform2iv(location, (0, _typedarray_utils.int32Array)(arr));
}

function GlCommon_uniform3iv(gl, location, arr) {
  gl.uniform3iv(location, (0, _typedarray_utils.int32Array)(arr));
}

function GlCommon_uniform4iv(gl, location, arr) {
  gl.uniform4iv(location, (0, _typedarray_utils.int32Array)(arr));
}

function GlCommon_uniform1uiv(gl, location, arr) {
  gl.uniform1uiv(location, (0, _typedarray_utils.uint32Array)(arr));
}

function GlCommon_uniform2uiv(gl, location, arr) {
  gl.uniform2uiv(location, (0, _typedarray_utils.uint32Array)(arr));
}

function GlCommon_uniform3uiv(gl, location, arr) {
  gl.uniform3uiv(location, (0, _typedarray_utils.uint32Array)(arr));
}

function GlCommon_uniform4uiv(gl, location, arr) {
  gl.uniform4uiv(location, (0, _typedarray_utils.uint32Array)(arr));
}

function GlCommon_uniform1fv(gl, location, arr) {
  gl.uniform1fv(location, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniform2fv(gl, location, arr) {
  gl.uniform2fv(location, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniform3fv(gl, location, arr) {
  gl.uniform3fv(location, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniform4fv(gl, location, arr) {
  gl.uniform4fv(location, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniformMatrix2fv(gl, location, arr) {
  gl.uniformMatrix2fv(location, false, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniformMatrix3fv(gl, location, arr) {
  gl.uniformMatrix3fv(location, false, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniformMatrix4fv(gl, location, arr) {
  gl.uniformMatrix4fv(location, false, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniformMatrix2x3fv(gl, location, arr) {
  gl.uniformMatrix2x3fv(location, false, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniformMatrix2x4fv(gl, location, arr) {
  gl.uniformMatrix2x4fv(location, false, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniformMatrix3x2fv(gl, location, arr) {
  gl.uniformMatrix3x2fv(location, false, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniformMatrix3x4fv(gl, location, arr) {
  gl.uniformMatrix3x4fv(location, false, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniformMatrix4x2fv(gl, location, arr) {
  gl.uniformMatrix4x2fv(location, false, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_uniformMatrix4x3fv(gl, location, arr) {
  gl.uniformMatrix4x3fv(location, false, (0, _typedarray_utils.float32Array)(arr));
}

function GlCommon_enable(capability, gl) {
  gl.enable(capability);
}

function GlCommon_disable(capability, gl) {
  gl.disable(capability);
}

function GlCommon_cullFace(mode, gl) {
  gl.cullFace(mode);
}

function GlCommon_blendColor(r, g, b, a, gl) {
  gl.blendColor(r, g, b, a);
}

function GlCommon_blendFunc(sfactor, dfactor, gl) {
  gl.blendFunc(sfactor, dfactor);
}

function GlCommon_blendFuncSeparate(srcRGB, dstRGB, srcAlpha, dstAlpha, gl) {
  gl.blendFuncSeparate(srcRGB, dstRGB, srcAlpha, dstAlpha);
}

function GlCommon_blendEquation(mode, gl) {
  gl.blendEquation(mode);
}

function GlCommon_blendEquationSeparate(modeRGB, modeAlpha, gl) {
  gl.blendEquationSeparate(modeRGB, modeAlpha);
}

function GlCommon_texImage2DData(target, level, internalformat, width, height, format, dataType, pixels, gl) {
  gl.texImage2D(target, level, internalformat, width, height, 0, format, dataType, pixels);
}

function GlCommon_texImage2DImage(target, level, internalformat, format, dataType, pixels, gl) {
  gl.texImage2D(target, level, internalformat, format, dataType, pixels);
}

function GlCommon_texImage2DCanvas(target, level, internalformat, format, dataType, pixels, gl) {
  gl.texImage2D(target, level, internalformat, format, dataType, pixels);
}

function GlCommon_texImage2DVideo(target, level, internalformat, format, dataType, pixels, gl) {
  gl.texImage2D(target, level, internalformat, format, dataType, pixels);
}

function GlCommon_texImage2DBitmap(target, level, internalformat, format, dataType, pixels, gl) {
  gl.texImage2D(target, level, internalformat, format, dataType, pixels);
}

function GlCommon_texImage2D(target, level, internalformat, width, height, format, dataType, offset, gl) {
  gl.texImage2D(target, level, internalformat, width, height, 0, format, dataType, offset);
}

function GlCommon_texImage2DCanvas2(target, level, internalformat, width, height, format, dataType, source, gl) {
  gl.texImage2D(target, level, internalformat, width, height, 0, format, dataType, source);
}

function GlCommon_texImage2DImage2(target, level, internalformat, width, height, format, dataType, source, gl) {
  gl.texImage2D(target, level, internalformat, width, height, 0, format, dataType, source);
}

function GlCommon_texImage2DVideo2(target, level, internalformat, width, height, format, dataType, source, gl) {
  gl.texImage2D(target, level, internalformat, width, height, 0, format, dataType, source);
}

function GlCommon_texImage2DBitmap2(target, level, internalformat, width, height, format, dataType, source, gl) {
  gl.texImage2D(target, level, internalformat, width, height, 0, format, dataType, source);
}

function GlCommon_texImage2DImageData2(target, level, internalformat, width, height, format, dataType, source, gl) {
  gl.texImage2D(target, level, internalformat, width, height, 0, format, dataType, source);
}

function GlCommon_texImage2DData2(target, level, internalformat, width, height, format, dataType, srcData, srcOffset, gl) {
  gl.texImage2D(target, level, internalformat, width, height, 0, format, dataType, srcData, srcOffset);
}
},{"../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../core/utils.js":"../JS/core/utils.js","./webgl_types.js":"../JS/webgl_core/webgl_types.js","../js/typedarray_utils.js":"../JS/js/typedarray_utils.js"}],"../JS/webgl_data/glbuffer.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GlBuffer$reflection = GlBuffer$reflection;
exports.GlBuffer_$ctor_10C6D16C = GlBuffer_$ctor_10C6D16C;
exports.GlBuffer__get_BufferKind = GlBuffer__get_BufferKind;
exports.GlBuffer__get_Usage = GlBuffer__get_Usage;
exports.GlBuffer__get_Data = GlBuffer__get_Data;
exports.GlBuffer__get_AutoClean = GlBuffer__get_AutoClean;
exports.GlBuffer__set_AutoClean_Z1FBCCD16 = GlBuffer__set_AutoClean_Z1FBCCD16;
exports.GlBuffer__Init_71B7C75E = GlBuffer__Init_71B7C75E;
exports.GlBuffer__Delete = GlBuffer__Delete;
exports.GlBuffer__Clean_Z1FBCCD16 = GlBuffer__Clean_Z1FBCCD16;
exports.GlBuffer__DirtyRange_Z37302880 = GlBuffer__DirtyRange_Z37302880;
exports.GlBuffer__SetLength_Z524259A4 = GlBuffer__SetLength_Z524259A4;
exports.GlBuffer__Bind = GlBuffer__Bind;
exports.GlBuffer__BindBase_Z524259A4 = GlBuffer__BindBase_Z524259A4;
exports.GlBuffer__SetValuesRange_Z3EAA4E5D = GlBuffer__SetValuesRange_Z3EAA4E5D;
exports.GlBuffer__SetValuesOffset_Z59CA6BE1 = GlBuffer__SetValuesOffset_Z59CA6BE1;
exports.GlBuffer__SetValues_Z3EAA4E5D = GlBuffer__SetValues_Z3EAA4E5D;
exports.GlBuffer__SetValues_5975E3 = GlBuffer__SetValues_5975E3;
exports.GlBuffer__Update = GlBuffer__Update;
exports.GlBuffer = void 0;

var _typedarray_utils = require("../js/typedarray_utils.js");

var _webgl_browser_types = require("../webgl_core/webgl_browser_types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GlBuffer = function GlBuffer(gl) {
  _classCallCheck(this, GlBuffer);

  this.gl = gl;
  this.isBuffered = false;
  this.dirtyOffset = 2147483647;
  this.dirtyEndOffset = -1;
  this.target = 34962;
  this.usage = 35044;
  this.factory = _typedarray_utils.float32ArrayFactory;
  this.data = this.factory.Create(0);
  this.buffer = (0, _webgl_browser_types.GlCommon_getEmptyBuffer)(this.gl);
  this["BufferKind@"] = this.target;
  this["Usage@"] = this.usage;
  this["AutoClean@"] = true;
};

exports.GlBuffer = GlBuffer;

function GlBuffer$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.Data.GlBuffer", void 0, GlBuffer);
}

function GlBuffer_$ctor_10C6D16C(gl) {
  return new GlBuffer(gl);
}

function GlBuffer__get_BufferKind(__) {
  return __["BufferKind@"];
}

function GlBuffer__get_Usage(__) {
  return __["Usage@"];
}

function GlBuffer__get_Data(_) {
  return _.data;
}

function GlBuffer__get_AutoClean(__) {
  return __["AutoClean@"];
}

function GlBuffer__set_AutoClean_Z1FBCCD16(__, v) {
  __["AutoClean@"] = v;
}

function GlBuffer__Init_71B7C75E(_, bufferTarget, bufferUsage, arrayFactory) {
  _.target = bufferTarget;
  _.usage = bufferUsage;
  _.factory = arrayFactory;
  _.buffer = _.gl.createBuffer();
}

function GlBuffer__Delete(_) {
  var empty = (0, _webgl_browser_types.GlCommon_getEmptyBuffer)(_.gl);

  if (!(0, _Util.equals)(_.buffer, empty)) {
    _.gl.deleteBuffer(_.buffer);
  }
}

function GlBuffer__Clean_Z1FBCCD16(_, buffered) {
  _.dirtyOffset = 2147483647;
  _.dirtyEndOffset = -1;
  _.isBuffered = buffered;
}

function GlBuffer__DirtyRange_Z37302880(_, startOffset, endOffset) {
  _.dirtyOffset = (0, _Util.min)(_Util.comparePrimitives, startOffset, _.dirtyOffset);
  _.dirtyEndOffset = (0, _Util.max)(_Util.comparePrimitives, endOffset, _.dirtyEndOffset);
  _.dirtyOffset = (0, _Util.max)(_Util.comparePrimitives, _.dirtyOffset, 0);
  _.dirtyEndOffset = (0, _Util.min)(_Util.comparePrimitives, _.dirtyEndOffset, _.data.length - 1);
}

function GlBuffer__SetLength_Z524259A4(this$, length) {
  if (length !== this$.data.length) {
    var length_1 = (0, _Util.max)(_Util.comparePrimitives, length, 0) | 0;
    this$.data = this$.factory.Create(length_1);
    this$.isBuffered = false;
    GlBuffer__DirtyRange_Z37302880(this$, 0, length_1 - 1);
  }
}

function GlBuffer__Bind(_) {
  (0, _webgl_browser_types.GlCommon_bindBuffer)(_.gl, _.target, _.buffer);
}

function GlBuffer__BindBase_Z524259A4(_, location) {
  (0, _webgl_browser_types.GlCommon_bindBufferBase)(_.gl, _.target, location, _.buffer);
}

function GlBuffer__SetValuesRange_Z3EAA4E5D(this$, values, startOffset, endOffset) {
  GlBuffer__DirtyRange_Z37302880(this$, startOffset, endOffset);
  var dataArray = this$.data;
  var enumerator = (0, _Seq.getEnumerator)((0, _List.ofSeq)((0, _Seq.rangeNumber)(startOffset, 1, endOffset)));

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var i = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]() | 0;
      dataArray[i] = values[i];
    }
  } finally {
    enumerator.Dispose();
  }
}

function GlBuffer__SetValuesOffset_Z59CA6BE1(this$, values, startOffset) {
  GlBuffer__DirtyRange_Z37302880(this$, startOffset, startOffset + values.length - 1);
  var value = this$.data.set(values, startOffset);
  void value;
}

function GlBuffer__SetValues_Z3EAA4E5D(this$, values, startOffset, endOffset) {
  if (this$.data.length !== values.length) {
    this$.data = this$.factory.Create(values);
    this$.isBuffered = false;
  } else {
    var value = this$.data.set(values);
    void value;
  }

  GlBuffer__DirtyRange_Z37302880(this$, startOffset, endOffset);
}

function GlBuffer__SetValues_5975E3(this$, values) {
  GlBuffer__SetValues_Z3EAA4E5D(this$, values, 0, values.length - 1);
}

function GlBuffer__Update(this$) {
  if (this$.dirtyEndOffset >= 0) {
    if (this$.isBuffered) {
      var dirtyLength = this$.dirtyEndOffset - this$.dirtyOffset + 1 | 0;
      var bytesPerIndex = ~~(this$.data.byteLength / this$.data.length) | 0;
      var startOffset = this$.dirtyOffset * bytesPerIndex | 0;
      (0, _webgl_browser_types.GlCommon_bufferSubData)(this$.gl, this$.target, startOffset, this$.data, this$.dirtyOffset, dirtyLength);
    } else {
      this$.isBuffered = GlBuffer__get_AutoClean(this$);
      (0, _webgl_browser_types.GlCommon_bufferData)(this$.gl, this$.target, this$.data, this$.usage);
    }
  }

  if (GlBuffer__get_AutoClean(this$)) {
    GlBuffer__Clean_Z1FBCCD16(this$, true);
  }
}
},{"../js/typedarray_utils.js":"../JS/js/typedarray_utils.js","../webgl_core/webgl_browser_types.js":"../JS/webgl_core/webgl_browser_types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js"}],"../JS/core/vectors.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Vec2$reflection = Vec2$reflection;
exports.Vec2_$ctor_Z33A93963 = Vec2_$ctor_Z33A93963;
exports.Vec2_Create = Vec2_Create;
exports.Vec2_Create_5E38073B = Vec2_Create_5E38073B;
exports.Vec2_Create_7B00E9A0 = Vec2_Create_7B00E9A0;
exports.Vec2__get_Values = Vec2__get_Values;
exports.Vec2__get_IntValues = Vec2__get_IntValues;
exports.Vec2__get_Angle = Vec2__get_Angle;
exports.Vec2__get_AngleDegrees = Vec2__get_AngleDegrees;
exports.Vec2__Clone = Vec2__Clone;
exports.Vec2__Add_Z50E8264B = Vec2__Add_Z50E8264B;
exports.Vec2__AddM_Z3D47FC52 = Vec2__AddM_Z3D47FC52;
exports.Vec2__Sub_Z50E8264B = Vec2__Sub_Z50E8264B;
exports.Vec2__Scale_Z6C68B1C0 = Vec2__Scale_Z6C68B1C0;
exports.Vec2__Mult_Z50E8264B = Vec2__Mult_Z50E8264B;
exports.Vec2__Div_Z50E8264B = Vec2__Div_Z50E8264B;
exports.Vec2__Negate_Z49505F25 = Vec2__Negate_Z49505F25;
exports.Vec2__Normalize_Z49505F25 = Vec2__Normalize_Z49505F25;
exports.Vec2__Rotate_Z24CF60FF = Vec2__Rotate_Z24CF60FF;
exports.Vec2__SetAngle_Z24CF60FF = Vec2__SetAngle_Z24CF60FF;
exports.Vec2__Perp_Z49505F25 = Vec2__Perp_Z49505F25;
exports.Vec2__PerpLeft_Z49505F25 = Vec2__PerpLeft_Z49505F25;
exports.Vec2__PerpRight_Z49505F25 = Vec2__PerpRight_Z49505F25;
exports.Vec2__PerpToward_Z50E8264B = Vec2__PerpToward_Z50E8264B;
exports.Vec2__Min_Z50E8264B = Vec2__Min_Z50E8264B;
exports.Vec2__Max_Z50E8264B = Vec2__Max_Z50E8264B;
exports.Vec2__Ceil_Z49505F25 = Vec2__Ceil_Z49505F25;
exports.Vec2__Floor_Z49505F25 = Vec2__Floor_Z49505F25;
exports.Vec2__Fract_Z49505F25 = Vec2__Fract_Z49505F25;
exports.Vec2__WithXY_6DB1BD7B = Vec2__WithXY_6DB1BD7B;
exports.Vec2__WithX_Z6C68B1C0 = Vec2__WithX_Z6C68B1C0;
exports.Vec2__WithY_Z6C68B1C0 = Vec2__WithY_Z6C68B1C0;
exports.Vec2_op_UnaryNegation_Z3D47FC52 = Vec2_op_UnaryNegation_Z3D47FC52;
exports.Vec2_op_TwiddleMinusDot_Z3D47FC52 = Vec2_op_TwiddleMinusDot_Z3D47FC52;
exports.Vec2_op_BangBang_Z3D47FC52 = Vec2_op_BangBang_Z3D47FC52;
exports.Vec2_op_BangBangEquals_Z3D47FC52 = Vec2_op_BangBangEquals_Z3D47FC52;
exports.Vec2_op_Addition_47807E55 = Vec2_op_Addition_47807E55;
exports.Vec2_op_Addition_Z187F12CB = Vec2_op_Addition_Z187F12CB;
exports.Vec2_op_Addition_Z24FF8540 = Vec2_op_Addition_Z24FF8540;
exports.Vec2_op_AdditionAssignment_47807E55 = Vec2_op_AdditionAssignment_47807E55;
exports.Vec2_op_AdditionAssignment_Z187F12CB = Vec2_op_AdditionAssignment_Z187F12CB;
exports.Vec2_op_AdditionAssignment_Z24FF8540 = Vec2_op_AdditionAssignment_Z24FF8540;
exports.Vec2_op_Subtraction_47807E55 = Vec2_op_Subtraction_47807E55;
exports.Vec2_op_Subtraction_Z187F12CB = Vec2_op_Subtraction_Z187F12CB;
exports.Vec2_op_Subtraction_Z24FF8540 = Vec2_op_Subtraction_Z24FF8540;
exports.Vec2_op_SubtractionAssignment_47807E55 = Vec2_op_SubtractionAssignment_47807E55;
exports.Vec2_op_SubtractionAssignment_Z187F12CB = Vec2_op_SubtractionAssignment_Z187F12CB;
exports.Vec2_op_SubtractionAssignment_Z24FF8540 = Vec2_op_SubtractionAssignment_Z24FF8540;
exports.Vec2_op_Multiply_47807E55 = Vec2_op_Multiply_47807E55;
exports.Vec2_op_Multiply_Z187F12CB = Vec2_op_Multiply_Z187F12CB;
exports.Vec2_op_MultiplyAssignment_47807E55 = Vec2_op_MultiplyAssignment_47807E55;
exports.Vec2_op_MultiplyAssignment_Z187F12CB = Vec2_op_MultiplyAssignment_Z187F12CB;
exports.Vec2_op_Multiply_Z24FF8540 = Vec2_op_Multiply_Z24FF8540;
exports.Vec2_op_MultiplyAssignment_Z24FF8540 = Vec2_op_MultiplyAssignment_Z24FF8540;
exports.Vec2_op_Division_47807E55 = Vec2_op_Division_47807E55;
exports.Vec2_op_Division_Z187F12CB = Vec2_op_Division_Z187F12CB;
exports.Vec2_op_Division_Z24FF8540 = Vec2_op_Division_Z24FF8540;
exports.Vec2_op_DivisionAssignment_47807E55 = Vec2_op_DivisionAssignment_47807E55;
exports.Vec2_op_DivisionAssignment_Z24FF8540 = Vec2_op_DivisionAssignment_Z24FF8540;
exports.Vec2_op_Modulus_47807E55 = Vec2_op_Modulus_47807E55;
exports.Vec2_op_Modulus_Z187F12CB = Vec2_op_Modulus_Z187F12CB;
exports.Vec2_op_Modulus_Z24FF8540 = Vec2_op_Modulus_Z24FF8540;
exports.Vec2_op_PercentEquals_Z24FF8540 = Vec2_op_PercentEquals_Z24FF8540;
exports.Vec2_op_DotMultiply_Z24FF8540 = Vec2_op_DotMultiply_Z24FF8540;
exports.Vec2_op_PlusMultiply_Z24FF8540 = Vec2_op_PlusMultiply_Z24FF8540;
exports.Vec3$reflection = Vec3$reflection;
exports.Vec3_$ctor_Z14AF5965 = Vec3_$ctor_Z14AF5965;
exports.Vec3_Create = Vec3_Create;
exports.Vec3_Create_5E38073B = Vec3_Create_5E38073B;
exports.Vec3_Create_8ED0A5D = Vec3_Create_8ED0A5D;
exports.Vec3_Create_Z18D5882D = Vec3_Create_Z18D5882D;
exports.Vec3__get_Values = Vec3__get_Values;
exports.Vec3__get_IntValues = Vec3__get_IntValues;
exports.Vec3__Clone = Vec3__Clone;
exports.Vec3__CrossM_Z3D47FC51 = Vec3__CrossM_Z3D47FC51;
exports.Vec3__Add_Z50E8268B = Vec3__Add_Z50E8268B;
exports.Vec3__AddM_Z3D47FC51 = Vec3__AddM_Z3D47FC51;
exports.Vec3__Sub_Z50E8268B = Vec3__Sub_Z50E8268B;
exports.Vec3__Scale_667C46A7 = Vec3__Scale_667C46A7;
exports.Vec3__Mult_Z50E8268B = Vec3__Mult_Z50E8268B;
exports.Vec3__Div_Z50E8268B = Vec3__Div_Z50E8268B;
exports.Vec3__Negate_Z49505F06 = Vec3__Negate_Z49505F06;
exports.Vec3__Normalize_Z49505F06 = Vec3__Normalize_Z49505F06;
exports.Vec3__Ceil_Z49505F06 = Vec3__Ceil_Z49505F06;
exports.Vec3__Floor_Z49505F06 = Vec3__Floor_Z49505F06;
exports.Vec3__Fract_Z49505F06 = Vec3__Fract_Z49505F06;
exports.Vec3__WithXYZ_Z6FDE0AF9 = Vec3__WithXYZ_Z6FDE0AF9;
exports.Vec3__WithXY_40D0A41A = Vec3__WithXY_40D0A41A;
exports.Vec3__WithXY_Z50E8266C = Vec3__WithXY_Z50E8266C;
exports.Vec3__WithXY_Z50E8268B = Vec3__WithXY_Z50E8268B;
exports.Vec3__WithXZ_40D0A41A = Vec3__WithXZ_40D0A41A;
exports.Vec3__WithXZ_Z50E8266C = Vec3__WithXZ_Z50E8266C;
exports.Vec3__WithXZ_Z50E8268B = Vec3__WithXZ_Z50E8268B;
exports.Vec3__WithYZ_40D0A41A = Vec3__WithYZ_40D0A41A;
exports.Vec3__WithYZ_Z50E8266C = Vec3__WithYZ_Z50E8266C;
exports.Vec3__WithYZ_Z50E8268B = Vec3__WithYZ_Z50E8268B;
exports.Vec3_op_UnaryNegation_Z3D47FC51 = Vec3_op_UnaryNegation_Z3D47FC51;
exports.Vec3_op_TwiddleMinusDot_Z3D47FC51 = Vec3_op_TwiddleMinusDot_Z3D47FC51;
exports.Vec3_op_BangBang_Z3D47FC51 = Vec3_op_BangBang_Z3D47FC51;
exports.Vec3_op_BangBangEquals_Z3D47FC51 = Vec3_op_BangBangEquals_Z3D47FC51;
exports.Vec3_op_Addition_Z24FF85E0 = Vec3_op_Addition_Z24FF85E0;
exports.Vec3_op_AdditionAssignment_Z24FF85E0 = Vec3_op_AdditionAssignment_Z24FF85E0;
exports.Vec3_op_Subtraction_126BE5F2 = Vec3_op_Subtraction_126BE5F2;
exports.Vec3_op_Subtraction_Z24FF85E0 = Vec3_op_Subtraction_Z24FF85E0;
exports.Vec3_op_SubtractionAssignment_Z24FF85E0 = Vec3_op_SubtractionAssignment_Z24FF85E0;
exports.Vec3_op_Multiply_Z18D588CE = Vec3_op_Multiply_Z18D588CE;
exports.Vec3_op_Multiply_126BE5F2 = Vec3_op_Multiply_126BE5F2;
exports.Vec3_op_MultiplyAssignment_Z18D588CE = Vec3_op_MultiplyAssignment_Z18D588CE;
exports.Vec3_op_MultiplyAssignment_126BE5F2 = Vec3_op_MultiplyAssignment_126BE5F2;
exports.Vec3_op_Multiply_Z24FF85E0 = Vec3_op_Multiply_Z24FF85E0;
exports.Vec3_op_MultiplyAssignment_Z24FF85E0 = Vec3_op_MultiplyAssignment_Z24FF85E0;
exports.Vec3_op_Division_47807EB4 = Vec3_op_Division_47807EB4;
exports.Vec3_op_Division_Z187F12CC = Vec3_op_Division_Z187F12CC;
exports.Vec3_op_Division_Z24FF85E0 = Vec3_op_Division_Z24FF85E0;
exports.Vec3_op_DivisionAssignment_47807EB4 = Vec3_op_DivisionAssignment_47807EB4;
exports.Vec3_op_DivisionAssignment_Z24FF85E0 = Vec3_op_DivisionAssignment_Z24FF85E0;
exports.Vec3_op_DotMultiply_Z24FF85E0 = Vec3_op_DotMultiply_Z24FF85E0;
exports.Vec3_op_PlusMultiply_Z24FF85E0 = Vec3_op_PlusMultiply_Z24FF85E0;
exports.Vec4$reflection = Vec4$reflection;
exports.Vec4_$ctor_Z14AF5965 = Vec4_$ctor_Z14AF5965;
exports.Vec4_Create_Z27E3A4C0 = Vec4_Create_Z27E3A4C0;
exports.Vec4_Create_Z16DF143 = Vec4_Create_Z16DF143;
exports.Vec4_Create = Vec4_Create;
exports.Vec4_Create_32EB7C8E = Vec4_Create_32EB7C8E;
exports.Vec4_Create_Z18D588CE = Vec4_Create_Z18D588CE;
exports.Vec4__get_Values = Vec4__get_Values;
exports.Vec4__get_IntValues = Vec4__get_IntValues;
exports.Vec4__Clone = Vec4__Clone;
exports.Vec4__Add_Z50E818CB = Vec4__Add_Z50E818CB;
exports.Vec4__AddM_Z3D47FC58 = Vec4__AddM_Z3D47FC58;
exports.Vec4__Sub_Z50E818CB = Vec4__Sub_Z50E818CB;
exports.Vec4__Scale_667C79C0 = Vec4__Scale_667C79C0;
exports.Vec4__Negate_Z49506063 = Vec4__Negate_Z49506063;
exports.Vec4__Normalize_Z49506063 = Vec4__Normalize_Z49506063;
exports.Vec4_op_Subtraction_126BE5F5 = Vec4_op_Subtraction_126BE5F5;
exports.Vec_lerp2 = Vec_lerp2;
exports.Vec_lerp2v = Vec_lerp2v;
exports.Vec_lerp3 = Vec_lerp3;
exports.Vec_lerp3v = Vec_lerp3v;
exports.Vec_lerp4 = Vec_lerp4;
exports.Vec_lerp4v = Vec_lerp4v;
exports.Vec_vec2Values = Vec_vec2Values;
exports.Vec_vec2ValuesL = Vec_vec2ValuesL;
exports.Vec4 = exports.Vec3 = exports.Vec2 = void 0;

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _utils = require("./utils.js");

var _optionex = require("./optionex.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var Vec2 = /*#__PURE__*/function () {
  function Vec2(values) {
    _classCallCheck(this, Vec2);

    this.v = new _Types.FSharpRef(null);
    var v = this.v;
    this.values = values;
    this.v.contents = this;
    this["Values@"] = this.values;
    this["init@6"] = 1;
  }

  _createClass(Vec2, [{
    key: "GetHashCode",
    value: function GetHashCode() {
      var _ = this;

      return (0, _Util.identityHash)(Vec2__get_Values(_.v.contents)) | 0;
    }
  }, {
    key: "Equals",
    value: function Equals(other) {
      var o;

      var _ = this;

      return other instanceof Vec2 ? (o = other, (0, _Array.equalsWith)(_Util.comparePrimitives, Vec2__get_Values(_.v.contents), Vec2__get_Values(o))) : false;
    }
  }, {
    key: "toString",
    value: function toString() {
      var _ = this;

      var arg20 = _.v.contents.values[1];
      var arg10 = _.v.contents.values[0];
      return (0, _String.toText)((0, _String.printf)("[%.2f, %.2f]"))(arg10)(arg20);
    }
  }]);

  return Vec2;
}();

exports.Vec2 = Vec2;

function Vec2$reflection() {
  return (0, _Reflection.class_type)("Wil.Core.Vec2", void 0, Vec2);
}

function Vec2_$ctor_Z33A93963(values) {
  return new Vec2(values);
}

function Vec2_Create() {
  return Vec2_$ctor_Z33A93963(new Float64Array([0, 0]));
}

function Vec2_Create_5E38073B(x) {
  return Vec2_$ctor_Z33A93963(new Float64Array([x, x]));
}

function Vec2_Create_7B00E9A0(x, y) {
  return Vec2_$ctor_Z33A93963(new Float64Array([x, y]));
}

function Vec2__get_Values(__) {
  return __["Values@"];
}

function Vec2__get_IntValues(_) {
  return new Int32Array([~~_.values[0], ~~_.values[1]]);
}

function Vec2__get_Angle(_) {
  var res = Math.atan2(_.v.contents.values[1], _.v.contents.values[0]);
  return (res >= 0 ? res : res + 2 * 3.141592653589793) * 1;
}

function Vec2__get_AngleDegrees(_) {
  return Vec2__get_Angle(_.v.contents) * _utils.DEG_PER_RAD;
}

function Vec2__Clone(_) {
  return Vec2_$ctor_Z33A93963(new Float64Array([_.v.contents.values[0], _.v.contents.values[1]]));
}

function Vec2__Add_Z50E8264B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __5 = result_1;
  var x = _.v.contents.values[0] + other.values[0];
  var y = _.v.contents.values[1] + other.values[1];
  var __6 = __5.v.contents;
  __6.values[0] = x;
  var __7 = __5.v.contents;
  __7.values[1] = y;
  return __5.v.contents;
}

function Vec2__AddM_Z3D47FC52(_, other) {
  var value = Vec2__Add_Z50E8264B(_.v.contents, other, _.v.contents);
  void value;
}

function Vec2__Sub_Z50E8264B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __5 = result_1;
  var x = _.v.contents.values[0] - other.values[0];
  var y = _.v.contents.values[1] - other.values[1];
  var __6 = __5.v.contents;
  __6.values[0] = x;
  var __7 = __5.v.contents;
  __7.values[1] = y;
  return __5.v.contents;
}

function Vec2__Scale_Z6C68B1C0(_, s, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __3 = result_1;
  var x = _.v.contents.values[0] * s;
  var y = _.v.contents.values[1] * s;
  var __4 = __3.v.contents;
  __4.values[0] = x;
  var __5 = __3.v.contents;
  __5.values[1] = y;
  return __3.v.contents;
}

function Vec2__Mult_Z50E8264B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __5 = result_1;
  var x = _.v.contents.values[0] * other.values[0];
  var y = _.v.contents.values[1] * other.values[1];
  var __6 = __5.v.contents;
  __6.values[0] = x;
  var __7 = __5.v.contents;
  __7.values[1] = y;
  return __5.v.contents;
}

function Vec2__Div_Z50E8264B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __5 = result_1;
  var x = _.v.contents.values[0] / other.values[0];
  var y = _.v.contents.values[1] / other.values[1];
  var __6 = __5.v.contents;
  __6.values[0] = x;
  var __7 = __5.v.contents;
  __7.values[1] = y;
  return __5.v.contents;
}

function Vec2__Negate_Z49505F25(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __3 = result_1;
  var x = -_.v.contents.values[0];
  var y = -_.v.contents.values[1];
  var __4 = __3.v.contents;
  __4.values[0] = x;
  var __5 = __3.v.contents;
  __5.values[1] = y;
  return __3.v.contents;
}

function Vec2__Normalize_Z49505F25(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var mag;
  var __1 = _.v.contents;
  mag = Math.sqrt(__1.v.contents.values[0] * __1.v.contents.values[0] + __1.v.contents.values[1] * __1.v.contents.values[1]);

  if (mag < 1E-09) {
    var __6 = result_1;
    var __7 = __6.v.contents;
    __7.values[0] = 0;
    var __8 = __6.v.contents;
    __8.values[1] = 0;
    return __6.v.contents;
  } else {
    var magInv = 1 / mag;
    var __11 = result_1;
    var x_1 = _.v.contents.values[0] * magInv;
    var y_1 = _.v.contents.values[1] * magInv;
    var __12 = __11.v.contents;
    __12.values[0] = x_1;
    var __13 = __11.v.contents;
    __13.values[1] = y_1;
    return __11.v.contents;
  }
}

function Vec2__Rotate_Z24CF60FF(_, angle, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var angle_1 = angle;
  var sin = Math.sin(angle_1);
  var cos = Math.cos(angle_1);
  var __5 = result_1;
  var x = _.v.contents.values[0] * cos - _.v.contents.values[1] * sin;
  var y = _.v.contents.values[0] * sin + _.v.contents.values[1] * cos;
  var __6 = __5.v.contents;
  __6.values[0] = x;
  var __7 = __5.v.contents;
  __7.values[1] = y;
  return __5.v.contents;
}

function Vec2__SetAngle_Z24CF60FF(_, angle, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var mag;
  var __1 = _.v.contents;
  mag = Math.sqrt(__1.v.contents.values[0] * __1.v.contents.values[0] + __1.v.contents.values[1] * __1.v.contents.values[1]);
  var angle_1 = angle;
  var sin = Math.sin(angle_1);
  var cos = Math.cos(angle_1);
  var __6 = result_1;
  var x = cos * mag;
  var y = sin * mag;
  var __7 = __6.v.contents;
  __7.values[0] = x;
  var __8 = __6.v.contents;
  __8.values[1] = y;
  return __6.v.contents;
}

function Vec2__Perp_Z49505F25(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __3 = result_1;
  var x = -_.v.contents.values[1];
  var y = _.v.contents.values[0];
  var __4 = __3.v.contents;
  __4.values[0] = x;
  var __5 = __3.v.contents;
  __5.values[1] = y;
  return __3.v.contents;
}

function Vec2__PerpLeft_Z49505F25(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __3 = result_1;
  var x = -_.v.contents.values[1];
  var y = _.v.contents.values[0];
  var __4 = __3.v.contents;
  __4.values[0] = x;
  var __5 = __3.v.contents;
  __5.values[1] = y;
  return __3.v.contents;
}

function Vec2__PerpRight_Z49505F25(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __3 = result_1;
  var x = _.v.contents.values[1];
  var y = -_.v.contents.values[0];
  var __4 = __3.v.contents;
  __4.values[0] = x;
  var __5 = __3.v.contents;
  __5.values[1] = y;
  return __3.v.contents;
}

function Vec2__PerpToward_Z50E8264B(_, toward, result) {
  var __1, other;

  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var sgn = (0, _Util.sign)((__1 = toward, (other = _.v.contents, __1.v.contents.values[0] * other.values[1] - __1.v.contents.values[1] * other.values[0])));
  var __8 = result_1;
  var x = _.v.contents.values[1] * sgn;
  var y = _.v.contents.values[0] * sgn;
  var __9 = __8.v.contents;
  __9.values[0] = x;
  var __10 = __8.v.contents;
  __10.values[1] = y;
  return __8.v.contents;
}

function Vec2__Min_Z50E8264B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __5 = result_1;
  var x_2 = (0, _Util.min)(_Util.comparePrimitives, _.v.contents.values[0], other.values[0]);
  var y_2 = (0, _Util.min)(_Util.comparePrimitives, _.v.contents.values[1], other.values[1]);
  var __6 = __5.v.contents;
  __6.values[0] = x_2;
  var __7 = __5.v.contents;
  __7.values[1] = y_2;
  return __5.v.contents;
}

function Vec2__Max_Z50E8264B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __5 = result_1;
  var x_2 = (0, _Util.max)(_Util.comparePrimitives, _.v.contents.values[0], other.values[0]);
  var y_2 = (0, _Util.max)(_Util.comparePrimitives, _.v.contents.values[1], other.values[1]);
  var __6 = __5.v.contents;
  __6.values[0] = x_2;
  var __7 = __5.v.contents;
  __7.values[1] = y_2;
  return __5.v.contents;
}

function Vec2__Ceil_Z49505F25(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __3 = result_1;
  var x = Math.ceil(_.v.contents.values[0]);
  var y = Math.ceil(_.v.contents.values[1]);
  var __4 = __3.v.contents;
  __4.values[0] = x;
  var __5 = __3.v.contents;
  __5.values[1] = y;
  return __3.v.contents;
}

function Vec2__Floor_Z49505F25(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __3 = result_1;
  var x = Math.floor(_.v.contents.values[0]);
  var y = Math.floor(_.v.contents.values[1]);
  var __4 = __3.v.contents;
  __4.values[0] = x;
  var __5 = __3.v.contents;
  __5.values[1] = y;
  return __3.v.contents;
}

function Vec2__Fract_Z49505F25(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __5 = result_1;
  var x = _.v.contents.values[0] - Math.floor(_.v.contents.values[0]);
  var y = _.v.contents.values[1] - Math.floor(_.v.contents.values[1]);
  var __6 = __5.v.contents;
  __6.values[0] = x;
  var __7 = __5.v.contents;
  __7.values[1] = y;
  return __5.v.contents;
}

function Vec2__WithXY_6DB1BD7B(_, x, y, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __1 = result_1;
  var __2 = __1.v.contents;
  __2.values[0] = x;
  var __3 = __1.v.contents;
  __3.values[1] = y;
  return __1.v.contents;
}

function Vec2__WithX_Z6C68B1C0(_, x, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __2 = result_1;
  var y = _.v.contents.values[1];
  var __3 = __2.v.contents;
  __3.values[0] = x;
  var __4 = __2.v.contents;
  __4.values[1] = y;
  return __2.v.contents;
}

function Vec2__WithY_Z6C68B1C0(_, y, result) {
  var result_1 = (0, _optionex.calcDef)(Vec2_Create, result);
  var __2 = result_1;
  var x = _.v.contents.values[0];
  var __3 = __2.v.contents;
  __3.values[0] = x;
  var __4 = __2.v.contents;
  __4.values[1] = y;
  return __2.v.contents;
}

function Vec2_op_UnaryNegation_Z3D47FC52(v1) {
  return Vec2__Negate_Z49505F25(v1);
}

function Vec2_op_TwiddleMinusDot_Z3D47FC52(v1) {
  var _ = v1;
  var value = Vec2__Negate_Z49505F25(_.v.contents, _.v.contents);
  void value;
}

function Vec2_op_BangBang_Z3D47FC52(v1) {
  return Vec2__Normalize_Z49505F25(v1);
}

function Vec2_op_BangBangEquals_Z3D47FC52(v1) {
  var _ = v1;
  var value = Vec2__Normalize_Z49505F25(_.v.contents, _.v.contents);
  void value;
}

function Vec2_op_Addition_47807E55(v1, value) {
  return Vec2_Create_7B00E9A0(v1.values[0] + value, v1.values[1] + value);
}

function Vec2_op_Addition_Z187F12CB(value, v1) {
  return Vec2_Create_7B00E9A0(v1.values[0] + value, v1.values[1] + value);
}

function Vec2_op_Addition_Z24FF8540(v1, v2) {
  return Vec2__Add_Z50E8264B(v1, v2);
}

function Vec2_op_AdditionAssignment_47807E55(v1, value) {
  var __2 = v1;
  var value_1 = Vec2__WithXY_6DB1BD7B(__2.v.contents, v1.values[0] + value, v1.values[1] + value, __2.v.contents);
  void value_1;
}

function Vec2_op_AdditionAssignment_Z187F12CB(value, v1) {
  var __2 = v1;
  var value_1 = Vec2__WithXY_6DB1BD7B(__2.v.contents, v1.values[0] + value, v1.values[1] + value, __2.v.contents);
  void value_1;
}

function Vec2_op_AdditionAssignment_Z24FF8540(v1, v2) {
  Vec2__AddM_Z3D47FC52(v1, v2);
}

function Vec2_op_Subtraction_47807E55(v1, value) {
  return Vec2_Create_7B00E9A0(v1.values[0] - value, v1.values[1] - value);
}

function Vec2_op_Subtraction_Z187F12CB(value, v1) {
  return Vec2_Create_7B00E9A0(value - v1.values[0], value - v1.values[1]);
}

function Vec2_op_Subtraction_Z24FF8540(v1, v2) {
  return Vec2__Sub_Z50E8264B(v1, v2);
}

function Vec2_op_SubtractionAssignment_47807E55(v1, value) {
  var __2 = v1;
  var value_1 = Vec2__WithXY_6DB1BD7B(__2.v.contents, v1.values[0] - value, v1.values[1] - value, __2.v.contents);
  void value_1;
}

function Vec2_op_SubtractionAssignment_Z187F12CB(value, v1) {
  var __2 = v1;
  var value_1 = Vec2__WithXY_6DB1BD7B(__2.v.contents, value - v1.values[0], value - v1.values[1], __2.v.contents);
  void value_1;
}

function Vec2_op_SubtractionAssignment_Z24FF8540(v1, v2) {
  var _ = v1;
  var value = Vec2__Sub_Z50E8264B(_.v.contents, v2, _.v.contents);
  void value;
}

function Vec2_op_Multiply_47807E55(v1, scale) {
  return Vec2__Scale_Z6C68B1C0(v1, scale);
}

function Vec2_op_Multiply_Z187F12CB(scale, v1) {
  return Vec2__Scale_Z6C68B1C0(v1, scale);
}

function Vec2_op_MultiplyAssignment_47807E55(v1, scale) {
  var _ = v1;
  var value = Vec2__Scale_Z6C68B1C0(_.v.contents, scale, _.v.contents);
  void value;
}

function Vec2_op_MultiplyAssignment_Z187F12CB(scale, v1) {
  var _ = v1;
  var value = Vec2__Scale_Z6C68B1C0(_.v.contents, scale, _.v.contents);
  void value;
}

function Vec2_op_Multiply_Z24FF8540(v1, v2) {
  return Vec2__Mult_Z50E8264B(v1, v2);
}

function Vec2_op_MultiplyAssignment_Z24FF8540(v1, v2) {
  var _ = v1;
  var value = Vec2__Mult_Z50E8264B(_.v.contents, v2, _.v.contents);
  void value;
}

function Vec2_op_Division_47807E55(v1, divisor) {
  return Vec2__Scale_Z6C68B1C0(v1, 1 / divisor);
}

function Vec2_op_Division_Z187F12CB(value, v1) {
  return Vec2_Create_7B00E9A0(value / v1.values[0], value / v1.values[1]);
}

function Vec2_op_Division_Z24FF8540(v1, v2) {
  return Vec2__Div_Z50E8264B(v1, v2);
}

function Vec2_op_DivisionAssignment_47807E55(v1, divisor) {
  var _ = v1;
  var value = Vec2__Scale_Z6C68B1C0(_.v.contents, 1 / divisor, _.v.contents);
  void value;
}

function Vec2_op_DivisionAssignment_Z24FF8540(v1, v2) {
  var _ = v1;
  var value = Vec2__Div_Z50E8264B(_.v.contents, v2, _.v.contents);
  void value;
}

function Vec2_op_Modulus_47807E55(v1, value) {
  return Vec2_Create_7B00E9A0(v1.values[0] % value, v1.values[1] % value);
}

function Vec2_op_Modulus_Z187F12CB(value, v1) {
  return Vec2_Create_7B00E9A0(value % v1.values[0], value % v1.values[1]);
}

function Vec2_op_Modulus_Z24FF8540(v1, v2) {
  return Vec2_Create_7B00E9A0(v1.values[0] % v2.values[0], v1.values[1] % v2.values[1]);
}

function Vec2_op_PercentEquals_Z24FF8540(v1, v2) {
  var __4 = v1;
  var value = Vec2__WithXY_6DB1BD7B(__4.v.contents, v1.values[0] % v2.values[0], v1.values[1] % v2.values[1], __4.v.contents);
  void value;
}

function Vec2_op_DotMultiply_Z24FF8540(v1, v2) {
  var _ = v1;
  var other = v2;
  return _.v.contents.values[0] * other.values[0] + _.v.contents.values[1] * other.values[1];
}

function Vec2_op_PlusMultiply_Z24FF8540(v1, v2) {
  var _ = v1;
  var other = v2;
  return _.v.contents.values[0] * other.values[1] - _.v.contents.values[1] * other.values[0];
}

var Vec3 = /*#__PURE__*/function () {
  function Vec3(values) {
    _classCallCheck(this, Vec3);

    this.v = new _Types.FSharpRef(null);
    var v = this.v;
    this.values = values;
    this.v.contents = this;
    this["Values@"] = this.values;
    this["init@273-1"] = 1;
  }

  _createClass(Vec3, [{
    key: "GetHashCode",
    value: function GetHashCode() {
      var _ = this;

      return (0, _Util.identityHash)(Vec3__get_Values(_.v.contents)) | 0;
    }
  }, {
    key: "Equals",
    value: function Equals(other) {
      var o;

      var _ = this;

      return other instanceof Vec3 ? (o = other, (0, _Array.equalsWith)(_Util.comparePrimitives, Vec3__get_Values(_.v.contents), Vec3__get_Values(o))) : false;
    }
  }, {
    key: "toString",
    value: function toString() {
      var _ = this;

      var arg30 = _.v.contents.values[2];
      var arg20 = _.v.contents.values[1];
      var arg10 = _.v.contents.values[0];
      return (0, _String.toText)((0, _String.printf)("[%.2f, %.2f, %.2f]"))(arg10)(arg20)(arg30);
    }
  }]);

  return Vec3;
}();

exports.Vec3 = Vec3;

function Vec3$reflection() {
  return (0, _Reflection.class_type)("Wil.Core.Vec3", void 0, Vec3);
}

function Vec3_$ctor_Z14AF5965(values) {
  return new Vec3(values);
}

function Vec3_Create() {
  return Vec3_$ctor_Z14AF5965(new Float64Array([0, 0, 0]));
}

function Vec3_Create_5E38073B(x) {
  return Vec3_$ctor_Z14AF5965(new Float64Array([x, x, x]));
}

function Vec3_Create_8ED0A5D(x, y, z) {
  return Vec3_$ctor_Z14AF5965(new Float64Array([x, y, z]));
}

function Vec3_Create_Z18D5882D(v2, z) {
  return Vec3_$ctor_Z14AF5965(new Float64Array([v2.values[0], v2.values[1], z]));
}

function Vec3__get_Values(__) {
  return __["Values@"];
}

function Vec3__get_IntValues(_) {
  return new Int32Array([~~_.values[0], ~~_.values[1], ~~_.values[2]]);
}

function Vec3__Clone(_) {
  return Vec3_$ctor_Z14AF5965(new Float64Array([_.v.contents.values[0], _.v.contents.values[1], _.v.contents.values[2]]));
}

function Vec3__CrossM_Z3D47FC51(_, other) {
  var value_3;
  var __1 = _.v.contents;
  var other_1 = other;
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, _.v.contents);
  var __14 = result_1;
  var x = __1.v.contents.values[1] * other_1.values[2] - __1.v.contents.values[2] * other_1.values[1];
  var y = __1.v.contents.values[2] * other_1.values[0] - __1.v.contents.values[0] * other_1.values[2];
  var z = __1.v.contents.values[0] * other_1.values[1] - __1.v.contents.values[1] * other_1.values[0];
  var __15 = __14.v.contents;
  __15.values[0] = x;
  var __16 = __14.v.contents;
  __16.values[1] = y;
  var __17 = __14.v.contents;
  __17.values[2] = z;
  value_3 = __14.v.contents;
  void value_3;
}

function Vec3__Add_Z50E8268B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __7 = result_1;
  var x = _.v.contents.values[0] + other.values[0];
  var y = _.v.contents.values[1] + other.values[1];
  var z = _.v.contents.values[2] + other.values[2];
  var __8 = __7.v.contents;
  __8.values[0] = x;
  var __9 = __7.v.contents;
  __9.values[1] = y;
  var __10 = __7.v.contents;
  __10.values[2] = z;
  return __7.v.contents;
}

function Vec3__AddM_Z3D47FC51(_, other) {
  var value = Vec3__Add_Z50E8268B(_.v.contents, other, _.v.contents);
  void value;
}

function Vec3__Sub_Z50E8268B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __7 = result_1;
  var x = _.v.contents.values[0] - other.values[0];
  var y = _.v.contents.values[1] - other.values[1];
  var z = _.v.contents.values[2] - other.values[2];
  var __8 = __7.v.contents;
  __8.values[0] = x;
  var __9 = __7.v.contents;
  __9.values[1] = y;
  var __10 = __7.v.contents;
  __10.values[2] = z;
  return __7.v.contents;
}

function Vec3__Scale_667C46A7(_, s, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __4 = result_1;
  var x = _.v.contents.values[0] * s;
  var y = _.v.contents.values[1] * s;
  var z = _.v.contents.values[2] * s;
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  return __4.v.contents;
}

function Vec3__Mult_Z50E8268B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __7 = result_1;
  var x = _.v.contents.values[0] * other.values[0];
  var y = _.v.contents.values[1] * other.values[1];
  var z = _.v.contents.values[2] * other.values[2];
  var __8 = __7.v.contents;
  __8.values[0] = x;
  var __9 = __7.v.contents;
  __9.values[1] = y;
  var __10 = __7.v.contents;
  __10.values[2] = z;
  return __7.v.contents;
}

function Vec3__Div_Z50E8268B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __7 = result_1;
  var x = _.v.contents.values[0] / other.values[0];
  var y = _.v.contents.values[1] / other.values[1];
  var z = _.v.contents.values[2] / other.values[2];
  var __8 = __7.v.contents;
  __8.values[0] = x;
  var __9 = __7.v.contents;
  __9.values[1] = y;
  var __10 = __7.v.contents;
  __10.values[2] = z;
  return __7.v.contents;
}

function Vec3__Negate_Z49505F06(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __4 = result_1;
  var x = -_.v.contents.values[0];
  var y = -_.v.contents.values[1];
  var z = -_.v.contents.values[2];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  return __4.v.contents;
}

function Vec3__Normalize_Z49505F06(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var mag;
  var __1 = _.v.contents;
  mag = Math.sqrt(__1.v.contents.values[0] * __1.v.contents.values[0] + __1.v.contents.values[1] * __1.v.contents.values[1] + __1.v.contents.values[2] * __1.v.contents.values[2]);

  if (mag < 1E-09) {
    var __8 = result_1;
    var __9 = __8.v.contents;
    __9.values[0] = 0;
    var __10 = __8.v.contents;
    __10.values[1] = 0;
    var __11 = __8.v.contents;
    __11.values[2] = 0;
    return __8.v.contents;
  } else {
    var magInv = 1 / mag;
    var __15 = result_1;
    var x_1 = _.v.contents.values[0] * magInv;
    var y_1 = _.v.contents.values[1] * magInv;
    var z_1 = _.v.contents.values[2] * magInv;
    var __16 = __15.v.contents;
    __16.values[0] = x_1;
    var __17 = __15.v.contents;
    __17.values[1] = y_1;
    var __18 = __15.v.contents;
    __18.values[2] = z_1;
    return __15.v.contents;
  }
}

function Vec3__Ceil_Z49505F06(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __4 = result_1;
  var x = Math.ceil(_.v.contents.values[0]);
  var y = Math.ceil(_.v.contents.values[1]);
  var z = Math.ceil(_.v.contents.values[2]);
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  return __4.v.contents;
}

function Vec3__Floor_Z49505F06(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __4 = result_1;
  var x = Math.floor(_.v.contents.values[0]);
  var y = Math.floor(_.v.contents.values[1]);
  var z = Math.floor(_.v.contents.values[2]);
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  return __4.v.contents;
}

function Vec3__Fract_Z49505F06(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __7 = result_1;
  var x = _.v.contents.values[0] - Math.floor(_.v.contents.values[0]);
  var y = _.v.contents.values[1] - Math.floor(_.v.contents.values[1]);
  var z = _.v.contents.values[2] - Math.floor(_.v.contents.values[2]);
  var __8 = __7.v.contents;
  __8.values[0] = x;
  var __9 = __7.v.contents;
  __9.values[1] = y;
  var __10 = __7.v.contents;
  __10.values[2] = z;
  return __7.v.contents;
}

function Vec3__WithXYZ_Z6FDE0AF9(_, x, y, z, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __1 = result_1;
  var __2 = __1.v.contents;
  __2.values[0] = x;
  var __3 = __1.v.contents;
  __3.values[1] = y;
  var __4 = __1.v.contents;
  __4.values[2] = z;
  return __1.v.contents;
}

function Vec3__WithXY_40D0A41A(_, x, y, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __2 = result_1;
  var z = _.v.contents.values[2];
  var __3 = __2.v.contents;
  __3.values[0] = x;
  var __4 = __2.v.contents;
  __4.values[1] = y;
  var __5 = __2.v.contents;
  __5.values[2] = z;
  return __2.v.contents;
}

function Vec3__WithXY_Z50E8266C(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __4 = result_1;
  var x = other.values[0];
  var y = other.values[1];
  var z = _.v.contents.values[2];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  return __4.v.contents;
}

function Vec3__WithXY_Z50E8268B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __4 = result_1;
  var x = other.values[0];
  var y = other.values[1];
  var z = _.v.contents.values[2];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  return __4.v.contents;
}

function Vec3__WithXZ_40D0A41A(_, x, z, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __2 = result_1;
  var y = _.v.contents.values[1];
  var __3 = __2.v.contents;
  __3.values[0] = x;
  var __4 = __2.v.contents;
  __4.values[1] = y;
  var __5 = __2.v.contents;
  __5.values[2] = z;
  return __2.v.contents;
}

function Vec3__WithXZ_Z50E8266C(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __4 = result_1;
  var x = other.values[0];
  var y = _.v.contents.values[1];
  var z = other.values[1];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  return __4.v.contents;
}

function Vec3__WithXZ_Z50E8268B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __4 = result_1;
  var x = other.values[0];
  var y = _.v.contents.values[1];
  var z = other.values[1];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  return __4.v.contents;
}

function Vec3__WithYZ_40D0A41A(_, y, z, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __2 = result_1;
  var x = _.v.contents.values[0];
  var __3 = __2.v.contents;
  __3.values[0] = x;
  var __4 = __2.v.contents;
  __4.values[1] = y;
  var __5 = __2.v.contents;
  __5.values[2] = z;
  return __2.v.contents;
}

function Vec3__WithYZ_Z50E8266C(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __4 = result_1;
  var x = _.v.contents.values[0];
  var y = other.values[0];
  var z = other.values[1];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  return __4.v.contents;
}

function Vec3__WithYZ_Z50E8268B(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, result);
  var __4 = result_1;
  var x = _.v.contents.values[0];
  var y = other.values[0];
  var z = other.values[1];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  return __4.v.contents;
}

function Vec3_op_UnaryNegation_Z3D47FC51(v1) {
  return Vec3__Negate_Z49505F06(v1);
}

function Vec3_op_TwiddleMinusDot_Z3D47FC51(v1) {
  var _ = v1;
  var value = Vec3__Negate_Z49505F06(_.v.contents, _.v.contents);
  void value;
}

function Vec3_op_BangBang_Z3D47FC51(v1) {
  return Vec3__Normalize_Z49505F06(v1);
}

function Vec3_op_BangBangEquals_Z3D47FC51(v1) {
  var _ = v1;
  var value = Vec3__Normalize_Z49505F06(_.v.contents, _.v.contents);
  void value;
}

function Vec3_op_Addition_Z24FF85E0(v1, v2) {
  return Vec3__Add_Z50E8268B(v1, v2);
}

function Vec3_op_AdditionAssignment_Z24FF85E0(v1, v2) {
  Vec3__AddM_Z3D47FC51(v1, v2);
}

function Vec3_op_Subtraction_126BE5F2(value, v1) {
  return Vec3_Create_8ED0A5D(value - v1.values[0], value - v1.values[1], value - v1.values[2]);
}

function Vec3_op_Subtraction_Z24FF85E0(v1, v2) {
  return Vec3__Sub_Z50E8268B(v1, v2);
}

function Vec3_op_SubtractionAssignment_Z24FF85E0(v1, v2) {
  var _ = v1;
  var value = Vec3__Sub_Z50E8268B(_.v.contents, v2, _.v.contents);
  void value;
}

function Vec3_op_Multiply_Z18D588CE(v1, scale) {
  return Vec3__Scale_667C46A7(v1, scale);
}

function Vec3_op_Multiply_126BE5F2(scale, v1) {
  return Vec3__Scale_667C46A7(v1, scale);
}

function Vec3_op_MultiplyAssignment_Z18D588CE(v1, scale) {
  var _ = v1;
  var value = Vec3__Scale_667C46A7(_.v.contents, scale, _.v.contents);
  void value;
}

function Vec3_op_MultiplyAssignment_126BE5F2(scale, v1) {
  var _ = v1;
  var value = Vec3__Scale_667C46A7(_.v.contents, scale, _.v.contents);
  void value;
}

function Vec3_op_Multiply_Z24FF85E0(v1, v2) {
  return Vec3__Mult_Z50E8268B(v1, v2);
}

function Vec3_op_MultiplyAssignment_Z24FF85E0(v1, v2) {
  var _ = v1;
  var value = Vec3__Mult_Z50E8268B(_.v.contents, v2, _.v.contents);
  void value;
}

function Vec3_op_Division_47807EB4(v1, divisor) {
  return Vec3__Scale_667C46A7(v1, 1 / divisor);
}

function Vec3_op_Division_Z187F12CC(value, v1) {
  return Vec3_Create_8ED0A5D(value / v1.values[0], value / v1.values[2], value / v1.values[2]);
}

function Vec3_op_Division_Z24FF85E0(v1, v2) {
  return Vec3__Div_Z50E8268B(v1, v2);
}

function Vec3_op_DivisionAssignment_47807EB4(v1, divisor) {
  var _ = v1;
  var value = Vec3__Scale_667C46A7(_.v.contents, 1 / divisor, _.v.contents);
  void value;
}

function Vec3_op_DivisionAssignment_Z24FF85E0(v1, v2) {
  var _ = v1;
  var value = Vec3__Div_Z50E8268B(_.v.contents, v2, _.v.contents);
  void value;
}

function Vec3_op_DotMultiply_Z24FF85E0(v1, v2) {
  var _ = v1;
  var other = v2;
  return _.v.contents.values[0] * other.values[0] + _.v.contents.values[1] * other.values[1] + _.v.contents.values[2] * other.values[2];
}

function Vec3_op_PlusMultiply_Z24FF85E0(v1, v2) {
  var _ = v1;
  var other = v2;
  var result_1 = (0, _optionex.calcDef)(Vec3_Create, void 0);
  var __13 = result_1;
  var x = _.v.contents.values[1] * other.values[2] - _.v.contents.values[2] * other.values[1];
  var y = _.v.contents.values[2] * other.values[0] - _.v.contents.values[0] * other.values[2];
  var z = _.v.contents.values[0] * other.values[1] - _.v.contents.values[1] * other.values[0];
  var __14 = __13.v.contents;
  __14.values[0] = x;
  var __15 = __13.v.contents;
  __15.values[1] = y;
  var __16 = __13.v.contents;
  __16.values[2] = z;
  return __13.v.contents;
}

var Vec4 = /*#__PURE__*/function () {
  function Vec4(values) {
    _classCallCheck(this, Vec4);

    this.v = new _Types.FSharpRef(null);
    var v = this.v;
    this.values = values;
    this.v.contents = this;
    this["Values@"] = this.values;
    this["init@513-2"] = 1;
  }

  _createClass(Vec4, [{
    key: "GetHashCode",
    value: function GetHashCode() {
      var _ = this;

      return (0, _Util.identityHash)(Vec4__get_Values(_.v.contents)) | 0;
    }
  }, {
    key: "Equals",
    value: function Equals(other) {
      var o;

      var _ = this;

      return other instanceof Vec4 ? (o = other, (0, _Array.equalsWith)(_Util.comparePrimitives, Vec4__get_Values(_.v.contents), Vec4__get_Values(o))) : false;
    }
  }]);

  return Vec4;
}();

exports.Vec4 = Vec4;

function Vec4$reflection() {
  return (0, _Reflection.class_type)("Wil.Core.Vec4", void 0, Vec4);
}

function Vec4_$ctor_Z14AF5965(values) {
  return new Vec4(values);
}

function Vec4_Create_Z27E3A4C0(x, y, z, w) {
  return Vec4_$ctor_Z14AF5965(new Float64Array([x, y, z, w]));
}

function Vec4_Create_Z16DF143(x) {
  return Vec4_$ctor_Z14AF5965(new Float64Array([x, x, x, x]));
}

function Vec4_Create() {
  return Vec4_$ctor_Z14AF5965(new Float64Array([0, 0, 0, 1]));
}

function Vec4_Create_32EB7C8E(v2, z, w) {
  return Vec4_$ctor_Z14AF5965(new Float64Array([v2.values[0], v2.values[1], z, w]));
}

function Vec4_Create_Z18D588CE(v3, w) {
  return Vec4_$ctor_Z14AF5965(new Float64Array([v3.values[0], v3.values[1], v3.values[2], w]));
}

function Vec4__get_Values(__) {
  return __["Values@"];
}

function Vec4__get_IntValues(_) {
  return new Int32Array([~~_.values[0], ~~_.values[1], ~~_.values[2], ~~_.values[3]]);
}

function Vec4__Clone(_) {
  return Vec4_$ctor_Z14AF5965(new Float64Array([_.v.contents.values[0], _.v.contents.values[1], _.v.contents.values[2], _.v.contents.values[3]]));
}

function Vec4__Add_Z50E818CB(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec4_Create, result);
  var __9 = result_1;
  var x = _.v.contents.values[0] + other.values[0];
  var y = _.v.contents.values[1] + other.values[1];
  var z = _.v.contents.values[2] + other.values[2];
  var w = _.v.contents.values[3] + other.values[3];
  var __10 = __9.v.contents;
  __10.values[0] = x;
  var __11 = __9.v.contents;
  __11.values[1] = y;
  var __12 = __9.v.contents;
  __12.values[2] = z;
  var __13 = __9.v.contents;
  __13.values[3] = w;
  return __9.v.contents;
}

function Vec4__AddM_Z3D47FC58(_, other) {
  var value = Vec4__Add_Z50E818CB(_.v.contents, other, _.v.contents);
  void value;
}

function Vec4__Sub_Z50E818CB(_, other, result) {
  var result_1 = (0, _optionex.calcDef)(Vec4_Create, result);
  var __9 = result_1;
  var x = _.v.contents.values[0] - other.values[0];
  var y = _.v.contents.values[1] - other.values[1];
  var z = _.v.contents.values[2] - other.values[2];
  var w = _.v.contents.values[3] - other.values[3];
  var __10 = __9.v.contents;
  __10.values[0] = x;
  var __11 = __9.v.contents;
  __11.values[1] = y;
  var __12 = __9.v.contents;
  __12.values[2] = z;
  var __13 = __9.v.contents;
  __13.values[3] = w;
  return __9.v.contents;
}

function Vec4__Scale_667C79C0(_, s, result) {
  var result_1 = (0, _optionex.calcDef)(Vec4_Create, result);
  var __5 = result_1;
  var x = _.v.contents.values[0] * s;
  var y = _.v.contents.values[1] * s;
  var z = _.v.contents.values[2] * s;
  var w = _.v.contents.values[3];
  var __6 = __5.v.contents;
  __6.values[0] = x;
  var __7 = __5.v.contents;
  __7.values[1] = y;
  var __8 = __5.v.contents;
  __8.values[2] = z;
  var __9 = __5.v.contents;
  __9.values[3] = w;
  return __5.v.contents;
}

function Vec4__Negate_Z49506063(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec4_Create, result);
  var __5 = result_1;
  var x = -_.v.contents.values[0];
  var y = -_.v.contents.values[1];
  var z = -_.v.contents.values[2];
  var w = _.v.contents.values[3];
  var __6 = __5.v.contents;
  __6.values[0] = x;
  var __7 = __5.v.contents;
  __7.values[1] = y;
  var __8 = __5.v.contents;
  __8.values[2] = z;
  var __9 = __5.v.contents;
  __9.values[3] = w;
  return __5.v.contents;
}

function Vec4__Normalize_Z49506063(_, result) {
  var result_1 = (0, _optionex.calcDef)(Vec4_Create, result);
  var mag;
  var __1 = _.v.contents;
  mag = Math.sqrt(__1.v.contents.values[0] * __1.v.contents.values[0] + __1.v.contents.values[1] * __1.v.contents.values[1] + __1.v.contents.values[2] * __1.v.contents.values[2]);

  if (mag < 1E-09) {
    var __8 = result_1;
    var __9 = __8.v.contents;
    __9.values[0] = 0;
    var __10 = __8.v.contents;
    __10.values[1] = 0;
    var __11 = __8.v.contents;
    __11.values[2] = 0;
    var __12 = __8.v.contents;
    __12.values[3] = 0;
    return __8.v.contents;
  } else {
    var magInv = 1 / mag;

    if (_.v.contents.values[3] !== 0 ? _.v.contents.values[3] !== 1 : false) {
      var mult = 1 / _.v.contents.values[3] * magInv;
      var __19 = result_1;
      var x_1 = _.v.contents.values[0] * mult;
      var y_1 = _.v.contents.values[1] * mult;
      var z_1 = _.v.contents.values[2] * mult;
      var __20 = __19.v.contents;
      __20.values[0] = x_1;
      var __21 = __19.v.contents;
      __21.values[1] = y_1;
      var __22 = __19.v.contents;
      __22.values[2] = z_1;
      var __23 = __19.v.contents;
      __23.values[3] = 1;
      return __19.v.contents;
    } else {
      var __28 = result_1;
      var x_2 = _.v.contents.values[0] * magInv;
      var y_2 = _.v.contents.values[1] * magInv;
      var z_2 = _.v.contents.values[2] * magInv;
      var w_2 = _.v.contents.values[3];
      var __29 = __28.v.contents;
      __29.values[0] = x_2;
      var __30 = __28.v.contents;
      __30.values[1] = y_2;
      var __31 = __28.v.contents;
      __31.values[2] = z_2;
      var __32 = __28.v.contents;
      __32.values[3] = w_2;
      return __28.v.contents;
    }
  }
}

function Vec4_op_Subtraction_126BE5F5(value, v1) {
  return Vec4_Create_Z27E3A4C0(value - v1.values[0], value - v1.values[1], value - v1.values[2], value - v1.values[3]);
}

function Vec_lerp2(v1, v2, t) {
  return Vec2_Create_7B00E9A0(v1.values[0] + (v2.values[0] - v1.values[0]) * t, v1.values[1] + (v2.values[1] - v1.values[1]) * t);
}

function Vec_lerp2v(v1, v2, t) {
  var u = Vec2_op_Subtraction_Z187F12CB(1, t);
  return Vec2_Create_7B00E9A0(v1.values[0] + (v2.values[0] - v1.values[0]) * t.values[0], v1.values[1] + (v2.values[1] - v1.values[1]) * t.values[1]);
}

function Vec_lerp3(v1, v2, t) {
  return Vec3_Create_8ED0A5D(v1.values[0] + (v2.values[0] - v1.values[0]) * t, v1.values[1] + (v2.values[1] - v1.values[1]) * t, v1.values[2] + (v2.values[2] - v1.values[2]) * t);
}

function Vec_lerp3v(v1, v2, t) {
  return Vec3_Create_8ED0A5D(v1.values[0] + (v2.values[0] - v1.values[0]) * t.values[0], v1.values[1] + (v2.values[1] - v1.values[1]) * t.values[1], v1.values[2] + (v2.values[2] - v1.values[2]) * t.values[2]);
}

function Vec_lerp4(v1, v2, t) {
  return Vec4_Create_Z27E3A4C0(v1.values[0] + (v2.values[0] - v1.values[0]) * t, v1.values[1] + (v2.values[1] - v1.values[1]) * t, v1.values[2] + (v2.values[2] - v1.values[2]) * t, v1.values[3] + (v2.values[3] - v1.values[3]) * t);
}

function Vec_lerp4v(v1, v2, t) {
  return Vec4_Create_Z27E3A4C0(v1.values[0] + (v2.values[0] - v1.values[0]) * t.values[0], v1.values[1] + (v2.values[1] - v1.values[1]) * t.values[1], v1.values[2] + (v2.values[2] - v1.values[2]) * t.values[2], v1.values[3] + (v2.values[3] - v1.values[3]) * t.values[3]);
}

function Vec_vec2Values(lst) {
  return (0, _Array.collect)(Vec2__get_Values, lst, Float64Array);
}

function Vec_vec2ValuesL(lst) {
  return Vec_vec2Values(Array.from(lst));
}
},{"../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./utils.js":"../JS/core/utils.js","./optionex.js":"../JS/core/optionex.js"}],"../JS/core/matricies.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Mat2$reflection = Mat2$reflection;
exports.Mat2_$ctor_Z14AF5965 = Mat2_$ctor_Z14AF5965;
exports.Mat2_get_Identity = Mat2_get_Identity;
exports.Mat2_Create = Mat2_Create;
exports.Mat2__get_Values = Mat2__get_Values;
exports.Mat2__SetToIdentity = Mat2__SetToIdentity;
exports.Mat2__Set_Z33A93963 = Mat2__Set_Z33A93963;
exports.Mat2__RotationTrig_4055D7F3 = Mat2__RotationTrig_4055D7F3;
exports.Mat2__Rotation_Z244A1337 = Mat2__Rotation_Z244A1337;
exports.Mat2__RotationTrigReverse_4055D7F3 = Mat2__RotationTrigReverse_4055D7F3;
exports.Mat2__RotationReverse_Z244A1337 = Mat2__RotationReverse_Z244A1337;
exports.Mat2__Transpose_Z49D52CED = Mat2__Transpose_Z49D52CED;
exports.Mat2__TransposeM = Mat2__TransposeM;
exports.Mat2__Mult_Z51C349CB = Mat2__Mult_Z51C349CB;
exports.Mat2__MultM_Z3D54A79A = Mat2__MultM_Z3D54A79A;
exports.Mat2__Transform_Z50E8264B = Mat2__Transform_Z50E8264B;
exports.Mat2__TransformInverse_Z50E8264B = Mat2__TransformInverse_Z50E8264B;
exports.Mat2D$reflection = Mat2D$reflection;
exports.Mat2D_$ctor_Z14AF5965 = Mat2D_$ctor_Z14AF5965;
exports.Mat2D_get_Identity = Mat2D_get_Identity;
exports.Mat2D_Create = Mat2D_Create;
exports.Mat2D__get_Values = Mat2D__get_Values;
exports.Mat2D__SetToIdentity = Mat2D__SetToIdentity;
exports.Mat2D__Set_Z33A93963 = Mat2D__Set_Z33A93963;
exports.Mat2D__Translation_Z7205CF09 = Mat2D__Translation_Z7205CF09;
exports.Mat2D__RotationTrig_Z7205CF09 = Mat2D__RotationTrig_Z7205CF09;
exports.Mat2D__Rotation_161A0BCD = Mat2D__Rotation_161A0BCD;
exports.Mat2D__RotationTrigReverse_Z7205CF09 = Mat2D__RotationTrigReverse_Z7205CF09;
exports.Mat2D__RotationReverse_161A0BCD = Mat2D__RotationReverse_161A0BCD;
exports.Mat2D__Mult_616625B5 = Mat2D__Mult_616625B5;
exports.Mat2D__MultM_18166562 = Mat2D__MultM_18166562;
exports.Mat2D__Translate_Z7205CF09 = Mat2D__Translate_Z7205CF09;
exports.Mat2D__TranslateM_2E41E8E0 = Mat2D__TranslateM_2E41E8E0;
exports.Mat2D__RotateTrig_Z7205CF09 = Mat2D__RotateTrig_Z7205CF09;
exports.Mat2D__RotateTrigM_2E41E8E0 = Mat2D__RotateTrigM_2E41E8E0;
exports.Mat2D__Rotate_161A0BCD = Mat2D__Rotate_161A0BCD;
exports.Mat2D__RotateM_6069AC9A = Mat2D__RotateM_6069AC9A;
exports.Mat2D__RotateTrigReverse_Z7205CF09 = Mat2D__RotateTrigReverse_Z7205CF09;
exports.Mat2D__RotateTrigReverseM_2E41E8E0 = Mat2D__RotateTrigReverseM_2E41E8E0;
exports.Mat2D__RotateReverse_161A0BCD = Mat2D__RotateReverse_161A0BCD;
exports.Mat2D__RotateReverseM_6069AC9A = Mat2D__RotateReverseM_6069AC9A;
exports.Mat2D__Transform_Z50E8264B = Mat2D__Transform_Z50E8264B;
exports.Mat3$reflection = Mat3$reflection;
exports.Mat3_$ctor_Z14AF5965 = Mat3_$ctor_Z14AF5965;
exports.Mat3_get_Identity = Mat3_get_Identity;
exports.Mat3_Create = Mat3_Create;
exports.Mat3__get_Values = Mat3__get_Values;
exports.Mat3__SetToIdentity = Mat3__SetToIdentity;
exports.Mat3__Set_Z33A93963 = Mat3__Set_Z33A93963;
exports.Mat3__Projection_4055D7D2 = Mat3__Projection_4055D7D2;
exports.Mat3__ProjectionM_2E41E8E0 = Mat3__ProjectionM_2E41E8E0;
exports.Mat3__Translation_4055D7D2 = Mat3__Translation_4055D7D2;
exports.Mat3__RotationTrigZ_4055D7D2 = Mat3__RotationTrigZ_4055D7D2;
exports.Mat3__RotationZ_Z244A1318 = Mat3__RotationZ_Z244A1318;
exports.Mat3__Mult_Z51C3498B = Mat3__Mult_Z51C3498B;
exports.Mat3__MultM_Z3D54A799 = Mat3__MultM_Z3D54A799;
exports.Mat3__Transform_Z50E8268B = Mat3__Transform_Z50E8268B;
exports.Mat4$reflection = Mat4$reflection;
exports.Mat4_$ctor_Z14AF5965 = Mat4_$ctor_Z14AF5965;
exports.Mat4_get_Identity = Mat4_get_Identity;
exports.Mat4_Create = Mat4_Create;
exports.Mat4__get_Values = Mat4__get_Values;
exports.Mat4__SetToIdentity = Mat4__SetToIdentity;
exports.Mat4__Set_Z33A93963 = Mat4__Set_Z33A93963;
exports.Mat4__Projection_Z6F5B78D8 = Mat4__Projection_Z6F5B78D8;
exports.Mat4__ProjectionM_8ED0A5D = Mat4__ProjectionM_8ED0A5D;
exports.Mat4__LookAt_Z797A4246 = Mat4__LookAt_Z797A4246;
exports.Mat4__LookAtM_Z6484271 = Mat4__LookAtM_Z6484271;
exports.Mat4__Ortho_530735F5 = Mat4__Ortho_530735F5;
exports.Mat4__OrthoM_357D8320 = Mat4__OrthoM_357D8320;
exports.Mat4__Perspective_7BDB5F74 = Mat4__Perspective_7BDB5F74;
exports.Mat4__PerspectiveM_Z18CA227F = Mat4__PerspectiveM_Z18CA227F;
exports.Mat4__Translation_Z6F5B78D8 = Mat4__Translation_Z6F5B78D8;
exports.Mat4__Scaled_Z6F5B78D8 = Mat4__Scaled_Z6F5B78D8;
exports.Mat4__RotationTrigZ_4055D635 = Mat4__RotationTrigZ_4055D635;
exports.Mat4__RotationZ_Z244A12F1 = Mat4__RotationZ_Z244A12F1;
exports.Mat4__Mult_Z51C3494B = Mat4__Mult_Z51C3494B;
exports.Mat4__MultM_Z3D54A7A0 = Mat4__MultM_Z3D54A7A0;
exports.Mat4__Translate_Z6F5B78D8 = Mat4__Translate_Z6F5B78D8;
exports.Mat4__TranslateM_8ED0A5D = Mat4__TranslateM_8ED0A5D;
exports.Mat4__Scale_Z6F5B78D8 = Mat4__Scale_Z6F5B78D8;
exports.Mat4__ScaleM_8ED0A5D = Mat4__ScaleM_8ED0A5D;
exports.Mat4__RotateTrigZ_4055D635 = Mat4__RotateTrigZ_4055D635;
exports.Mat4__RotateTrigZM_2E41E8E0 = Mat4__RotateTrigZM_2E41E8E0;
exports.Mat4__RotateZ_Z244A12F1 = Mat4__RotateZ_Z244A12F1;
exports.Mat4__RotateZM_6069AC9A = Mat4__RotateZM_6069AC9A;
exports.Mat4__Inverse_Z49D52D2B = Mat4__Inverse_Z49D52D2B;
exports.Mat4__InverseM = Mat4__InverseM;
exports.Mat4 = exports.Mat3 = exports.Mat2D = exports.Mat2 = void 0;

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _optionex = require("./optionex.js");

var _vectors = require("./vectors.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var Mat2 = /*#__PURE__*/function () {
  function Mat2(values) {
    _classCallCheck(this, Mat2);

    this.m = new _Types.FSharpRef(null);
    var m = this.m;
    this.values = values;
    this.m.contents = this;
    this["Values@"] = this.values;
    this["init@6-3"] = 1;
  }

  _createClass(Mat2, [{
    key: "toString",
    value: function toString() {
      var arg20, arg10, arg20_1, arg10_1;

      var _ = this;

      var v = _.values;
      return (arg20 = v[1], (arg10 = v[0], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f\n"))(arg10)(arg20))) + (arg20_1 = v[3], (arg10_1 = v[2], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f"))(arg10_1)(arg20_1)));
    }
  }]);

  return Mat2;
}();

exports.Mat2 = Mat2;

function Mat2$reflection() {
  return (0, _Reflection.class_type)("Wil.Core.Mat2", void 0, Mat2);
}

function Mat2_$ctor_Z14AF5965(values) {
  return new Mat2(values);
}

function Mat2_get_Identity() {
  return new Float64Array([1, 0, 0, 1]);
}

function Mat2_Create() {
  return Mat2_$ctor_Z14AF5965(Mat2_get_Identity());
}

function Mat2__get_Values(__) {
  return __["Values@"];
}

function Mat2__SetToIdentity(_) {
  _.values[0] = 1;
  _.values[1] = 0;
  _.values[2] = 0;
  _.values[3] = 1;
}

function Mat2__Set_Z33A93963(_, newValues) {
  _.values[0] = newValues[0];
  _.values[1] = newValues[1];
  _.values[2] = newValues[2];
  _.values[3] = newValues[3];
  return _.m.contents;
}

function Mat2__RotationTrig_4055D7F3(_, cos, sin, result) {
  var result_1 = Mat2__optionalMat_Z49D52CED(_, result);
  var values = Mat2__get_Values(result_1);
  values[0] = cos;
  values[1] = -sin;
  values[2] = sin;
  values[3] = cos;
  return result_1;
}

function Mat2__Rotation_Z244A1337(_, angle, result) {
  var ang = angle;
  return Mat2__RotationTrig_4055D7F3(_.m.contents, Math.cos(ang), Math.sin(ang), result);
}

function Mat2__RotationTrigReverse_4055D7F3(_, cos, sin, result) {
  var result_1 = Mat2__optionalMat_Z49D52CED(_, result);
  var values = Mat2__get_Values(result_1);
  values[0] = cos;
  values[1] = sin;
  values[2] = -sin;
  values[3] = cos;
  return result_1;
}

function Mat2__RotationReverse_Z244A1337(_, angle, result) {
  var ang = angle;
  return Mat2__RotationTrigReverse_4055D7F3(_.m.contents, Math.cos(ang), Math.sin(ang), result);
}

function Mat2__Transpose_Z49D52CED(_, result) {
  var result_1 = Mat2__optionalMat_Z49D52CED(_, result);
  var values = Mat2__get_Values(result_1);
  var v1 = values[1];
  var v2 = values[2];
  values[0] = values[0];
  values[1] = v2;
  values[2] = v1;
  values[3] = values[3];
  return result_1;
}

function Mat2__TransposeM(_) {
  var value = Mat2__Transpose_Z49D52CED(_.m.contents, _.m.contents);
  void value;
}

function Mat2__Mult_Z51C349CB(_, other, result) {
  var result_1 = Mat2__optionalMat_Z49D52CED(_, result);
  var values = Mat2__get_Values(result_1);
  var ovalues = Mat2__get_Values(other);
  var v00 = values[0];
  var v01 = values[1];
  var v10 = values[2];
  var v11 = values[3];
  var o00 = ovalues[0];
  var o01 = ovalues[1];
  var o10 = ovalues[2];
  var o11 = ovalues[3];
  values[0] = v00 * o00 + v01 * o10;
  values[1] = v00 * o01 + v01 * o11;
  values[2] = v10 * o00 + v11 * o10;
  values[3] = v10 * o01 + v11 * o11;
  return result_1;
}

function Mat2__MultM_Z3D54A79A(_, other) {
  var value = Mat2__Mult_Z51C349CB(_.m.contents, other, _.m.contents);
  void value;
}

function Mat2__Transform_Z50E8264B(_, v, result) {
  var result_1 = (0, _optionex.calcDef)(_vectors.Vec2_Create, result);
  var value = _.values[0] * v.values[0] + _.values[1] * v.values[1];
  result_1.values[0] = value;
  var value_1 = _.values[2] * v.values[0] + _.values[3] * v.values[1];
  result_1.values[1] = value_1;
  return result_1;
}

function Mat2__TransformInverse_Z50E8264B(_, v, result) {
  var result_1 = (0, _optionex.calcDef)(_vectors.Vec2_Create, result);
  var value = _.values[0] * v.values[0] + _.values[2] * v.values[1];
  result_1.values[0] = value;
  var value_1 = _.values[1] * v.values[0] + _.values[3] * v.values[1];
  result_1.values[1] = value_1;
  return result_1;
}

function Mat2__optionalMat_Z49D52CED(this$, mat) {
  return (0, _Option.defaultArg)(mat, this$.m.contents);
}

var Mat2D = /*#__PURE__*/function () {
  function Mat2D(values) {
    _classCallCheck(this, Mat2D);

    this.m = new _Types.FSharpRef(null);
    var m = this.m;
    this.values = values;
    this.m.contents = this;
    this["Values@"] = this.values;
    this["init@107-4"] = 1;
  }

  _createClass(Mat2D, [{
    key: "toString",
    value: function toString() {
      var arg20, arg10, arg20_1, arg10_1, arg20_2, arg10_2;

      var _ = this;

      var v = _.values;
      return (arg20 = v[1], (arg10 = v[0], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f\n"))(arg10)(arg20))) + (arg20_1 = v[3], (arg10_1 = v[2], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f\n"))(arg10_1)(arg20_1))) + (arg20_2 = v[4], (arg10_2 = v[4], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f"))(arg10_2)(arg20_2)));
    }
  }]);

  return Mat2D;
}();

exports.Mat2D = Mat2D;

function Mat2D$reflection() {
  return (0, _Reflection.class_type)("Wil.Core.Mat2D", void 0, Mat2D);
}

function Mat2D_$ctor_Z14AF5965(values) {
  return new Mat2D(values);
}

function Mat2D_get_Identity() {
  return new Float64Array([1, 0, 0, 1, 0, 0]);
}

function Mat2D_Create() {
  return Mat2D_$ctor_Z14AF5965(Mat2D_get_Identity());
}

function Mat2D__get_Values(__) {
  return __["Values@"];
}

function Mat2D__SetToIdentity(_) {
  _.values[0] = 1;
  _.values[1] = 0;
  _.values[2] = 0;
  _.values[3] = 1;
  _.values[4] = 0;
  _.values[5] = 0;
}

function Mat2D__Set_Z33A93963(_, newValues) {
  _.values[0] = newValues[0];
  _.values[1] = newValues[1];
  _.values[2] = newValues[2];
  _.values[3] = newValues[3];
  _.values[4] = newValues[4];
  _.values[5] = newValues[5];
  return _.m.contents;
}

function Mat2D__Translation_Z7205CF09(_, x, y, result) {
  var result_1 = Mat2D__optionalMat_7B853417(_, result);
  var values = Mat2D__get_Values(result_1);
  values[0] = 1;
  values[1] = 0;
  values[2] = 0;
  values[3] = 1;
  values[4] = x;
  values[5] = y;
  return result_1;
}

function Mat2D__RotationTrig_Z7205CF09(_, cos, sin, result) {
  var result_1 = Mat2D__optionalMat_7B853417(_, result);
  var values = Mat2D__get_Values(result_1);
  values[0] = cos;
  values[1] = -sin;
  values[2] = sin;
  values[3] = cos;
  values[4] = 0;
  values[5] = 0;
  return result_1;
}

function Mat2D__Rotation_161A0BCD(_, angle, result) {
  var ang = angle;
  return Mat2D__RotationTrig_Z7205CF09(_.m.contents, Math.cos(ang), Math.sin(ang), result);
}

function Mat2D__RotationTrigReverse_Z7205CF09(_, cos, sin, result) {
  var result_1 = Mat2D__optionalMat_7B853417(_, result);
  var values = Mat2D__get_Values(result_1);
  values[0] = cos;
  values[1] = sin;
  values[2] = -sin;
  values[3] = cos;
  values[4] = 0;
  values[5] = 0;
  return result_1;
}

function Mat2D__RotationReverse_161A0BCD(_, angle, result) {
  var ang = angle;
  return Mat2D__RotationTrigReverse_Z7205CF09(_.m.contents, Math.cos(ang), Math.sin(ang), result);
}

function Mat2D__Mult_616625B5(_, other, result) {
  var result_1 = Mat2D__optionalMat_7B853417(_, result);
  var values = Mat2D__get_Values(result_1);
  var ovalues = Mat2D__get_Values(other);
  var v0 = values[0];
  var v1 = values[1];
  var v2 = values[2];
  var v3 = values[3];
  var v4 = values[4];
  var v5 = values[5];
  var o0 = ovalues[0];
  var o1 = ovalues[1];
  var o2 = ovalues[2];
  var o3 = ovalues[3];
  values[0] = v0 * o0 + v1 * o2;
  values[1] = v0 * o1 + v1 * o3;
  values[2] = v2 * o0 + v3 * o2;
  values[3] = v2 * o1 + v3 * o3;
  values[4] = v4 * o0 + v5 * o2 + v4;
  values[5] = v4 * o1 + v5 * o3 + v5;
  return result_1;
}

function Mat2D__MultM_18166562(_, other) {
  var value = Mat2D__Mult_616625B5(_.m.contents, other, _.m.contents);
  void value;
}

function Mat2D__Translate_Z7205CF09(_, x, y, result) {
  var temp = Mat2D_Create();
  return Mat2D__Mult_616625B5(_.m.contents, Mat2D__Translation_Z7205CF09(_.m.contents, x, y, temp), result);
}

function Mat2D__TranslateM_2E41E8E0(_, x, y) {
  var value = Mat2D__Translate_Z7205CF09(_.m.contents, x, y, _.m.contents);
  void value;
}

function Mat2D__RotateTrig_Z7205CF09(_, cos, sin, result) {
  var temp = Mat2D_Create();
  return Mat2D__Mult_616625B5(_.m.contents, Mat2D__RotationTrig_Z7205CF09(_.m.contents, cos, sin, temp), result);
}

function Mat2D__RotateTrigM_2E41E8E0(_, cos, sin) {
  var value = Mat2D__RotateTrig_Z7205CF09(_.m.contents, cos, sin, _.m.contents);
  void value;
}

function Mat2D__Rotate_161A0BCD(_, angle, result) {
  var ang = angle;
  return Mat2D__RotateTrig_Z7205CF09(_.m.contents, Math.cos(ang), Math.sin(ang), result);
}

function Mat2D__RotateM_6069AC9A(_, angle) {
  var value = Mat2D__Rotate_161A0BCD(_.m.contents, angle, _.m.contents);
  void value;
}

function Mat2D__RotateTrigReverse_Z7205CF09(_, cos, sin, result) {
  var temp = Mat2D_Create();
  return Mat2D__Mult_616625B5(_.m.contents, Mat2D__RotationTrigReverse_Z7205CF09(_.m.contents, cos, sin, temp), result);
}

function Mat2D__RotateTrigReverseM_2E41E8E0(_, cos, sin) {
  var value = Mat2D__RotateTrigReverse_Z7205CF09(_.m.contents, cos, sin, _.m.contents);
  void value;
}

function Mat2D__RotateReverse_161A0BCD(_, angle, result) {
  var ang = angle;
  return Mat2D__RotateTrigReverse_Z7205CF09(_.m.contents, Math.cos(ang), Math.sin(ang), result);
}

function Mat2D__RotateReverseM_6069AC9A(_, angle) {
  var value = Mat2D__RotateReverse_161A0BCD(_.m.contents, angle, _.m.contents);
  void value;
}

function Mat2D__Transform_Z50E8264B(_, v, result) {
  var result_1 = (0, _optionex.calcDef)(_vectors.Vec2_Create, result);
  var value = _.values[0] * v.values[0] + _.values[1] * v.values[1] + _.values[4];
  result_1.values[0] = value;
  var value_1 = _.values[2] * v.values[0] + _.values[3] * v.values[1] + _.values[5];
  result_1.values[1] = value_1;
  return result_1;
}

function Mat2D__optionalMat_7B853417(this$, mat) {
  return (0, _Option.defaultArg)(mat, this$.m.contents);
}

var Mat3 = /*#__PURE__*/function () {
  function Mat3(values) {
    _classCallCheck(this, Mat3);

    this.m = new _Types.FSharpRef(null);
    var m = this.m;
    this.values = values;
    this.m.contents = this;
    this["Values@"] = this.values;
    this["init@246-5"] = 1;
  }

  _createClass(Mat3, [{
    key: "toString",
    value: function toString() {
      var arg30, arg20, arg10, arg30_1, arg20_1, arg10_1, arg30_2, arg20_2, arg10_2;

      var _ = this;

      var v = _.values;
      return (arg30 = v[2], (arg20 = v[1], (arg10 = v[0], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f %10.2f\n"))(arg10)(arg20)(arg30)))) + (arg30_1 = v[5], (arg20_1 = v[4], (arg10_1 = v[3], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f %10.2f\n"))(arg10_1)(arg20_1)(arg30_1)))) + (arg30_2 = v[8], (arg20_2 = v[7], (arg10_2 = v[6], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f %10.2f"))(arg10_2)(arg20_2)(arg30_2))));
    }
  }]);

  return Mat3;
}();

exports.Mat3 = Mat3;

function Mat3$reflection() {
  return (0, _Reflection.class_type)("Wil.Core.Mat3", void 0, Mat3);
}

function Mat3_$ctor_Z14AF5965(values) {
  return new Mat3(values);
}

function Mat3_get_Identity() {
  return new Float64Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
}

function Mat3_Create() {
  return Mat3_$ctor_Z14AF5965(Mat3_get_Identity());
}

function Mat3__get_Values(__) {
  return __["Values@"];
}

function Mat3__SetToIdentity(_) {
  _.values[0] = 1;
  _.values[1] = 0;
  _.values[2] = 0;
  _.values[3] = 0;
  _.values[4] = 1;
  _.values[5] = 0;
  _.values[6] = 0;
  _.values[7] = 0;
  _.values[8] = 1;
}

function Mat3__Set_Z33A93963(_, newValues) {
  _.values[0] = newValues[0];
  _.values[1] = newValues[1];
  _.values[2] = newValues[2];
  _.values[3] = newValues[3];
  _.values[4] = newValues[4];
  _.values[5] = newValues[5];
  _.values[6] = newValues[6];
  _.values[7] = newValues[7];
  _.values[8] = newValues[8];
  return _.m.contents;
}

function Mat3__Projection_4055D7D2(_, width, height, result) {
  var result_1 = Mat3__optionalMat_Z49D52CCE(_, result);
  var values = Mat3__get_Values(result_1);
  values[0] = 2 / width;
  values[1] = 0;
  values[2] = 0;
  values[3] = 0;
  values[4] = -2 / height;
  values[5] = 0;
  values[6] = -1;
  values[7] = 1;
  values[8] = 1;
  return result_1;
}

function Mat3__ProjectionM_2E41E8E0(_, width, height) {
  var value = Mat3__Projection_4055D7D2(_.m.contents, width, height, _.m.contents);
  void value;
}

function Mat3__Translation_4055D7D2(_, x, y, result) {
  var result_1 = Mat3__optionalMat_Z49D52CCE(_, result);
  var values = Mat3__get_Values(result_1);
  values[0] = 1;
  values[1] = 0;
  values[2] = 0;
  values[3] = 0;
  values[4] = 1;
  values[5] = 0;
  values[6] = x;
  values[7] = y;
  values[8] = 1;
  return result_1;
}

function Mat3__RotationTrigZ_4055D7D2(_, cos, sin, result) {
  var result_1 = Mat3__optionalMat_Z49D52CCE(_, result);
  var values = Mat3__get_Values(result_1);
  values[0] = cos;
  values[1] = sin;
  values[2] = 0;
  values[3] = -sin;
  values[4] = cos;
  values[5] = 0;
  values[6] = 0;
  values[7] = 0;
  values[8] = 1;
  return result_1;
}

function Mat3__RotationZ_Z244A1318(_, angle, result) {
  var ang = angle;
  return Mat3__RotationTrigZ_4055D7D2(_.m.contents, Math.cos(ang), Math.sin(ang), result);
}

function Mat3__Mult_Z51C3498B(_, other, result) {
  var result_1 = Mat3__optionalMat_Z49D52CCE(_, result);
  var values = Mat3__get_Values(result_1);
  var ovalues = Mat3__get_Values(other);
  var a00 = values[0];
  var a01 = values[1];
  var a02 = values[2];
  var a10 = values[3];
  var a11 = values[4];
  var a12 = values[5];
  var a20 = values[6];
  var a21 = values[7];
  var a22 = values[8];
  var b00 = ovalues[0];
  var b01 = ovalues[1];
  var b02 = ovalues[2];
  var b10 = ovalues[3];
  var b11 = ovalues[4];
  var b12 = ovalues[5];
  var b20 = ovalues[6];
  var b21 = ovalues[7];
  var b22 = ovalues[8];
  values[0] = a00 * b00 + a10 * b01 + a20 * b02;
  values[1] = a01 * b00 + a11 * b01 + a21 * b02;
  values[2] = a02 * b00 + a12 * b01 + a22 * b02;
  values[3] = a00 * b10 + a10 * b11 + a20 * b12;
  values[4] = a01 * b10 + a11 * b11 + a21 * b12;
  values[5] = a02 * b10 + a12 * b11 + a22 * b12;
  values[6] = a00 * b20 + a10 * b21 + a20 * b22;
  values[7] = a01 * b20 + a11 * b21 + a21 * b22;
  values[8] = a02 * b20 + a12 * b21 + a22 * b22;
  return result_1;
}

function Mat3__MultM_Z3D54A799(_, other) {
  var value = Mat3__Mult_Z51C3498B(_.m.contents, other, _.m.contents);
  void value;
}

function Mat3__Transform_Z50E8268B(_, v, result) {
  var result_1 = (0, _optionex.calcDef)(_vectors.Vec3_Create, result);
  var a00 = _.values[0];
  var a01 = _.values[1];
  var a02 = _.values[2];
  var a10 = _.values[3];
  var a11 = _.values[4];
  var a12 = _.values[5];
  var a20 = _.values[6];
  var a21 = _.values[7];
  var a22 = _.values[8];
  var value = a00 * v.values[0] + a10 * v.values[1] + a20 * v.values[2];
  result_1.values[0] = value;
  var value_1 = a01 * v.values[0] + a11 * v.values[1] + a21 * v.values[2];
  result_1.values[1] = value_1;
  var value_2 = a02 * v.values[0] + a12 * v.values[1] + a22 * v.values[2];
  result_1.values[2] = value_2;
  return result_1;
}

function Mat3__optionalMat_Z49D52CCE(this$, mat) {
  return (0, _Option.defaultArg)(mat, this$.m.contents);
}

var Mat4 = /*#__PURE__*/function () {
  function Mat4(values) {
    _classCallCheck(this, Mat4);

    this.m = new _Types.FSharpRef(null);
    var m = this.m;
    this.values = values;
    this.m.contents = this;
    this["Values@"] = this.values;
    this["init@388-6"] = 1;
  }

  _createClass(Mat4, [{
    key: "toString",
    value: function toString() {
      var arg40, arg30, arg20, arg10, arg40_1, arg30_1, arg20_1, arg10_1, arg40_2, arg30_2, arg20_2, arg10_2, arg40_3, arg30_3, arg20_3, arg10_3;

      var _ = this;

      var v = _.values;
      return (arg40 = v[3], (arg30 = v[2], (arg20 = v[1], (arg10 = v[0], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f %10.2f %10.2f\n"))(arg10)(arg20)(arg30)(arg40))))) + (arg40_1 = v[7], (arg30_1 = v[6], (arg20_1 = v[5], (arg10_1 = v[4], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f %10.2f %10.2f\n"))(arg10_1)(arg20_1)(arg30_1)(arg40_1))))) + (arg40_2 = v[11], (arg30_2 = v[10], (arg20_2 = v[9], (arg10_2 = v[8], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f %10.2f %10.2f\n"))(arg10_2)(arg20_2)(arg30_2)(arg40_2))))) + (arg40_3 = v[15], (arg30_3 = v[14], (arg20_3 = v[13], (arg10_3 = v[12], (0, _String.toText)((0, _String.printf)("%10.2f %10.2f %10.2f %10.2f"))(arg10_3)(arg20_3)(arg30_3)(arg40_3)))));
    }
  }]);

  return Mat4;
}();

exports.Mat4 = Mat4;

function Mat4$reflection() {
  return (0, _Reflection.class_type)("Wil.Core.Mat4", void 0, Mat4);
}

function Mat4_$ctor_Z14AF5965(values) {
  return new Mat4(values);
}

function Mat4_get_Identity() {
  return new Float64Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
}

function Mat4_Create() {
  return Mat4_$ctor_Z14AF5965(Mat4_get_Identity());
}

function Mat4__get_Values(__) {
  return __["Values@"];
}

function Mat4__SetToIdentity(_) {
  _.values[0] = 1;
  _.values[1] = 0;
  _.values[2] = 0;
  _.values[3] = 0;
  _.values[4] = 0;
  _.values[5] = 1;
  _.values[6] = 0;
  _.values[7] = 0;
  _.values[8] = 0;
  _.values[9] = 0;
  _.values[10] = 1;
  _.values[11] = 0;
  _.values[12] = 0;
  _.values[13] = 0;
  _.values[14] = 0;
  _.values[15] = 1;
}

function Mat4__Set_Z33A93963(_, newValues) {
  _.values[0] = newValues[0];
  _.values[1] = newValues[1];
  _.values[2] = newValues[2];
  _.values[3] = newValues[3];
  _.values[4] = newValues[4];
  _.values[5] = newValues[5];
  _.values[6] = newValues[6];
  _.values[7] = newValues[7];
  _.values[8] = newValues[8];
  _.values[9] = newValues[9];
  _.values[10] = newValues[10];
  _.values[11] = newValues[11];
  _.values[12] = newValues[12];
  _.values[13] = newValues[13];
  _.values[14] = newValues[14];
  _.values[15] = newValues[15];
}

function Mat4__Projection_Z6F5B78D8(_, width, height, depth, result) {
  var result_1 = Mat4__optionalMat_Z49D52D2B(_, result);
  var values = Mat4__get_Values(result_1);
  values[0] = 2 / width;
  values[1] = 0;
  values[2] = 0;
  values[3] = 0;
  values[4] = 0;
  values[5] = -2 / height;
  values[6] = 0;
  values[7] = 0;
  values[8] = 0;
  values[9] = 0;
  values[10] = 2 / depth;
  values[11] = 0;
  values[12] = -1;
  values[13] = 1;
  values[14] = 0;
  values[15] = 1;
  return result_1;
}

function Mat4__ProjectionM_8ED0A5D(_, width, height, depth) {
  var value = Mat4__Projection_Z6F5B78D8(_.m.contents, width, height, depth, _.m.contents);
  void value;
}

function Mat4__LookAt_Z797A4246(_, cameraPosition, target, up, result) {
  var camera = cameraPosition;
  var zAxis = (0, _vectors.Vec3_op_BangBang_Z3D47FC51)((0, _vectors.Vec3_op_Subtraction_Z24FF85E0)(camera, target));
  var xAxis = (0, _vectors.Vec3_op_BangBang_Z3D47FC51)((0, _vectors.Vec3_op_PlusMultiply_Z24FF85E0)(up, zAxis));
  var yAxis = (0, _vectors.Vec3_op_BangBang_Z3D47FC51)((0, _vectors.Vec3_op_PlusMultiply_Z24FF85E0)(zAxis, xAxis));
  var result_1 = Mat4__optionalMat_Z49D52D2B(_, result);
  var values = Mat4__get_Values(result_1);
  values[0] = xAxis.values[0];
  values[1] = xAxis.values[1];
  values[2] = xAxis.values[2];
  values[3] = 0;
  values[4] = yAxis.values[0];
  values[5] = yAxis.values[1];
  values[6] = yAxis.values[2];
  values[7] = 0;
  values[8] = zAxis.values[0];
  values[9] = zAxis.values[1];
  values[10] = zAxis.values[2];
  values[11] = 0;
  values[12] = -camera.values[0];
  values[13] = -camera.values[1];
  values[14] = -camera.values[2];
  values[15] = 1;
  return result_1;
}

function Mat4__LookAtM_Z6484271(_, cameraPosition, target, up) {
  var value = Mat4__LookAt_Z797A4246(_.m.contents, cameraPosition, target, up, _.m.contents);
  void value;
}

function Mat4__Ortho_530735F5(_, left, right, bottom, top, near, far, result) {
  var result_1 = Mat4__optionalMat_Z49D52D2B(_, result);
  var values = Mat4__get_Values(result_1);
  values[0] = 2 / (right - left);
  values[1] = 0;
  values[2] = 0;
  values[3] = 0;
  values[4] = 0;
  values[5] = 2 / (top - bottom);
  values[6] = 0;
  values[7] = 0;
  values[8] = 0;
  values[9] = 0;
  values[10] = 2 / (near - far);
  values[11] = 0;
  values[12] = (left + right) / (left - right);
  values[13] = (bottom + top) / (bottom - top);
  values[14] = (near + far) / (near - far);
  values[15] = 1;
  return result_1;
}

function Mat4__OrthoM_357D8320(_, left, right, bottom, top, near, far) {
  var value = Mat4__Ortho_530735F5(_.m.contents, left, right, bottom, top, near, far, _.m.contents);
  void value;
}

function Mat4__Perspective_7BDB5F74(_, fov, aspect, near, far, result) {
  var result_1 = Mat4__optionalMat_Z49D52D2B(_, result);
  var values = Mat4__get_Values(result_1);
  var f = Math.tan(3.141592653589793 * 0.5 - fov * 0.5);
  var rangeInv = 1 / (near - far);
  values[0] = f / aspect;
  values[1] = 0;
  values[2] = 0;
  values[3] = 0;
  values[4] = 0;
  values[5] = f;
  values[6] = 0;
  values[7] = 0;
  values[8] = 0;
  values[9] = 0;
  values[10] = (near + far) * rangeInv;
  values[11] = -1;
  values[12] = 0;
  values[13] = 0;
  values[14] = near * far * rangeInv * 2;
  values[15] = 0;
  return result_1;
}

function Mat4__PerspectiveM_Z18CA227F(_, fov, aspect, near, far) {
  var value = Mat4__Perspective_7BDB5F74(_.m.contents, fov, aspect, near, far, _.m.contents);
  void value;
}

function Mat4__Translation_Z6F5B78D8(_, x, y, z, result) {
  var result_1 = Mat4__optionalMat_Z49D52D2B(_, result);
  var values = Mat4__get_Values(result_1);
  values[0] = 1;
  values[1] = 0;
  values[2] = 0;
  values[3] = 0;
  values[4] = 0;
  values[5] = 1;
  values[6] = 0;
  values[7] = 0;
  values[8] = 0;
  values[9] = 0;
  values[10] = 1;
  values[11] = 0;
  values[12] = x;
  values[13] = y;
  values[14] = z;
  values[15] = 1;
  return result_1;
}

function Mat4__Scaled_Z6F5B78D8(_, x, y, z, result) {
  var result_1 = Mat4__optionalMat_Z49D52D2B(_, result);
  var values = Mat4__get_Values(result_1);
  values[0] = x;
  values[1] = 0;
  values[2] = 0;
  values[3] = 0;
  values[4] = 0;
  values[5] = y;
  values[6] = 0;
  values[7] = 0;
  values[8] = 0;
  values[9] = 0;
  values[10] = z;
  values[11] = 0;
  values[12] = 0;
  values[13] = 0;
  values[14] = 0;
  values[15] = 1;
  return result_1;
}

function Mat4__RotationTrigZ_4055D635(_, cos, sin, result) {
  var result_1 = Mat4__optionalMat_Z49D52D2B(_, result);
  var values = Mat4__get_Values(result_1);
  values[0] = cos;
  values[1] = sin;
  values[2] = 0;
  values[3] = 0;
  values[4] = -sin;
  values[5] = cos;
  values[6] = 0;
  values[7] = 0;
  values[8] = 0;
  values[9] = 0;
  values[10] = 1;
  values[11] = 0;
  values[12] = 0;
  values[13] = 0;
  values[14] = 0;
  values[15] = 1;
  return result_1;
}

function Mat4__RotationZ_Z244A12F1(_, angle, result) {
  var ang = angle;
  return Mat4__RotationTrigZ_4055D635(_.m.contents, Math.cos(ang), Math.sin(ang), result);
}

function Mat4__Mult_Z51C3494B(_, other, result) {
  var result_1 = Mat4__optionalMat_Z49D52D2B(_, result);
  var a = _.values;
  var b = Mat4__get_Values(other);
  var values = Mat4__get_Values(result_1);
  var a00 = a[0];
  var a01 = a[1];
  var a02 = a[2];
  var a03 = a[3];
  var a10 = a[4];
  var a11 = a[5];
  var a12 = a[6];
  var a13 = a[7];
  var a20 = a[8];
  var a21 = a[9];
  var a22 = a[10];
  var a23 = a[11];
  var a30 = a[12];
  var a31 = a[13];
  var a32 = a[14];
  var a33 = a[15];
  var b00 = b[0];
  var b01 = b[1];
  var b02 = b[2];
  var b03 = b[3];
  var b10 = b[4];
  var b11 = b[5];
  var b12 = b[6];
  var b13 = b[7];
  var b20 = b[8];
  var b21 = b[9];
  var b22 = b[10];
  var b23 = b[11];
  var b30 = b[12];
  var b31 = b[13];
  var b32 = b[14];
  var b33 = b[15];
  values[0] = b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30;
  values[1] = b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31;
  values[2] = b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32;
  values[3] = b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33;
  values[4] = b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30;
  values[5] = b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31;
  values[6] = b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32;
  values[7] = b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33;
  values[8] = b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30;
  values[9] = b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31;
  values[10] = b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32;
  values[11] = b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33;
  values[12] = b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30;
  values[13] = b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31;
  values[14] = b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32;
  values[15] = b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33;
  return result_1;
}

function Mat4__MultM_Z3D54A7A0(_, other) {
  var value = Mat4__Mult_Z51C3494B(_.m.contents, other, _.m.contents);
  void value;
}

function Mat4__Translate_Z6F5B78D8(_, x, y, z, result) {
  var temp = Mat4_Create();
  return Mat4__Mult_Z51C3494B(_.m.contents, Mat4__Translation_Z6F5B78D8(_.m.contents, x, y, z, temp), result);
}

function Mat4__TranslateM_8ED0A5D(_, x, y, z) {
  var value = Mat4__Translate_Z6F5B78D8(_.m.contents, x, y, z, _.m.contents);
  void value;
}

function Mat4__Scale_Z6F5B78D8(_, x, y, z, result) {
  var temp = Mat4_Create();
  return Mat4__Mult_Z51C3494B(_.m.contents, Mat4__Scaled_Z6F5B78D8(_.m.contents, x, y, z, temp), result);
}

function Mat4__ScaleM_8ED0A5D(_, x, y, z) {
  var value = Mat4__Scale_Z6F5B78D8(_.m.contents, x, y, z, _.m.contents);
  void value;
}

function Mat4__RotateTrigZ_4055D635(_, cos, sin, result) {
  var temp = Mat4_Create();
  return Mat4__Mult_Z51C3494B(_.m.contents, Mat4__RotationTrigZ_4055D635(_.m.contents, cos, sin, temp), result);
}

function Mat4__RotateTrigZM_2E41E8E0(_, cos, sin) {
  var value = Mat4__RotateTrigZ_4055D635(_.m.contents, cos, sin, _.m.contents);
  void value;
}

function Mat4__RotateZ_Z244A12F1(_, angle, result) {
  var ang = angle;
  return Mat4__RotateTrigZ_4055D635(_.m.contents, Math.cos(ang), Math.sin(ang), result);
}

function Mat4__RotateZM_6069AC9A(_, angle) {
  var value = Mat4__RotateZ_Z244A12F1(_.m.contents, angle, _.m.contents);
  void value;
}

function Mat4__Inverse_Z49D52D2B(_, result) {
  var result_1 = (0, _Option.defaultArgWith)(result, Mat4_Create);
  var m00 = _.values[0];
  var m01 = _.values[1];
  var m02 = _.values[2];
  var m03 = _.values[3];
  var m10 = _.values[4];
  var m11 = _.values[5];
  var m12 = _.values[6];
  var m13 = _.values[7];
  var m20 = _.values[8];
  var m21 = _.values[9];
  var m22 = _.values[10];
  var m23 = _.values[11];
  var m30 = _.values[12];
  var m31 = _.values[13];
  var m32 = _.values[14];
  var m33 = _.values[15];
  var tmp00 = m22 * m33;
  var tmp01 = m32 * m23;
  var tmp02 = m12 * m33;
  var tmp03 = m32 * m13;
  var tmp04 = m12 * m23;
  var tmp05 = m22 * m13;
  var tmp06 = m02 * m33;
  var tmp07 = m32 * m03;
  var tmp08 = m02 * m23;
  var tmp09 = m22 * m03;
  var tmp10 = m02 * m13;
  var tmp11 = m12 * m03;
  var tmp12 = m20 * m31;
  var tmp13 = m30 * m21;
  var tmp14 = m10 * m31;
  var tmp15 = m30 * m11;
  var tmp16 = m10 * m21;
  var tmp17 = m20 * m11;
  var tmp18 = m00 * m31;
  var tmp19 = m30 * m01;
  var tmp20 = m00 * m21;
  var tmp21 = m20 * m01;
  var tmp22 = m00 * m11;
  var tmp23 = m10 * m01;
  var t0 = tmp00 * m11 + tmp03 * m21 + tmp04 * m31 - (tmp01 * m11 + tmp02 * m21 + tmp05 * m31);
  var t1 = tmp01 * m01 + tmp06 * m21 + tmp09 * m31 - (tmp00 * m01 + tmp07 * m21 + tmp08 * m31);
  var t2 = tmp02 * m01 + tmp07 * m11 + tmp10 * m31 - (tmp03 * m01 + tmp06 * m11 + tmp11 * m31);
  var t3 = tmp05 * m01 + tmp08 * m11 + tmp11 * m21 - (tmp04 * m01 + tmp09 * m11 + tmp10 * m21);
  var d = 1 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);
  var values = Mat4__get_Values(result_1);
  values[0] = t0 * d;
  values[1] = t1 * d;
  values[2] = t2 * d;
  values[3] = t3 * d;
  values[4] = (tmp01 * m10 + tmp02 * m20 + tmp05 * m30 - (tmp00 * m10 + tmp03 * m20 + tmp04 * m30)) * d;
  values[5] = (tmp00 * m00 + tmp07 * m20 + tmp08 * m30 - (tmp01 * m00 + tmp06 * m20 + tmp09 * m30)) * d;
  values[6] = (tmp03 * m00 + tmp06 * m10 + tmp11 * m30 - (tmp02 * m00 + tmp07 * m10 + tmp10 * m30)) * d;
  values[7] = (tmp04 * m00 + tmp09 * m10 + tmp10 * m20 - (tmp05 * m00 + tmp08 * m10 + tmp11 * m20)) * d;
  values[8] = (tmp12 * m13 + tmp15 * m23 + tmp16 * m33 - (tmp13 * m13 + tmp14 * m23 + tmp17 * m33)) * d;
  values[9] = (tmp13 * m03 + tmp18 * m23 + tmp21 * m33 - (tmp12 * m03 + tmp19 * m23 + tmp20 * m33)) * d;
  values[10] = (tmp14 * m03 + tmp19 * m13 + tmp22 * m33 - (tmp15 * m03 + tmp18 * m13 + tmp23 * m33)) * d;
  values[11] = (tmp17 * m03 + tmp20 * m13 + tmp23 * m23 - (tmp16 * m03 + tmp21 * m13 + tmp22 * m23)) * d;
  values[12] = (tmp14 * m22 + tmp17 * m32 + tmp13 * m12 - (tmp16 * m32 + tmp12 * m12 + tmp15 * m22)) * d;
  values[13] = (tmp20 * m32 + tmp12 * m02 + tmp19 * m22 - (tmp18 * m22 + tmp21 * m32 + tmp13 * m02)) * d;
  values[14] = (tmp18 * m12 + tmp23 * m32 + tmp15 * m02 - (tmp22 * m32 + tmp14 * m02 + tmp19 * m12)) * d;
  values[15] = (tmp22 * m22 + tmp16 * m02 + tmp21 * m12 - (tmp20 * m12 + tmp23 * m22 + tmp17 * m02)) * d;
  return result_1;
}

function Mat4__InverseM(_) {
  var value = Mat4__Inverse_Z49D52D2B(_.m.contents, _.m.contents);
  void value;
}

function Mat4__optionalMat_Z49D52D2B(this$, mat) {
  return (0, _Option.defaultArg)(mat, this$.m.contents);
}
},{"../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./optionex.js":"../JS/core/optionex.js","./vectors.js":"../JS/core/vectors.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js"}],"../JS/twod/bounds.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Bounds$reflection = Bounds$reflection;
exports.Bounds_$ctor_Z24FF8540 = Bounds_$ctor_Z24FF8540;
exports.Bounds_Create_299C7800 = Bounds_Create_299C7800;
exports.Bounds__get_Center = Bounds__get_Center;
exports.Bounds__get_HalfSize = Bounds__get_HalfSize;
exports.Bounds__get_Values = Bounds__get_Values;
exports.Bounds__get_RectValues = Bounds__get_RectValues;
exports.Bounds__get_Size = Bounds__get_Size;
exports.Bounds__get_Min = Bounds__get_Min;
exports.Bounds__get_Max = Bounds__get_Max;
exports.Bounds__get_Left = Bounds__get_Left;
exports.Bounds__get_Right = Bounds__get_Right;
exports.Bounds__get_Anchor = Bounds__get_Anchor;
exports.Bounds__get_X = Bounds__get_X;
exports.Bounds__get_Y = Bounds__get_Y;
exports.Bounds__get_Width = Bounds__get_Width;
exports.Bounds__get_Height = Bounds__get_Height;
exports.Bounds__get_W = Bounds__get_W;
exports.Bounds__get_H = Bounds__get_H;
exports.Bounds__get_CenterX = Bounds__get_CenterX;
exports.Bounds__get_CenterY = Bounds__get_CenterY;
exports.Bounds__get_MaxRight = Bounds__get_MaxRight;
exports.Bounds__get_MaxCenter = Bounds__get_MaxCenter;
exports.Bounds__get_MaxLeft = Bounds__get_MaxLeft;
exports.Bounds__get_LeftCenter = Bounds__get_LeftCenter;
exports.Bounds__get_MinLeft = Bounds__get_MinLeft;
exports.Bounds__get_MinCenter = Bounds__get_MinCenter;
exports.Bounds__get_MinRight = Bounds__get_MinRight;
exports.Bounds__get_RightCenter = Bounds__get_RightCenter;
exports.Bounds__get_Quadrant1 = Bounds__get_Quadrant1;
exports.Bounds__get_Quadrant2 = Bounds__get_Quadrant2;
exports.Bounds__get_Quadrant3 = Bounds__get_Quadrant3;
exports.Bounds__get_Quadrant4 = Bounds__get_Quadrant4;
exports.Bounds__Clone = Bounds__Clone;
exports.Bounds__WithCenter_Z3D47FC52 = Bounds__WithCenter_Z3D47FC52;
exports.Bounds__WithCenterM_Z4BDB77B1 = Bounds__WithCenterM_Z4BDB77B1;
exports.Bounds__WithAnchor_Z3D47FC52 = Bounds__WithAnchor_Z3D47FC52;
exports.Bounds__WithAnchor_7B00E9A0 = Bounds__WithAnchor_7B00E9A0;
exports.Bounds__WithAnchorM_Z3D47FC52 = Bounds__WithAnchorM_Z3D47FC52;
exports.Bounds__WithAnchorM_7B00E9A0 = Bounds__WithAnchorM_7B00E9A0;
exports.Bounds__WithWidth_5E38073B = Bounds__WithWidth_5E38073B;
exports.Bounds__WithWidthM_Z16DF143 = Bounds__WithWidthM_Z16DF143;
exports.Bounds__WithHeight_5E38073B = Bounds__WithHeight_5E38073B;
exports.Bounds__WithHeightM_Z16DF143 = Bounds__WithHeightM_Z16DF143;
exports.Bounds__WithSize_Z3D47FC52 = Bounds__WithSize_Z3D47FC52;
exports.Bounds__WithSize_2E41E8E0 = Bounds__WithSize_2E41E8E0;
exports.Bounds__WithSize_Z16DF143 = Bounds__WithSize_Z16DF143;
exports.Bounds__WithSizeM_Z3D47FC52 = Bounds__WithSizeM_Z3D47FC52;
exports.Bounds__WithSizeM_2E41E8E0 = Bounds__WithSizeM_2E41E8E0;
exports.Bounds__WithSizeM_Z16DF143 = Bounds__WithSizeM_Z16DF143;
exports.Bounds__WithHalfSize_Z3D47FC52 = Bounds__WithHalfSize_Z3D47FC52;
exports.Bounds__WithHalfSize_7B00E9A0 = Bounds__WithHalfSize_7B00E9A0;
exports.Bounds__WithHalfSize_5E38073B = Bounds__WithHalfSize_5E38073B;
exports.Bounds__WithHalfSizeM_Z3D47FC52 = Bounds__WithHalfSizeM_Z3D47FC52;
exports.Bounds__WithHalfSizeM_7B00E9A0 = Bounds__WithHalfSizeM_7B00E9A0;
exports.Bounds__WithHalfSizeM_5E38073B = Bounds__WithHalfSizeM_5E38073B;
exports.Bounds__Inflate_Z3D47FC52 = Bounds__Inflate_Z3D47FC52;
exports.Bounds__Inflate_7B00E9A0 = Bounds__Inflate_7B00E9A0;
exports.Bounds__Inflate_5E38073B = Bounds__Inflate_5E38073B;
exports.Bounds__InflateM_Z3D47FC52 = Bounds__InflateM_Z3D47FC52;
exports.Bounds__InflateM_7B00E9A0 = Bounds__InflateM_7B00E9A0;
exports.Bounds__InflateM_5E38073B = Bounds__InflateM_5E38073B;
exports.Bounds__InflatePct_Z3D47FC52 = Bounds__InflatePct_Z3D47FC52;
exports.Bounds__InflatePct_7B00E9A0 = Bounds__InflatePct_7B00E9A0;
exports.Bounds__InflatePct_5E38073B = Bounds__InflatePct_5E38073B;
exports.Bounds__InflatePctM_Z3D47FC52 = Bounds__InflatePctM_Z3D47FC52;
exports.Bounds__InflatePctM_7B00E9A0 = Bounds__InflatePctM_7B00E9A0;
exports.Bounds__InflatePctM_5E38073B = Bounds__InflatePctM_5E38073B;
exports.Bounds__MaxWith_Z780DF58B = Bounds__MaxWith_Z780DF58B;
exports.Bounds__MaxWithM_Z134B2C62 = Bounds__MaxWithM_Z134B2C62;
exports.Bounds__MinWith_Z780DF58B = Bounds__MinWith_Z780DF58B;
exports.Bounds__MinWithM_Z134B2C62 = Bounds__MinWithM_Z134B2C62;
exports.Bounds__Clamp_Z780DF58B = Bounds__Clamp_Z780DF58B;
exports.Bounds__ClampM_Z134B2C62 = Bounds__ClampM_Z134B2C62;
exports.Bounds__ClampVec_Z50E8264B = Bounds__ClampVec_Z50E8264B;
exports.Bounds__Contains_Z3D47FC52 = Bounds__Contains_Z3D47FC52;
exports.Bounds__IntersectsWith_Z134B2C62 = Bounds__IntersectsWith_Z134B2C62;
exports.Bounds_get_Zero = Bounds_get_Zero;
exports.BoundsPatterns_$007CBoundsRect$007C = BoundsPatterns_$007CBoundsRect$007C;
exports.BoundsPatterns_$007COptBoundsRect$007C = BoundsPatterns_$007COptBoundsRect$007C;
exports.BoundsPatterns_$007CBoundsRange$007C = BoundsPatterns_$007CBoundsRange$007C;
exports.BoundsPatterns_$007COptBoundsRange$007C = BoundsPatterns_$007COptBoundsRange$007C;
exports.BoundsPatterns_$007CBoundsDim$007C = BoundsPatterns_$007CBoundsDim$007C;
exports.BoundsModule_bounds = BoundsModule_bounds;
exports.BoundsModule_boundsV = BoundsModule_boundsV;
exports.BoundsModule_boundsSize = BoundsModule_boundsSize;
exports.BoundsModule_boundsSizeV = BoundsModule_boundsSizeV;
exports.BoundsModule_boundsCenter = BoundsModule_boundsCenter;
exports.BoundsModule_boundsCenterV = BoundsModule_boundsCenterV;
exports.BoundsModule_boundsCenterHalf = BoundsModule_boundsCenterHalf;
exports.BoundsModule_boundsCenterHalfV = BoundsModule_boundsCenterHalfV;
exports.Bounds = void 0;

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _vectors = require("../core/vectors.js");

var _optionex = require("../core/optionex.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var Bounds = /*#__PURE__*/function () {
  function Bounds(center, halfSize) {
    _classCallCheck(this, Bounds);

    this.b = new _Types.FSharpRef(null);
    var b = this.b;
    this.center = center;
    this.halfSize = halfSize;
    this.b.contents = this;
    this["init@6-7"] = 1;
  }

  _createClass(Bounds, [{
    key: "toString",
    value: function toString() {
      var b = this;
      var arg20 = Bounds__get_Max(b);
      var arg10 = Bounds__get_Min(b);
      return (0, _String.toText)((0, _String.printf)("%A -> %A"))(arg10)(arg20);
    }
  }]);

  return Bounds;
}();

exports.Bounds = Bounds;

function Bounds$reflection() {
  return (0, _Reflection.class_type)("Wil.Twod.Bounds", void 0, Bounds);
}

function Bounds_$ctor_Z24FF8540(center, halfSize) {
  return new Bounds(center, halfSize);
}

function Bounds_Create_299C7800(x, y, w, h) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2_Create_7B00E9A0)(x, y), (0, _vectors.Vec2_Create_7B00E9A0)(w * 0.5, h * 0.5));
}

function Bounds__get_Center(_) {
  return (0, _vectors.Vec2__Clone)(_.center);
}

function Bounds__get_HalfSize(_) {
  return (0, _vectors.Vec2__Clone)(_.halfSize);
}

function Bounds__get_Values(_) {
  var m = Bounds__get_Min(_.b.contents);
  return new Float64Array([m.values[0], m.values[1], Bounds__get_HalfSize(_.b.contents).values[0] * 2, Bounds__get_HalfSize(_.b.contents).values[1] * 2]);
}

function Bounds__get_RectValues(_) {
  var mn = Bounds__get_Min(_.b.contents);
  var mx = Bounds__get_Max(_.b.contents);
  return new Float64Array([mn.values[0], mn.values[1], mx.values[0], mx.values[1]]);
}

function Bounds__get_Size(_) {
  return (0, _vectors.Vec2__Scale_Z6C68B1C0)(Bounds__get_HalfSize(_.b.contents), 2);
}

function Bounds__get_Min(_) {
  return (0, _vectors.Vec2__Sub_Z50E8264B)(Bounds__get_Center(_.b.contents), Bounds__get_HalfSize(_.b.contents));
}

function Bounds__get_Max(_) {
  return (0, _vectors.Vec2__Add_Z50E8264B)(Bounds__get_Center(_.b.contents), Bounds__get_HalfSize(_.b.contents));
}

function Bounds__get_Left(_) {
  return Bounds__get_Center(_.b.contents).values[0] - Bounds__get_HalfSize(_.b.contents).values[0];
}

function Bounds__get_Right(_) {
  return Bounds__get_Center(_.b.contents).values[0] + Bounds__get_HalfSize(_.b.contents).values[0];
}

function Bounds__get_Anchor(_) {
  return Bounds__get_Min(_.b.contents);
}

function Bounds__get_X(_) {
  return Bounds__get_Min(_.b.contents).values[0];
}

function Bounds__get_Y(_) {
  return Bounds__get_Min(_.b.contents).values[1];
}

function Bounds__get_Width(_) {
  return Bounds__get_HalfSize(_.b.contents).values[0] * 2;
}

function Bounds__get_Height(_) {
  return Bounds__get_HalfSize(_.b.contents).values[1] * 2;
}

function Bounds__get_W(_) {
  return Bounds__get_HalfSize(_.b.contents).values[0] * 2;
}

function Bounds__get_H(_) {
  return Bounds__get_HalfSize(_.b.contents).values[1] * 2;
}

function Bounds__get_CenterX(_) {
  return Bounds__get_Center(_.b.contents).values[0];
}

function Bounds__get_CenterY(_) {
  return Bounds__get_Center(_.b.contents).values[1];
}

function Bounds__get_MaxRight(_) {
  return (0, _vectors.Vec2_op_Addition_Z24FF8540)(Bounds__get_Center(_.b.contents), Bounds__get_HalfSize(_.b.contents));
}

function Bounds__get_MaxCenter(_) {
  return (0, _vectors.Vec2_Create_7B00E9A0)(Bounds__get_Center(_.b.contents).values[0], Bounds__get_Center(_.b.contents).values[1] + Bounds__get_HalfSize(_.b.contents).values[1]);
}

function Bounds__get_MaxLeft(_) {
  return (0, _vectors.Vec2_Create_7B00E9A0)(Bounds__get_Center(_.b.contents).values[0] - Bounds__get_HalfSize(_.b.contents).values[0], Bounds__get_Center(_.b.contents).values[1] + Bounds__get_HalfSize(_.b.contents).values[1]);
}

function Bounds__get_LeftCenter(_) {
  return (0, _vectors.Vec2_Create_7B00E9A0)(Bounds__get_Center(_.b.contents).values[0] - Bounds__get_HalfSize(_.b.contents).values[0], Bounds__get_Center(_.b.contents).values[1]);
}

function Bounds__get_MinLeft(_) {
  return (0, _vectors.Vec2_op_Subtraction_Z24FF8540)(Bounds__get_Center(_.b.contents), Bounds__get_HalfSize(_.b.contents));
}

function Bounds__get_MinCenter(_) {
  return (0, _vectors.Vec2_Create_7B00E9A0)(Bounds__get_Center(_.b.contents).values[0], Bounds__get_Center(_.b.contents).values[1] - Bounds__get_HalfSize(_.b.contents).values[1]);
}

function Bounds__get_MinRight(_) {
  return (0, _vectors.Vec2_Create_7B00E9A0)(Bounds__get_Center(_.b.contents).values[0] + Bounds__get_HalfSize(_.b.contents).values[0], Bounds__get_Center(_.b.contents).values[1] - Bounds__get_HalfSize(_.b.contents).values[1]);
}

function Bounds__get_RightCenter(_) {
  return (0, _vectors.Vec2_Create_7B00E9A0)(Bounds__get_Center(_.b.contents).values[0] + Bounds__get_HalfSize(_.b.contents).values[0], Bounds__get_Center(_.b.contents).values[1]);
}

function Bounds__get_Quadrant1(_) {
  var quarterSize = (0, _vectors.Vec2_op_Multiply_47807E55)(Bounds__get_HalfSize(_.b.contents), 0.5);
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2_op_Addition_Z24FF8540)(Bounds__get_Center(_.b.contents), quarterSize), quarterSize);
}

function Bounds__get_Quadrant2(_) {
  var quarterSize = (0, _vectors.Vec2_op_Multiply_47807E55)(Bounds__get_HalfSize(_.b.contents), 0.5);
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2_op_Addition_Z24FF8540)(Bounds__get_Center(_.b.contents), (0, _vectors.Vec2_Create_7B00E9A0)(-quarterSize.values[0], quarterSize.values[1])), quarterSize);
}

function Bounds__get_Quadrant3(_) {
  var quarterSize = (0, _vectors.Vec2_op_Multiply_47807E55)(Bounds__get_HalfSize(_.b.contents), 0.5);
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2_op_Subtraction_Z24FF8540)(Bounds__get_Center(_.b.contents), quarterSize), quarterSize);
}

function Bounds__get_Quadrant4(_) {
  var quarterSize = (0, _vectors.Vec2_op_Multiply_47807E55)(Bounds__get_HalfSize(_.b.contents), 0.5);
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2_op_Addition_Z24FF8540)(Bounds__get_Center(_.b.contents), (0, _vectors.Vec2_Create_7B00E9A0)(quarterSize.values[0], -quarterSize.values[1])), quarterSize);
}

function Bounds__Clone(_) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2__Clone)(Bounds__get_Center(_.b.contents)), (0, _vectors.Vec2__Clone)(Bounds__get_HalfSize(_.b.contents)));
}

function Bounds__WithCenter_Z3D47FC52(_, value) {
  return Bounds_$ctor_Z24FF8540(value, (0, _vectors.Vec2__Clone)(Bounds__get_HalfSize(_.b.contents)));
}

function Bounds__WithCenterM_Z4BDB77B1(_, value) {
  var tupledArg = value;

  var __1 = Bounds__get_Center(_.b.contents);

  var value_1 = (0, _vectors.Vec2__WithXY_6DB1BD7B)(__1.v.contents, tupledArg[0], tupledArg[1], __1.v.contents);
  void value_1;
}

function Bounds__WithAnchor_Z3D47FC52(_, value) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2__Add_Z50E8264B)(value, Bounds__get_HalfSize(_.b.contents)), (0, _vectors.Vec2__Clone)(Bounds__get_HalfSize(_.b.contents)));
}

function Bounds__WithAnchor_7B00E9A0(_, x, y) {
  return Bounds__WithAnchor_Z3D47FC52(_.b.contents, (0, _vectors.Vec2_Create_7B00E9A0)(x, y));
}

function Bounds__WithAnchorM_Z3D47FC52(_, value) {
  var __1 = Bounds__get_Center(_.b.contents);

  var other = (0, _vectors.Vec2__Add_Z50E8264B)(value, Bounds__get_HalfSize(_.b.contents));
  var value_3;
  var __4 = __1.v.contents;
  var x = other.values[0];
  var y = other.values[1];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  value_3 = __4.v.contents;
  void value_3;
}

function Bounds__WithAnchorM_7B00E9A0(_, x, y) {
  var value = Bounds__WithAnchor_Z3D47FC52(_.b.contents, (0, _vectors.Vec2_Create_7B00E9A0)(x, y));
  void value;
}

function Bounds__WithWidth_5E38073B(_, w) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2__Clone)(Bounds__get_Center(_.b.contents)), (0, _vectors.Vec2_Create_7B00E9A0)(w, Bounds__get_Height(_.b.contents)));
}

function Bounds__WithWidthM_Z16DF143(_, w) {
  var __1 = Bounds__get_HalfSize(_.b.contents);

  var value = (0, _vectors.Vec2__WithX_Z6C68B1C0)(__1.v.contents, w * 0.5, __1.v.contents);
  void value;
}

function Bounds__WithHeight_5E38073B(_, h) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2__Clone)(Bounds__get_Center(_.b.contents)), (0, _vectors.Vec2_Create_7B00E9A0)(Bounds__get_Width(_.b.contents), h));
}

function Bounds__WithHeightM_Z16DF143(_, h) {
  var __1 = Bounds__get_HalfSize(_.b.contents);

  var value = (0, _vectors.Vec2__WithY_Z6C68B1C0)(__1.v.contents, h * 0.5, __1.v.contents);
  void value;
}

function Bounds__WithSize_Z3D47FC52(_, value) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2__Clone)(Bounds__get_Center(_.b.contents)), (0, _vectors.Vec2__Scale_Z6C68B1C0)(value, 0.5));
}

function Bounds__WithSize_2E41E8E0(_, x, y) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2__Clone)(Bounds__get_Center(_.b.contents)), (0, _vectors.Vec2_Create_7B00E9A0)(x * 0.5, y * 0.5));
}

function Bounds__WithSize_Z16DF143(_, s) {
  var hs = s * 0.5;
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2__Clone)(Bounds__get_Center(_.b.contents)), (0, _vectors.Vec2_Create_7B00E9A0)(hs, hs));
}

function Bounds__WithSizeM_Z3D47FC52(_, value) {
  var value_1 = (0, _vectors.Vec2__Scale_Z6C68B1C0)(value, 0.5, Bounds__get_HalfSize(_.b.contents));
  void value_1;
}

function Bounds__WithSizeM_2E41E8E0(_, x, y) {
  var value = (0, _vectors.Vec2__WithXY_6DB1BD7B)(Bounds__get_HalfSize(_.b.contents), x * 0.5, y * 0.5);
  void value;
}

function Bounds__WithSizeM_Z16DF143(_, s) {
  var hs = s * 0.5;
  var value = (0, _vectors.Vec2__WithXY_6DB1BD7B)(Bounds__get_HalfSize(_.b.contents), hs, hs);
  void value;
}

function Bounds__WithHalfSize_Z3D47FC52(_, value) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2__Clone)(Bounds__get_Center(_.b.contents)), value);
}

function Bounds__WithHalfSize_7B00E9A0(_, x, y) {
  return Bounds__WithHalfSize_Z3D47FC52(_.b.contents, (0, _vectors.Vec2_Create_7B00E9A0)(x, y));
}

function Bounds__WithHalfSize_5E38073B(_, s) {
  return Bounds__WithHalfSize_Z3D47FC52(_.b.contents, (0, _vectors.Vec2_Create_7B00E9A0)(s, s));
}

function Bounds__WithHalfSizeM_Z3D47FC52(_, value) {
  var other = value;
  var value_3;
  var __4 = Bounds__get_HalfSize(_.b.contents).v.contents;
  var x = other.values[0];
  var y = other.values[1];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  value_3 = __4.v.contents;
  void value_3;
}

function Bounds__WithHalfSizeM_7B00E9A0(_, x, y) {
  var value = (0, _vectors.Vec2__WithXY_6DB1BD7B)(Bounds__get_HalfSize(_.b.contents), x, y);
  void value;
}

function Bounds__WithHalfSizeM_5E38073B(_, s) {
  var value = (0, _vectors.Vec2__WithXY_6DB1BD7B)(Bounds__get_HalfSize(_.b.contents), s, s);
  void value;
}

function Bounds__Inflate_Z3D47FC52(_, value) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2__Clone)(Bounds__get_Center(_.b.contents)), (0, _vectors.Vec2__Add_Z50E8264B)(Bounds__get_HalfSize(_.b.contents), value));
}

function Bounds__Inflate_7B00E9A0(_, x, y) {
  return Bounds__Inflate_Z3D47FC52(_.b.contents, (0, _vectors.Vec2_Create_7B00E9A0)(x, y));
}

function Bounds__Inflate_5E38073B(_, s) {
  return Bounds__Inflate_Z3D47FC52(_.b.contents, (0, _vectors.Vec2_Create_7B00E9A0)(s, s));
}

function Bounds__InflateM_Z3D47FC52(_, value) {
  var hs = Bounds__get_HalfSize(_.b.contents);
  var value_1 = (0, _vectors.Vec2__WithXY_6DB1BD7B)(hs, hs.values[0] + value.values[0], hs.values[1] + value.values[1]);
  void value_1;
}

function Bounds__InflateM_7B00E9A0(_, x, y) {
  var hs = Bounds__get_HalfSize(_.b.contents);
  var value = (0, _vectors.Vec2__WithXY_6DB1BD7B)(hs, hs.values[0] + x, hs.values[1] + y);
  void value;
}

function Bounds__InflateM_5E38073B(_, s) {
  var hs = Bounds__get_HalfSize(_.b.contents);
  var value = (0, _vectors.Vec2__WithXY_6DB1BD7B)(hs, hs.values[0] + s, hs.values[1] + s);
  void value;
}

function Bounds__InflatePct_Z3D47FC52(_, value) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2__Clone)(Bounds__get_Center(_.b.contents)), (0, _vectors.Vec2__Mult_Z50E8264B)(Bounds__get_HalfSize(_.b.contents), value));
}

function Bounds__InflatePct_7B00E9A0(_, x, y) {
  return Bounds__InflatePct_Z3D47FC52(_.b.contents, (0, _vectors.Vec2_Create_7B00E9A0)(x, y));
}

function Bounds__InflatePct_5E38073B(_, p) {
  return Bounds__InflatePct_Z3D47FC52(_.b.contents, (0, _vectors.Vec2_Create_7B00E9A0)(p, p));
}

function Bounds__InflatePctM_Z3D47FC52(_, value) {
  var hs = Bounds__get_HalfSize(_.b.contents);
  var value_1 = (0, _vectors.Vec2__WithXY_6DB1BD7B)(hs, hs.values[0] * value.values[0], hs.values[1] * value.values[1]);
  void value_1;
}

function Bounds__InflatePctM_7B00E9A0(_, x, y) {
  var hs = Bounds__get_HalfSize(_.b.contents);
  var value = (0, _vectors.Vec2__WithXY_6DB1BD7B)(hs, hs.values[0] * x, hs.values[1] * y);
  void value;
}

function Bounds__InflatePctM_5E38073B(_, p) {
  var hs = Bounds__get_HalfSize(_.b.contents);
  var value = (0, _vectors.Vec2__WithXY_6DB1BD7B)(hs, hs.values[0] * p, hs.values[1] * p);
  void value;
}

function Bounds__MaxWith_Z780DF58B(_, other, result) {
  var result_1;
  var __1 = _.b.contents;
  result_1 = (0, _optionex.calcDef)(function () {
    return Bounds_Create_299C7800(0, 0, 0, 0);
  }, result);

  var __4 = Bounds__get_HalfSize(result_1);

  var value_1 = (0, _Util.max)(_Util.comparePrimitives, Bounds__get_HalfSize(_.b.contents).values[0], Bounds__get_HalfSize(other).values[0]);
  __4.values[0] = value_1;

  var __7 = Bounds__get_HalfSize(result_1);

  var value_2 = (0, _Util.max)(_Util.comparePrimitives, Bounds__get_HalfSize(_.b.contents).values[1], Bounds__get_HalfSize(other).values[1]);
  __7.values[1] = value_2;
  return result_1;
}

function Bounds__MaxWithM_Z134B2C62(_, other) {
  var value = Bounds__MaxWith_Z780DF58B(_.b.contents, other, _.b.contents);
  void value;
}

function Bounds__MinWith_Z780DF58B(_, other, result) {
  var result_1;
  var __1 = _.b.contents;
  result_1 = (0, _optionex.calcDef)(function () {
    return Bounds_Create_299C7800(0, 0, 0, 0);
  }, result);

  var __4 = Bounds__get_HalfSize(result_1);

  var value_1 = (0, _Util.min)(_Util.comparePrimitives, Bounds__get_HalfSize(_.b.contents).values[0], Bounds__get_HalfSize(other).values[0]);
  __4.values[0] = value_1;

  var __7 = Bounds__get_HalfSize(result_1);

  var value_2 = (0, _Util.min)(_Util.comparePrimitives, Bounds__get_HalfSize(_.b.contents).values[1], Bounds__get_HalfSize(other).values[1]);
  __7.values[1] = value_2;
  return result_1;
}

function Bounds__MinWithM_Z134B2C62(_, other) {
  var value = Bounds__MinWith_Z780DF58B(_.b.contents, other, _.b.contents);
  void value;
}

function Bounds__Clamp_Z780DF58B(_, other, result) {
  var result_1;
  var __1 = _.b.contents;
  result_1 = (0, _optionex.calcDef)(function () {
    return Bounds_Create_299C7800(0, 0, 0, 0);
  }, result);
  var value_1 = Bounds__MinWith_Z780DF58B(_.b.contents, other, result_1);
  void value_1;
  var bmin = Bounds__get_Min(result_1);
  var omin = Bounds__get_Min(other);

  if (bmin.values[0] < omin.values[0]) {
    var __6 = Bounds__get_Center(result_1);

    var value_2 = omin.values[0] + Bounds__get_HalfSize(result_1).values[0];
    __6.values[0] = value_2;
  }

  if (bmin.values[1] < omin.values[1]) {
    var __11 = Bounds__get_Center(result_1);

    var value_3 = omin.values[1] + Bounds__get_HalfSize(result_1).values[1];
    __11.values[1] = value_3;
  }

  var bmax = Bounds__get_Max(result_1);
  var omax = Bounds__get_Max(other);

  if (bmax.values[0] > omax.values[0]) {
    var __16 = Bounds__get_Center(result_1);

    var value_4 = omax.values[0] - Bounds__get_HalfSize(result_1).values[0];
    __16.values[0] = value_4;
  }

  if (bmax.values[1] > omax.values[1]) {
    var __21 = Bounds__get_Center(result_1);

    var value_5 = omax.values[1] - Bounds__get_HalfSize(result_1).values[1];
    __21.values[1] = value_5;
  }

  return result_1;
}

function Bounds__ClampM_Z134B2C62(_, other) {
  var value = Bounds__Clamp_Z780DF58B(_.b.contents, other, _.b.contents);
  void value;
}

function Bounds__ClampVec_Z50E8264B(_, v, result) {
  var result_1 = (0, _optionex.calcDef)(_vectors.Vec2_Create, result);
  var mn = Bounds__get_Min(_.b.contents);
  var mx = Bounds__get_Max(_.b.contents);
  var value = (0, _Util.min)(_Util.comparePrimitives, (0, _Util.max)(_Util.comparePrimitives, v.values[0], mn.values[0]), mx.values[0]);
  result_1.values[0] = value;
  var value_1 = (0, _Util.min)(_Util.comparePrimitives, (0, _Util.max)(_Util.comparePrimitives, v.values[1], mn.values[1]), mx.values[1]);
  result_1.values[1] = value_1;
  return result_1;
}

function Bounds__Contains_Z3D47FC52(_, point) {
  var min = Bounds__get_Min(_.b.contents);
  var max = Bounds__get_Max(_.b.contents);

  if ((point.values[0] >= min.values[0] ? point.values[0] <= max.values[0] : false) ? point.values[1] >= min.values[1] : false) {
    return point.values[1] <= max.values[1];
  } else {
    return false;
  }
}

function Bounds__IntersectsWith_Z134B2C62(_, other) {
  var min = Bounds__get_Min(_.b.contents);
  var max = Bounds__get_Max(_.b.contents);
  var otherMin = Bounds__get_Min(other);
  var otherMax = Bounds__get_Max(other);

  if ((min.values[0] <= otherMax.values[0] ? max.values[0] >= otherMin.values[0] : false) ? min.values[1] <= otherMax.values[1] : false) {
    return max.values[1] >= otherMin.values[1];
  } else {
    return false;
  }
}

function Bounds_get_Zero() {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2_Create_7B00E9A0)(0, 0), (0, _vectors.Vec2_Create_7B00E9A0)(0, 0));
}

function BoundsPatterns_$007CBoundsRect$007C(b) {
  var anchor = Bounds__get_Anchor(b);
  var size = Bounds__get_Size(b);
  return [anchor.values[0], anchor.values[1], size.values[0], size.values[1]];
}

function BoundsPatterns_$007COptBoundsRect$007C(b) {
  if (b == null) {
    return [void 0, void 0, void 0, void 0];
  } else {
    var b_1 = b;
    var anchor = Bounds__get_Anchor(b_1);
    var size = Bounds__get_Size(b_1);
    return [anchor.values[0], anchor.values[1], size.values[0], size.values[1]];
  }
}

function BoundsPatterns_$007CBoundsRange$007C(b) {
  var min = Bounds__get_Min(b);
  var max = Bounds__get_Max(b);
  return [min.values[0], min.values[1], max.values[0], max.values[1]];
}

function BoundsPatterns_$007COptBoundsRange$007C(b) {
  if (b == null) {
    return [void 0, void 0, void 0, void 0];
  } else {
    var b_1 = b;
    var min = Bounds__get_Min(b_1);
    var max = Bounds__get_Max(b_1);
    return [min.values[0], min.values[1], max.values[0], max.values[1]];
  }
}

function BoundsPatterns_$007CBoundsDim$007C(b) {
  return [Bounds__get_Anchor(b), Bounds__get_Size(b)];
}

function BoundsModule_bounds(x, y, w, h) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2_Create_7B00E9A0)(x + w * 0.5, y + h * 0.5), (0, _vectors.Vec2_Create_7B00E9A0)(w * 0.5, h * 0.5));
}

function BoundsModule_boundsV(anchor, size) {
  var anchor_1, size_1;
  return Bounds_$ctor_Z24FF8540((anchor_1 = anchor, (size_1 = size, (0, _vectors.Vec2_Create_7B00E9A0)(anchor_1.values[0] + size_1.values[0] * 0.5, anchor_1.values[1] + size_1.values[1] * 0.5))), (0, _vectors.Vec2__Scale_Z6C68B1C0)(size, 0.5));
}

function BoundsModule_boundsSize(w, h) {
  return BoundsModule_bounds(0, 0, w, h);
}

function BoundsModule_boundsSizeV(size) {
  return BoundsModule_boundsV((0, _vectors.Vec2_Create_7B00E9A0)(0, 0), size);
}

function BoundsModule_boundsCenter(cx, cy, w, h) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2_Create_7B00E9A0)(cx, cy), (0, _vectors.Vec2_Create_7B00E9A0)(w * 0.5, h * 0.5));
}

function BoundsModule_boundsCenterV(center, size) {
  return Bounds_$ctor_Z24FF8540(center, (0, _vectors.Vec2__Scale_Z6C68B1C0)(size, 0.5));
}

function BoundsModule_boundsCenterHalf(cx, cy, hw, hh) {
  return Bounds_$ctor_Z24FF8540((0, _vectors.Vec2_Create_7B00E9A0)(cx, cy), (0, _vectors.Vec2_Create_7B00E9A0)(hw, hh));
}

function BoundsModule_boundsCenterHalfV(center, halfSize) {
  return Bounds_$ctor_Z24FF8540(center, halfSize);
}
},{"../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../core/vectors.js":"../JS/core/vectors.js","../core/optionex.js":"../JS/core/optionex.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/webgl_data/glcanvasparams.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CanvasConfig$reflection = CanvasConfig$reflection;
exports.GlCanvasParams$reflection = GlCanvasParams$reflection;
exports.GlCanvasParams_$ctor = GlCanvasParams_$ctor;
exports.GlCanvasParams__get_LineWidth = GlCanvasParams__get_LineWidth;
exports.GlCanvasParams__set_LineWidth_21F3BA25 = GlCanvasParams__set_LineWidth_21F3BA25;
exports.GlCanvasParams__get_MiterLimit = GlCanvasParams__get_MiterLimit;
exports.GlCanvasParams__set_MiterLimit_21F3BA25 = GlCanvasParams__set_MiterLimit_21F3BA25;
exports.GlCanvasParams__get_LineCap = GlCanvasParams__get_LineCap;
exports.GlCanvasParams__set_LineCap_7B1263D0 = GlCanvasParams__set_LineCap_7B1263D0;
exports.GlCanvasParams__get_LineJoin = GlCanvasParams__get_LineJoin;
exports.GlCanvasParams__set_LineJoin_Z229C3C20 = GlCanvasParams__set_LineJoin_Z229C3C20;
exports.GlCanvasParams__get_MiterFallback = GlCanvasParams__get_MiterFallback;
exports.GlCanvasParams__set_MiterFallback_Z229C3C20 = GlCanvasParams__set_MiterFallback_Z229C3C20;
exports.GlCanvasParams__get_StrokeColor = GlCanvasParams__get_StrokeColor;
exports.GlCanvasParams__set_StrokeColor_Z3D47FC58 = GlCanvasParams__set_StrokeColor_Z3D47FC58;
exports.GlCanvasParams__get_FillColor = GlCanvasParams__get_FillColor;
exports.GlCanvasParams__set_FillColor_Z3D47FC58 = GlCanvasParams__set_FillColor_Z3D47FC58;
exports.GlCanvasParams__get_FillType = GlCanvasParams__get_FillType;
exports.GlCanvasParams__set_FillType_Z1454C5A5 = GlCanvasParams__set_FillType_Z1454C5A5;
exports.GlCanvasParams = exports.CanvasConfig = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _vectors = require("../core/vectors.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var CanvasConfig = /*#__PURE__*/function (_Record) {
  _inherits(CanvasConfig, _Record);

  var _super = _createSuper(CanvasConfig);

  function CanvasConfig(LineWidth, MiterLimit, LineCap, LineJoin, MiterFallback, StrokeColor, FillColor, FillType) {
    var _this;

    _classCallCheck(this, CanvasConfig);

    _this = _super.call(this);
    _this.LineWidth = LineWidth;
    _this.MiterLimit = MiterLimit;
    _this.LineCap = LineCap | 0;
    _this.LineJoin = LineJoin | 0;
    _this.MiterFallback = MiterFallback | 0;
    _this.StrokeColor = StrokeColor;
    _this.FillColor = FillColor;
    _this.FillType = FillType | 0;
    return _this;
  }

  return CanvasConfig;
}(_Types.Record);

exports.CanvasConfig = CanvasConfig;

function CanvasConfig$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.CanvasConfig", [], CanvasConfig, function () {
    return [["LineWidth", _Reflection.float64_type], ["MiterLimit", _Reflection.float64_type], ["LineCap", (0, _Reflection.enum_type)("Wil.Webgl.LineCap", _Reflection.int32_type, [["Butt", 0], ["Round", 1], ["Square", 2]])], ["LineJoin", (0, _Reflection.enum_type)("Wil.Webgl.LineJoin", _Reflection.int32_type, [["Round", 3], ["Bevel", 4], ["Miter", 5]])], ["MiterFallback", (0, _Reflection.enum_type)("Wil.Webgl.LineJoin", _Reflection.int32_type, [["Round", 3], ["Bevel", 4], ["Miter", 5]])], ["StrokeColor", (0, _vectors.Vec4$reflection)()], ["FillColor", (0, _vectors.Vec4$reflection)()], ["FillType", (0, _Reflection.enum_type)("Wil.Webgl.FillType", _Reflection.int32_type, [["Stroke", 1], ["Fill", 2], ["Border", 3]])]];
  });
}

var GlCanvasParams = function GlCanvasParams() {
  _classCallCheck(this, GlCanvasParams);

  this.config = new CanvasConfig(1, 10, 0, 4, 4, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0, 0, 1), (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0, 0, 1), 2);
};

exports.GlCanvasParams = GlCanvasParams;

function GlCanvasParams$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.GlCanvasParams", void 0, GlCanvasParams);
}

function GlCanvasParams_$ctor() {
  return new GlCanvasParams();
}

function GlCanvasParams__get_LineWidth(_) {
  return _.config.LineWidth;
}

function GlCanvasParams__set_LineWidth_21F3BA25(_, value) {
  var inputRecord = _.config;
  _.config = new CanvasConfig(value, inputRecord.MiterLimit, inputRecord.LineCap, inputRecord.LineJoin, inputRecord.MiterFallback, inputRecord.StrokeColor, inputRecord.FillColor, inputRecord.FillType);
}

function GlCanvasParams__get_MiterLimit(_) {
  return _.config.MiterLimit;
}

function GlCanvasParams__set_MiterLimit_21F3BA25(_, value) {
  var inputRecord = _.config;
  _.config = new CanvasConfig(inputRecord.LineWidth, value, inputRecord.LineCap, inputRecord.LineJoin, inputRecord.MiterFallback, inputRecord.StrokeColor, inputRecord.FillColor, inputRecord.FillType);
}

function GlCanvasParams__get_LineCap(_) {
  return _.config.LineCap;
}

function GlCanvasParams__set_LineCap_7B1263D0(_, value) {
  var inputRecord = _.config;
  _.config = new CanvasConfig(inputRecord.LineWidth, inputRecord.MiterLimit, value, inputRecord.LineJoin, inputRecord.MiterFallback, inputRecord.StrokeColor, inputRecord.FillColor, inputRecord.FillType);
}

function GlCanvasParams__get_LineJoin(_) {
  return _.config.LineJoin;
}

function GlCanvasParams__set_LineJoin_Z229C3C20(_, value) {
  var inputRecord = _.config;
  _.config = new CanvasConfig(inputRecord.LineWidth, inputRecord.MiterLimit, inputRecord.LineCap, value, inputRecord.MiterFallback, inputRecord.StrokeColor, inputRecord.FillColor, inputRecord.FillType);
}

function GlCanvasParams__get_MiterFallback(_) {
  return _.config.MiterFallback;
}

function GlCanvasParams__set_MiterFallback_Z229C3C20(_, value) {
  var inputRecord = _.config;
  _.config = new CanvasConfig(inputRecord.LineWidth, inputRecord.MiterLimit, inputRecord.LineCap, inputRecord.LineJoin, value, inputRecord.StrokeColor, inputRecord.FillColor, inputRecord.FillType);
}

function GlCanvasParams__get_StrokeColor(_) {
  return (0, _vectors.Vec4__Clone)(_.config.StrokeColor);
}

function GlCanvasParams__set_StrokeColor_Z3D47FC58(_, value) {
  var inputRecord = _.config;
  _.config = new CanvasConfig(inputRecord.LineWidth, inputRecord.MiterLimit, inputRecord.LineCap, inputRecord.LineJoin, inputRecord.MiterFallback, (0, _vectors.Vec4__Clone)(value), inputRecord.FillColor, inputRecord.FillType);
}

function GlCanvasParams__get_FillColor(_) {
  return _.config.FillColor;
}

function GlCanvasParams__set_FillColor_Z3D47FC58(_, value) {
  var inputRecord = _.config;
  _.config = new CanvasConfig(inputRecord.LineWidth, inputRecord.MiterLimit, inputRecord.LineCap, inputRecord.LineJoin, inputRecord.MiterFallback, inputRecord.StrokeColor, (0, _vectors.Vec4__Clone)(value), inputRecord.FillType);
}

function GlCanvasParams__get_FillType(_) {
  return _.config.FillType;
}

function GlCanvasParams__set_FillType_Z1454C5A5(_, value) {
  var inputRecord = _.config;
  _.config = new CanvasConfig(inputRecord.LineWidth, inputRecord.MiterLimit, inputRecord.LineCap, inputRecord.LineJoin, inputRecord.MiterFallback, inputRecord.StrokeColor, inputRecord.FillColor, value);
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../core/vectors.js":"../JS/core/vectors.js"}],"../JS/.fable/fable-library.3.0.0/Choice.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FSharpResult$2$reflection = FSharpResult$2$reflection;
exports.Result_Map = Result_Map;
exports.Result_MapError = Result_MapError;
exports.Result_Bind = Result_Bind;
exports.FSharpChoice$2$reflection = FSharpChoice$2$reflection;
exports.FSharpChoice$3$reflection = FSharpChoice$3$reflection;
exports.FSharpChoice$4$reflection = FSharpChoice$4$reflection;
exports.FSharpChoice$5$reflection = FSharpChoice$5$reflection;
exports.FSharpChoice$6$reflection = FSharpChoice$6$reflection;
exports.FSharpChoice$7$reflection = FSharpChoice$7$reflection;
exports.Choice_makeChoice1Of2 = Choice_makeChoice1Of2;
exports.Choice_makeChoice2Of2 = Choice_makeChoice2Of2;
exports.Choice_tryValueIfChoice1Of2 = Choice_tryValueIfChoice1Of2;
exports.Choice_tryValueIfChoice2Of2 = Choice_tryValueIfChoice2Of2;
exports.FSharpChoice$7 = exports.FSharpChoice$6 = exports.FSharpChoice$5 = exports.FSharpChoice$4 = exports.FSharpChoice$3 = exports.FSharpChoice$2 = exports.FSharpResult$2 = void 0;

var _Types = require("./Types.js");

var _Reflection = require("./Reflection.js");

var _Option = require("./Option.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var FSharpResult$2 = /*#__PURE__*/function (_Union) {
  _inherits(FSharpResult$2, _Union);

  var _super = _createSuper(FSharpResult$2);

  function FSharpResult$2(tag) {
    var _this;

    _classCallCheck(this, FSharpResult$2);

    _this = _super.call(this);
    _this.tag = tag | 0;

    for (var _len = arguments.length, fields = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      fields[_key - 1] = arguments[_key];
    }

    _this.fields = fields;
    return _this;
  }

  _createClass(FSharpResult$2, [{
    key: "cases",
    value: function cases() {
      return ["Ok", "Error"];
    }
  }]);

  return FSharpResult$2;
}(_Types.Union);

exports.FSharpResult$2 = FSharpResult$2;

function FSharpResult$2$reflection(gen0, gen1) {
  return (0, _Reflection.union_type)("FSharp.Core.FSharpResult`2", [gen0, gen1], FSharpResult$2, function () {
    return [[["ResultValue", gen0]], [["ErrorValue", gen1]]];
  });
}

function Result_Map(mapping, result) {
  if (result.tag === 0) {
    return new FSharpResult$2(0, mapping(result.fields[0]));
  } else {
    return new FSharpResult$2(1, result.fields[0]);
  }
}

function Result_MapError(mapping, result) {
  if (result.tag === 0) {
    return new FSharpResult$2(0, result.fields[0]);
  } else {
    return new FSharpResult$2(1, mapping(result.fields[0]));
  }
}

function Result_Bind(binder, result) {
  if (result.tag === 0) {
    return binder(result.fields[0]);
  } else {
    return new FSharpResult$2(1, result.fields[0]);
  }
}

var FSharpChoice$2 = /*#__PURE__*/function (_Union2) {
  _inherits(FSharpChoice$2, _Union2);

  var _super2 = _createSuper(FSharpChoice$2);

  function FSharpChoice$2(tag) {
    var _this2;

    _classCallCheck(this, FSharpChoice$2);

    _this2 = _super2.call(this);
    _this2.tag = tag | 0;

    for (var _len2 = arguments.length, fields = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      fields[_key2 - 1] = arguments[_key2];
    }

    _this2.fields = fields;
    return _this2;
  }

  _createClass(FSharpChoice$2, [{
    key: "cases",
    value: function cases() {
      return ["Choice1Of2", "Choice2Of2"];
    }
  }]);

  return FSharpChoice$2;
}(_Types.Union);

exports.FSharpChoice$2 = FSharpChoice$2;

function FSharpChoice$2$reflection(gen0, gen1) {
  return (0, _Reflection.union_type)("FSharp.Core.FSharpChoice`2", [gen0, gen1], FSharpChoice$2, function () {
    return [[["Item", gen0]], [["Item", gen1]]];
  });
}

var FSharpChoice$3 = /*#__PURE__*/function (_Union3) {
  _inherits(FSharpChoice$3, _Union3);

  var _super3 = _createSuper(FSharpChoice$3);

  function FSharpChoice$3(tag) {
    var _this3;

    _classCallCheck(this, FSharpChoice$3);

    _this3 = _super3.call(this);
    _this3.tag = tag | 0;

    for (var _len3 = arguments.length, fields = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
      fields[_key3 - 1] = arguments[_key3];
    }

    _this3.fields = fields;
    return _this3;
  }

  _createClass(FSharpChoice$3, [{
    key: "cases",
    value: function cases() {
      return ["Choice1Of3", "Choice2Of3", "Choice3Of3"];
    }
  }]);

  return FSharpChoice$3;
}(_Types.Union);

exports.FSharpChoice$3 = FSharpChoice$3;

function FSharpChoice$3$reflection(gen0, gen1, gen2) {
  return (0, _Reflection.union_type)("FSharp.Core.FSharpChoice`3", [gen0, gen1, gen2], FSharpChoice$3, function () {
    return [[["Item", gen0]], [["Item", gen1]], [["Item", gen2]]];
  });
}

var FSharpChoice$4 = /*#__PURE__*/function (_Union4) {
  _inherits(FSharpChoice$4, _Union4);

  var _super4 = _createSuper(FSharpChoice$4);

  function FSharpChoice$4(tag) {
    var _this4;

    _classCallCheck(this, FSharpChoice$4);

    _this4 = _super4.call(this);
    _this4.tag = tag | 0;

    for (var _len4 = arguments.length, fields = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
      fields[_key4 - 1] = arguments[_key4];
    }

    _this4.fields = fields;
    return _this4;
  }

  _createClass(FSharpChoice$4, [{
    key: "cases",
    value: function cases() {
      return ["Choice1Of4", "Choice2Of4", "Choice3Of4", "Choice4Of4"];
    }
  }]);

  return FSharpChoice$4;
}(_Types.Union);

exports.FSharpChoice$4 = FSharpChoice$4;

function FSharpChoice$4$reflection(gen0, gen1, gen2, gen3) {
  return (0, _Reflection.union_type)("FSharp.Core.FSharpChoice`4", [gen0, gen1, gen2, gen3], FSharpChoice$4, function () {
    return [[["Item", gen0]], [["Item", gen1]], [["Item", gen2]], [["Item", gen3]]];
  });
}

var FSharpChoice$5 = /*#__PURE__*/function (_Union5) {
  _inherits(FSharpChoice$5, _Union5);

  var _super5 = _createSuper(FSharpChoice$5);

  function FSharpChoice$5(tag) {
    var _this5;

    _classCallCheck(this, FSharpChoice$5);

    _this5 = _super5.call(this);
    _this5.tag = tag | 0;

    for (var _len5 = arguments.length, fields = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
      fields[_key5 - 1] = arguments[_key5];
    }

    _this5.fields = fields;
    return _this5;
  }

  _createClass(FSharpChoice$5, [{
    key: "cases",
    value: function cases() {
      return ["Choice1Of5", "Choice2Of5", "Choice3Of5", "Choice4Of5", "Choice5Of5"];
    }
  }]);

  return FSharpChoice$5;
}(_Types.Union);

exports.FSharpChoice$5 = FSharpChoice$5;

function FSharpChoice$5$reflection(gen0, gen1, gen2, gen3, gen4) {
  return (0, _Reflection.union_type)("FSharp.Core.FSharpChoice`5", [gen0, gen1, gen2, gen3, gen4], FSharpChoice$5, function () {
    return [[["Item", gen0]], [["Item", gen1]], [["Item", gen2]], [["Item", gen3]], [["Item", gen4]]];
  });
}

var FSharpChoice$6 = /*#__PURE__*/function (_Union6) {
  _inherits(FSharpChoice$6, _Union6);

  var _super6 = _createSuper(FSharpChoice$6);

  function FSharpChoice$6(tag) {
    var _this6;

    _classCallCheck(this, FSharpChoice$6);

    _this6 = _super6.call(this);
    _this6.tag = tag | 0;

    for (var _len6 = arguments.length, fields = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {
      fields[_key6 - 1] = arguments[_key6];
    }

    _this6.fields = fields;
    return _this6;
  }

  _createClass(FSharpChoice$6, [{
    key: "cases",
    value: function cases() {
      return ["Choice1Of6", "Choice2Of6", "Choice3Of6", "Choice4Of6", "Choice5Of6", "Choice6Of6"];
    }
  }]);

  return FSharpChoice$6;
}(_Types.Union);

exports.FSharpChoice$6 = FSharpChoice$6;

function FSharpChoice$6$reflection(gen0, gen1, gen2, gen3, gen4, gen5) {
  return (0, _Reflection.union_type)("FSharp.Core.FSharpChoice`6", [gen0, gen1, gen2, gen3, gen4, gen5], FSharpChoice$6, function () {
    return [[["Item", gen0]], [["Item", gen1]], [["Item", gen2]], [["Item", gen3]], [["Item", gen4]], [["Item", gen5]]];
  });
}

var FSharpChoice$7 = /*#__PURE__*/function (_Union7) {
  _inherits(FSharpChoice$7, _Union7);

  var _super7 = _createSuper(FSharpChoice$7);

  function FSharpChoice$7(tag) {
    var _this7;

    _classCallCheck(this, FSharpChoice$7);

    _this7 = _super7.call(this);
    _this7.tag = tag | 0;

    for (var _len7 = arguments.length, fields = new Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {
      fields[_key7 - 1] = arguments[_key7];
    }

    _this7.fields = fields;
    return _this7;
  }

  _createClass(FSharpChoice$7, [{
    key: "cases",
    value: function cases() {
      return ["Choice1Of7", "Choice2Of7", "Choice3Of7", "Choice4Of7", "Choice5Of7", "Choice6Of7", "Choice7Of7"];
    }
  }]);

  return FSharpChoice$7;
}(_Types.Union);

exports.FSharpChoice$7 = FSharpChoice$7;

function FSharpChoice$7$reflection(gen0, gen1, gen2, gen3, gen4, gen5, gen6) {
  return (0, _Reflection.union_type)("FSharp.Core.FSharpChoice`7", [gen0, gen1, gen2, gen3, gen4, gen5, gen6], FSharpChoice$7, function () {
    return [[["Item", gen0]], [["Item", gen1]], [["Item", gen2]], [["Item", gen3]], [["Item", gen4]], [["Item", gen5]], [["Item", gen6]]];
  });
}

function Choice_makeChoice1Of2(x) {
  return new FSharpChoice$2(0, x);
}

function Choice_makeChoice2Of2(x) {
  return new FSharpChoice$2(1, x);
}

function Choice_tryValueIfChoice1Of2(x) {
  if (x.tag === 0) {
    return (0, _Option.some)(x.fields[0]);
  } else {
    return void 0;
  }
}

function Choice_tryValueIfChoice2Of2(x) {
  if (x.tag === 1) {
    return (0, _Option.some)(x.fields[0]);
  } else {
    return void 0;
  }
}
},{"./Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","./Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./Option.js":"../JS/.fable/fable-library.3.0.0/Option.js"}],"../JS/.fable/fable-library.3.0.0/Observable.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.protect = protect;
exports.add = add;
exports.choose = choose;
exports.filter = filter;
exports.map = map;
exports.merge = merge;
exports.pairwise = pairwise;
exports.partition = partition;
exports.scan = scan;
exports.split = split;
exports.subscribe = subscribe;
exports.Observer = void 0;

var _Choice = require("./Choice.js");

var _Option = require("./Option.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Observer = function Observer(onNext, onError, onCompleted) {
  _classCallCheck(this, Observer);

  this.OnNext = onNext;

  this.OnError = onError || function (_e) {
    return;
  };

  this.OnCompleted = onCompleted || function () {
    return;
  };
};

exports.Observer = Observer;

var Observable = function Observable(subscribe) {
  _classCallCheck(this, Observable);

  this.Subscribe = subscribe;
};

function protect(f, succeed, fail) {
  try {
    return succeed(f());
  } catch (e) {
    fail(e);
  }
}

function add(callback, source) {
  source.Subscribe(new Observer(callback));
}

function choose(chooser, source) {
  return new Observable(function (observer) {
    return source.Subscribe(new Observer(function (t) {
      return protect(function () {
        return chooser(t);
      }, function (u) {
        if (u != null) {
          observer.OnNext((0, _Option.value)(u));
        }
      }, observer.OnError);
    }, observer.OnError, observer.OnCompleted));
  });
}

function filter(predicate, source) {
  return choose(function (x) {
    return predicate(x) ? x : null;
  }, source);
}

function map(mapping, source) {
  return new Observable(function (observer) {
    return source.Subscribe(new Observer(function (t) {
      protect(function () {
        return mapping(t);
      }, observer.OnNext, observer.OnError);
    }, observer.OnError, observer.OnCompleted));
  });
}

function merge(source1, source2) {
  return new Observable(function (observer) {
    var stopped = false;
    var completed1 = false;
    var completed2 = false;
    var h1 = source1.Subscribe(new Observer(function (v) {
      if (!stopped) {
        observer.OnNext(v);
      }
    }, function (e) {
      if (!stopped) {
        stopped = true;
        observer.OnError(e);
      }
    }, function () {
      if (!stopped) {
        completed1 = true;

        if (completed2) {
          stopped = true;
          observer.OnCompleted();
        }
      }
    }));
    var h2 = source2.Subscribe(new Observer(function (v) {
      if (!stopped) {
        observer.OnNext(v);
      }
    }, function (e) {
      if (!stopped) {
        stopped = true;
        observer.OnError(e);
      }
    }, function () {
      if (!stopped) {
        completed2 = true;

        if (completed1) {
          stopped = true;
          observer.OnCompleted();
        }
      }
    }));
    return {
      Dispose: function Dispose() {
        h1.Dispose();
        h2.Dispose();
      }
    };
  });
}

function pairwise(source) {
  return new Observable(function (observer) {
    var last;
    return source.Subscribe(new Observer(function (next) {
      if (last != null) {
        observer.OnNext([last, next]);
      }

      last = next;
    }, observer.OnError, observer.OnCompleted));
  });
}

function partition(predicate, source) {
  return [filter(predicate, source), filter(function (x) {
    return !predicate(x);
  }, source)];
}

function scan(collector, state, source) {
  return new Observable(function (observer) {
    return source.Subscribe(new Observer(function (t) {
      protect(function () {
        return collector(state, t);
      }, function (u) {
        state = u;
        observer.OnNext(u);
      }, observer.OnError);
    }, observer.OnError, observer.OnCompleted));
  });
}

function split(splitter, source) {
  return [choose(function (v) {
    return (0, _Choice.Choice_tryValueIfChoice1Of2)(splitter(v));
  }, source), choose(function (v) {
    return (0, _Choice.Choice_tryValueIfChoice2Of2)(splitter(v));
  }, source)];
}

function subscribe(callback, source) {
  return source.Subscribe(new Observer(callback));
}
},{"./Choice.js":"../JS/.fable/fable-library.3.0.0/Choice.js","./Option.js":"../JS/.fable/fable-library.3.0.0/Option.js"}],"../JS/.fable/fable-library.3.0.0/Event.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.add = add;
exports.choose = choose;
exports.filter = filter;
exports.map = map;
exports.merge = merge;
exports.pairwise = pairwise;
exports.partition = partition;
exports.scan = scan;
exports.split = split;
exports.default = exports.Event = void 0;

var _Observable = require("./Observable.js");

var _Option = require("./Option.js");

var _Choice = require("./Choice.js");

var _Seq = require("./Seq.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var Event = /*#__PURE__*/function () {
  function Event(_subscriber, delegates) {
    _classCallCheck(this, Event);

    this._subscriber = _subscriber;
    this.delegates = delegates || new Array();
  }

  _createClass(Event, [{
    key: "Add",
    value: function Add(f) {
      this._addHandler(f);
    } // IEvent<T> methods

  }, {
    key: "Trigger",
    value: function Trigger(value) {
      (0, _Seq.iterate)(function (f) {
        return f(value);
      }, this.delegates);
    } // IDelegateEvent<T> methods

  }, {
    key: "AddHandler",
    value: function AddHandler(handler) {
      if (this._dotnetDelegates == null) {
        this._dotnetDelegates = new Map();
      }

      var f = function f(x) {
        return handler(null, x);
      };

      this._dotnetDelegates.set(handler, f);

      this._addHandler(f);
    }
  }, {
    key: "RemoveHandler",
    value: function RemoveHandler(handler) {
      if (this._dotnetDelegates != null) {
        var f = this._dotnetDelegates.get(handler);

        if (f != null) {
          this._dotnetDelegates.delete(handler);

          this._removeHandler(f);
        }
      }
    } // IObservable<T> methods

  }, {
    key: "Subscribe",
    value: function Subscribe(arg) {
      return typeof arg === "function" ? this._subscribeFromCallback(arg) : this._subscribeFromObserver(arg);
    }
  }, {
    key: "_addHandler",
    value: function _addHandler(f) {
      this.delegates.push(f);
    }
  }, {
    key: "_removeHandler",
    value: function _removeHandler(f) {
      var index = this.delegates.indexOf(f);

      if (index > -1) {
        this.delegates.splice(index, 1);
      }
    }
  }, {
    key: "_subscribeFromObserver",
    value: function _subscribeFromObserver(observer) {
      var _this = this;

      if (this._subscriber) {
        return this._subscriber(observer);
      }

      var callback = observer.OnNext;

      this._addHandler(callback);

      return {
        Dispose: function Dispose() {
          _this._removeHandler(callback);
        }
      };
    }
  }, {
    key: "_subscribeFromCallback",
    value: function _subscribeFromCallback(callback) {
      var _this2 = this;

      this._addHandler(callback);

      return {
        Dispose: function Dispose() {
          _this2._removeHandler(callback);
        }
      };
    }
  }, {
    key: "Publish",
    get: function get() {
      return this;
    }
  }]);

  return Event;
}();

exports.Event = Event;

function add(callback, sourceEvent) {
  sourceEvent.Subscribe(new _Observable.Observer(callback));
}

function choose(chooser, sourceEvent) {
  var source = sourceEvent;
  return new Event(function (observer) {
    return source.Subscribe(new _Observable.Observer(function (t) {
      return (0, _Observable.protect)(function () {
        return chooser(t);
      }, function (u) {
        if (u != null) {
          observer.OnNext((0, _Option.value)(u));
        }
      }, observer.OnError);
    }, observer.OnError, observer.OnCompleted));
  }, source.delegates);
}

function filter(predicate, sourceEvent) {
  return choose(function (x) {
    return predicate(x) ? (0, _Option.some)(x) : undefined;
  }, sourceEvent);
}

function map(mapping, sourceEvent) {
  var source = sourceEvent;
  return new Event(function (observer) {
    return source.Subscribe(new _Observable.Observer(function (t) {
      return (0, _Observable.protect)(function () {
        return mapping(t);
      }, observer.OnNext, observer.OnError);
    }, observer.OnError, observer.OnCompleted));
  }, source.delegates);
}

function merge(event1, event2) {
  var source1 = event1;
  var source2 = event2;
  return new Event(function (observer) {
    var stopped = false;
    var completed1 = false;
    var completed2 = false;
    var h1 = source1.Subscribe(new _Observable.Observer(function (v) {
      if (!stopped) {
        observer.OnNext(v);
      }
    }, function (e) {
      if (!stopped) {
        stopped = true;
        observer.OnError(e);
      }
    }, function () {
      if (!stopped) {
        completed1 = true;

        if (completed2) {
          stopped = true;
          observer.OnCompleted();
        }
      }
    }));
    var h2 = source2.Subscribe(new _Observable.Observer(function (v) {
      if (!stopped) {
        observer.OnNext(v);
      }
    }, function (e) {
      if (!stopped) {
        stopped = true;
        observer.OnError(e);
      }
    }, function () {
      if (!stopped) {
        completed2 = true;

        if (completed1) {
          stopped = true;
          observer.OnCompleted();
        }
      }
    }));
    return {
      Dispose: function Dispose() {
        h1.Dispose();
        h2.Dispose();
      }
    };
  }, source1.delegates.concat(source2.delegates));
}

function pairwise(sourceEvent) {
  var source = sourceEvent;
  return new Event(function (observer) {
    var last;
    return source.Subscribe(new _Observable.Observer(function (next) {
      if (last != null) {
        observer.OnNext([last, next]);
      }

      last = next;
    }, observer.OnError, observer.OnCompleted));
  }, source.delegates);
}

function partition(predicate, sourceEvent) {
  return [filter(predicate, sourceEvent), filter(function (x) {
    return !predicate(x);
  }, sourceEvent)];
}

function scan(collector, state, sourceEvent) {
  var source = sourceEvent;
  return new Event(function (observer) {
    return source.Subscribe(new _Observable.Observer(function (t) {
      (0, _Observable.protect)(function () {
        return collector(state, t);
      }, function (u) {
        state = u;
        observer.OnNext(u);
      }, observer.OnError);
    }, observer.OnError, observer.OnCompleted));
  }, source.delegates);
}

function split(splitter, sourceEvent) {
  return [choose(function (v) {
    return (0, _Choice.Choice_tryValueIfChoice1Of2)(splitter(v));
  }, sourceEvent), choose(function (v) {
    return (0, _Choice.Choice_tryValueIfChoice2Of2)(splitter(v));
  }, sourceEvent)];
}

var _default = Event;
exports.default = _default;
},{"./Observable.js":"../JS/.fable/fable-library.3.0.0/Observable.js","./Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./Choice.js":"../JS/.fable/fable-library.3.0.0/Choice.js","./Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js"}],"../JS/browser/browser_extensions.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ListenerOptions$reflection = ListenerOptions$reflection;
exports.ListenerOptions = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var ListenerOptions = /*#__PURE__*/function (_Record) {
  _inherits(ListenerOptions, _Record);

  var _super = _createSuper(ListenerOptions);

  function ListenerOptions(capture, once, passive) {
    var _this;

    _classCallCheck(this, ListenerOptions);

    _this = _super.call(this);
    _this.capture = capture;
    _this.once = once;
    _this.passive = passive;
    return _this;
  }

  return ListenerOptions;
}(_Types.Record);

exports.ListenerOptions = ListenerOptions;

function ListenerOptions$reflection() {
  return (0, _Reflection.record_type)("Wil.Browser.Types.BrowserExtensions.ListenerOptions", [], ListenerOptions, function () {
    return [["capture", (0, _Reflection.option_type)(_Reflection.bool_type)], ["once", (0, _Reflection.option_type)(_Reflection.bool_type)], ["passive", (0, _Reflection.option_type)(_Reflection.bool_type)]];
  });
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js"}],"../JS/browser/browser_types.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getClientRect = getClientRect;
exports.emptyImageData = void 0;

var emptyImageData = function () {
  var canvas = document.createElement("canvas");
  var ctx = canvas.getContext('2d');
  return ctx.createImageData(1, 1);
}();

exports.emptyImageData = emptyImageData;

function getClientRect(elem) {
  var cw = elem.clientWidth;
  var ch = elem.clientHeight;
  var rect = elem.getBoundingClientRect();
  rect.x = rect.x + (rect.width - cw) * 0.5;
  rect.y = rect.y + (rect.height - ch) * 0.5;
  rect.width = cw;
  rect.height = ch;
  return rect;
}
},{}],"../JS/webgl_data/glmouse.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GlMouse$reflection = GlMouse$reflection;
exports.GlMouse_$ctor_Z38C79397 = GlMouse_$ctor_Z38C79397;
exports.GlMouse__get_DragTolerance = GlMouse__get_DragTolerance;
exports.GlMouse__set_DragTolerance_Z16DF143 = GlMouse__set_DragTolerance_Z16DF143;
exports.GlMouse__get_Changed = GlMouse__get_Changed;
exports.GlMouse__get_Position = GlMouse__get_Position;
exports.GlMouse__get_LastPosition = GlMouse__get_LastPosition;
exports.GlMouse__get_PositionDelta = GlMouse__get_PositionDelta;
exports.GlMouse__get_WheelDelta = GlMouse__get_WheelDelta;
exports.GlMouse__IsButtonPressed_Z524259A4 = GlMouse__IsButtonPressed_Z524259A4;
exports.GlMouse__IsButtonDownEvent_Z524259A4 = GlMouse__IsButtonDownEvent_Z524259A4;
exports.GlMouse__IsButtonUpEvent_Z524259A4 = GlMouse__IsButtonUpEvent_Z524259A4;
exports.GlMouse__DragOrigin_Z524259A4 = GlMouse__DragOrigin_Z524259A4;
exports.GlMouse__DragOriginDelta_Z524259A4 = GlMouse__DragOriginDelta_Z524259A4;
exports.GlMouse__get_IsWheelEvent = GlMouse__get_IsWheelEvent;
exports.GlMouse__get_IsMoveEvent = GlMouse__get_IsMoveEvent;
exports.GlMouse__IsDragStartEvent_Z524259A4 = GlMouse__IsDragStartEvent_Z524259A4;
exports.GlMouse__IsDragEvent_Z524259A4 = GlMouse__IsDragEvent_Z524259A4;
exports.GlMouse__IsDragEndEvent_Z524259A4 = GlMouse__IsDragEndEvent_Z524259A4;
exports.GlMouse__Update = GlMouse__Update;
exports.Mouse_rightButton = exports.Mouse_middleButton = exports.Mouse_leftButton = exports.GlMouse = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _vectors = require("../core/vectors.js");

var _Event = _interopRequireDefault(require("../.fable/fable-library.3.0.0/Event.js"));

var _browser_extensions = require("../browser/browser_extensions.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _browser_types = require("../browser/browser_types.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GlMouse = function GlMouse(canvas) {
  var _this = this;

  _classCallCheck(this, GlMouse);

  this.m = new _Types.FSharpRef(null);
  var m = this.m;
  this.canvas = canvas;
  this.m.contents = this;
  this.leftButton = 0;
  this.rightButton = 2;
  this.buttonPressed = [false, false, false];
  this.buttonDownEvent = [false, false, false];
  this.buttonUpEvent = [false, false, false];
  this.buttonLast = [false, false, false];
  this.wheelEvent = false;
  this.wheelEventLast = false;
  this.wheelDelta = (0, _vectors.Vec2_Create)();
  this.position = (0, _vectors.Vec2_Create)();
  this.lastPosition = (0, _vectors.Vec2_Create)();
  this.positionDelta = (0, _vectors.Vec2_Create)();
  this.moveEvent = false;
  this.dragOrigin = [(0, _vectors.Vec2_Create)(), (0, _vectors.Vec2_Create)(), (0, _vectors.Vec2_Create)()];
  this.dragOriginDelta = [(0, _vectors.Vec2_Create)(), (0, _vectors.Vec2_Create)(), (0, _vectors.Vec2_Create)()];
  this.dragPending = [false, false, false];
  this.dragging = [false, false, false];
  this.dragStartEvent = [false, false, false];
  this.dragEvent = [false, false, false];
  this.dragEndEvent = [false, false, false];
  this.changes = new _Event.default();
  window.addEventListener("contextmenu", function (arg) {
    var value = GlMouse__handleContextMenu_Z5B3E8D2(_this, arg);
    void value;
  });
  window.addEventListener("mousemove", function (arg_1) {
    var value_1 = GlMouse__handleMouseMove_Z5B3E8D2(_this, arg_1);
    void value_1;
  });
  window.addEventListener("mousedown", function (arg_2) {
    var value_2 = GlMouse__handleMouseDown_Z5B3E8D2(_this, arg_2);
    void undefined;
  });
  window.addEventListener("mouseup", function (arg_3) {
    var value_3 = GlMouse__handleMouseUp_Z5B3E8D2(_this, arg_3);
    void undefined;
  });
  var opts = new _browser_extensions.ListenerOptions(void 0, void 0, false);
  window.addEventListener("wheel", function (arg_4) {
    var value_4 = GlMouse__handleMouseWheel_Z5B3E8D2(_this, arg_4);
    void undefined;
  }, opts);
  this["DragTolerance@"] = 5;
  this["Changed@"] = this.changes.Publish;
  this["init@8-8"] = 1;
};

exports.GlMouse = GlMouse;

function GlMouse$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.Data.GlMouse", void 0, GlMouse);
}

function GlMouse_$ctor_Z38C79397(canvas) {
  return new GlMouse(canvas);
}

function GlMouse__get_DragTolerance(__) {
  return __["DragTolerance@"];
}

function GlMouse__set_DragTolerance_Z16DF143(__, v) {
  __["DragTolerance@"] = v;
}

function GlMouse__get_Changed(__) {
  return __["Changed@"];
}

function GlMouse__get_Position(_) {
  return (0, _vectors.Vec2__Clone)(_.position);
}

function GlMouse__get_LastPosition(_) {
  return (0, _vectors.Vec2__Clone)(_.lastPosition);
}

function GlMouse__get_PositionDelta(_) {
  return (0, _vectors.Vec2__Clone)(_.positionDelta);
}

function GlMouse__get_WheelDelta(_) {
  return (0, _vectors.Vec2__Clone)(_.wheelDelta);
}

function GlMouse__IsButtonPressed_Z524259A4(_, button) {
  return _.buttonPressed[button];
}

function GlMouse__IsButtonDownEvent_Z524259A4(_, button) {
  return _.buttonDownEvent[button];
}

function GlMouse__IsButtonUpEvent_Z524259A4(_, button) {
  return _.buttonUpEvent[button];
}

function GlMouse__DragOrigin_Z524259A4(_, button) {
  return (0, _vectors.Vec2__Clone)(_.dragOrigin[button]);
}

function GlMouse__DragOriginDelta_Z524259A4(_, button) {
  return (0, _vectors.Vec2__Clone)(_.dragOriginDelta[button]);
}

function GlMouse__get_IsWheelEvent(_) {
  return _.wheelEvent;
}

function GlMouse__get_IsMoveEvent(_) {
  return _.moveEvent;
}

function GlMouse__IsDragStartEvent_Z524259A4(_, button) {
  return _.dragStartEvent[button];
}

function GlMouse__IsDragEvent_Z524259A4(_, button) {
  return _.dragEvent[button];
}

function GlMouse__IsDragEndEvent_Z524259A4(_, button) {
  return _.dragEndEvent[button];
}

function GlMouse__Update(_) {
  var __25;

  _.moveEvent = !(0, _Array.equalsWith)(_Util.comparePrimitives, (0, _vectors.Vec2__get_Values)(_.position), (0, _vectors.Vec2__get_Values)(_.lastPosition));
  var other = (0, _vectors.Vec2_op_Subtraction_Z24FF8540)(_.position, _.lastPosition);
  var value_2;
  var __4 = _.positionDelta.v.contents;
  var x_1 = other.values[0];
  var y_1 = other.values[1];
  var __5 = __4.v.contents;
  __5.values[0] = x_1;
  var __6 = __4.v.contents;
  __6.values[1] = y_1;
  value_2 = __4.v.contents;
  void value_2;
  var other_1 = _.position;
  var value_5;
  var __10 = _.lastPosition.v.contents;
  var x_2 = other_1.values[0];
  var y_2 = other_1.values[1];
  var __11 = __10.v.contents;
  __11.values[0] = x_2;
  var __12 = __10.v.contents;
  __12.values[1] = y_2;
  value_5 = __10.v.contents;
  void value_5;
  _.wheelEvent = _.wheelEvent ? !_.wheelEventLast : false;
  _.wheelEventLast = _.wheelEvent;
  var enumerator = (0, _Seq.getEnumerator)((0, _List.ofSeq)((0, _Seq.rangeNumber)(_.leftButton, 1, _.rightButton)));

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var button = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]() | 0;
      _.buttonDownEvent[button] = !_.buttonLast[button] ? _.buttonPressed[button] : false;
      _.buttonUpEvent[button] = _.buttonLast[button] ? !_.buttonPressed[button] : false;
      _.buttonLast[button] = _.buttonPressed[button];
      _.dragEvent[button] = false;
      _.dragStartEvent[button] = false;
      _.dragEndEvent[button] = false;

      if (_.buttonUpEvent[button]) {
        _.dragEndEvent[button] = _.dragging[button];
        _.dragPending[button] = false;
        _.dragging[button] = false;
      }

      if (_.buttonDownEvent[button]) {
        var other_2 = _.position;
        var value_8 = void 0;
        var __16 = _.dragOrigin[button].v.contents;
        var x_3 = other_2.values[0];
        var y_3 = other_2.values[1];
        var __17 = __16.v.contents;
        __17.values[0] = x_3;
        var __18 = __16.v.contents;
        __18.values[1] = y_3;
        value_8 = __16.v.contents;
        void value_8;
        _.dragPending[button] = true;
        _.dragging[button] = false;
      }

      if (_.buttonPressed[button] ? _.moveEvent : false) {
        var __19 = _.dragOriginDelta[button];
        var other_3 = (0, _vectors.Vec2_op_Subtraction_Z24FF8540)(_.position, _.dragOrigin[button]);
        var value_11 = void 0;
        var __22 = __19.v.contents;
        var x_4 = other_3.values[0];
        var y_4 = other_3.values[1];
        var __23 = __22.v.contents;
        __23.values[0] = x_4;
        var __24 = __22.v.contents;
        __24.values[1] = y_4;
        value_11 = __22.v.contents;
        void value_11;

        if (_.dragPending[button]) {
          if ((__25 = _.dragOriginDelta[button], Math.sqrt(__25.v.contents.values[0] * __25.v.contents.values[0] + __25.v.contents.values[1] * __25.v.contents.values[1])) > GlMouse__get_DragTolerance(_.m.contents)) {
            _.dragPending[button] = false;
            _.dragging[button] = true;
            _.dragStartEvent[button] = true;
            _.dragEvent[button] = true;
          }
        } else if (_.dragging[button]) {
          _.dragEvent[button] = true;
        }
      }
    }
  } finally {
    enumerator.Dispose();
  }
}

function GlMouse__handleContextMenu_Z5B3E8D2(this$, event) {
  event.preventDefault();
  return false;
}

function GlMouse__handleMouseMove_Z5B3E8D2(this$, event) {
  var event_1 = event;
  var rect = (0, _browser_types.getClientRect)(this$.canvas);
  var mx = (0, _Util.round)((event_1.clientX - rect.x) * (this$.canvas.width / rect.width));
  var my = (0, _Util.round)((event_1.clientY - rect.y) * (this$.canvas.height / rect.height));

  if (((mx >= 0 ? mx < rect.width : false) ? my >= 0 : false) ? my < rect.height : false) {
    var _ = this$.position;
    var value_2 = (0, _vectors.Vec2__WithXY_6DB1BD7B)(_.v.contents, mx, this$.canvas.height - 1 - my, _.v.contents);
    void value_2;
    this$.changes.Trigger();
    return true;
  } else {
    return false;
  }
}

function GlMouse__handleMouseDown_Z5B3E8D2(this$, event) {
  if (GlMouse__handleMouseMove_Z5B3E8D2(this$, event)) {
    var event_1 = event;
    this$.buttonPressed[~~event_1.button] = true;

    if (~~event_1.button === this$.rightButton) {
      event_1.preventDefault();
    }

    this$.changes.Trigger();
  }
}

function GlMouse__handleMouseUp_Z5B3E8D2(this$, event) {
  var value = GlMouse__handleMouseMove_Z5B3E8D2(this$, event);
  void value;
  var event_1 = event;
  this$.buttonPressed[~~event_1.button] = false;

  if (~~event_1.button === this$.rightButton) {
    event_1.preventDefault();
  }

  this$.changes.Trigger();
}

function GlMouse__handleMouseWheel_Z5B3E8D2(this$, event) {
  if (GlMouse__handleMouseMove_Z5B3E8D2(this$, event)) {
    var event_1 = event;
    this$.wheelEvent = true;
    var _ = this$.wheelDelta;
    var value = (0, _vectors.Vec2__WithXY_6DB1BD7B)(_.v.contents, event_1.deltaX, event_1.deltaY, _.v.contents);
    void value;
    event_1.preventDefault();
    this$.changes.Trigger();
  }
}

var Mouse_leftButton = 0;
exports.Mouse_leftButton = Mouse_leftButton;
var Mouse_middleButton = 1;
exports.Mouse_middleButton = Mouse_middleButton;
var Mouse_rightButton = 2;
exports.Mouse_rightButton = Mouse_rightButton;
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../core/vectors.js":"../JS/core/vectors.js","../.fable/fable-library.3.0.0/Event.js":"../JS/.fable/fable-library.3.0.0/Event.js","../browser/browser_extensions.js":"../JS/browser/browser_extensions.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../browser/browser_types.js":"../JS/browser/browser_types.js"}],"C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/base64-js/index.js":[function(require,module,exports) {
'use strict'

exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function getLens (b64) {
  var len = b64.length

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen > 0
    ? validLen - 4
    : validLen

  var i
  for (i = 0; i < len; i += 4) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 18) |
      (revLookup[b64.charCodeAt(i + 1)] << 12) |
      (revLookup[b64.charCodeAt(i + 2)] << 6) |
      revLookup[b64.charCodeAt(i + 3)]
    arr[curByte++] = (tmp >> 16) & 0xFF
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 2) |
      (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 10) |
      (revLookup[b64.charCodeAt(i + 1)] << 4) |
      (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] +
    lookup[num >> 12 & 0x3F] +
    lookup[num >> 6 & 0x3F] +
    lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp =
      ((uint8[i] << 16) & 0xFF0000) +
      ((uint8[i + 1] << 8) & 0xFF00) +
      (uint8[i + 2] & 0xFF)
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp >> 2] +
      lookup[(tmp << 4) & 0x3F] +
      '=='
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1]
    parts.push(
      lookup[tmp >> 10] +
      lookup[(tmp >> 4) & 0x3F] +
      lookup[(tmp << 2) & 0x3F] +
      '='
    )
  }

  return parts.join('')
}

},{}],"C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/ieee754/index.js":[function(require,module,exports) {
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}

},{}],"C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/isarray/index.js":[function(require,module,exports) {
var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};

},{}],"C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/buffer/index.js":[function(require,module,exports) {

var global = arguments[3];
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */

'use strict'

var base64 = require('base64-js')
var ieee754 = require('ieee754')
var isArray = require('isarray')

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

},{"base64-js":"C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/base64-js/index.js","ieee754":"C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/ieee754/index.js","isarray":"C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/isarray/index.js","buffer":"C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/buffer/index.js"}],"../JS/webgl_data/webgl_data.js":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Data_GlUniformKind$reflection = Data_GlUniformKind$reflection;
exports.Data_GlAttributeKind$reflection = Data_GlAttributeKind$reflection;
exports.Data_GlCameraKind$reflection = Data_GlCameraKind$reflection;
exports.Data_GlTextureKind$reflection = Data_GlTextureKind$reflection;
exports.Data_GlUniformData$reflection = Data_GlUniformData$reflection;
exports.Data_GlUboData$reflection = Data_GlUboData$reflection;
exports.Data_GlIndicesData$reflection = Data_GlIndicesData$reflection;
exports.Data_GlAttributeData$reflection = Data_GlAttributeData$reflection;
exports.Data_GlRootAttribute$reflection = Data_GlRootAttribute$reflection;
exports.Data_GlTextureData$reflection = Data_GlTextureData$reflection;
exports.Data_GlObjData$reflection = Data_GlObjData$reflection;
exports.Data_GlCameraData$reflection = Data_GlCameraData$reflection;
exports.Data_GlLayerData$reflection = Data_GlLayerData$reflection;
exports.Data_GlSceneData$reflection = Data_GlSceneData$reflection;
exports.Data_GlCanvasData$reflection = Data_GlCanvasData$reflection;
exports.Data_GlUniformData__get_Name = Data_GlUniformData__get_Name;
exports.Data_GlUboData__get_Name = Data_GlUboData__get_Name;
exports.Data_GlAttributeData__get_Name = Data_GlAttributeData__get_Name;
exports.BuilderTypes_GlUniformProp$reflection = BuilderTypes_GlUniformProp$reflection;
exports.BuilderTypes_GlUboProp$reflection = BuilderTypes_GlUboProp$reflection;
exports.BuilderTypes_GlAttrProp$reflection = BuilderTypes_GlAttrProp$reflection;
exports.BuilderTypes_GlIndicesProp$reflection = BuilderTypes_GlIndicesProp$reflection;
exports.BuilderTypes_GlObjProp$reflection = BuilderTypes_GlObjProp$reflection;
exports.BuilderTypes_GlTextureProp$reflection = BuilderTypes_GlTextureProp$reflection;
exports.BuilderTypes_GlCamProp$reflection = BuilderTypes_GlCamProp$reflection;
exports.BuilderTypes_GlSceneProp$reflection = BuilderTypes_GlSceneProp$reflection;
exports.BuilderTypes_GlCanvasProp$reflection = BuilderTypes_GlCanvasProp$reflection;
exports.BuilderTypes_GlCanvasProp = exports.BuilderTypes_GlSceneProp = exports.BuilderTypes_GlCamProp = exports.BuilderTypes_GlTextureProp = exports.BuilderTypes_GlObjProp = exports.BuilderTypes_GlIndicesProp = exports.BuilderTypes_GlAttrProp = exports.BuilderTypes_GlUboProp = exports.BuilderTypes_GlUniformProp = exports.Data_GlCanvasData = exports.Data_GlSceneData = exports.Data_GlLayerData = exports.Data_GlCameraData = exports.Data_GlObjData = exports.Data_GlTextureData = exports.Data_GlRootAttribute = exports.Data_GlAttributeData = exports.Data_GlIndicesData = exports.Data_GlUboData = exports.Data_GlUniformData = exports.Data_GlTextureKind = exports.Data_GlCameraKind = exports.Data_GlAttributeKind = exports.Data_GlUniformKind = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _program_utils = require("../webgl_core/program_utils.js");

var _glbuffer = require("./glbuffer.js");

var _webgl_types = require("../webgl_core/webgl_types.js");

var _webgl_data_types = require("./webgl_data_types.js");

var _vectors = require("../core/vectors.js");

var _matricies = require("../core/matricies.js");

var _bounds = require("../twod/bounds.js");

var _glcanvasparams = require("./glcanvasparams.js");

var _glmouse = require("./glmouse.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var Data_GlUniformKind = /*#__PURE__*/function (_Union) {
  _inherits(Data_GlUniformKind, _Union);

  var _super = _createSuper(Data_GlUniformKind);

  function Data_GlUniformKind(tag) {
    var _this;

    _classCallCheck(this, Data_GlUniformKind);

    _this = _super.call(this);
    _this.tag = tag | 0;

    for (var _len = arguments.length, fields = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      fields[_key - 1] = arguments[_key];
    }

    _this.fields = fields;
    return _this;
  }

  _createClass(Data_GlUniformKind, [{
    key: "cases",
    value: function cases() {
      return ["Single", "Array", "ArrayChild"];
    }
  }]);

  return Data_GlUniformKind;
}(_Types.Union);

exports.Data_GlUniformKind = Data_GlUniformKind;

function Data_GlUniformKind$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.Data.GlUniformKind", [], Data_GlUniformKind, function () {
    return [[], [], []];
  });
}

var Data_GlAttributeKind = /*#__PURE__*/function (_Union2) {
  _inherits(Data_GlAttributeKind, _Union2);

  var _super2 = _createSuper(Data_GlAttributeKind);

  function Data_GlAttributeKind(tag) {
    var _this2;

    _classCallCheck(this, Data_GlAttributeKind);

    _this2 = _super2.call(this);
    _this2.tag = tag | 0;

    for (var _len2 = arguments.length, fields = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      fields[_key2 - 1] = arguments[_key2];
    }

    _this2.fields = fields;
    return _this2;
  }

  _createClass(Data_GlAttributeKind, [{
    key: "cases",
    value: function cases() {
      return ["Single", "Interleave", "InterleaveChild"];
    }
  }]);

  return Data_GlAttributeKind;
}(_Types.Union);

exports.Data_GlAttributeKind = Data_GlAttributeKind;

function Data_GlAttributeKind$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.Data.GlAttributeKind", [], Data_GlAttributeKind, function () {
    return [[], [], []];
  });
}

var Data_GlCameraKind = /*#__PURE__*/function (_Union3) {
  _inherits(Data_GlCameraKind, _Union3);

  var _super3 = _createSuper(Data_GlCameraKind);

  function Data_GlCameraKind(tag) {
    var _this3;

    _classCallCheck(this, Data_GlCameraKind);

    _this3 = _super3.call(this);
    _this3.tag = tag | 0;

    for (var _len3 = arguments.length, fields = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
      fields[_key3 - 1] = arguments[_key3];
    }

    _this3.fields = fields;
    return _this3;
  }

  _createClass(Data_GlCameraKind, [{
    key: "cases",
    value: function cases() {
      return ["Ortho2D", "Perspective"];
    }
  }]);

  return Data_GlCameraKind;
}(_Types.Union);

exports.Data_GlCameraKind = Data_GlCameraKind;

function Data_GlCameraKind$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.Data.GlCameraKind", [], Data_GlCameraKind, function () {
    return [[], []];
  });
}

var Data_GlTextureKind = /*#__PURE__*/function (_Union4) {
  _inherits(Data_GlTextureKind, _Union4);

  var _super4 = _createSuper(Data_GlTextureKind);

  function Data_GlTextureKind(tag) {
    var _this4;

    _classCallCheck(this, Data_GlTextureKind);

    _this4 = _super4.call(this);
    _this4.tag = tag | 0;

    for (var _len4 = arguments.length, fields = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
      fields[_key4 - 1] = arguments[_key4];
    }

    _this4.fields = fields;
    return _this4;
  }

  _createClass(Data_GlTextureKind, [{
    key: "cases",
    value: function cases() {
      return ["DataTexture", "ImageTexture"];
    }
  }]);

  return Data_GlTextureKind;
}(_Types.Union);

exports.Data_GlTextureKind = Data_GlTextureKind;

function Data_GlTextureKind$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.Data.GlTextureKind", [], Data_GlTextureKind, function () {
    return [[], []];
  });
}

var Data_GlUniformData = /*#__PURE__*/function (_Record) {
  _inherits(Data_GlUniformData, _Record);

  var _super5 = _createSuper(Data_GlUniformData);

  function Data_GlUniformData(Id, Info, IsDirty, Data, Value, ParentObject, ParentUbo, RootUniform, ChildUniforms, Link, LinkedChildren) {
    var _this5;

    _classCallCheck(this, Data_GlUniformData);

    _this5 = _super5.call(this);
    _this5.Id = Id | 0;
    _this5.Info = Info;
    _this5.IsDirty = IsDirty;
    _this5.Data = Data;
    _this5.Value = Value;
    _this5.ParentObject = ParentObject;
    _this5.ParentUbo = ParentUbo;
    _this5.RootUniform = RootUniform;
    _this5.ChildUniforms = ChildUniforms;
    _this5.Link = Link;
    _this5.LinkedChildren = LinkedChildren;
    return _this5;
  }

  return Data_GlUniformData;
}(_Types.Record);

exports.Data_GlUniformData = Data_GlUniformData;

function Data_GlUniformData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Data.Data.GlUniformData", [], Data_GlUniformData, function () {
    return [["Id", _Reflection.int32_type], ["Info", (0, _program_utils.GlUniformInfo$reflection)()], ["IsDirty", _Reflection.bool_type], ["Data", (0, _Reflection.class_type)("Fable.Core.JS.TypedArray")], ["Value", _Reflection.obj_type], ["ParentObject", Data_GlObjData$reflection()], ["ParentUbo", (0, _Reflection.option_type)(Data_GlUboData$reflection())], ["RootUniform", (0, _Reflection.option_type)(Data_GlUniformData$reflection())], ["ChildUniforms", (0, _Reflection.array_type)(Data_GlUniformData$reflection())], ["Link", (0, _Reflection.option_type)(Data_GlUniformData$reflection())], ["LinkedChildren", (0, _Reflection.list_type)(Data_GlUniformData$reflection())]];
  });
}

var Data_GlUboData = /*#__PURE__*/function (_Record2) {
  _inherits(Data_GlUboData, _Record2);

  var _super6 = _createSuper(Data_GlUboData);

  function Data_GlUboData(Id, Info, IsDirty, Location, Uniforms, Buffer, Data, ParentObject, Link, LinkedChildren) {
    var _this6;

    _classCallCheck(this, Data_GlUboData);

    _this6 = _super6.call(this);
    _this6.Id = Id | 0;
    _this6.Info = Info;
    _this6.IsDirty = IsDirty;
    _this6.Location = Location | 0;
    _this6.Uniforms = Uniforms;
    _this6.Buffer = Buffer;
    _this6.Data = Data;
    _this6.ParentObject = ParentObject;
    _this6.Link = Link;
    _this6.LinkedChildren = LinkedChildren;
    return _this6;
  }

  return Data_GlUboData;
}(_Types.Record);

exports.Data_GlUboData = Data_GlUboData;

function Data_GlUboData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Data.Data.GlUboData", [], Data_GlUboData, function () {
    return [["Id", _Reflection.int32_type], ["Info", (0, _program_utils.GlUboInfo$reflection)()], ["IsDirty", _Reflection.bool_type], ["Location", _Reflection.int32_type], ["Uniforms", (0, _Reflection.list_type)(Data_GlUniformData$reflection())], ["Buffer", (0, _glbuffer.GlBuffer$reflection)()], ["Data", (0, _Reflection.class_type)("Fable.Core.JS.TypedArray`1", [_Reflection.uint8_type])], ["ParentObject", Data_GlObjData$reflection()], ["Link", (0, _Reflection.option_type)(Data_GlUboData$reflection())], ["LinkedChildren", (0, _Reflection.list_type)(Data_GlUboData$reflection())]];
  });
}

var Data_GlIndicesData = /*#__PURE__*/function (_Record3) {
  _inherits(Data_GlIndicesData, _Record3);

  var _super7 = _createSuper(Data_GlIndicesData);

  function Data_GlIndicesData(Name, IsDirty, IndicesType, ArrayCreator, Offset, Values, DataCount, BufferUsage, Buffer, ParentObject, Link, LinkedChildren, RecalcNeeded, CalcDataCount) {
    var _this7;

    _classCallCheck(this, Data_GlIndicesData);

    _this7 = _super7.call(this);
    _this7.Name = Name;
    _this7.IsDirty = IsDirty;
    _this7.IndicesType = IndicesType | 0;
    _this7.ArrayCreator = ArrayCreator;
    _this7.Offset = Offset | 0;
    _this7.Values = Values;
    _this7.DataCount = DataCount | 0;
    _this7.BufferUsage = BufferUsage | 0;
    _this7.Buffer = Buffer;
    _this7.ParentObject = ParentObject;
    _this7.Link = Link;
    _this7.LinkedChildren = LinkedChildren;
    _this7.RecalcNeeded = RecalcNeeded;
    _this7.CalcDataCount = CalcDataCount;
    return _this7;
  }

  return Data_GlIndicesData;
}(_Types.Record);

exports.Data_GlIndicesData = Data_GlIndicesData;

function Data_GlIndicesData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Data.Data.GlIndicesData", [], Data_GlIndicesData, function () {
    return [["Name", _Reflection.string_type], ["IsDirty", _Reflection.bool_type], ["IndicesType", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlIndicesType", _Reflection.int32_type, [["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125]])], ["ArrayCreator", (0, _Reflection.class_type)("Wil.Js.TypedArrayUtils.ITypedArrayFactory")], ["Offset", _Reflection.int32_type], ["Values", (0, _Reflection.array_type)(_Reflection.int32_type)], ["DataCount", _Reflection.int32_type], ["BufferUsage", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlBufferUsage", _Reflection.int32_type, [["STREAM_DRAW", 35040], ["STATIC_DRAW", 35044], ["DYNAMIC_DRAW", 35048]])], ["Buffer", (0, _glbuffer.GlBuffer$reflection)()], ["ParentObject", Data_GlObjData$reflection()], ["Link", (0, _Reflection.option_type)(Data_GlIndicesData$reflection())], ["LinkedChildren", (0, _Reflection.list_type)(Data_GlIndicesData$reflection())], ["RecalcNeeded", _Reflection.bool_type], ["CalcDataCount", _Reflection.bool_type]];
  });
}

var Data_GlAttributeData = /*#__PURE__*/function (_Record4) {
  _inherits(Data_GlAttributeData, _Record4);

  var _super8 = _createSuper(Data_GlAttributeData);

  function Data_GlAttributeData(Id, Kind, Info, IsDirty, BaseType, ArrayCreator, RecordSize, ByteSize, DataLength, BaseTypeInfo, Normalize, StartIndex, IndexStride, Stride, Offset, Values, DataCount, BufferUsage, DeterminesVertexCount, DeterminesInstanceCount, Divisor, Buffer, ChildAttributes, ParentObject, ParentAttribute, Link, LinkedChildren, CanSingleCopy, AdjustsStride, EnableNeeded, RecalcNeeded, CalcDataCount, CalcStride, CalcOffset) {
    var _this8;

    _classCallCheck(this, Data_GlAttributeData);

    _this8 = _super8.call(this);
    _this8.Id = Id | 0;
    _this8.Kind = Kind;
    _this8.Info = Info;
    _this8.IsDirty = IsDirty;
    _this8.BaseType = BaseType | 0;
    _this8.ArrayCreator = ArrayCreator;
    _this8.RecordSize = RecordSize | 0;
    _this8.ByteSize = ByteSize | 0;
    _this8.DataLength = DataLength | 0;
    _this8.BaseTypeInfo = BaseTypeInfo;
    _this8.Normalize = Normalize;
    _this8.StartIndex = StartIndex | 0;
    _this8.IndexStride = IndexStride | 0;
    _this8.Stride = Stride | 0;
    _this8.Offset = Offset | 0;
    _this8.Values = Values;
    _this8.DataCount = DataCount | 0;
    _this8.BufferUsage = BufferUsage | 0;
    _this8.DeterminesVertexCount = DeterminesVertexCount;
    _this8.DeterminesInstanceCount = DeterminesInstanceCount;
    _this8.Divisor = Divisor | 0;
    _this8.Buffer = Buffer;
    _this8.ChildAttributes = ChildAttributes;
    _this8.ParentObject = ParentObject;
    _this8.ParentAttribute = ParentAttribute;
    _this8.Link = Link;
    _this8.LinkedChildren = LinkedChildren;
    _this8.CanSingleCopy = CanSingleCopy;
    _this8.AdjustsStride = AdjustsStride;
    _this8.EnableNeeded = EnableNeeded;
    _this8.RecalcNeeded = RecalcNeeded;
    _this8.CalcDataCount = CalcDataCount;
    _this8.CalcStride = CalcStride;
    _this8.CalcOffset = CalcOffset;
    return _this8;
  }

  return Data_GlAttributeData;
}(_Types.Record);

exports.Data_GlAttributeData = Data_GlAttributeData;

function Data_GlAttributeData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Data.Data.GlAttributeData", [], Data_GlAttributeData, function () {
    return [["Id", _Reflection.int32_type], ["Kind", Data_GlAttributeKind$reflection()], ["Info", (0, _program_utils.GlAttributeInfo$reflection)()], ["IsDirty", _Reflection.bool_type], ["BaseType", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlType", _Reflection.int32_type, [["Unknown", 0], ["BYTE", 5120], ["SHORT", 5122], ["BOOL", 35670], ["BOOL_VEC2", 35671], ["BOOL_VEC3", 35672], ["BOOL_VEC4", 35673], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["FLOAT_MAT2x3", 35685], ["FLOAT_MAT2", 35674], ["FLOAT_MAT2x4", 35686], ["FLOAT_MAT3", 35675], ["FLOAT_MAT3x2", 35687], ["FLOAT_MAT3x4", 35688], ["FLOAT_MAT4", 35676], ["FLOAT_MAT4x2", 35689], ["FLOAT_MAT4x3", 35690], ["FLOAT_VEC2", 35664], ["FLOAT_VEC3", 35665], ["FLOAT_VEC4", 35666], ["INT", 5124], ["INT_VEC2", 35667], ["INT_VEC3", 35668], ["INT_VEC4", 35669], ["INT_SAMPLER_2D", 36298], ["INT_SAMPLER_2D_ARRAY", 36303], ["INT_SAMPLER_3D", 36299], ["INT_SAMPLER_CUBE", 36300], ["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["UNSIGNED_INT_SAMPLER_2D", 36306], ["UNSIGNED_INT_SAMPLER_2D_ARRAY", 36311], ["UNSIGNED_INT_SAMPLER_3D", 36307], ["UNSIGNED_INT_SAMPLER_CUBE", 36308], ["UNSIGNED_INT_VEC2", 36294], ["UNSIGNED_INT_VEC3", 36295], ["UNSIGNED_INT_VEC4", 36296], ["SAMPLER_2D", 35678], ["SAMPLER_2D_ARRAY", 36289], ["SAMPLER_2D_ARRAY_SHADOW", 36292], ["SAMPLER_2D_SHADOW", 35682], ["SAMPLER_3D", 35679], ["SAMPLER_CUBE", 35680], ["SAMPLER_CUBE_SHADOW", 36293]])], ["ArrayCreator", (0, _Reflection.class_type)("Wil.Js.TypedArrayUtils.ITypedArrayFactory")], ["RecordSize", _Reflection.int32_type], ["ByteSize", _Reflection.int32_type], ["DataLength", _Reflection.int32_type], ["BaseTypeInfo", (0, _webgl_types.GlTypeInfo$reflection)()], ["Normalize", _Reflection.bool_type], ["StartIndex", _Reflection.int32_type], ["IndexStride", _Reflection.int32_type], ["Stride", _Reflection.int32_type], ["Offset", _Reflection.int32_type], ["Values", (0, _Reflection.array_type)(_Reflection.float64_type)], ["DataCount", _Reflection.int32_type], ["BufferUsage", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlBufferUsage", _Reflection.int32_type, [["STREAM_DRAW", 35040], ["STATIC_DRAW", 35044], ["DYNAMIC_DRAW", 35048]])], ["DeterminesVertexCount", _Reflection.bool_type], ["DeterminesInstanceCount", _Reflection.bool_type], ["Divisor", _Reflection.int32_type], ["Buffer", (0, _glbuffer.GlBuffer$reflection)()], ["ChildAttributes", (0, _Reflection.list_type)(Data_GlAttributeData$reflection())], ["ParentObject", Data_GlObjData$reflection()], ["ParentAttribute", (0, _Reflection.option_type)(Data_GlAttributeData$reflection())], ["Link", (0, _Reflection.option_type)(Data_GlAttributeData$reflection())], ["LinkedChildren", (0, _Reflection.list_type)(Data_GlAttributeData$reflection())], ["CanSingleCopy", _Reflection.bool_type], ["AdjustsStride", _Reflection.bool_type], ["EnableNeeded", _Reflection.bool_type], ["RecalcNeeded", _Reflection.bool_type], ["CalcDataCount", _Reflection.bool_type], ["CalcStride", _Reflection.bool_type], ["CalcOffset", _Reflection.bool_type]];
  });
}

var Data_GlRootAttribute = /*#__PURE__*/function (_Union5) {
  _inherits(Data_GlRootAttribute, _Union5);

  var _super9 = _createSuper(Data_GlRootAttribute);

  function Data_GlRootAttribute(tag) {
    var _this9;

    _classCallCheck(this, Data_GlRootAttribute);

    _this9 = _super9.call(this);
    _this9.tag = tag | 0;

    for (var _len5 = arguments.length, fields = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
      fields[_key5 - 1] = arguments[_key5];
    }

    _this9.fields = fields;
    return _this9;
  }

  _createClass(Data_GlRootAttribute, [{
    key: "cases",
    value: function cases() {
      return ["SingleAttribute", "InterleaveAttribute"];
    }
  }]);

  return Data_GlRootAttribute;
}(_Types.Union);

exports.Data_GlRootAttribute = Data_GlRootAttribute;

function Data_GlRootAttribute$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.Data.GlRootAttribute", [], Data_GlRootAttribute, function () {
    return [[["Item", Data_GlAttributeData$reflection()]], [["Item", Data_GlAttributeData$reflection()]]];
  });
}

var Data_GlTextureData = /*#__PURE__*/function (_Record5) {
  _inherits(Data_GlTextureData, _Record5);

  var _super10 = _createSuper(Data_GlTextureData);

  function Data_GlTextureData(Id, Name, IsDirty, Target, TextureId, Index, Level, Width, Height, InternalFormat, Format, DataType, Pixels, Offset, GenerateMipMap, MagFilter, MinFilter, WrapS, WrapT, WrapR, BaseLevel, CompareFunc, CompareMode, MaxLevel, MaxLod, MinLod, ParentObject, Link, LinkedChildren) {
    var _this10;

    _classCallCheck(this, Data_GlTextureData);

    _this10 = _super10.call(this);
    _this10.Id = Id | 0;
    _this10.Name = Name;
    _this10.IsDirty = IsDirty;
    _this10.Target = Target | 0;
    _this10.TextureId = TextureId;
    _this10.Index = Index | 0;
    _this10.Level = Level | 0;
    _this10.Width = Width;
    _this10.Height = Height;
    _this10.InternalFormat = InternalFormat | 0;
    _this10.Format = Format | 0;
    _this10.DataType = DataType | 0;
    _this10.Pixels = Pixels;
    _this10.Offset = Offset | 0;
    _this10.GenerateMipMap = GenerateMipMap;
    _this10.MagFilter = MagFilter;
    _this10.MinFilter = MinFilter;
    _this10.WrapS = WrapS;
    _this10.WrapT = WrapT;
    _this10.WrapR = WrapR;
    _this10.BaseLevel = BaseLevel;
    _this10.CompareFunc = CompareFunc;
    _this10.CompareMode = CompareMode;
    _this10.MaxLevel = MaxLevel;
    _this10.MaxLod = MaxLod;
    _this10.MinLod = MinLod;
    _this10.ParentObject = ParentObject;
    _this10.Link = Link;
    _this10.LinkedChildren = LinkedChildren;
    return _this10;
  }

  return Data_GlTextureData;
}(_Types.Record);

exports.Data_GlTextureData = Data_GlTextureData;

function Data_GlTextureData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Data.Data.GlTextureData", [], Data_GlTextureData, function () {
    return [["Id", _Reflection.int32_type], ["Name", _Reflection.string_type], ["IsDirty", _Reflection.bool_type], ["Target", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlTextureTarget", _Reflection.int32_type, [["TEXTURE_2D", 3553], ["TEXTURE_CUBE_MAP_POSITIVE_X", 34069], ["TEXTURE_CUBE_MAP_NEGATIVE_X", 34070], ["TEXTURE_CUBE_MAP_POSITIVE_Y", 34071], ["TEXTURE_CUBE_MAP_NEGATIVE_Y", 34072], ["TEXTURE_CUBE_MAP_POSITIVE_Z", 34073], ["TEXTURE_CUBE_MAP_NEGATIVE_Z", 34074]])], ["TextureId", (0, _Reflection.class_type)("Browser.Types.WebGLTexture")], ["Index", _Reflection.int32_type], ["Level", _Reflection.int32_type], ["Width", _Reflection.float64_type], ["Height", _Reflection.float64_type], ["InternalFormat", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlInternalColorFormat", _Reflection.int32_type, [["RGB", 6407], ["RGBA", 6408], ["LUMINANCE", 6409], ["LUMINANCE_ALPHA", 6410], ["ALPHA", 6406], ["R8", 33321], ["R16F", 33325], ["R32F", 33326], ["R8UI", 33330], ["RG8", 33323], ["RG16F", 33327], ["RG32F", 33328], ["RG8UI", 33336], ["RGB8", 32849], ["SRGB8", 35905], ["RGB565", 36194], ["R11F_G11F_B10F", 35898], ["RGB9_E5", 35901], ["RGB16F", 34843], ["RGB32F", 34837], ["RGB8UI", 36221], ["RGBA8", 32856], ["SRGB8_ALPHA8", 35907], ["RGB5_A1", 32855], ["RGB10_A2", 32857], ["RGBA4", 32854], ["RGBA16F", 34842], ["RGBA32F", 34836], ["RGBA8UI", 36220], ["R8_SNORM", 36756], ["RG8_SNORM", 36757], ["RGB8_SNORM", 36758], ["RGBA8_SNORM", 36759], ["RGB10_A2UI", 36975], ["R8I", 33329], ["R16I", 33331], ["R16UI", 33332], ["R32I", 33333], ["R32UI", 33334], ["RG8I", 33335], ["RG16I", 33337], ["RG16UI", 33338], ["RG32I", 33339], ["RG32UI", 33340], ["RGB16I", 36233], ["RGB16UI", 36215], ["RGB32I", 36227], ["RGB32UI", 36209], ["RGBA8I", 36238], ["RGBA16I", 36232], ["RGBA16UI", 36214], ["RGBA32I", 36226], ["RGBA32UI", 36208], ["DEPTH_COMPONENT16", 33189], ["DEPTH_COMPONENT24", 33190], ["DEPTH_COMPONENT32F", 36012], ["DEPTH24_STENCIL8", 35056], ["DEPTH32F_STENCIL8", 36013]])], ["Format", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlColorFormat", _Reflection.int32_type, [["RGB", 6407], ["RGBA", 6408], ["LUMINANCE_ALPHA", 6410], ["LUMINANCE", 6409], ["ALPHA", 6406], ["RED", 6403], ["RED_INTEGER", 36244], ["RG", 33319], ["RG_INTEGER", 33320], ["RGB_INTEGER", 36248], ["RGBA_INTEGER", 36249], ["DEPTH_COMPONENT", 6402], ["DEPTH_STENCIL", 34041]])], ["DataType", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlTextureType", _Reflection.int32_type, [["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT_4_4_4_4", 32819], ["UNSIGNED_SHORT_5_5_5_1", 32820], ["UNSIGNED_SHORT_5_6_5", 33635], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["BYTE", 5120], ["SHORT", 5122], ["INT", 5124], ["UNSIGNED_INT_2_10_10_10_REV", 33640], ["UNSIGNED_INT_10F_11F_11F_REV", 35899], ["UNSIGNED_INT_5_9_9_9_REV", 35902], ["FLOAT_32_UNSIGNED_INT_24_8_REV", 36269]])], ["Pixels", (0, _webgl_data_types.GlTexturePixels$reflection)()], ["Offset", _Reflection.int32_type], ["GenerateMipMap", _Reflection.bool_type], ["MagFilter", (0, _Reflection.option_type)((0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlMagFilter", _Reflection.int32_type, [["NEAREST", 9728], ["LINEAR", 9729]]))], ["MinFilter", (0, _Reflection.option_type)((0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlMinFilter", _Reflection.int32_type, [["NEAREST", 9728], ["LINEAR", 9729], ["NEAREST_MIPMAP_NEAREST", 9984], ["LINEAR_MIPMAP_NEAREST", 9985], ["NEAREST_MIPMAP_LINEAR", 9986], ["LINEAR_MIPMAP_LINEAR", 9987]]))], ["WrapS", (0, _Reflection.option_type)((0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlWrapMode", _Reflection.int32_type, [["REPEAT", 10497], ["CLAMP_TO_EDGE", 33071], ["MIRRORED_REPEAT", 33648]]))], ["WrapT", (0, _Reflection.option_type)((0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlWrapMode", _Reflection.int32_type, [["REPEAT", 10497], ["CLAMP_TO_EDGE", 33071], ["MIRRORED_REPEAT", 33648]]))], ["WrapR", (0, _Reflection.option_type)((0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlWrapMode", _Reflection.int32_type, [["REPEAT", 10497], ["CLAMP_TO_EDGE", 33071], ["MIRRORED_REPEAT", 33648]]))], ["BaseLevel", (0, _Reflection.option_type)(_Reflection.int32_type)], ["CompareFunc", (0, _Reflection.option_type)((0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlCompareFunc", _Reflection.int32_type, [["NEVER", 512], ["LESS", 513], ["EQUAL", 514], ["LEQUAL", 515], ["GREATER", 516], ["NOTEQUAL", 517], ["GEQUAL", 518], ["ALWAYS", 519]]))], ["CompareMode", (0, _Reflection.option_type)((0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlCompareMode", _Reflection.int32_type, [["NONE", 0], ["COMPARE_REF_TO_TEXTURE", 34894]]))], ["MaxLevel", (0, _Reflection.option_type)(_Reflection.int32_type)], ["MaxLod", (0, _Reflection.option_type)(_Reflection.float64_type)], ["MinLod", (0, _Reflection.option_type)(_Reflection.float64_type)], ["ParentObject", Data_GlObjData$reflection()], ["Link", (0, _Reflection.option_type)(Data_GlTextureData$reflection())], ["LinkedChildren", (0, _Reflection.list_type)(Data_GlTextureData$reflection())]];
  });
}

var Data_GlObjData = /*#__PURE__*/function (_Record6) {
  _inherits(Data_GlObjData, _Record6);

  var _super11 = _createSuper(Data_GlObjData);

  function Data_GlObjData(Id, Name, ProgramInfo, IsDirty, Scene, DrawMethod, DrawPrimitive, VertexCount, VertexOffset, VertexCountOffset, InstanceCount, InstanceOffset, InstanceCountOffset, IndicesOffset, Capabilities, Uniforms, Ubos, Attributes, Indices, Textures, VertexCountAttributes, InstanceCountAttributes, Vao, ProcessLinked, Layer, ParallaxCamera, ParallaxDistance, ParallaxOffset, ParallaxLastPosition, Angle, Position, Scale, ModelMatrix, ParallaxMatrix, Parent, Link, LinkedChildren, IsModelDirty, IsParallaxDirty, RecalcNeeded, CalcDrawMethod, CalcVertexCount, CalcInstanceCount) {
    var _this11;

    _classCallCheck(this, Data_GlObjData);

    _this11 = _super11.call(this);
    _this11.Id = Id | 0;
    _this11.Name = Name;
    _this11.ProgramInfo = ProgramInfo;
    _this11.IsDirty = IsDirty;
    _this11.Scene = Scene;
    _this11.DrawMethod = DrawMethod;
    _this11.DrawPrimitive = DrawPrimitive | 0;
    _this11.VertexCount = VertexCount | 0;
    _this11.VertexOffset = VertexOffset | 0;
    _this11.VertexCountOffset = VertexCountOffset | 0;
    _this11.InstanceCount = InstanceCount | 0;
    _this11.InstanceOffset = InstanceOffset | 0;
    _this11.InstanceCountOffset = InstanceCountOffset | 0;
    _this11.IndicesOffset = IndicesOffset | 0;
    _this11.Capabilities = Capabilities;
    _this11.Uniforms = Uniforms;
    _this11.Ubos = Ubos;
    _this11.Attributes = Attributes;
    _this11.Indices = Indices;
    _this11.Textures = Textures;
    _this11.VertexCountAttributes = VertexCountAttributes;
    _this11.InstanceCountAttributes = InstanceCountAttributes;
    _this11.Vao = Vao;
    _this11.ProcessLinked = ProcessLinked;
    _this11.Layer = Layer | 0;
    _this11.ParallaxCamera = ParallaxCamera;
    _this11.ParallaxDistance = ParallaxDistance;
    _this11.ParallaxOffset = ParallaxOffset;
    _this11.ParallaxLastPosition = ParallaxLastPosition;
    _this11.Angle = Angle;
    _this11.Position = Position;
    _this11.Scale = Scale;
    _this11.ModelMatrix = ModelMatrix;
    _this11.ParallaxMatrix = ParallaxMatrix;
    _this11.Parent = Parent;
    _this11.Link = Link;
    _this11.LinkedChildren = LinkedChildren;
    _this11.IsModelDirty = IsModelDirty;
    _this11.IsParallaxDirty = IsParallaxDirty;
    _this11.RecalcNeeded = RecalcNeeded;
    _this11.CalcDrawMethod = CalcDrawMethod;
    _this11.CalcVertexCount = CalcVertexCount;
    _this11.CalcInstanceCount = CalcInstanceCount;
    return _this11;
  }

  return Data_GlObjData;
}(_Types.Record);

exports.Data_GlObjData = Data_GlObjData;

function Data_GlObjData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Data.Data.GlObjData", [], Data_GlObjData, function () {
    return [["Id", _Reflection.int32_type], ["Name", _Reflection.string_type], ["ProgramInfo", (0, _program_utils.GlProgramInfo$reflection)()], ["IsDirty", _Reflection.bool_type], ["Scene", Data_GlSceneData$reflection()], ["DrawMethod", (0, _webgl_types.GlDrawMethod$reflection)()], ["DrawPrimitive", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlDrawPrimitive", _Reflection.int32_type, [["POINTS", 0], ["LINES", 1], ["LINE_LOOP", 2], ["LINE_STRIP", 3], ["TRIANGLES", 4], ["TRIANGLE_STRIP", 5], ["TRIANGLE_FAN", 6]])], ["VertexCount", _Reflection.int32_type], ["VertexOffset", _Reflection.int32_type], ["VertexCountOffset", _Reflection.int32_type], ["InstanceCount", _Reflection.int32_type], ["InstanceOffset", _Reflection.int32_type], ["InstanceCountOffset", _Reflection.int32_type], ["IndicesOffset", _Reflection.int32_type], ["Capabilities", (0, _Reflection.list_type)((0, _Reflection.lambda_type)((0, _Reflection.class_type)("Browser.Types.WebGLRenderingContext"), _Reflection.unit_type))], ["Uniforms", (0, _Reflection.list_type)(Data_GlUniformData$reflection())], ["Ubos", (0, _Reflection.list_type)(Data_GlUboData$reflection())], ["Attributes", (0, _Reflection.list_type)(Data_GlRootAttribute$reflection())], ["Indices", (0, _Reflection.option_type)(Data_GlIndicesData$reflection())], ["Textures", (0, _Reflection.list_type)(Data_GlTextureData$reflection())], ["VertexCountAttributes", (0, _Reflection.list_type)(Data_GlAttributeData$reflection())], ["InstanceCountAttributes", (0, _Reflection.list_type)(Data_GlAttributeData$reflection())], ["Vao", (0, _Reflection.class_type)("Wil.Webgl.Core.WebglExtensions.WebGLVAO")], ["ProcessLinked", _Reflection.bool_type], ["Layer", _Reflection.int32_type], ["ParallaxCamera", (0, _Reflection.option_type)(Data_GlCameraData$reflection())], ["ParallaxDistance", _Reflection.float64_type], ["ParallaxOffset", (0, _vectors.Vec3$reflection)()], ["ParallaxLastPosition", (0, _vectors.Vec3$reflection)()], ["Angle", (0, _vectors.Vec3$reflection)()], ["Position", (0, _vectors.Vec3$reflection)()], ["Scale", _Reflection.float64_type], ["ModelMatrix", (0, _matricies.Mat4$reflection)()], ["ParallaxMatrix", (0, _Reflection.option_type)((0, _matricies.Mat4$reflection)())], ["Parent", (0, _Reflection.option_type)(Data_GlObjData$reflection())], ["Link", (0, _Reflection.option_type)(Data_GlObjData$reflection())], ["LinkedChildren", (0, _Reflection.list_type)(Data_GlObjData$reflection())], ["IsModelDirty", _Reflection.bool_type], ["IsParallaxDirty", _Reflection.bool_type], ["RecalcNeeded", _Reflection.bool_type], ["CalcDrawMethod", _Reflection.bool_type], ["CalcVertexCount", _Reflection.bool_type], ["CalcInstanceCount", _Reflection.bool_type]];
  });
}

var Data_GlCameraData = /*#__PURE__*/function (_Record7) {
  _inherits(Data_GlCameraData, _Record7);

  var _super12 = _createSuper(Data_GlCameraData);

  function Data_GlCameraData(Id, Kind, Name, IsDirty, Scene, ClearViewport, CameraBackground, ClearMask, BorderWidth, AutoSizeViewport, UseViewSizeAspect, AutoPosition, Position, LookAt, ViewSize, ViewportBounds, ScissorBounds, Up, Near, Far, Aspect, Fov, ProjectionMatrix, ViewMatrix) {
    var _this12;

    _classCallCheck(this, Data_GlCameraData);

    _this12 = _super12.call(this);
    _this12.Id = Id | 0;
    _this12.Kind = Kind;
    _this12.Name = Name;
    _this12.IsDirty = IsDirty;
    _this12.Scene = Scene;
    _this12.ClearViewport = ClearViewport;
    _this12.CameraBackground = CameraBackground;
    _this12.ClearMask = ClearMask | 0;
    _this12.BorderWidth = BorderWidth;
    _this12.AutoSizeViewport = AutoSizeViewport;
    _this12.UseViewSizeAspect = UseViewSizeAspect;
    _this12.AutoPosition = AutoPosition;
    _this12.Position = Position;
    _this12.LookAt = LookAt;
    _this12.ViewSize = ViewSize;
    _this12.ViewportBounds = ViewportBounds;
    _this12.ScissorBounds = ScissorBounds;
    _this12.Up = Up;
    _this12.Near = Near;
    _this12.Far = Far;
    _this12.Aspect = Aspect;
    _this12.Fov = Fov;
    _this12.ProjectionMatrix = ProjectionMatrix;
    _this12.ViewMatrix = ViewMatrix;
    return _this12;
  }

  return Data_GlCameraData;
}(_Types.Record);

exports.Data_GlCameraData = Data_GlCameraData;

function Data_GlCameraData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Data.Data.GlCameraData", [], Data_GlCameraData, function () {
    return [["Id", _Reflection.int32_type], ["Kind", Data_GlCameraKind$reflection()], ["Name", _Reflection.string_type], ["IsDirty", _Reflection.bool_type], ["Scene", Data_GlSceneData$reflection()], ["ClearViewport", _Reflection.bool_type], ["CameraBackground", (0, _vectors.Vec4$reflection)()], ["ClearMask", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlClearBit", _Reflection.int32_type, [["COLOR_BUFFER_BIT", 16384], ["DEPTH_BUFFER_BIT", 256], ["STENCIL_BUFFER_BIT", 1024]])], ["BorderWidth", _Reflection.float64_type], ["AutoSizeViewport", _Reflection.bool_type], ["UseViewSizeAspect", _Reflection.bool_type], ["AutoPosition", _Reflection.bool_type], ["Position", (0, _vectors.Vec3$reflection)()], ["LookAt", (0, _vectors.Vec3$reflection)()], ["ViewSize", (0, _vectors.Vec2$reflection)()], ["ViewportBounds", (0, _bounds.Bounds$reflection)()], ["ScissorBounds", (0, _bounds.Bounds$reflection)()], ["Up", (0, _vectors.Vec3$reflection)()], ["Near", _Reflection.float64_type], ["Far", _Reflection.float64_type], ["Aspect", _Reflection.float64_type], ["Fov", _Reflection.float64_type], ["ProjectionMatrix", (0, _matricies.Mat4$reflection)()], ["ViewMatrix", (0, _matricies.Mat4$reflection)()]];
  });
}

var Data_GlLayerData = /*#__PURE__*/function (_Record8) {
  _inherits(Data_GlLayerData, _Record8);

  var _super13 = _createSuper(Data_GlLayerData);

  function Data_GlLayerData(Index, Objects) {
    var _this13;

    _classCallCheck(this, Data_GlLayerData);

    _this13 = _super13.call(this);
    _this13.Index = Index | 0;
    _this13.Objects = Objects;
    return _this13;
  }

  return Data_GlLayerData;
}(_Types.Record);

exports.Data_GlLayerData = Data_GlLayerData;

function Data_GlLayerData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Data.Data.GlLayerData", [], Data_GlLayerData, function () {
    return [["Index", _Reflection.int32_type], ["Objects", (0, _Reflection.list_type)(Data_GlObjData$reflection())]];
  });
}

var Data_GlSceneData = /*#__PURE__*/function (_Record9) {
  _inherits(Data_GlSceneData, _Record9);

  var _super14 = _createSuper(Data_GlSceneData);

  function Data_GlSceneData(Id, Name, IsDirty, Canvas, SceneBackground, ClearMask, WorldBounds, SceneBounds, WorldScale, LineWidthScale, ClearSceneBackground, Layers, DefaultLayer, Shared, Cameras) {
    var _this14;

    _classCallCheck(this, Data_GlSceneData);

    _this14 = _super14.call(this);
    _this14.Id = Id | 0;
    _this14.Name = Name;
    _this14.IsDirty = IsDirty;
    _this14.Canvas = Canvas;
    _this14.SceneBackground = SceneBackground;
    _this14.ClearMask = ClearMask | 0;
    _this14.WorldBounds = WorldBounds;
    _this14.SceneBounds = SceneBounds;
    _this14.WorldScale = WorldScale;
    _this14.LineWidthScale = LineWidthScale;
    _this14.ClearSceneBackground = ClearSceneBackground;
    _this14.Layers = Layers;
    _this14.DefaultLayer = DefaultLayer | 0;
    _this14.Shared = Shared;
    _this14.Cameras = Cameras;
    return _this14;
  }

  return Data_GlSceneData;
}(_Types.Record);

exports.Data_GlSceneData = Data_GlSceneData;

function Data_GlSceneData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Data.Data.GlSceneData", [], Data_GlSceneData, function () {
    return [["Id", _Reflection.int32_type], ["Name", _Reflection.string_type], ["IsDirty", _Reflection.bool_type], ["Canvas", Data_GlCanvasData$reflection()], ["SceneBackground", (0, _vectors.Vec4$reflection)()], ["ClearMask", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlClearBit", _Reflection.int32_type, [["COLOR_BUFFER_BIT", 16384], ["DEPTH_BUFFER_BIT", 256], ["STENCIL_BUFFER_BIT", 1024]])], ["WorldBounds", (0, _bounds.Bounds$reflection)()], ["SceneBounds", (0, _bounds.Bounds$reflection)()], ["WorldScale", _Reflection.float64_type], ["LineWidthScale", _Reflection.float64_type], ["ClearSceneBackground", _Reflection.bool_type], ["Layers", (0, _Reflection.array_type)(Data_GlLayerData$reflection())], ["DefaultLayer", _Reflection.int32_type], ["Shared", (0, _Reflection.option_type)(Data_GlObjData$reflection())], ["Cameras", (0, _Reflection.list_type)(Data_GlCameraData$reflection())]];
  });
}

var Data_GlCanvasData = /*#__PURE__*/function (_Record10) {
  _inherits(Data_GlCanvasData, _Record10);

  var _super15 = _createSuper(Data_GlCanvasData);

  function Data_GlCanvasData(Name, IsDirty, Context, Params, CanvasBackground, ClearMask, ClearCanvas, Size, WorldBounds, Mouse, Global, Scenes) {
    var _this15;

    _classCallCheck(this, Data_GlCanvasData);

    _this15 = _super15.call(this);
    _this15.Name = Name;
    _this15.IsDirty = IsDirty;
    _this15.Context = Context;
    _this15.Params = Params;
    _this15.CanvasBackground = CanvasBackground;
    _this15.ClearMask = ClearMask | 0;
    _this15.ClearCanvas = ClearCanvas;
    _this15.Size = Size;
    _this15.WorldBounds = WorldBounds;
    _this15.Mouse = Mouse;
    _this15.Global = Global;
    _this15.Scenes = Scenes;
    return _this15;
  }

  return Data_GlCanvasData;
}(_Types.Record);

exports.Data_GlCanvasData = Data_GlCanvasData;

function Data_GlCanvasData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.Data.Data.GlCanvasData", [], Data_GlCanvasData, function () {
    return [["Name", _Reflection.string_type], ["IsDirty", _Reflection.bool_type], ["Context", (0, _Reflection.class_type)("Browser.Types.WebGLRenderingContext")], ["Params", (0, _glcanvasparams.GlCanvasParams$reflection)()], ["CanvasBackground", (0, _vectors.Vec4$reflection)()], ["ClearMask", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlClearBit", _Reflection.int32_type, [["COLOR_BUFFER_BIT", 16384], ["DEPTH_BUFFER_BIT", 256], ["STENCIL_BUFFER_BIT", 1024]])], ["ClearCanvas", _Reflection.bool_type], ["Size", (0, _vectors.Vec2$reflection)()], ["WorldBounds", (0, _bounds.Bounds$reflection)()], ["Mouse", (0, _glmouse.GlMouse$reflection)()], ["Global", (0, _Reflection.option_type)(Data_GlObjData$reflection())], ["Scenes", (0, _Reflection.array_type)(Data_GlSceneData$reflection())]];
  });
}

function Data_GlUniformData__get_Name(this$) {
  return this$.Info.Name;
}

function Data_GlUboData__get_Name(this$) {
  return this$.Info.Name;
}

function Data_GlAttributeData__get_Name(this$) {
  return this$.Info.Name;
}

var BuilderTypes_GlUniformProp = /*#__PURE__*/function (_Union6) {
  _inherits(BuilderTypes_GlUniformProp, _Union6);

  var _super16 = _createSuper(BuilderTypes_GlUniformProp);

  function BuilderTypes_GlUniformProp(tag) {
    var _this16;

    _classCallCheck(this, BuilderTypes_GlUniformProp);

    _this16 = _super16.call(this);
    _this16.tag = tag | 0;

    for (var _len6 = arguments.length, fields = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {
      fields[_key6 - 1] = arguments[_key6];
    }

    _this16.fields = fields;
    return _this16;
  }

  _createClass(BuilderTypes_GlUniformProp, [{
    key: "cases",
    value: function cases() {
      return ["Value", "UniformLink"];
    }
  }]);

  return BuilderTypes_GlUniformProp;
}(_Types.Union);

exports.BuilderTypes_GlUniformProp = BuilderTypes_GlUniformProp;

function BuilderTypes_GlUniformProp$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.BuilderTypes.GlUniformProp", [], BuilderTypes_GlUniformProp, function () {
    return [[["Item", _Reflection.obj_type]], [["Item", _Reflection.string_type]]];
  });
}

var BuilderTypes_GlUboProp = /*#__PURE__*/function (_Union7) {
  _inherits(BuilderTypes_GlUboProp, _Union7);

  var _super17 = _createSuper(BuilderTypes_GlUboProp);

  function BuilderTypes_GlUboProp(tag) {
    var _this17;

    _classCallCheck(this, BuilderTypes_GlUboProp);

    _this17 = _super17.call(this);
    _this17.tag = tag | 0;

    for (var _len7 = arguments.length, fields = new Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {
      fields[_key7 - 1] = arguments[_key7];
    }

    _this17.fields = fields;
    return _this17;
  }

  _createClass(BuilderTypes_GlUboProp, [{
    key: "cases",
    value: function cases() {
      return ["BufferIndex", "UboUniform", "UboLink"];
    }
  }]);

  return BuilderTypes_GlUboProp;
}(_Types.Union);

exports.BuilderTypes_GlUboProp = BuilderTypes_GlUboProp;

function BuilderTypes_GlUboProp$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.BuilderTypes.GlUboProp", [], BuilderTypes_GlUboProp, function () {
    return [[["Item", _Reflection.int32_type]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlUniformProp$reflection()), (0, _Reflection.lambda_type)(Data_GlUboData$reflection(), (0, _Reflection.lambda_type)(Data_GlObjData$reflection(), Data_GlUniformData$reflection())))]], [["Item", _Reflection.string_type]]];
  });
}

var BuilderTypes_GlAttrProp = /*#__PURE__*/function (_Union8) {
  _inherits(BuilderTypes_GlAttrProp, _Union8);

  var _super18 = _createSuper(BuilderTypes_GlAttrProp);

  function BuilderTypes_GlAttrProp(tag) {
    var _this18;

    _classCallCheck(this, BuilderTypes_GlAttrProp);

    _this18 = _super18.call(this);
    _this18.tag = tag | 0;

    for (var _len8 = arguments.length, fields = new Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {
      fields[_key8 - 1] = arguments[_key8];
    }

    _this18.fields = fields;
    return _this18;
  }

  _createClass(BuilderTypes_GlAttrProp, [{
    key: "cases",
    value: function cases() {
      return ["BaseType", "Normalize", "DontAdjustStride", "Stride", "Offset", "Values", "DataCount", "BufferUsage", "DeterminesVertexCount", "DeterminesInstanceCount", "Divisor", "ChildAttribute", "AttributeLink"];
    }
  }]);

  return BuilderTypes_GlAttrProp;
}(_Types.Union);

exports.BuilderTypes_GlAttrProp = BuilderTypes_GlAttrProp;

function BuilderTypes_GlAttrProp$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.BuilderTypes.GlAttrProp", [], BuilderTypes_GlAttrProp, function () {
    return [[["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlType", _Reflection.int32_type, [["Unknown", 0], ["BYTE", 5120], ["SHORT", 5122], ["BOOL", 35670], ["BOOL_VEC2", 35671], ["BOOL_VEC3", 35672], ["BOOL_VEC4", 35673], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["FLOAT_MAT2x3", 35685], ["FLOAT_MAT2", 35674], ["FLOAT_MAT2x4", 35686], ["FLOAT_MAT3", 35675], ["FLOAT_MAT3x2", 35687], ["FLOAT_MAT3x4", 35688], ["FLOAT_MAT4", 35676], ["FLOAT_MAT4x2", 35689], ["FLOAT_MAT4x3", 35690], ["FLOAT_VEC2", 35664], ["FLOAT_VEC3", 35665], ["FLOAT_VEC4", 35666], ["INT", 5124], ["INT_VEC2", 35667], ["INT_VEC3", 35668], ["INT_VEC4", 35669], ["INT_SAMPLER_2D", 36298], ["INT_SAMPLER_2D_ARRAY", 36303], ["INT_SAMPLER_3D", 36299], ["INT_SAMPLER_CUBE", 36300], ["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["UNSIGNED_INT_SAMPLER_2D", 36306], ["UNSIGNED_INT_SAMPLER_2D_ARRAY", 36311], ["UNSIGNED_INT_SAMPLER_3D", 36307], ["UNSIGNED_INT_SAMPLER_CUBE", 36308], ["UNSIGNED_INT_VEC2", 36294], ["UNSIGNED_INT_VEC3", 36295], ["UNSIGNED_INT_VEC4", 36296], ["SAMPLER_2D", 35678], ["SAMPLER_2D_ARRAY", 36289], ["SAMPLER_2D_ARRAY_SHADOW", 36292], ["SAMPLER_2D_SHADOW", 35682], ["SAMPLER_3D", 35679], ["SAMPLER_CUBE", 35680], ["SAMPLER_CUBE_SHADOW", 36293]])]], [], [], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", (0, _Reflection.array_type)(_Reflection.float64_type)]], [["Item", _Reflection.int32_type]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlBufferUsage", _Reflection.int32_type, [["STREAM_DRAW", 35040], ["STATIC_DRAW", 35044], ["DYNAMIC_DRAW", 35048]])]], [], [], [["Item", _Reflection.int32_type]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlAttrProp$reflection()), (0, _Reflection.lambda_type)(Data_GlAttributeData$reflection(), (0, _Reflection.lambda_type)(Data_GlObjData$reflection(), Data_GlAttributeData$reflection())))]], [["Item", _Reflection.string_type]]];
  });
}

var BuilderTypes_GlIndicesProp = /*#__PURE__*/function (_Union9) {
  _inherits(BuilderTypes_GlIndicesProp, _Union9);

  var _super19 = _createSuper(BuilderTypes_GlIndicesProp);

  function BuilderTypes_GlIndicesProp(tag) {
    var _this19;

    _classCallCheck(this, BuilderTypes_GlIndicesProp);

    _this19 = _super19.call(this);
    _this19.tag = tag | 0;

    for (var _len9 = arguments.length, fields = new Array(_len9 > 1 ? _len9 - 1 : 0), _key9 = 1; _key9 < _len9; _key9++) {
      fields[_key9 - 1] = arguments[_key9];
    }

    _this19.fields = fields;
    return _this19;
  }

  _createClass(BuilderTypes_GlIndicesProp, [{
    key: "cases",
    value: function cases() {
      return ["IndexType", "IndexOffset", "IndexValues", "IndexBufferUsage", "IndicesLink"];
    }
  }]);

  return BuilderTypes_GlIndicesProp;
}(_Types.Union);

exports.BuilderTypes_GlIndicesProp = BuilderTypes_GlIndicesProp;

function BuilderTypes_GlIndicesProp$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.BuilderTypes.GlIndicesProp", [], BuilderTypes_GlIndicesProp, function () {
    return [[["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlIndicesType", _Reflection.int32_type, [["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125]])]], [["Item", _Reflection.int32_type]], [["Item", (0, _Reflection.array_type)(_Reflection.int32_type)]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlBufferUsage", _Reflection.int32_type, [["STREAM_DRAW", 35040], ["STATIC_DRAW", 35044], ["DYNAMIC_DRAW", 35048]])]], [["Item", _Reflection.string_type]]];
  });
}

var BuilderTypes_GlObjProp = /*#__PURE__*/function (_Union10) {
  _inherits(BuilderTypes_GlObjProp, _Union10);

  var _super20 = _createSuper(BuilderTypes_GlObjProp);

  function BuilderTypes_GlObjProp(tag) {
    var _this20;

    _classCallCheck(this, BuilderTypes_GlObjProp);

    _this20 = _super20.call(this);
    _this20.tag = tag | 0;

    for (var _len10 = arguments.length, fields = new Array(_len10 > 1 ? _len10 - 1 : 0), _key10 = 1; _key10 < _len10; _key10++) {
      fields[_key10 - 1] = arguments[_key10];
    }

    _this20.fields = fields;
    return _this20;
  }

  _createClass(BuilderTypes_GlObjProp, [{
    key: "cases",
    value: function cases() {
      return ["ObjectName", "DrawMethod", "DrawPrimitive", "VertexCount", "VertexOffset", "VertexCountOffset", "InstanceCount", "InstanceOffset", "InstanceCountOffset", "IndicesOffset", "Uniform", "Ubo", "Attribute", "Indices", "Texture", "Capability", "ProcessLinked", "ParallaxCamera", "ParallaxDistance", "Layer", "Angle", "AngleDegrees", "AngleZ", "AngleDegreesZ", "Position", "Scale", "ObjectLink"];
    }
  }]);

  return BuilderTypes_GlObjProp;
}(_Types.Union);

exports.BuilderTypes_GlObjProp = BuilderTypes_GlObjProp;

function BuilderTypes_GlObjProp$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.BuilderTypes.GlObjProp", [], BuilderTypes_GlObjProp, function () {
    return [[["Item", _Reflection.string_type]], [["Item", (0, _webgl_types.GlDrawMethod$reflection)()]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlDrawPrimitive", _Reflection.int32_type, [["POINTS", 0], ["LINES", 1], ["LINE_LOOP", 2], ["LINE_STRIP", 3], ["TRIANGLES", 4], ["TRIANGLE_STRIP", 5], ["TRIANGLE_FAN", 6]])]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlUniformProp$reflection()), (0, _Reflection.lambda_type)(Data_GlObjData$reflection(), Data_GlUniformData$reflection()))]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlUboProp$reflection()), (0, _Reflection.lambda_type)(Data_GlObjData$reflection(), Data_GlUboData$reflection()))]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlAttrProp$reflection()), (0, _Reflection.lambda_type)(Data_GlObjData$reflection(), Data_GlRootAttribute$reflection()))]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlIndicesProp$reflection()), (0, _Reflection.lambda_type)(Data_GlObjData$reflection(), Data_GlIndicesData$reflection()))]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlTextureProp$reflection()), (0, _Reflection.lambda_type)(Data_GlObjData$reflection(), Data_GlTextureData$reflection()))]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.class_type)("Browser.Types.WebGLRenderingContext"), _Reflection.unit_type)]], [["Item", _Reflection.bool_type]], [["Item", _Reflection.string_type]], [["Item", _Reflection.float64_type]], [["Item", _Reflection.int32_type]], [["Item", (0, _vectors.Vec3$reflection)()]], [["Item", (0, _vectors.Vec3$reflection)()]], [["Item", _Reflection.float64_type]], [["Item", _Reflection.float64_type]], [["Item", (0, _vectors.Vec3$reflection)()]], [["Item", _Reflection.float64_type]], [["Item", _Reflection.string_type]]];
  });
}

var BuilderTypes_GlTextureProp = /*#__PURE__*/function (_Union11) {
  _inherits(BuilderTypes_GlTextureProp, _Union11);

  var _super21 = _createSuper(BuilderTypes_GlTextureProp);

  function BuilderTypes_GlTextureProp(tag) {
    var _this21;

    _classCallCheck(this, BuilderTypes_GlTextureProp);

    _this21 = _super21.call(this);
    _this21.tag = tag | 0;

    for (var _len11 = arguments.length, fields = new Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {
      fields[_key11 - 1] = arguments[_key11];
    }

    _this21.fields = fields;
    return _this21;
  }

  _createClass(BuilderTypes_GlTextureProp, [{
    key: "cases",
    value: function cases() {
      return ["TextureName", "TextureTarget", "TextureIndex", "Level", "TextureWidth", "TextureHeight", "InternalFormat", "Format", "TextureDataType", "NoMipMap", "Pixels", "ByteOffset", "MagFilter", "MinFilter", "WrapS", "WrapT", "WrapR", "BaseLevel", "CompareFunc", "CompareMode", "MaxLevel", "MaxLod", "MinLod", "TextureLink"];
    }
  }]);

  return BuilderTypes_GlTextureProp;
}(_Types.Union);

exports.BuilderTypes_GlTextureProp = BuilderTypes_GlTextureProp;

function BuilderTypes_GlTextureProp$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.BuilderTypes.GlTextureProp", [], BuilderTypes_GlTextureProp, function () {
    return [[["Item", _Reflection.string_type]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlTextureTarget", _Reflection.int32_type, [["TEXTURE_2D", 3553], ["TEXTURE_CUBE_MAP_POSITIVE_X", 34069], ["TEXTURE_CUBE_MAP_NEGATIVE_X", 34070], ["TEXTURE_CUBE_MAP_POSITIVE_Y", 34071], ["TEXTURE_CUBE_MAP_NEGATIVE_Y", 34072], ["TEXTURE_CUBE_MAP_POSITIVE_Z", 34073], ["TEXTURE_CUBE_MAP_NEGATIVE_Z", 34074]])]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.float64_type]], [["Item", _Reflection.float64_type]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlInternalColorFormat", _Reflection.int32_type, [["RGB", 6407], ["RGBA", 6408], ["LUMINANCE", 6409], ["LUMINANCE_ALPHA", 6410], ["ALPHA", 6406], ["R8", 33321], ["R16F", 33325], ["R32F", 33326], ["R8UI", 33330], ["RG8", 33323], ["RG16F", 33327], ["RG32F", 33328], ["RG8UI", 33336], ["RGB8", 32849], ["SRGB8", 35905], ["RGB565", 36194], ["R11F_G11F_B10F", 35898], ["RGB9_E5", 35901], ["RGB16F", 34843], ["RGB32F", 34837], ["RGB8UI", 36221], ["RGBA8", 32856], ["SRGB8_ALPHA8", 35907], ["RGB5_A1", 32855], ["RGB10_A2", 32857], ["RGBA4", 32854], ["RGBA16F", 34842], ["RGBA32F", 34836], ["RGBA8UI", 36220], ["R8_SNORM", 36756], ["RG8_SNORM", 36757], ["RGB8_SNORM", 36758], ["RGBA8_SNORM", 36759], ["RGB10_A2UI", 36975], ["R8I", 33329], ["R16I", 33331], ["R16UI", 33332], ["R32I", 33333], ["R32UI", 33334], ["RG8I", 33335], ["RG16I", 33337], ["RG16UI", 33338], ["RG32I", 33339], ["RG32UI", 33340], ["RGB16I", 36233], ["RGB16UI", 36215], ["RGB32I", 36227], ["RGB32UI", 36209], ["RGBA8I", 36238], ["RGBA16I", 36232], ["RGBA16UI", 36214], ["RGBA32I", 36226], ["RGBA32UI", 36208], ["DEPTH_COMPONENT16", 33189], ["DEPTH_COMPONENT24", 33190], ["DEPTH_COMPONENT32F", 36012], ["DEPTH24_STENCIL8", 35056], ["DEPTH32F_STENCIL8", 36013]])]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlColorFormat", _Reflection.int32_type, [["RGB", 6407], ["RGBA", 6408], ["LUMINANCE_ALPHA", 6410], ["LUMINANCE", 6409], ["ALPHA", 6406], ["RED", 6403], ["RED_INTEGER", 36244], ["RG", 33319], ["RG_INTEGER", 33320], ["RGB_INTEGER", 36248], ["RGBA_INTEGER", 36249], ["DEPTH_COMPONENT", 6402], ["DEPTH_STENCIL", 34041]])]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlTextureType", _Reflection.int32_type, [["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT_4_4_4_4", 32819], ["UNSIGNED_SHORT_5_5_5_1", 32820], ["UNSIGNED_SHORT_5_6_5", 33635], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["BYTE", 5120], ["SHORT", 5122], ["INT", 5124], ["UNSIGNED_INT_2_10_10_10_REV", 33640], ["UNSIGNED_INT_10F_11F_11F_REV", 35899], ["UNSIGNED_INT_5_9_9_9_REV", 35902], ["FLOAT_32_UNSIGNED_INT_24_8_REV", 36269]])]], [], [["Item", (0, _webgl_data_types.GlTexturePixels$reflection)()]], [["Item", _Reflection.int32_type]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlMagFilter", _Reflection.int32_type, [["NEAREST", 9728], ["LINEAR", 9729]])]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlMinFilter", _Reflection.int32_type, [["NEAREST", 9728], ["LINEAR", 9729], ["NEAREST_MIPMAP_NEAREST", 9984], ["LINEAR_MIPMAP_NEAREST", 9985], ["NEAREST_MIPMAP_LINEAR", 9986], ["LINEAR_MIPMAP_LINEAR", 9987]])]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlWrapMode", _Reflection.int32_type, [["REPEAT", 10497], ["CLAMP_TO_EDGE", 33071], ["MIRRORED_REPEAT", 33648]])]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlWrapMode", _Reflection.int32_type, [["REPEAT", 10497], ["CLAMP_TO_EDGE", 33071], ["MIRRORED_REPEAT", 33648]])]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlWrapMode", _Reflection.int32_type, [["REPEAT", 10497], ["CLAMP_TO_EDGE", 33071], ["MIRRORED_REPEAT", 33648]])]], [["Item", _Reflection.int32_type]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlCompareFunc", _Reflection.int32_type, [["NEVER", 512], ["LESS", 513], ["EQUAL", 514], ["LEQUAL", 515], ["GREATER", 516], ["NOTEQUAL", 517], ["GEQUAL", 518], ["ALWAYS", 519]])]], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlCompareMode", _Reflection.int32_type, [["NONE", 0], ["COMPARE_REF_TO_TEXTURE", 34894]])]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.float64_type]], [["Item", _Reflection.float64_type]], [["Item", _Reflection.string_type]]];
  });
}

var BuilderTypes_GlCamProp = /*#__PURE__*/function (_Union12) {
  _inherits(BuilderTypes_GlCamProp, _Union12);

  var _super22 = _createSuper(BuilderTypes_GlCamProp);

  function BuilderTypes_GlCamProp(tag) {
    var _this22;

    _classCallCheck(this, BuilderTypes_GlCamProp);

    _this22 = _super22.call(this);
    _this22.tag = tag | 0;

    for (var _len12 = arguments.length, fields = new Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {
      fields[_key12 - 1] = arguments[_key12];
    }

    _this22.fields = fields;
    return _this22;
  }

  _createClass(BuilderTypes_GlCamProp, [{
    key: "cases",
    value: function cases() {
      return ["CameraName", "DontClearViewport", "CameraBackground", "CameraClearColorBuffer", "CameraClearDepthBuffer", "CameraClearStencilBuffer", "CameraClearMask", "BorderWidth", "DontAutoSizeViewport", "DontUseViewSizeAspect", "DontAutoPosition", "CameraPosition", "LookAt", "ViewSize", "ViewportBounds", "Up", "Near", "Far", "Aspect", "Fov"];
    }
  }]);

  return BuilderTypes_GlCamProp;
}(_Types.Union);

exports.BuilderTypes_GlCamProp = BuilderTypes_GlCamProp;

function BuilderTypes_GlCamProp$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.BuilderTypes.GlCamProp", [], BuilderTypes_GlCamProp, function () {
    return [[["Item", _Reflection.string_type]], [], [["Item", (0, _vectors.Vec4$reflection)()]], [], [], [], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlClearBit", _Reflection.int32_type, [["COLOR_BUFFER_BIT", 16384], ["DEPTH_BUFFER_BIT", 256], ["STENCIL_BUFFER_BIT", 1024]])]], [["Item", _Reflection.float64_type]], [], [], [], [["Item", (0, _vectors.Vec3$reflection)()]], [["Item", (0, _vectors.Vec3$reflection)()]], [["Item", (0, _vectors.Vec2$reflection)()]], [["Item", (0, _bounds.Bounds$reflection)()]], [["Item", (0, _vectors.Vec3$reflection)()]], [["Item", _Reflection.float64_type]], [["Item", _Reflection.float64_type]], [["Item", _Reflection.float64_type]], [["Item", _Reflection.float64_type]]];
  });
}

var BuilderTypes_GlSceneProp = /*#__PURE__*/function (_Union13) {
  _inherits(BuilderTypes_GlSceneProp, _Union13);

  var _super23 = _createSuper(BuilderTypes_GlSceneProp);

  function BuilderTypes_GlSceneProp(tag) {
    var _this23;

    _classCallCheck(this, BuilderTypes_GlSceneProp);

    _this23 = _super23.call(this);
    _this23.tag = tag | 0;

    for (var _len13 = arguments.length, fields = new Array(_len13 > 1 ? _len13 - 1 : 0), _key13 = 1; _key13 < _len13; _key13++) {
      fields[_key13 - 1] = arguments[_key13];
    }

    _this23.fields = fields;
    return _this23;
  }

  _createClass(BuilderTypes_GlSceneProp, [{
    key: "cases",
    value: function cases() {
      return ["SceneName", "Layers", "DefaultLayer", "SceneBackground", "SceneClearColorBuffer", "SceneClearDepthBuffer", "SceneClearStencilBuffer", "SceneClearMask", "SceneWorldBounds", "SceneBounds", "WorldScale", "DontClearSceneBackground", "Camera", "Shared", "SceneObject"];
    }
  }]);

  return BuilderTypes_GlSceneProp;
}(_Types.Union);

exports.BuilderTypes_GlSceneProp = BuilderTypes_GlSceneProp;

function BuilderTypes_GlSceneProp$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.BuilderTypes.GlSceneProp", [], BuilderTypes_GlSceneProp, function () {
    return [[["Item", _Reflection.string_type]], [["Item", _Reflection.int32_type]], [["Item", _Reflection.int32_type]], [["Item", (0, _vectors.Vec4$reflection)()]], [], [], [], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlClearBit", _Reflection.int32_type, [["COLOR_BUFFER_BIT", 16384], ["DEPTH_BUFFER_BIT", 256], ["STENCIL_BUFFER_BIT", 1024]])]], [["Item", (0, _bounds.Bounds$reflection)()]], [["Item", (0, _bounds.Bounds$reflection)()]], [["Item", _Reflection.float64_type]], [], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlCamProp$reflection()), (0, _Reflection.lambda_type)(Data_GlSceneData$reflection(), Data_GlCameraData$reflection()))]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlObjProp$reflection()), (0, _Reflection.lambda_type)(Data_GlSceneData$reflection(), Data_GlObjData$reflection()))]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlObjProp$reflection()), (0, _Reflection.lambda_type)(Data_GlSceneData$reflection(), Data_GlObjData$reflection()))]]];
  });
}

var BuilderTypes_GlCanvasProp = /*#__PURE__*/function (_Union14) {
  _inherits(BuilderTypes_GlCanvasProp, _Union14);

  var _super24 = _createSuper(BuilderTypes_GlCanvasProp);

  function BuilderTypes_GlCanvasProp(tag) {
    var _this24;

    _classCallCheck(this, BuilderTypes_GlCanvasProp);

    _this24 = _super24.call(this);
    _this24.tag = tag | 0;

    for (var _len14 = arguments.length, fields = new Array(_len14 > 1 ? _len14 - 1 : 0), _key14 = 1; _key14 < _len14; _key14++) {
      fields[_key14 - 1] = arguments[_key14];
    }

    _this24.fields = fields;
    return _this24;
  }

  _createClass(BuilderTypes_GlCanvasProp, [{
    key: "cases",
    value: function cases() {
      return ["CanvasName", "CanvasSize", "CanvasWidth", "CanvasHeight", "WorldBounds", "ContextAttribute", "PixelStorageParams", "PixelStorage", "CanvasBackground", "ClearColorBuffer", "ClearDepthBuffer", "ClearStencilBuffer", "ClearMask", "DontClearCanvas", "Global", "Scene", "Attributes", "NoAlpha", "Desynchronized", "NoAntialias", "NoDepth", "FailIfMajorPerformanceCaveat", "NoPremultipliedAlpha", "PreserveDrawingBuffer", "Stencil", "PowerPreferenceDefault", "PowerPreferenceHighPerformance", "PowerPreferenceLowPower"];
    }
  }]);

  return BuilderTypes_GlCanvasProp;
}(_Types.Union);

exports.BuilderTypes_GlCanvasProp = BuilderTypes_GlCanvasProp;

function BuilderTypes_GlCanvasProp$reflection() {
  return (0, _Reflection.union_type)("Wil.Webgl.Data.BuilderTypes.GlCanvasProp", [], BuilderTypes_GlCanvasProp, function () {
    return [[["Item", _Reflection.string_type]], [["Item", (0, _vectors.Vec2$reflection)()]], [["Item", _Reflection.float64_type]], [["Item", _Reflection.float64_type]], [["Item", (0, _bounds.Bounds$reflection)()]], [["Item", (0, _webgl_data_types.GlContextAttribute$reflection)()]], [["Item", (0, _Reflection.list_type)((0, _webgl_data_types.GlPixelStorage$reflection)())]], [["Item", (0, _webgl_data_types.GlPixelStorage$reflection)()]], [["Item", (0, _vectors.Vec4$reflection)()]], [], [], [], [["Item", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlClearBit", _Reflection.int32_type, [["COLOR_BUFFER_BIT", 16384], ["DEPTH_BUFFER_BIT", 256], ["STENCIL_BUFFER_BIT", 1024]])]], [], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlObjProp$reflection()), (0, _Reflection.lambda_type)(Data_GlSceneData$reflection(), Data_GlObjData$reflection()))]], [["Item", (0, _Reflection.lambda_type)((0, _Reflection.list_type)(BuilderTypes_GlSceneProp$reflection()), (0, _Reflection.lambda_type)(Data_GlCanvasData$reflection(), Data_GlSceneData$reflection()))]], [["Item", (0, _Reflection.list_type)((0, _webgl_data_types.GlContextAttribute$reflection)())]], [], [], [], [], [], [], [], [], [], [], []];
  });
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../webgl_core/program_utils.js":"../JS/webgl_core/program_utils.js","./glbuffer.js":"../JS/webgl_data/glbuffer.js","../webgl_core/webgl_types.js":"../JS/webgl_core/webgl_types.js","./webgl_data_types.js":"../JS/webgl_data/webgl_data_types.js","../core/vectors.js":"../JS/core/vectors.js","../core/matricies.js":"../JS/core/matricies.js","../twod/bounds.js":"../JS/twod/bounds.js","./glcanvasparams.js":"../JS/webgl_data/glcanvasparams.js","./glmouse.js":"../JS/webgl_data/glmouse.js","buffer":"C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/buffer/index.js"}],"../JS/webgl_data/glcommon.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.splitName = splitName;
exports.getScene = getScene;
exports.allObjects = allObjects;
exports.getAttributeData = getAttributeData;
exports.getUbo = getUbo;
exports.tryGetUbo = tryGetUbo;
exports.allUniforms = allUniforms;
exports.allAttributes = allAttributes;
exports.getUniform = getUniform;
exports.tryGetUniform = tryGetUniform;
exports.getAttribute = getAttribute;
exports.tryGetAttribute = tryGetAttribute;
exports.getTexture = getTexture;
exports.tryGetTexture = tryGetTexture;
exports.objects = objects;
exports.getCamera = getCamera;
exports.tryGetCamera = tryGetCamera;
exports.getObject = getObject;
exports.tryGetObject = tryGetObject;
exports.dirtyScene = dirtyScene;
exports.dirtyObject = dirtyObject;
exports.dirtyModel = dirtyModel;
exports.dirtyParallax = dirtyParallax;
exports.objectRecalcNeeded = objectRecalcNeeded;
exports.nextUboBufferIndex = nextUboBufferIndex;
exports.nextTextureIndex = nextTextureIndex;
exports.addScene = addScene;
exports.removeScene = removeScene;
exports.addCamera = addCamera;
exports.removeCamera = removeCamera;
exports.addObject = addObject;
exports.removeObject = removeObject;
exports.addUbo = addUbo;
exports.addUniform = addUniform;
exports.addAttribute = addAttribute;
exports.addTexture = addTexture;
exports.addUboUniform = addUboUniform;
exports.objectDebugName = objectDebugName;

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _webgl_data = require("./webgl_data.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

function splitName(name) {
  var pair = (0, _String.split)(name, ["."], null, 0);
  return [pair[0], pair[1]];
}

function getScene(name, data) {
  var matchValue = (0, _Array.tryFind)(function (u) {
    return u.Name === name;
  }, data.Scenes);

  if (matchValue == null) {
    throw new Error((0, _String.toText)((0, _String.interpolate)("Scene '%P()' not found", [name])));
  } else {
    var scene = matchValue;
    return scene;
  }
}

function allObjects(data) {
  var sceneObjects = function sceneObjects(data_1) {
    return (0, _Seq.collect)(function (l) {
      return l.Objects;
    }, data_1.Layers);
  };

  return (0, _Seq.collect)(sceneObjects, data.Scenes);
}

function getAttributeData(attribute) {
  var pattern_matching_result, a;

  if (attribute.tag === 1) {
    pattern_matching_result = 0;
    a = attribute.fields[0];
  } else {
    pattern_matching_result = 0;
    a = attribute.fields[0];
  }

  switch (pattern_matching_result) {
    case 0:
      {
        return a;
      }
  }
}

function getUbo(name, data) {
  var matchValue = (0, _List.tryFind)(function (u) {
    return (0, _webgl_data.Data_GlUboData__get_Name)(u) === name;
  }, data.Ubos);

  if (matchValue == null) {
    throw new Error((0, _String.toText)((0, _String.interpolate)("Ubo '%P()' not found", [name])));
  } else {
    var ubo = matchValue;
    return ubo;
  }
}

function tryGetUbo(name, data) {
  return (0, _List.tryFind)(function (u) {
    return (0, _webgl_data.Data_GlUboData__get_Name)(u) === name;
  }, data.Ubos);
}

function allUniforms(data) {
  return (0, _Seq.append)(data.Uniforms, (0, _Seq.collect)(function (ubo) {
    return ubo.Uniforms;
  }, data.Ubos));
}

function allAttributes(data) {
  var getAttributes = function getAttributes(data_1) {
    return (0, _Seq.delay)(function () {
      return (0, _Seq.append)((0, _Seq.singleton)(data_1), (0, _Seq.delay)(function () {
        return (0, _Seq.collect)(getAttributes, data_1.ChildAttributes);
      }));
    });
  };

  return (0, _Seq.collect)(function (arg) {
    return getAttributes(getAttributeData(arg));
  }, data.Attributes);
}

function getUniform(name, data) {
  var matchValue = (0, _Seq.tryFind)(function (u) {
    return (0, _webgl_data.Data_GlUniformData__get_Name)(u) === name;
  }, allUniforms(data));

  if (matchValue == null) {
    throw new Error((0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found", [name])));
  } else {
    var uniform = matchValue;
    return uniform;
  }
}

function tryGetUniform(name, data) {
  return (0, _Seq.tryFind)(function (u) {
    return (0, _webgl_data.Data_GlUniformData__get_Name)(u) === name;
  }, allUniforms(data));
}

function getAttribute(name, data) {
  var matchValue = (0, _Seq.tryFind)(function (u) {
    return (0, _webgl_data.Data_GlAttributeData__get_Name)(u) === name;
  }, allAttributes(data));

  if (matchValue == null) {
    throw new Error((0, _String.toText)((0, _String.interpolate)("Attribute '%P()' not found", [name])));
  } else {
    var attribute = matchValue;
    return attribute;
  }
}

function tryGetAttribute(name, data) {
  return (0, _Seq.tryFind)(function (u) {
    return (0, _webgl_data.Data_GlAttributeData__get_Name)(u) === name;
  }, allAttributes(data));
}

function getTexture(name, data) {
  var matchValue = (0, _List.tryFind)(function (u) {
    return u.Name === name;
  }, data.Textures);

  if (matchValue == null) {
    throw new Error((0, _String.toText)((0, _String.interpolate)("Texture '%P()' not found", [name])));
  } else {
    var texture = matchValue;
    return texture;
  }
}

function tryGetTexture(name, data) {
  return (0, _List.tryFind)(function (u) {
    return u.Name === name;
  }, data.Textures);
}

function objects(data) {
  return (0, _Seq.delay)(function () {
    return (0, _Seq.collect)(function (l) {
      return l.Objects;
    }, (0, _Seq.reverse)(data.Layers));
  });
}

function getCamera(name, data) {
  var matchValue = (0, _List.tryFind)(function (o) {
    return o.Name === name;
  }, data.Cameras);

  if (matchValue == null) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Camera '%P()' not found", [name]));
    throw new Error(msg);
  } else {
    var camera = matchValue;
    return camera;
  }
}

function tryGetCamera(name, data) {
  return (0, _List.tryFind)(function (u) {
    return u.Name === name;
  }, data.Cameras);
}

function getObject(name, data) {
  var matchValue = (0, _Seq.tryFind)(function (o) {
    return o.Name === name;
  }, objects(data));

  if (matchValue == null) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Object '%P()' not found", [name]));
    throw new Error(msg);
  } else {
    var object = matchValue;
    return object;
  }
}

function tryGetObject(name, data) {
  return (0, _Seq.tryFind)(function (u) {
    return u.Name === name;
  }, objects(data));
}

function dirtyScene(data) {
  data.IsDirty = true;
  data.Canvas.IsDirty = true;
}

function dirtyObject(data) {
  data.IsDirty = true;
  dirtyScene(data.Scene);
}

function dirtyModel(data) {
  data.IsModelDirty = true;
  dirtyObject(data);
}

function dirtyParallax(data) {
  if (data.ParallaxCamera != null) {
    data.IsParallaxDirty = true;
    dirtyObject(data);
  }
}

function objectRecalcNeeded(data) {
  data.RecalcNeeded = true;
  dirtyObject(data);
}

function nextUboBufferIndex(data) {
  var loop = function loop(i_mut, ubos_mut) {
    loop: while (true) {
      var i = i_mut,
          ubos = ubos_mut;

      if (ubos.tail != null) {
        var t = ubos.tail;
        var h = ubos.head;

        if (i < h.Location) {
          return i | 0;
        } else {
          i_mut = i + 1;
          ubos_mut = t;
          continue loop;
        }
      } else {
        return i | 0;
      }

      break;
    }
  };

  return loop(0, (0, _List.sortBy)(function (u) {
    return u.Location;
  }, data.Ubos, {
    Compare: _Util.comparePrimitives
  })) | 0;
}

function nextTextureIndex(data) {
  var loop = function loop(i_mut, ubos_mut) {
    loop: while (true) {
      var i = i_mut,
          ubos = ubos_mut;

      if (ubos.tail != null) {
        var t = ubos.tail;
        var h = ubos.head;

        if (i < h.Index) {
          return i | 0;
        } else {
          i_mut = i + 1;
          ubos_mut = t;
          continue loop;
        }
      } else {
        return i | 0;
      }

      break;
    }
  };

  return loop(0, (0, _List.sortBy)(function (u) {
    return u.Index;
  }, data.Textures, {
    Compare: _Util.comparePrimitives
  })) | 0;
}

function addScene(creator, data) {
  var sceneData = creator((0, _List.empty)(), data);
  data.Scenes = (0, _Array.append)(data.Scenes, [sceneData]);
  return sceneData;
}

function removeScene(scene, data) {
  data.Scenes = data.Scenes.filter(function (o) {
    return !(o === scene);
  });
  data.IsDirty = true;
  return data;
}

function addCamera(creator, data) {
  var camData = creator((0, _List.empty)(), data);
  data.Cameras = (0, _List.append)(data.Cameras, (0, _List.singleton)(camData));
  dirtyScene(data);
  return camData;
}

function removeCamera(cam, data) {
  data.Cameras = (0, _List.filter)(function (o) {
    return !(o === cam);
  }, data.Cameras);
  dirtyScene(data);
  return data;
}

function addObject(creator, data) {
  var objData = creator((0, _List.empty)(), data);
  var layer = data.Layers[objData.Layer];
  layer.Objects = (0, _List.append)(layer.Objects, (0, _List.singleton)(objData));
  dirtyScene(data);
  return objData;
}

function removeObject(globj, data) {
  var layer = data.Layers[globj.Layer];
  layer.Objects = (0, _List.filter)(function (o) {
    return !(o === globj);
  }, layer.Objects);
  dirtyScene(data);
  return data;
}

function addUbo(creator, data) {
  var uboData = creator((0, _List.empty)(), data);
  data.Ubos = (0, _List.append)(data.Ubos, (0, _List.singleton)(uboData));
  dirtyObject(data);
  return uboData;
}

function addUniform(creator, data) {
  var uniformData = creator((0, _List.empty)(), data);
  data.Uniforms = (0, _List.append)(data.Uniforms, (0, _List.singleton)(uniformData));
  dirtyObject(data);
  return uniformData;
}

function addAttribute(creator, data) {
  var attributeData = creator((0, _List.empty)(), data);
  data.Attributes = (0, _List.append)(data.Attributes, (0, _List.singleton)(attributeData));
  dirtyObject(data);
  return attributeData;
}

function addTexture(creator, data) {
  var textureData = creator((0, _List.empty)(), data);
  data.Textures = (0, _List.append)(data.Textures, (0, _List.singleton)(textureData));
  dirtyObject(data);
  return textureData;
}

function addUboUniform(creator, data) {
  var uniformData = creator((0, _List.empty)(), data, data.ParentObject);
  data.Uniforms = (0, _List.cons)(uniformData, data.Uniforms);
  return uniformData;
}

function objectDebugName(globj) {
  if (!(0, _String.isNullOrWhiteSpace)(globj.Name)) {
    return globj.Name;
  } else if (globj.Parent == null) {
    return "shared";
  } else {
    return "";
  }
}
},{"../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/webgl_data/gluniform.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UniformBuilder$reflection = UniformBuilder$reflection;
exports._build = _build;
exports._apply = _apply;
exports.createFrom = createFrom;
exports.create = create;
exports.createLinked = createLinked;
exports.clean = clean;
exports.updateUbo = updateUbo;
exports.update = update;
exports.setValue = setValue;
exports.UniformBuilder = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _webgl_data = require("./webgl_data.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _glcommon = require("./glcommon.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _typedarray_utils = require("../js/typedarray_utils.js");

var _program_utils = require("../webgl_core/program_utils.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _glbuffer = require("./glbuffer.js");

var _webgl_browser_types = require("../webgl_core/webgl_browser_types.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var UniformBuilder = /*#__PURE__*/function (_Record) {
  _inherits(UniformBuilder, _Record);

  var _super = _createSuper(UniformBuilder);

  function UniformBuilder(LinkTo, ChildCreators, Data) {
    var _this;

    _classCallCheck(this, UniformBuilder);

    _this = _super.call(this);
    _this.LinkTo = LinkTo;
    _this.ChildCreators = ChildCreators;
    _this.Data = Data;
    return _this;
  }

  return UniformBuilder;
}(_Types.Record);

exports.UniformBuilder = UniformBuilder;

function UniformBuilder$reflection() {
  return (0, _Reflection.record_type)("GlUniform.UniformBuilder", [], UniformBuilder, function () {
    return [["LinkTo", (0, _Reflection.option_type)(_Reflection.string_type)], ["ChildCreators", (0, _Reflection.list_type)((0, _Reflection.lambda_type)((0, _Reflection.option_type)((0, _webgl_data.Data_GlUniformData$reflection)()), (0, _webgl_data.Data_GlUniformData$reflection)()))], ["Data", (0, _webgl_data.Data_GlUniformData$reflection)()]];
  });
}

function applyCreators(builder) {
  var data = builder.Data;
  var parent = data;

  var createUniform = function createUniform(creator) {
    return creator(parent);
  };

  var createUniforms = function createUniforms(creators) {
    return (0, _List.map)(createUniform, creators);
  };

  data.ChildUniforms = Array.from((0, _List.map)(createUniform, builder.ChildCreators));
  return data;
}

function addLinkedChild(parent, data) {
  parent.LinkedChildren = (0, _List.cons)(data, parent.LinkedChildren);
  return data;
}

function linkTo(parent, data) {
  return addLinkedChild(parent, new _webgl_data.Data_GlUniformData(data.Id, data.Info, data.IsDirty, data.Data, data.Value, data.ParentObject, data.ParentUbo, data.RootUniform, data.ChildUniforms, parent, data.LinkedChildren));
}

function processLink(builder) {
  var matchValue = builder.LinkTo;

  if (matchValue != null) {
    var name = matchValue;
    var data = builder.Data;
    var patternInput = (0, _glcommon.splitName)(name);
    var uniformName = patternInput[1];
    var objectName = patternInput[0];
    var globj = (0, _glcommon.getObject)(objectName, data.ParentObject.Scene);
    var uniform = (0, _glcommon.getUniform)(uniformName, globj);
    builder.Data = linkTo(uniform, data);
    return builder;
  } else {
    return builder;
  }
}

function _build(builder) {
  return applyCreators(processLink(builder));
}

function _apply(props_mut, b_mut) {
  var inputRecord;

  var _loop = function _loop() {
    var props = props_mut,
        b = b_mut;

    var updateData = function updateData(data) {
      b.Data = data;
      return b;
    };

    var addLink = function addLink(s) {
      b.LinkTo = s;
      return b;
    };

    if (props.tail != null) {
      var t = props.tail;
      var h = props.head;

      if (h.tag === 0) {
        var x_1 = h.fields[0];
        var value = (0, _Util.isArrayLike)(x_1) ? x_1 : [x_1];
        props_mut = t;
        b_mut = updateData((inputRecord = b.Data, new _webgl_data.Data_GlUniformData(inputRecord.Id, inputRecord.Info, inputRecord.IsDirty, inputRecord.Data, value, inputRecord.ParentObject, inputRecord.ParentUbo, inputRecord.RootUniform, inputRecord.ChildUniforms, inputRecord.Link, inputRecord.LinkedChildren)));
        return "continue|_apply";
      } else {
        var x = h.fields[0];
        props_mut = t;
        b_mut = addLink(x);
        return "continue|_apply";
      }
    } else {
      return {
        v: b
      };
    }

    return "break";
  };

  _apply: while (true) {
    var _ret = _loop();

    if (_ret === "continue|_apply") continue _apply;
    if (_ret === "break") break;
    if (_typeof(_ret) === "object") return _ret.v;
  }
}

function createFrom(info, props, parentObject) {
  var doCreate = function doCreate(props_1, info_1, rootUniform) {
    var createChild = function createChild(info_2) {
      return (0, _Util.partialApply)(1, doCreate, [(0, _List.empty)(), info_2]);
    };

    return _build(_apply(props_1, new UniformBuilder(void 0, (0, _List.map)(createChild, (0, _List.ofArray)(info_1.Children)), new _webgl_data.Data_GlUniformData(0, info_1, true, _typedarray_utils.emptyFloat32Array, 0, parentObject, void 0, rootUniform, [], void 0, (0, _List.empty)()))));
  };

  return doCreate(props, info, void 0);
}

function createEmpty(name, rootUniform, parentObject) {
  return new _webgl_data.Data_GlUniformData(0, (0, _program_utils.GlProgram_emptyUniformInfo)(name), false, _typedarray_utils.emptyFloat32Array, 0, parentObject, void 0, rootUniform, [], void 0, (0, _List.empty)());
}

function create(name, props, parentObject) {
  var matchValue = (0, _program_utils.GlProgram_getUniform)(name, parentObject.ProgramInfo);

  if (matchValue == null) {
    return createEmpty(name, void 0, parentObject);
  } else {
    var info = matchValue;
    return createFrom(info, props, parentObject);
  }
}

function createLinked(data, parentObject) {
  return addLinkedChild(data, new _webgl_data.Data_GlUniformData(data.Id, (0, _program_utils.GlProgram_getUniformOrDefault)((0, _webgl_data.Data_GlUniformData__get_Name)(data), parentObject.ProgramInfo), data.IsDirty, data.Data, 0, parentObject, void 0, void 0, [], data, (0, _List.empty)()));
}

function dirty(data) {
  var dirtyUbo = function dirtyUbo(data_1) {
    data_1.IsDirty = true;
    (0, _glcommon.dirtyObject)(data_1.ParentObject);
    (0, _List.iterate)(dirtyUbo, data_1.LinkedChildren);
  };

  var matchValue = data.ParentUbo;

  if (matchValue == null) {
    (0, _glcommon.dirtyObject)(data.ParentObject);
    var uniform = (0, _Option.defaultArg)(data.RootUniform, data);
    uniform.IsDirty = true;
    (0, _List.iterate)(function (data_2) {
      dirty(data_2);
    }, uniform.LinkedChildren);
  } else {
    var ubo = matchValue;
    dirtyUbo(ubo);
  }
}

function clean(data) {
  data.IsDirty = false;
}

function writeArray(typedArr, startIndex, count, value) {
  if (value.length === typedArr.length) {
    var value_1 = typedArr.set(value);
    void value_1;
  } else {
    var enumerator = (0, _Seq.getEnumerator)((0, _List.ofSeq)((0, _Seq.rangeNumber)(0, 1, count - 1)));

    try {
      while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
        var i = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]() | 0;
        typedArr[i] = value[startIndex + i];
      }
    } finally {
      enumerator.Dispose();
    }
  }
}

function updateUbo(value, ubo, data) {
  var matchValue = data.ChildUniforms;

  if (!(0, _Array.equalsWith)(_Util.compareSafe, matchValue, null) ? matchValue.length === 0 : false) {
    var info = data.Info;
    var offset = info.Offset | 0;
    var floatArr = data.Data;
    (0, _glbuffer.GlBuffer__DirtyRange_Z37302880)(ubo.Buffer, offset, offset + info.ByteSize - 1);
    writeArray(floatArr, info.StartIndex, info.ElementCount, value);
  } else {
    data.ChildUniforms.forEach(function (data_1) {
      updateUbo(value, ubo, data_1);
    });
  }
}

function updateSingle(value, vdata, data) {
  var info = data.Info;
  var location = info.Location;
  var gl = data.ParentObject.Scene.Canvas.Context;
  var value_1 = value;
  var matchValue = vdata.Info.Type | 0;

  switch (matchValue) {
    case 0:
      {
        throw new Error("Uniform type not initialized");
        break;
      }

    case 5120:
    case 5121:
    case 5123:
    case 5125:
    case 35670:
      {
        (0, _webgl_browser_types.GlCommon_uniform1uiv)(gl, location, value_1);
        break;
      }

    case 5122:
    case 5126:
    case 5131:
      {
        (0, _webgl_browser_types.GlCommon_uniform1fv)(gl, location, value_1);
        break;
      }

    case 5124:
    case 35678:
    case 35679:
    case 35680:
    case 35682:
    case 36289:
    case 36292:
    case 36293:
    case 36298:
    case 36299:
    case 36300:
    case 36303:
    case 36306:
    case 36307:
    case 36308:
    case 36311:
      {
        (0, _webgl_browser_types.GlCommon_uniform1iv)(gl, location, value_1);
        break;
      }

    case 35664:
      {
        (0, _webgl_browser_types.GlCommon_uniform2fv)(gl, location, value_1);
        break;
      }

    case 35665:
      {
        (0, _webgl_browser_types.GlCommon_uniform3fv)(gl, location, value_1);
        break;
      }

    case 35666:
      {
        (0, _webgl_browser_types.GlCommon_uniform4fv)(gl, location, value_1);
        break;
      }

    case 35667:
      {
        (0, _webgl_browser_types.GlCommon_uniform2iv)(gl, location, value_1);
        break;
      }

    case 35668:
      {
        (0, _webgl_browser_types.GlCommon_uniform3iv)(gl, location, value_1);
        break;
      }

    case 35669:
      {
        (0, _webgl_browser_types.GlCommon_uniform4iv)(gl, location, value_1);
        break;
      }

    case 35671:
    case 36294:
      {
        (0, _webgl_browser_types.GlCommon_uniform2uiv)(gl, location, value_1);
        break;
      }

    case 35672:
    case 36295:
      {
        (0, _webgl_browser_types.GlCommon_uniform3uiv)(gl, location, value_1);
        break;
      }

    case 35673:
    case 36296:
      {
        (0, _webgl_browser_types.GlCommon_uniform4uiv)(gl, location, value_1);
        break;
      }

    case 35674:
      {
        (0, _webgl_browser_types.GlCommon_uniformMatrix2fv)(gl, location, value_1);
        break;
      }

    case 35675:
      {
        (0, _webgl_browser_types.GlCommon_uniformMatrix3fv)(gl, location, value_1);
        break;
      }

    case 35676:
      {
        (0, _webgl_browser_types.GlCommon_uniformMatrix4fv)(gl, location, value_1);
        break;
      }

    case 35685:
      {
        (0, _webgl_browser_types.GlCommon_uniformMatrix2x3fv)(gl, location, value_1);
        break;
      }

    case 35686:
      {
        (0, _webgl_browser_types.GlCommon_uniformMatrix2x4fv)(gl, location, value_1);
        break;
      }

    case 35687:
      {
        (0, _webgl_browser_types.GlCommon_uniformMatrix3x2fv)(gl, location, value_1);
        break;
      }

    case 35688:
      {
        (0, _webgl_browser_types.GlCommon_uniformMatrix3x4fv)(gl, location, value_1);
        break;
      }

    case 35689:
      {
        (0, _webgl_browser_types.GlCommon_uniformMatrix4x2fv)(gl, location, value_1);
        break;
      }

    case 35690:
      {
        (0, _webgl_browser_types.GlCommon_uniformMatrix4x3fv)(gl, location, value_1);
        break;
      }

    default:
      {}
  }
}

function update(data) {
  var isActive = data.Info.Index >= 0;

  if (isActive ? data.IsDirty : false) {
    var d = (0, _Option.defaultArg)(data.Link, data);

    if (d.ParentUbo == null) {
      updateSingle(d.Value, d, data);
    }
  }

  clean(data);
}

function setValue(value, data) {
  if (data.Link == null) {
    var value_1 = (0, _Util.isArrayLike)(value) ? value : [value];
    var isRoot = data.RootUniform == null;
    var uniform = (0, _Option.defaultArg)(data.RootUniform, data);

    if (isRoot) {
      uniform.Value = value_1;
    } else {
      var info = data.Info;
      var count = info.ElementCount * info.Length | 0;
      var uniformValue = uniform.Value;
      var startIndex = info.StartIndex | 0;
      var enumerator = (0, _Seq.getEnumerator)((0, _List.ofSeq)((0, _Seq.rangeNumber)(0, 1, count - 1)));

      try {
        while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
          var i = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]() | 0;
          uniformValue[startIndex + i] = value_1[i];
        }
      } finally {
        enumerator.Dispose();
      }
    }

    var matchValue_1 = data.ParentUbo;

    if (matchValue_1 != null) {
      var ubo = matchValue_1;
      updateUbo(value_1, ubo, uniform);
    }

    dirty(uniform);
  }
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","./glcommon.js":"../JS/webgl_data/glcommon.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../js/typedarray_utils.js":"../JS/js/typedarray_utils.js","../webgl_core/program_utils.js":"../JS/webgl_core/program_utils.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","./glbuffer.js":"../JS/webgl_data/glbuffer.js","../webgl_core/webgl_browser_types.js":"../JS/webgl_core/webgl_browser_types.js"}],"../JS/webgl_data/glubouniform.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createFrom = createFrom;
exports.create = create;

var _gluniform = require("./gluniform.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _typedarray_utils = require("../js/typedarray_utils.js");

var _webgl_data = require("./webgl_data.js");

var _program_utils = require("../webgl_core/program_utils.js");

function isActiveUbo(ubo) {
  return ubo.Info.BlockIndex >= 0;
}

function init(data) {
  if (data.Link == null) {
    var matchValue_1 = data.ParentUbo;

    if (matchValue_1 == null) {} else {
      var ubo = matchValue_1;
      (0, _gluniform.clean)(data);

      if (data.ChildUniforms.length > 0) {
        data.ChildUniforms.forEach(function (arg) {
          var value = init(arg);
          void value;
        });
      } else if (isActiveUbo(ubo)) {
        var value_1;
        var matchValue_2 = data.RootUniform;

        if (matchValue_2 == null) {
          value_1 = data.Value;
        } else {
          var root = matchValue_2;
          value_1 = root.Value;
        }

        (0, _gluniform.updateUbo)(value_1, ubo, data);
      }
    }
  }

  return data;
}

function createFrom(info, props, parentUbo, parentObject) {
  var doCreate = function doCreate(props_1, info_1, rootUniform) {
    var createChild = function createChild(info_2) {
      return (0, _Util.partialApply)(1, doCreate, [(0, _List.empty)(), info_2]);
    };

    var dataArray;
    var matchValue = info_1.Children;

    if (!(0, _Array.equalsWith)(_Util.compareSafe, matchValue, null) ? matchValue.length === 0 : false) {
      var arrayBuffer = parentUbo.Data.buffer;
      var length = info_1.ElementCount * info_1.Length | 0;
      dataArray = info_1.TypeInfo.TypeArrayCreator.Create(arrayBuffer, info_1.Offset, length);
    } else {
      dataArray = _typedarray_utils.emptyFloat32Array;
    }

    return (0, _gluniform._build)((0, _gluniform._apply)(props_1, new _gluniform.UniformBuilder(void 0, (0, _List.map)(createChild, (0, _List.ofArray)(info_1.Children)), new _webgl_data.Data_GlUniformData(0, info_1, true, dataArray, 0, parentObject, parentUbo, rootUniform, [], void 0, (0, _List.empty)()))));
  };

  return init(doCreate(props, info, void 0));
}

function createEmpty(name, parentUbo, rootUniform, parentObject) {
  return new _webgl_data.Data_GlUniformData(0, (0, _program_utils.GlProgram_emptyUniformInfo)(name), false, _typedarray_utils.emptyFloat32Array, 0, parentObject, parentUbo, rootUniform, [], void 0, (0, _List.empty)());
}

function create(name, props, parentUbo, parentObject) {
  var matchValue = (0, _program_utils.GlProgram_getUniform)(name, parentObject.ProgramInfo);

  if (matchValue == null) {
    return createEmpty(name, parentUbo, void 0, parentObject);
  } else {
    var info = matchValue;
    return createFrom(info, props, parentUbo, parentObject);
  }
}
},{"./gluniform.js":"../JS/webgl_data/gluniform.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","../js/typedarray_utils.js":"../JS/js/typedarray_utils.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_core/program_utils.js":"../JS/webgl_core/program_utils.js"}],"../JS/webgl_data/glubo.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.linkTo = linkTo;
exports.createFrom = createFrom;
exports.createEmpty = createEmpty;
exports.create = create;
exports.createLinked = createLinked;
exports.delete$ = delete$;
exports.clean = clean;
exports.update = update;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _webgl_data = require("./webgl_data.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _glcommon = require("./glcommon.js");

var _glubouniform = require("./glubouniform.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _webgl_browser_types = require("../webgl_core/webgl_browser_types.js");

var _glbuffer = require("./glbuffer.js");

var _typedarray_utils = require("../js/typedarray_utils.js");

var _program_utils = require("../webgl_core/program_utils.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var Builder = /*#__PURE__*/function (_Record) {
  _inherits(Builder, _Record);

  var _super = _createSuper(Builder);

  function Builder(LinkTo, UniformCreators, Data) {
    var _this;

    _classCallCheck(this, Builder);

    _this = _super.call(this);
    _this.LinkTo = LinkTo;
    _this.UniformCreators = UniformCreators;
    _this.Data = Data;
    return _this;
  }

  return Builder;
}(_Types.Record);

function Builder$reflection() {
  return (0, _Reflection.record_type)("GlUbo.Builder", [], Builder, function () {
    return [["LinkTo", (0, _Reflection.option_type)(_Reflection.string_type)], ["UniformCreators", (0, _Reflection.list_type)((0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlUniformProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlUboData$reflection)(), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlObjData$reflection)(), (0, _webgl_data.Data_GlUniformData$reflection)()))))], ["Data", (0, _webgl_data.Data_GlUboData$reflection)()]];
  });
}

function addMissingUniforms(data) {
  var isMissingUniform = function isMissingUniform(info) {
    return (0, _List.tryFind)(function (u) {
      return (0, _webgl_data.Data_GlUniformData__get_Name)(u) === info.Name;
    }, data.Uniforms) == null;
  };

  var addMissingUniform = function addMissingUniform(data_1, info_1) {
    var value = (0, _glcommon.addUboUniform)(function (p, d, parentObject) {
      return (0, _glubouniform.createFrom)(info_1, p, d, parentObject);
    }, data_1);
    void value;
  };

  var list_2 = (0, _List.where)(isMissingUniform, data.Info.Uniforms);
  (0, _List.iterate)((0, _Util.partialApply)(1, addMissingUniform, [data]), list_2);
  data.Uniforms = (0, _List.sortBy)(function (u_1) {
    return u_1.Info.Index;
  }, data.Uniforms, {
    Compare: _Util.comparePrimitives
  });
  return data;
}

function applyCreators(builder) {
  var data = builder.Data;

  var createUniform = function createUniform(creator) {
    return creator((0, _List.empty)(), data, data.ParentObject);
  };

  data.Uniforms = (0, _List.map)((0, _Util.mapCurriedArgs)(createUniform, [[0, 3]]), builder.UniformCreators);
  return data;
}

function addLinkedChild(parent, data) {
  parent.LinkedChildren = (0, _List.cons)(data, parent.LinkedChildren);
  return data;
}

function linkTo(parent, data) {
  return addLinkedChild(parent, new _webgl_data.Data_GlUboData(data.Id, data.Info, data.IsDirty, data.Location, (0, _List.empty)(), data.Buffer, data.Data, data.ParentObject, parent, data.LinkedChildren));
}

function processLink(builder) {
  var matchValue = builder.LinkTo;

  if (matchValue != null) {
    var name = matchValue;
    var data = builder.Data;
    var patternInput = (0, _glcommon.splitName)(name);
    var uboName = patternInput[1];
    var objectName = patternInput[0];
    var globj = (0, _glcommon.getObject)(objectName, data.ParentObject.Scene);
    var ubo = (0, _glcommon.getUbo)(uboName, globj);
    builder.Data = linkTo(ubo, data);
    return builder;
  } else {
    return builder;
  }
}

function build(builder) {
  var sortChildren = function sortChildren(data) {
    data.Uniforms = (0, _List.sortBy)(function (u) {
      return u.Info.Index;
    }, data.Uniforms, {
      Compare: _Util.comparePrimitives
    });
    return data;
  };

  return sortChildren(addMissingUniforms(applyCreators(processLink(builder))));
}

function bindToProgram(data) {
  var gl = data.ParentObject.Scene.Canvas.Context;
  var program = data.ParentObject.ProgramInfo.Program;
  (0, _webgl_browser_types.GlCommon_uniformBlockBinding)(gl, program, data.Info.BlockIndex, data.Location);
  return data;
}

function apply(props, builder) {
  var loop = function loop(props_1_mut, b_mut) {
    var inputRecord;

    var _loop = function _loop() {
      var props_1 = props_1_mut,
          b = b_mut;

      var updateData = function updateData(data) {
        b.Data = data;
        return b;
      };

      var addLink = function addLink(s) {
        b.LinkTo = s;
        return b;
      };

      var addUniform = function addUniform(creator) {
        b.UniformCreators = (0, _List.cons)((0, _Util.curry)(3, creator), b.UniformCreators);
        return b;
      };

      if (props_1.tail != null) {
        var t = props_1.tail;
        var h = props_1.head;

        switch (h.tag) {
          case 1:
            {
              var x_1 = h.fields[0];
              props_1_mut = t;
              b_mut = addUniform(x_1);
              return "continue|loop";
            }

          case 2:
            {
              var x_2 = h.fields[0];
              props_1_mut = t;
              b_mut = addLink(x_2);
              return "continue|loop";
            }

          default:
            {
              var x = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord = b.Data, new _webgl_data.Data_GlUboData(inputRecord.Id, inputRecord.Info, inputRecord.IsDirty, x, inputRecord.Uniforms, inputRecord.Buffer, inputRecord.Data, inputRecord.ParentObject, inputRecord.Link, inputRecord.LinkedChildren)));
              return "continue|loop";
            }
        }
      } else {
        return {
          v: b
        };
      }

      return "break";
    };

    loop: while (true) {
      var _ret = _loop();

      if (_ret === "continue|loop") continue loop;
      if (_ret === "break") break;
      if (_typeof(_ret) === "object") return _ret.v;
    }
  };

  return loop(props, builder);
}

function createFrom(info, props, parentObject) {
  var bindBufferBase = function bindBufferBase(data) {
    (0, _glbuffer.GlBuffer__BindBase_Z524259A4)(data.Buffer, data.Location);
    return data;
  };

  var initBuffer = function initBuffer(builder) {
    if (builder.Data.Link == null) {
      var data_1 = builder.Data;
      var buffer = data_1.Buffer;
      (0, _glbuffer.GlBuffer__Init_71B7C75E)(buffer, 35345, 35048, _typedarray_utils.uint8ArrayFactory);
      (0, _glbuffer.GlBuffer__SetLength_Z524259A4)(buffer, info.ByteSize);
      builder.Data = new _webgl_data.Data_GlUboData(data_1.Id, data_1.Info, data_1.IsDirty, data_1.Location, data_1.Uniforms, data_1.Buffer, (0, _glbuffer.GlBuffer__get_Data)(buffer), data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
    }

    return builder;
  };

  return bindToProgram(build(initBuffer(apply(props, new Builder(void 0, (0, _List.empty)(), new _webgl_data.Data_GlUboData(0, info, true, (0, _glcommon.nextUboBufferIndex)(parentObject), (0, _List.empty)(), (0, _glbuffer.GlBuffer_$ctor_10C6D16C)(parentObject.Scene.Canvas.Context), _typedarray_utils.emptyUint8Array, parentObject, void 0, (0, _List.empty)()))))));
}

function createEmpty(name, parentObject) {
  return new _webgl_data.Data_GlUboData(0, (0, _program_utils.GlProgram_emptyUboInfo)(name), false, -1, (0, _List.empty)(), (0, _glbuffer.GlBuffer_$ctor_10C6D16C)(parentObject.Scene.Canvas.Context), (0, _typedarray_utils.uint8Array)(0), parentObject, void 0, (0, _List.empty)());
}

function create(name, props, parentObject) {
  var matchValue = (0, _program_utils.GlProgram_getUbo)(name, parentObject.ProgramInfo);

  if (matchValue == null) {
    return createEmpty(name, parentObject);
  } else {
    var info = matchValue;
    return createFrom(info, props, parentObject);
  }
}

function createLinked(data, parentObject) {
  return bindToProgram(addLinkedChild(data, new _webgl_data.Data_GlUboData(data.Id, (0, _program_utils.GlProgram_getUboOrDefault)((0, _webgl_data.Data_GlUboData__get_Name)(data), parentObject.ProgramInfo), data.IsDirty, (0, _glcommon.nextUboBufferIndex)(parentObject), (0, _List.empty)(), data.Buffer, (0, _typedarray_utils.uint8Array)(0), parentObject, data, (0, _List.empty)())));
}

function delete$(data) {
  (0, _glbuffer.GlBuffer__Delete)(data.Buffer);
}

function clean(data) {
  data.IsDirty = false;
}

function update(data) {
  if (data.Info.BlockIndex >= 0) {
    if (data.IsDirty) {
      clean(data);

      if (data.Link == null) {
        (0, _glbuffer.GlBuffer__Bind)(data.Buffer);
        (0, _glbuffer.GlBuffer__Update)(data.Buffer);
      }
    }

    if ((0, _List.length)(data.LinkedChildren) === 0) {
      (0, _glbuffer.GlBuffer__BindBase_Z524259A4)(data.Buffer, data.Location);
    }
  }
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","./glcommon.js":"../JS/webgl_data/glcommon.js","./glubouniform.js":"../JS/webgl_data/glubouniform.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../webgl_core/webgl_browser_types.js":"../JS/webgl_core/webgl_browser_types.js","./glbuffer.js":"../JS/webgl_data/glbuffer.js","../js/typedarray_utils.js":"../JS/js/typedarray_utils.js","../webgl_core/program_utils.js":"../JS/webgl_core/program_utils.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js"}],"../JS/webgl_data/glattribcommonn.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.defaultData = defaultData;
exports.updateCommonData = updateCommonData;
exports.clean = clean;
exports.dirty = dirty;
exports.dirtyLinkedChildren = dirtyLinkedChildren;
exports.enableNeeded = enableNeeded;
exports.linkedChildrenEnableNeeded = linkedChildrenEnableNeeded;
exports.recalcNeeded = recalcNeeded;
exports.linkedChildrenRecalcNeeded = linkedChildrenRecalcNeeded;
exports.childrenDirty = childrenDirty;
exports.childrenEnableNeeded = childrenEnableNeeded;
exports.childrenRecalcNeeded = childrenRecalcNeeded;
exports.createLinked = createLinked;

var _typedarray_utils = require("../js/typedarray_utils.js");

var _webgl_types = require("../webgl_core/webgl_types.js");

var _glbuffer = require("./glbuffer.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _webgl_data = require("./webgl_data.js");

var _glcommon = require("./glcommon.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _program_utils = require("../webgl_core/program_utils.js");

function defaultData(info, kind, parentObject) {
  return new _webgl_data.Data_GlAttributeData(0, kind, info, true, 0, _typedarray_utils.float32ArrayFactory, -1, -1, -1, (0, _webgl_types.getGlTypeInfo)(5126), false, 0, -1, -1, -1, new Float64Array([]), -1, 35044, false, false, -1, (0, _glbuffer.GlBuffer_$ctor_10C6D16C)(parentObject.Scene.Canvas.Context), (0, _List.empty)(), parentObject, void 0, void 0, (0, _List.empty)(), false, true, true, true, true, true, true);
}

function addLinkedChild(parent, data) {
  parent.LinkedChildren = (0, _List.cons)(data, parent.LinkedChildren);
  return data;
}

function linkTo(parent, data) {
  (0, _glbuffer.GlBuffer__set_AutoClean_Z1FBCCD16)(parent.Buffer, false);
  return addLinkedChild(parent, new _webgl_data.Data_GlAttributeData(data.Id, data.Kind, data.Info, data.IsDirty, data.BaseType, data.ArrayCreator, data.RecordSize, data.ByteSize, data.DataLength, data.BaseTypeInfo, data.Normalize, data.StartIndex, data.IndexStride, data.Stride, data.Offset, new Float64Array([]), data.DataCount, data.BufferUsage, data.DeterminesVertexCount, data.DeterminesInstanceCount, data.Divisor, data.Buffer, data.ChildAttributes, data.ParentObject, data.ParentAttribute, parent, data.LinkedChildren, data.CanSingleCopy, data.AdjustsStride, data.EnableNeeded, data.RecalcNeeded, data.CalcDataCount, data.CalcStride, data.CalcOffset));
}

function processLink(name, data) {
  var patternInput = (0, _glcommon.splitName)(name);
  var objectName = patternInput[0];
  var attributeName = patternInput[1];
  var globj = (0, _glcommon.getObject)(objectName, data.ParentObject.Scene);
  var attribute = (0, _glcommon.getAttribute)(attributeName, globj);
  return linkTo(attribute, data);
}

function updateCommonData(props, data) {
  var updateCommon = function updateCommon(data_1) {
    var baseType = (data_1.BaseType === 0 ? data_1.Info.TypeInfo.BaseType : data_1.BaseType) | 0;
    var baseTypeInfo = (0, _webgl_types.getGlTypeInfo)(baseType);
    var res = new _webgl_data.Data_GlAttributeData(data_1.Id, data_1.Kind, data_1.Info, data_1.IsDirty, baseType, data_1.Info.TypeInfo.TypeArrayCreator, data_1.Info.TypeInfo.ElementCount * baseTypeInfo.ByteSize, data_1.ByteSize, data_1.DataLength, baseTypeInfo, data_1.Normalize, data_1.StartIndex, data_1.IndexStride, data_1.Stride, data_1.Offset, data_1.Values, data_1.DataCount, data_1.BufferUsage, data_1.DeterminesVertexCount, data_1.DeterminesInstanceCount, data_1.Divisor, data_1.Buffer, data_1.ChildAttributes, data_1.ParentObject, data_1.ParentAttribute, data_1.Link, data_1.LinkedChildren, data_1.CanSingleCopy, data_1.AdjustsStride, data_1.EnableNeeded, data_1.RecalcNeeded, data_1.CalcDataCount, data_1.CalcStride, data_1.CalcOffset);
    return res;
  };

  var createChildren = function createChildren(childCreators, parent, parentObject) {
    return (0, _List.map)((0, _Util.mapCurriedArgs)(function (creator) {
      return creator((0, _List.empty)(), parent, parentObject);
    }, [[0, 3]]), childCreators);
  };

  var apply = function apply(props_1, data_2) {
    var loop = function loop(props_2_mut, children_mut, data_3_mut) {
      loop: while (true) {
        var props_2 = props_2_mut,
            children = children_mut,
            data_3 = data_3_mut;

        if (props_2.tail != null) {
          var t = props_2.tail;
          var h = props_2.head;

          switch (h.tag) {
            case 1:
              {
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, true, data_3.StartIndex, data_3.IndexStride, data_3.Stride, data_3.Offset, data_3.Values, data_3.DataCount, data_3.BufferUsage, data_3.DeterminesVertexCount, data_3.DeterminesInstanceCount, data_3.Divisor, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }

            case 3:
              {
                var x_1 = h.fields[0] | 0;
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, x_1, data_3.Offset, data_3.Values, data_3.DataCount, data_3.BufferUsage, data_3.DeterminesVertexCount, data_3.DeterminesInstanceCount, data_3.Divisor, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }

            case 2:
              {
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, data_3.Stride, data_3.Offset, data_3.Values, data_3.DataCount, data_3.BufferUsage, data_3.DeterminesVertexCount, data_3.DeterminesInstanceCount, data_3.Divisor, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, false, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }

            case 4:
              {
                var x_2 = h.fields[0] | 0;
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, data_3.Stride, x_2, data_3.Values, data_3.DataCount, data_3.BufferUsage, data_3.DeterminesVertexCount, data_3.DeterminesInstanceCount, data_3.Divisor, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }

            case 5:
              {
                var x_3 = h.fields[0];
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, data_3.Stride, data_3.Offset, x_3, data_3.DataCount, data_3.BufferUsage, data_3.DeterminesVertexCount, data_3.DeterminesInstanceCount, data_3.Divisor, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }

            case 6:
              {
                var x_4 = h.fields[0] | 0;
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, data_3.Stride, data_3.Offset, data_3.Values, x_4, data_3.BufferUsage, data_3.DeterminesVertexCount, data_3.DeterminesInstanceCount, data_3.Divisor, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }

            case 7:
              {
                var x_5 = h.fields[0] | 0;
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, data_3.Stride, data_3.Offset, data_3.Values, data_3.DataCount, x_5, data_3.DeterminesVertexCount, data_3.DeterminesInstanceCount, data_3.Divisor, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }

            case 8:
              {
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, data_3.Stride, data_3.Offset, data_3.Values, data_3.DataCount, data_3.BufferUsage, true, data_3.DeterminesInstanceCount, data_3.Divisor, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }

            case 9:
              {
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, data_3.Stride, data_3.Offset, data_3.Values, data_3.DataCount, data_3.BufferUsage, data_3.DeterminesVertexCount, true, data_3.Divisor, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }

            case 10:
              {
                var x_6 = h.fields[0] | 0;
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, data_3.Stride, data_3.Offset, data_3.Values, data_3.DataCount, data_3.BufferUsage, data_3.DeterminesVertexCount, data_3.DeterminesInstanceCount, x_6, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }

            case 11:
              {
                var x_7 = h.fields[0];
                props_2_mut = t;
                children_mut = (0, _List.cons)((0, _Util.curry)(3, x_7), children);
                data_3_mut = data_3;
                continue loop;
              }

            case 12:
              {
                var x_8 = h.fields[0];
                props_2_mut = t;
                children_mut = children;
                data_3_mut = processLink(x_8, data_3);
                continue loop;
              }

            default:
              {
                var x = h.fields[0] | 0;
                props_2_mut = t;
                children_mut = children;
                data_3_mut = new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, x, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, data_3.Stride, data_3.Offset, data_3.Values, data_3.DataCount, data_3.BufferUsage, data_3.DeterminesVertexCount, data_3.DeterminesInstanceCount, data_3.Divisor, data_3.Buffer, data_3.ChildAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
                continue loop;
              }
          }
        } else {
          var childAttributes = createChildren((0, _List.reverse)(children), data_3, data_3.ParentObject);
          return new _webgl_data.Data_GlAttributeData(data_3.Id, data_3.Kind, data_3.Info, data_3.IsDirty, data_3.BaseType, data_3.ArrayCreator, data_3.RecordSize, data_3.ByteSize, data_3.DataLength, data_3.BaseTypeInfo, data_3.Normalize, data_3.StartIndex, data_3.IndexStride, data_3.Stride, data_3.Offset, data_3.Values, data_3.DataCount, data_3.BufferUsage, data_3.DeterminesVertexCount, data_3.DeterminesInstanceCount, data_3.Divisor, data_3.Buffer, childAttributes, data_3.ParentObject, data_3.ParentAttribute, data_3.Link, data_3.LinkedChildren, data_3.CanSingleCopy, data_3.AdjustsStride, data_3.EnableNeeded, data_3.RecalcNeeded, data_3.CalcDataCount, data_3.CalcStride, data_3.CalcOffset);
        }

        break;
      }
    };

    return loop(props_1, (0, _List.empty)(), data_2);
  };

  return updateCommon(apply(props, data));
}

function clean(data) {
  data.IsDirty = false;
  data.RecalcNeeded = false;
  data.EnableNeeded = false;
}

function dirty(data) {
  data.IsDirty = true;
  var attribute = (0, _Option.defaultArg)(data.ParentAttribute, data);
  attribute.IsDirty = true;
  (0, _glcommon.dirtyObject)(attribute.ParentObject);
}

function dirtyLinkedChildren(data) {
  (0, _List.iterate)(function (data_1) {
    dirty(data_1);
  }, data.LinkedChildren);
}

function enableNeeded(data) {
  data.EnableNeeded = true;
  dirty(data);
}

function linkedChildrenEnableNeeded(data) {
  (0, _List.iterate)(function (data_1) {
    enableNeeded(data_1);
  }, data.LinkedChildren);
}

function recalcNeeded(data) {
  data.RecalcNeeded = true;
  var attribute = (0, _Option.defaultArg)(data.ParentAttribute, data);
  attribute.RecalcNeeded = true;
  data.ParentObject.RecalcNeeded = true;
  dirty(data);
}

function linkedChildrenRecalcNeeded(data) {
  (0, _List.iterate)(function (data_1) {
    recalcNeeded(data_1);
  }, data.LinkedChildren);
}

function childrenDirty(data) {
  (0, _List.iterate)(function (data_1) {
    dirty(data_1);
  }, data.ChildAttributes);
}

function childrenEnableNeeded(data) {
  (0, _List.iterate)(function (data_1) {
    enableNeeded(data_1);
  }, data.ChildAttributes);
}

function childrenRecalcNeeded(data) {
  (0, _List.iterate)(function (data_1) {
    recalcNeeded(data_1);
  }, data.ChildAttributes);
}

function createLinked(data, parentObject) {
  var linkChildren = function linkChildren(data_1) {
    var children = (0, _List.map)(function (d) {
      return createLinked(d, parentObject);
    }, data_1.ChildAttributes);
    return new _webgl_data.Data_GlAttributeData(data_1.Id, data_1.Kind, data_1.Info, data_1.IsDirty, data_1.BaseType, data_1.ArrayCreator, data_1.RecordSize, data_1.ByteSize, data_1.DataLength, data_1.BaseTypeInfo, data_1.Normalize, data_1.StartIndex, data_1.IndexStride, data_1.Stride, data_1.Offset, data_1.Values, data_1.DataCount, data_1.BufferUsage, data_1.DeterminesVertexCount, data_1.DeterminesInstanceCount, data_1.Divisor, data_1.Buffer, children, data_1.ParentObject, data_1.ParentAttribute, data_1.Link, data_1.LinkedChildren, data_1.CanSingleCopy, data_1.AdjustsStride, data_1.EnableNeeded, data_1.RecalcNeeded, data_1.CalcDataCount, data_1.CalcStride, data_1.CalcOffset);
  };

  var updateChildrenParentAttribute = function updateChildrenParentAttribute(data_2) {
    var parent = data_2;
    (0, _List.iterate)(function (c) {
      c.ParentAttribute = parent;
    }, data_2.ChildAttributes);
    return data_2;
  };

  (0, _glbuffer.GlBuffer__set_AutoClean_Z1FBCCD16)(data.Buffer, false);
  return addLinkedChild(data, updateChildrenParentAttribute(linkChildren(new _webgl_data.Data_GlAttributeData(data.Id, data.Kind, (0, _program_utils.GlProgram_getAttributeOrDefault)((0, _webgl_data.Data_GlAttributeData__get_Name)(data), parentObject.ProgramInfo), data.IsDirty, data.BaseType, data.ArrayCreator, data.RecordSize, data.ByteSize, data.DataLength, data.BaseTypeInfo, data.Normalize, data.StartIndex, data.IndexStride, data.Stride, data.Offset, new Float64Array([]), data.DataCount, data.BufferUsage, data.DeterminesVertexCount, data.DeterminesInstanceCount, data.Divisor, data.Buffer, data.ChildAttributes, parentObject, data.ParentAttribute, data, (0, _List.empty)(), data.CanSingleCopy, data.AdjustsStride, data.EnableNeeded, data.RecalcNeeded, data.CalcDataCount, data.CalcStride, data.CalcOffset))));
}
},{"../js/typedarray_utils.js":"../JS/js/typedarray_utils.js","../webgl_core/webgl_types.js":"../JS/webgl_core/webgl_types.js","./glbuffer.js":"../JS/webgl_data/glbuffer.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","./glcommon.js":"../JS/webgl_data/glcommon.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","../webgl_core/program_utils.js":"../JS/webgl_core/program_utils.js"}],"../JS/webgl_data/glsingleattribute.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createFrom = createFrom;
exports.createEmpty = createEmpty;
exports.create = create;
exports.update = update;
exports._setValues = _setValues;
exports._setValue = _setValue;

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _glattribcommonn = require("./glattribcommonn.js");

var _webgl_data = require("./webgl_data.js");

var _glbuffer = require("./glbuffer.js");

var _program_utils = require("../webgl_core/program_utils.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _webgl_browser_types = require("../webgl_core/webgl_browser_types.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

function updateCalculated(data) {
  if (data.RecalcNeeded) {
    data.RecalcNeeded = false;
    var vdata = (0, _Option.defaultArg)(data.Link, data);

    if (data.CalcDataCount) {
      var ti = data.Info.TypeInfo;
      var totValuesByteSize = ~~(vdata.Values.length / ti.ElementCount) * ti.ByteSize | 0;
      var valuesByteSize = totValuesByteSize - data.Offset | 0;
      data.DataCount = ~~Math.ceil(valuesByteSize / data.Stride);
    }

    data.ByteSize = data.DataCount * data.Stride;
  }
}

function createFrom(info, props, parentObject) {
  var inputRecord;
  var data_1 = (0, _glattribcommonn.updateCommonData)(props, (inputRecord = (0, _glattribcommonn.defaultData)(info, new _webgl_data.Data_GlAttributeKind(0), parentObject), new _webgl_data.Data_GlAttributeData(inputRecord.Id, inputRecord.Kind, inputRecord.Info, inputRecord.IsDirty, inputRecord.BaseType, inputRecord.ArrayCreator, inputRecord.RecordSize, inputRecord.ByteSize, inputRecord.DataLength, inputRecord.BaseTypeInfo, inputRecord.Normalize, inputRecord.StartIndex, inputRecord.IndexStride, inputRecord.Stride, 0, inputRecord.Values, inputRecord.DataCount, inputRecord.BufferUsage, inputRecord.DeterminesVertexCount, inputRecord.DeterminesInstanceCount, inputRecord.Divisor, inputRecord.Buffer, inputRecord.ChildAttributes, inputRecord.ParentObject, inputRecord.ParentAttribute, inputRecord.Link, inputRecord.LinkedChildren, inputRecord.CanSingleCopy, inputRecord.AdjustsStride, inputRecord.EnableNeeded, inputRecord.RecalcNeeded, inputRecord.CalcDataCount, inputRecord.CalcStride, false)));
  var ti = data_1.Info.TypeInfo;
  var stride = (data_1.Stride <= 0 ? ti.ByteSize : data_1.Stride) | 0;

  if (data_1.Link == null) {
    var buffer = data_1.Buffer;
    (0, _glbuffer.GlBuffer__Init_71B7C75E)(buffer, 34962, data_1.BufferUsage, data_1.ArrayCreator);
    (0, _glbuffer.GlBuffer__SetValues_5975E3)(buffer, data_1.Values);
  }

  return new _webgl_data.Data_GlRootAttribute(0, new _webgl_data.Data_GlAttributeData(data_1.Id, data_1.Kind, data_1.Info, data_1.IsDirty, data_1.BaseType, data_1.ArrayCreator, data_1.RecordSize, data_1.ByteSize, data_1.DataLength, data_1.BaseTypeInfo, data_1.Normalize, data_1.StartIndex, data_1.IndexStride, stride, data_1.Offset, data_1.Values, data_1.DataCount, data_1.BufferUsage, data_1.DeterminesVertexCount, data_1.DeterminesInstanceCount, data_1.Divisor, data_1.Buffer, data_1.ChildAttributes, data_1.ParentObject, data_1.ParentAttribute, data_1.Link, data_1.LinkedChildren, data_1.CanSingleCopy, data_1.AdjustsStride, data_1.EnableNeeded, data_1.RecalcNeeded, data_1.DataCount < 0, data_1.CalcStride, data_1.CalcOffset));
}

function createEmpty(name, parentObject) {
  var info = (0, _program_utils.GlProgram_emptyAttributeInfo)(name);
  return new _webgl_data.Data_GlRootAttribute(0, (0, _glattribcommonn.defaultData)(info, new _webgl_data.Data_GlAttributeKind(0), parentObject));
}

function create(name, props, parentObject) {
  var matchValue = (0, _program_utils.GlProgram_getAttribute)(name, parentObject.ProgramInfo);

  if (matchValue == null) {
    return createEmpty(name, parentObject);
  } else {
    var info = matchValue;
    return createFrom(info, props, parentObject);
  }
}

function enable(data) {
  if (data.EnableNeeded) {
    data.EnableNeeded = false;

    if (data.ParentObject.ProcessLinked ? true : (0, _List.length)(data.LinkedChildren) === 0) {
      var gl = data.ParentObject.Scene.Canvas.Context;
      var location = data.Info.Location;

      if (location >= 0) {
        (0, _webgl_browser_types.GlCommon_enableVertexAttribArray)(gl, location);
        (0, _webgl_browser_types.GlCommon_vertexAttribPointer)(gl, location, data.Info.TypeInfo.ElementCount, data.BaseType, data.Normalize, data.Stride, data.Offset);

        if (data.Divisor >= 0) {
          (0, _webgl_browser_types.GlCommon_vertexAttribDivisor)(gl, location, data.Divisor);
        }
      }
    }
  }
}

function update(data) {
  var vdata = (0, _Option.defaultArg)(data.Link, data);
  var hasLinked = (0, _List.length)(data.LinkedChildren) > 0;
  var isActive = data.Info.Location >= 0;

  if (isActive ? data.IsDirty : false) {
    updateCalculated(data);

    if (data.ParentObject.ProcessLinked ? true : !hasLinked) {
      (0, _glbuffer.GlBuffer__Bind)(vdata.Buffer);
      (0, _glbuffer.GlBuffer__Update)(vdata.Buffer);
      enable(data);
    }

    (0, _glattribcommonn.clean)(data);
  }
}

function _setValues(values, data) {
  var values_1 = (0, _Util.isArrayLike)(values) ? values : [values];
  data.Values = values_1;
  (0, _glbuffer.GlBuffer__SetValues_5975E3)(data.Buffer, values_1);
  (0, _glattribcommonn.recalcNeeded)(data);
  (0, _glattribcommonn.linkedChildrenRecalcNeeded)(data);
}

function _setValue(index, value, data) {
  var value_1 = (0, _Util.isArrayLike)(value) ? value : [value];
  var count = data.Info.TypeInfo.ElementCount | 0;
  var startIndex = count * index | 0;
  var dataValues = data.Values;
  var enumerator = (0, _Seq.getEnumerator)((0, _List.ofSeq)((0, _Seq.rangeNumber)(0, 1, count - 1)));

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var i = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]() | 0;
      dataValues[startIndex + i] = value_1[i];
    }
  } finally {
    enumerator.Dispose();
  }

  (0, _glbuffer.GlBuffer__SetValuesOffset_Z59CA6BE1)(data.Buffer, value_1, startIndex);
  (0, _glattribcommonn.dirty)(data);
  (0, _glattribcommonn.dirtyLinkedChildren)(data);
}
},{"../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./glattribcommonn.js":"../JS/webgl_data/glattribcommonn.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","./glbuffer.js":"../JS/webgl_data/glbuffer.js","../webgl_core/program_utils.js":"../JS/webgl_core/program_utils.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../webgl_core/webgl_browser_types.js":"../JS/webgl_core/webgl_browser_types.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js"}],"../JS/webgl_data/glcapabilities.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.cullFace = cullFace;
exports.blendColor = blendColor;
exports.blendColorV = blendColorV;
exports.blendFunc = blendFunc;
exports.blendFuncSeparate = blendFuncSeparate;
exports.blendEquation = blendEquation;
exports.blendEquationSeparate = blendEquationSeparate;
exports.enable = enable;
exports.disable = disable;
exports.defaultCapabilities = defaultCapabilities;
exports.func_max = exports.func_min = exports.func_reverse_subtract = exports.func_subtract = exports.func_add = exports.one_minus_constant_alpha = exports.constant_alpha = exports.one_minus_constant_color = exports.constant_color = exports.src_alpha_saturate = exports.one_minus_dst_color = exports.dst_color = exports.one_minus_dst_alpha = exports.dst_alpha = exports.one_minus_src_alpha = exports.src_alpha = exports.one_minus_src_color = exports.src_color = exports.one = exports.zero = exports.disableBlending = exports.enableBlending = exports.disableCulling = exports.enableCulling = exports.cullFrontAndBack = exports.cullBack = exports.cullFront = exports.disableDepthTesting = exports.enableDepthTesting = void 0;

var _webgl_data = require("./webgl_data.js");

var _webgl_browser_types = require("../webgl_core/webgl_browser_types.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var enableDepthTesting = new _webgl_data.BuilderTypes_GlObjProp(15, function (gl) {
  (0, _webgl_browser_types.GlCommon_enable)(2929, gl);
});
exports.enableDepthTesting = enableDepthTesting;
var disableDepthTesting = new _webgl_data.BuilderTypes_GlObjProp(15, function (gl) {
  (0, _webgl_browser_types.GlCommon_disable)(2929, gl);
});
exports.disableDepthTesting = disableDepthTesting;

function defaultDepthTesting(gl) {
  gl.disable(gl.DEPTH_TEST);
}

var cullFront = function () {
  var result = function result(gl) {
    (0, _webgl_browser_types.GlCommon_enable)(2884, gl);
    (0, _webgl_browser_types.GlCommon_cullFace)(1028, gl);
  };

  return new _webgl_data.BuilderTypes_GlObjProp(15, result);
}();

exports.cullFront = cullFront;

var cullBack = function () {
  var result = function result(gl) {
    (0, _webgl_browser_types.GlCommon_enable)(2884, gl);
    (0, _webgl_browser_types.GlCommon_cullFace)(1029, gl);
  };

  return new _webgl_data.BuilderTypes_GlObjProp(15, result);
}();

exports.cullBack = cullBack;

var cullFrontAndBack = function () {
  var result = function result(gl) {
    (0, _webgl_browser_types.GlCommon_enable)(2884, gl);
    (0, _webgl_browser_types.GlCommon_cullFace)(1032, gl);
  };

  return new _webgl_data.BuilderTypes_GlObjProp(15, result);
}();

exports.cullFrontAndBack = cullFrontAndBack;

function cullFace(mode) {
  var result = function result(gl) {
    (0, _webgl_browser_types.GlCommon_enable)(2884, gl);
    (0, _webgl_browser_types.GlCommon_cullFace)(mode, gl);
  };

  return new _webgl_data.BuilderTypes_GlObjProp(15, result);
}

var enableCulling = new _webgl_data.BuilderTypes_GlObjProp(15, function (gl) {
  (0, _webgl_browser_types.GlCommon_enable)(2884, gl);
});
exports.enableCulling = enableCulling;
var disableCulling = new _webgl_data.BuilderTypes_GlObjProp(15, function (gl) {
  (0, _webgl_browser_types.GlCommon_disable)(2884, gl);
});
exports.disableCulling = disableCulling;

function defaultCulling(gl) {
  gl.disable(gl.CULL_FACE);
  gl.cullFace(gl.BACK);
}

function blendColor(r, g, b, a) {
  return new _webgl_data.BuilderTypes_GlObjProp(15, function (gl) {
    (0, _webgl_browser_types.GlCommon_blendColor)(r, g, b, a, gl);
  });
}

function blendColorV(color) {
  return blendColor(color[0], color[1], color[2], color[3]);
}

function blendFunc(sfactor, dfactor) {
  var result = function result(gl) {
    (0, _webgl_browser_types.GlCommon_enable)(3042, gl);
    (0, _webgl_browser_types.GlCommon_blendFunc)(sfactor, dfactor, gl);
  };

  return new _webgl_data.BuilderTypes_GlObjProp(15, result);
}

function blendFuncSeparate(srcRGB, dstRGB, srcAlpha, dstAlpha) {
  var result = function result(gl) {
    (0, _webgl_browser_types.GlCommon_enable)(3042, gl);
    (0, _webgl_browser_types.GlCommon_blendFuncSeparate)(srcRGB, dstRGB, srcAlpha, dstAlpha, gl);
  };

  return new _webgl_data.BuilderTypes_GlObjProp(15, result);
}

function blendEquation(mode) {
  return new _webgl_data.BuilderTypes_GlObjProp(15, function (gl) {
    (0, _webgl_browser_types.GlCommon_blendEquation)(mode, gl);
  });
}

function blendEquationSeparate(modeRGB, modeAlpha) {
  var result = function result(gl) {
    (0, _webgl_browser_types.GlCommon_enable)(3042, gl);
    (0, _webgl_browser_types.GlCommon_blendEquationSeparate)(modeRGB, modeAlpha, gl);
  };

  return new _webgl_data.BuilderTypes_GlObjProp(15, result);
}

var enableBlending = new _webgl_data.BuilderTypes_GlObjProp(15, function (gl) {
  (0, _webgl_browser_types.GlCommon_enable)(3042, gl);
});
exports.enableBlending = enableBlending;
var disableBlending = new _webgl_data.BuilderTypes_GlObjProp(15, function (gl) {
  (0, _webgl_browser_types.GlCommon_disable)(3042, gl);
});
exports.disableBlending = disableBlending;

function defaultBlending(gl) {
  gl.disable(gl.BLEND);
  gl.blendFunc(gl.ONE, gl.ZERO);
  gl.blendEquation(gl.FUNC_ADD);
}

function enable(cap) {
  return new _webgl_data.BuilderTypes_GlObjProp(15, function (gl) {
    (0, _webgl_browser_types.GlCommon_enable)(cap, gl);
  });
}

function disable(cap) {
  return new _webgl_data.BuilderTypes_GlObjProp(15, function (gl) {
    (0, _webgl_browser_types.GlCommon_disable)(cap, gl);
  });
}

function defaultCapabilities() {
  return (0, _List.ofArray)([function (gl) {
    defaultDepthTesting(gl);
  }, function (gl_1) {
    defaultCulling(gl_1);
  }, function (gl_2) {
    defaultBlending(gl_2);
  }]);
}

var zero = 0;
exports.zero = zero;
var one = 1;
exports.one = one;
var src_color = 768;
exports.src_color = src_color;
var one_minus_src_color = 769;
exports.one_minus_src_color = one_minus_src_color;
var src_alpha = 770;
exports.src_alpha = src_alpha;
var one_minus_src_alpha = 771;
exports.one_minus_src_alpha = one_minus_src_alpha;
var dst_alpha = 772;
exports.dst_alpha = dst_alpha;
var one_minus_dst_alpha = 773;
exports.one_minus_dst_alpha = one_minus_dst_alpha;
var dst_color = 774;
exports.dst_color = dst_color;
var one_minus_dst_color = 775;
exports.one_minus_dst_color = one_minus_dst_color;
var src_alpha_saturate = 776;
exports.src_alpha_saturate = src_alpha_saturate;
var constant_color = 32769;
exports.constant_color = constant_color;
var one_minus_constant_color = 32770;
exports.one_minus_constant_color = one_minus_constant_color;
var constant_alpha = 32771;
exports.constant_alpha = constant_alpha;
var one_minus_constant_alpha = 32772;
exports.one_minus_constant_alpha = one_minus_constant_alpha;
var func_add = 32774;
exports.func_add = func_add;
var func_subtract = 32778;
exports.func_subtract = func_subtract;
var func_reverse_subtract = 32779;
exports.func_reverse_subtract = func_reverse_subtract;
var func_min = 32775;
exports.func_min = func_min;
var func_max = 32776;
exports.func_max = func_max;
},{"./webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_core/webgl_browser_types.js":"../JS/webgl_core/webgl_browser_types.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js"}],"../JS/webgl_data/glinterleavechildattribute.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createFrom = createFrom;
exports.createEmpty = createEmpty;
exports.create = create;
exports.update = update;

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _glcommon = require("./glcommon.js");

var _glattribcommonn = require("./glattribcommonn.js");

var _webgl_data = require("./webgl_data.js");

var _program_utils = require("../webgl_core/program_utils.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _webgl_browser_types = require("../webgl_core/webgl_browser_types.js");

function updateCalculated(data) {
  if (data.RecalcNeeded) {
    data.RecalcNeeded = false;
    var matchValue = data.ParentAttribute;

    if (matchValue != null) {
      var pdata = matchValue;

      if (data.CalcDataCount) {
        var vdata = (0, _Option.defaultArg)(pdata.Link, pdata);
        var parentSize = vdata.ByteSize | 0;
        var newDataCount = ~~Math.ceil((parentSize - data.Offset) / data.Stride) | 0;

        if (newDataCount !== data.DataCount) {
          data.DataCount = newDataCount;
          (0, _glcommon.objectRecalcNeeded)(data.ParentObject);
          (0, _glattribcommonn.linkedChildrenRecalcNeeded)(data);
        }
      }
    }
  }
}

function createFrom(info, props, parentAttribute, parentObject) {
  var inputRecord;
  var data_1 = (0, _glattribcommonn.updateCommonData)(props, (inputRecord = (0, _glattribcommonn.defaultData)(info, new _webgl_data.Data_GlAttributeKind(2), parentObject), new _webgl_data.Data_GlAttributeData(inputRecord.Id, inputRecord.Kind, inputRecord.Info, inputRecord.IsDirty, inputRecord.BaseType, inputRecord.ArrayCreator, inputRecord.RecordSize, inputRecord.ByteSize, inputRecord.DataLength, inputRecord.BaseTypeInfo, inputRecord.Normalize, inputRecord.StartIndex, inputRecord.IndexStride, inputRecord.Stride, inputRecord.Offset, inputRecord.Values, inputRecord.DataCount, inputRecord.BufferUsage, inputRecord.DeterminesVertexCount, inputRecord.DeterminesInstanceCount, inputRecord.Divisor, inputRecord.Buffer, inputRecord.ChildAttributes, inputRecord.ParentObject, parentAttribute, inputRecord.Link, inputRecord.LinkedChildren, inputRecord.CanSingleCopy, inputRecord.AdjustsStride, inputRecord.EnableNeeded, inputRecord.RecalcNeeded, inputRecord.CalcDataCount, inputRecord.CalcStride, inputRecord.CalcOffset)));
  var ti = data_1.Info.TypeInfo;
  var calcStride = data_1.Stride <= 0;
  var stride = (calcStride ? ti.ByteSize : data_1.Stride) | 0;
  return new _webgl_data.Data_GlAttributeData(data_1.Id, data_1.Kind, data_1.Info, data_1.IsDirty, data_1.BaseType, data_1.ArrayCreator, data_1.RecordSize, data_1.ByteSize, data_1.DataLength, data_1.BaseTypeInfo, data_1.Normalize, data_1.StartIndex, data_1.IndexStride, stride, data_1.Offset, data_1.Values, data_1.DataCount, data_1.BufferUsage, data_1.DeterminesVertexCount, data_1.DeterminesInstanceCount, data_1.Divisor, data_1.Buffer, data_1.ChildAttributes, data_1.ParentObject, data_1.ParentAttribute, data_1.Link, data_1.LinkedChildren, data_1.CanSingleCopy, data_1.AdjustsStride ? data_1.Offset < 0 : false, data_1.EnableNeeded, data_1.RecalcNeeded, data_1.DataCount < 0, calcStride, data_1.Offset < 0);
}

function createEmpty(name, parentAttribute, parentObject) {
  var info = (0, _program_utils.GlProgram_emptyAttributeInfo)(name);
  var inputRecord = (0, _glattribcommonn.defaultData)(info, new _webgl_data.Data_GlAttributeKind(2), parentObject);
  return new _webgl_data.Data_GlAttributeData(inputRecord.Id, inputRecord.Kind, inputRecord.Info, inputRecord.IsDirty, inputRecord.BaseType, inputRecord.ArrayCreator, inputRecord.RecordSize, inputRecord.ByteSize, inputRecord.DataLength, inputRecord.BaseTypeInfo, inputRecord.Normalize, inputRecord.StartIndex, inputRecord.IndexStride, inputRecord.Stride, inputRecord.Offset, inputRecord.Values, inputRecord.DataCount, inputRecord.BufferUsage, inputRecord.DeterminesVertexCount, inputRecord.DeterminesInstanceCount, inputRecord.Divisor, inputRecord.Buffer, inputRecord.ChildAttributes, inputRecord.ParentObject, parentAttribute, inputRecord.Link, inputRecord.LinkedChildren, inputRecord.CanSingleCopy, inputRecord.AdjustsStride, inputRecord.EnableNeeded, inputRecord.RecalcNeeded, inputRecord.CalcDataCount, inputRecord.CalcStride, inputRecord.CalcOffset);
}

function create(name, props, parentAttribute, parentObject) {
  var matchValue = (0, _program_utils.GlProgram_getAttribute)(name, parentObject.ProgramInfo);

  if (matchValue == null) {
    return createEmpty(name, parentAttribute, parentObject);
  } else {
    var info = matchValue;
    return createFrom(info, props, parentAttribute, parentObject);
  }
}

function update(data) {
  var isActive = data.Info.Location >= 0;

  if (isActive ? data.IsDirty : false) {
    updateCalculated(data);

    if (data.EnableNeeded) {
      data.EnableNeeded = false;

      if (data.ParentObject.ProcessLinked ? true : (0, _List.length)(data.LinkedChildren) === 0) {
        var gl = data.ParentObject.Scene.Canvas.Context;
        var location = data.Info.Location;

        if (location >= 0) {
          (0, _webgl_browser_types.GlCommon_enableVertexAttribArray)(gl, location);
          (0, _webgl_browser_types.GlCommon_vertexAttribPointer)(gl, location, data.Info.TypeInfo.ElementCount, data.BaseType, data.Normalize, data.Stride, data.Offset);

          if (data.Divisor >= 0) {
            (0, _webgl_browser_types.GlCommon_vertexAttribDivisor)(gl, location, data.Divisor);
          }
        }
      }
    }

    (0, _glattribcommonn.clean)(data);
  }
}
},{"../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./glcommon.js":"../JS/webgl_data/glcommon.js","./glattribcommonn.js":"../JS/webgl_data/glattribcommonn.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_core/program_utils.js":"../JS/webgl_core/program_utils.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../webgl_core/webgl_browser_types.js":"../JS/webgl_core/webgl_browser_types.js"}],"../JS/webgl_data/glinterleaveattribute.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createFrom = createFrom;
exports.createEmpty = createEmpty;
exports.create = create;
exports.update = update;
exports._setValues = _setValues;
exports._setValue = _setValue;

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _glattribcommonn = require("./glattribcommonn.js");

var _webgl_data = require("./webgl_data.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _glbuffer = require("./glbuffer.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _typedarray_utils = require("../js/typedarray_utils.js");

var _program_utils = require("../webgl_core/program_utils.js");

var _webgl_types = require("../webgl_core/webgl_types.js");

var _webgl_browser_types = require("../webgl_core/webgl_browser_types.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _glinterleavechildattribute = require("./glinterleavechildattribute.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

function updateCalculated(data) {
  if (data.RecalcNeeded) {
    var vdata = (0, _Option.defaultArg)(data.Link, data);

    if (data.CalcDataCount) {
      var newDataCount = ~~(vdata.Values.length / data.IndexStride) | 0;

      if (newDataCount !== data.DataCount) {
        data.DataCount = newDataCount;
        (0, _glattribcommonn.childrenRecalcNeeded)(data);
        (0, _glattribcommonn.linkedChildrenRecalcNeeded)(data);
      }
    }

    var newByteSize = data.DataCount * data.Stride | 0;

    if (newByteSize !== data.ByteSize) {
      data.ByteSize = newByteSize;
      (0, _glattribcommonn.childrenRecalcNeeded)(data);
      (0, _glattribcommonn.linkedChildrenRecalcNeeded)(data);
    }

    data.DataLength = data.CanSingleCopy ? vdata.Values.length : data.ByteSize;
  }

  data.RecalcNeeded = false;
}

function getStride(currStride_mut, children_mut) {
  getStride: while (true) {
    var currStride = currStride_mut,
        children = children_mut;

    if (children.tail != null) {
      var remaining = children.tail;
      var c = children.head;
      var childSize = (c.AdjustsStride ? c.RecordSize : 0) | 0;
      currStride_mut = currStride + childSize;
      children_mut = remaining;
      continue getStride;
    } else {
      return currStride | 0;
    }

    break;
  }
}

function updateChildrenOffset(currOffset_mut, children_mut) {
  updateChildrenOffset: while (true) {
    var currOffset = currOffset_mut,
        children = children_mut;

    if (children.tail != null) {
      var remainingChildren = children.tail;
      var child = children.head;
      child.Offset = currOffset;
      var nextOffset = child.Offset + child.RecordSize | 0;
      currOffset_mut = nextOffset;
      children_mut = remainingChildren;
      continue updateChildrenOffset;
    }

    break;
  }
}

function updateChildrenStartIndex(data) {
  var loop = function loop(existing_mut, currIndex_mut, children_mut) {
    loop: while (true) {
      var existing = existing_mut,
          currIndex = currIndex_mut,
          children = children_mut;

      if (existing.tail != null) {
        var remaining = existing.tail;
        var child = existing.head;

        if (child.CalcOffset) {
          var newChildren = (0, _List.cons)(new _webgl_data.Data_GlAttributeData(child.Id, child.Kind, child.Info, child.IsDirty, child.BaseType, child.ArrayCreator, child.RecordSize, child.ByteSize, child.DataLength, child.BaseTypeInfo, child.Normalize, currIndex, child.IndexStride, child.Stride, child.Offset, child.Values, child.DataCount, child.BufferUsage, child.DeterminesVertexCount, child.DeterminesInstanceCount, child.Divisor, child.Buffer, child.ChildAttributes, child.ParentObject, child.ParentAttribute, child.Link, child.LinkedChildren, child.CanSingleCopy, child.AdjustsStride, child.EnableNeeded, child.RecalcNeeded, child.CalcDataCount, child.CalcStride, child.CalcOffset), children);
          var nextIndex = currIndex + child.Info.TypeInfo.ElementCount | 0;
          existing_mut = remaining;
          currIndex_mut = nextIndex;
          children_mut = newChildren;
          continue loop;
        } else {
          existing_mut = remaining;
          currIndex_mut = currIndex;
          children_mut = (0, _List.cons)(child, children);
          continue loop;
        }
      } else {
        return children;
      }

      break;
    }
  };

  var currIndex_1 = data.Info.TypeInfo.ElementCount | 0;
  return new _webgl_data.Data_GlAttributeData(data.Id, data.Kind, data.Info, data.IsDirty, data.BaseType, data.ArrayCreator, data.RecordSize, data.ByteSize, data.DataLength, data.BaseTypeInfo, data.Normalize, data.StartIndex, data.IndexStride, data.Stride, data.Offset, data.Values, data.DataCount, data.BufferUsage, data.DeterminesVertexCount, data.DeterminesInstanceCount, data.Divisor, data.Buffer, loop(data.ChildAttributes, currIndex_1, (0, _List.empty)()), data.ParentObject, data.ParentAttribute, data.Link, data.LinkedChildren, data.CanSingleCopy, data.AdjustsStride, data.EnableNeeded, data.RecalcNeeded, data.CalcDataCount, data.CalcStride, data.CalcOffset);
}

function updateChildrenParentAttribute(data) {
  (0, _List.iterate)(function (c) {
    c.ParentAttribute = data;
  }, data.ChildAttributes);
  return data;
}

function createFrom(info, props, parentObject) {
  var inputRecord;
  var data_1 = (0, _glattribcommonn.updateCommonData)(props, (inputRecord = (0, _glattribcommonn.defaultData)(info, new _webgl_data.Data_GlAttributeKind(1), parentObject), new _webgl_data.Data_GlAttributeData(inputRecord.Id, inputRecord.Kind, inputRecord.Info, inputRecord.IsDirty, inputRecord.BaseType, inputRecord.ArrayCreator, inputRecord.RecordSize, inputRecord.ByteSize, inputRecord.DataLength, inputRecord.BaseTypeInfo, inputRecord.Normalize, inputRecord.StartIndex, inputRecord.IndexStride, inputRecord.Stride, 0, inputRecord.Values, inputRecord.DataCount, inputRecord.BufferUsage, inputRecord.DeterminesVertexCount, inputRecord.DeterminesInstanceCount, inputRecord.Divisor, inputRecord.Buffer, inputRecord.ChildAttributes, inputRecord.ParentObject, inputRecord.ParentAttribute, inputRecord.Link, inputRecord.LinkedChildren, inputRecord.CanSingleCopy, inputRecord.AdjustsStride, inputRecord.EnableNeeded, inputRecord.RecalcNeeded, inputRecord.CalcDataCount, inputRecord.CalcStride, inputRecord.CalcOffset)));
  var siblings = (0, _List.where)(function (c) {
    return c.CalcOffset;
  }, data_1.ChildAttributes);
  var strideSiblings = (0, _List.where)(function (c_1) {
    return c_1.AdjustsStride;
  }, siblings);

  var strideSiblingSum = function strideSiblingSum(projection) {
    return (0, _List.sumBy)(projection, strideSiblings, {
      GetZero: function GetZero() {
        return 0;
      },
      Add: function Add(x, y) {
        return x + y;
      }
    });
  };

  var calcStride = data_1.Stride <= 0;
  var recordSize = data_1.RecordSize | 0;
  var stride = (calcStride ? getStride(recordSize, strideSiblings) : data_1.Stride) | 0;
  updateChildrenOffset(data_1.Offset + data_1.RecordSize, siblings);
  var ti = data_1.Info.TypeInfo;
  var indexStride = ti.ElementCount + strideSiblingSum(function (c_2) {
    return c_2.Info.TypeInfo.ElementCount;
  }) | 0;
  var canSingleCopy = (0, _List.forAll)(function (c_3) {
    return c_3.BaseType === data_1.BaseType;
  }, siblings);

  if (data_1.Link == null) {
    (0, _glbuffer.GlBuffer__Init_71B7C75E)(data_1.Buffer, 34962, data_1.BufferUsage, data_1.ArrayCreator);

    if (canSingleCopy) {
      (0, _glbuffer.GlBuffer__SetValues_5975E3)(data_1.Buffer, data_1.Values);
    }
  }

  var enumerator = (0, _Seq.getEnumerator)(data_1.ChildAttributes);

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var child = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]();
      var isDerived = !child.CalcOffset;

      if (child.CalcStride) {
        child.Stride = isDerived ? child.Info.TypeInfo.ByteSize : stride;
      }
    }
  } finally {
    enumerator.Dispose();
  }

  return new _webgl_data.Data_GlRootAttribute(1, updateChildrenParentAttribute(updateChildrenStartIndex(new _webgl_data.Data_GlAttributeData(data_1.Id, data_1.Kind, data_1.Info, data_1.IsDirty, data_1.BaseType, canSingleCopy ? data_1.ArrayCreator : _typedarray_utils.int8ArrayFactory, data_1.RecordSize, data_1.ByteSize, data_1.DataLength, data_1.BaseTypeInfo, data_1.Normalize, data_1.StartIndex, indexStride, stride, data_1.Offset, data_1.Values, data_1.DataCount, data_1.BufferUsage, data_1.DeterminesVertexCount, data_1.DeterminesInstanceCount, data_1.Divisor, data_1.Buffer, data_1.ChildAttributes, data_1.ParentObject, data_1.ParentAttribute, data_1.Link, data_1.LinkedChildren, canSingleCopy, data_1.AdjustsStride, data_1.EnableNeeded, data_1.RecalcNeeded, data_1.DataCount < 0, calcStride, data_1.Offset < 0))));
}

function createEmpty(name, parentObject) {
  var info = (0, _program_utils.GlProgram_emptyAttributeInfo)(name);
  return new _webgl_data.Data_GlRootAttribute(1, (0, _glattribcommonn.defaultData)(info, new _webgl_data.Data_GlAttributeKind(1), parentObject));
}

function create(name, props, parentObject) {
  var matchValue = (0, _program_utils.GlProgram_getAttribute)(name, parentObject.ProgramInfo);

  if (matchValue == null) {
    return createEmpty(name, parentObject);
  } else {
    var info = matchValue;
    return createFrom(info, props, parentObject);
  }
}

function copyData(data) {
  if (data.Link == null) {
    var buffer = data.Buffer;
    var values = data.Values;
    var indexStride = data.IndexStride | 0;
    (0, _glbuffer.GlBuffer__SetLength_Z524259A4)(buffer, data.DataLength);
    var view = new DataView((0, _glbuffer.GlBuffer__get_Data)(buffer).buffer);

    var writeData = function writeData(dataType, offset, stride, dataCount, byteSize, startIndex, elementCount) {
      var writer;
      var clo1 = (0, _webgl_types.getViewWriter)(dataType);

      writer = function writer(arg10) {
        var clo2 = clo1(arg10);
        return function (arg20) {
          var clo3 = clo2(arg20);
          return clo3;
        };
      };

      var loop = function loop(index_mut, ofs_mut, i_mut) {
        loop: while (true) {
          var index = index_mut,
              ofs = ofs_mut,
              i = i_mut;

          if (i === 0) {} else {
            var enumerator = (0, _Seq.getEnumerator)((0, _List.ofSeq)((0, _Seq.rangeNumber)(0, 1, elementCount - 1)));

            try {
              while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
                var s = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]() | 0;
                var value = writer(view)(ofs + s * byteSize)(values[index + s]) | 0;
                void value;
              }
            } finally {
              enumerator.Dispose();
            }

            index_mut = index + indexStride;
            ofs_mut = ofs + stride;
            i_mut = i - 1;
            continue loop;
          }

          break;
        }
      };

      loop(startIndex, offset, dataCount);
    };

    var writeChildData = function writeChildData(startIndex_1_mut, children_mut) {
      writeChildData: while (true) {
        var startIndex_1 = startIndex_1_mut,
            children = children_mut;

        if (children.tail != null) {
          var remainingChildren = children.tail;
          var c = children.head;

          if (c.CalcOffset) {
            var baseByteSize = c.BaseTypeInfo.ByteSize | 0;
            writeData(c.BaseType, c.Offset, c.Stride, c.DataCount, baseByteSize, startIndex_1, c.Info.TypeInfo.ElementCount);
            startIndex_1_mut = startIndex_1 + c.Info.TypeInfo.ElementCount;
            children_mut = remainingChildren;
            continue writeChildData;
          } else {
            startIndex_1_mut = startIndex_1;
            children_mut = remainingChildren;
            continue writeChildData;
          }
        }

        break;
      }
    };

    writeData(data.BaseType, data.Offset, data.Stride, data.DataCount, data.BaseTypeInfo.ByteSize, 0, data.Info.TypeInfo.ElementCount);
    writeChildData(data.Info.TypeInfo.ElementCount, data.ChildAttributes);
    (0, _glbuffer.GlBuffer__DirtyRange_Z37302880)(buffer, 0, data.DataLength - 1);
  }
}

function enable(data) {
  if (data.EnableNeeded) {
    data.EnableNeeded = false;

    if (data.ParentObject.ProcessLinked ? true : (0, _List.length)(data.LinkedChildren) === 0) {
      var gl = data.ParentObject.Scene.Canvas.Context;
      var location = data.Info.Location;

      if (location >= 0) {
        (0, _webgl_browser_types.GlCommon_enableVertexAttribArray)(gl, location);
        (0, _webgl_browser_types.GlCommon_vertexAttribPointer)(gl, location, data.Info.TypeInfo.ElementCount, data.BaseType, data.Normalize, data.Stride, data.Offset);

        if (data.Divisor >= 0) {
          (0, _webgl_browser_types.GlCommon_vertexAttribDivisor)(gl, location, data.Divisor);
        }
      }
    }
  }
}

function update(data) {
  var vdata = (0, _Option.defaultArg)(data.Link, data);
  var shouldUpdate = data.ParentObject.ProcessLinked ? true : (0, _List.length)(data.LinkedChildren) > 0;

  if (data.IsDirty) {
    if (shouldUpdate) {
      (0, _glbuffer.GlBuffer__Bind)(vdata.Buffer);
    }

    var isActive = data.Info.Location >= 0;

    if (isActive) {
      updateCalculated(data);
      enable(data);
    }

    (0, _List.iterate)(function (data_1) {
      (0, _glinterleavechildattribute.update)(data_1);
    }, data.ChildAttributes);

    if (shouldUpdate) {
      if (!data.CanSingleCopy) {
        copyData(data);
      }

      (0, _glbuffer.GlBuffer__Update)(vdata.Buffer);
    }

    (0, _glattribcommonn.clean)(data);
  }
}

function _setValues(values, data) {
  var values_1 = (0, _Util.isArrayLike)(values) ? values : [values];
  data.Values = values_1;
  (0, _glbuffer.GlBuffer__SetValues_5975E3)(data.Buffer, values_1);
  (0, _glattribcommonn.childrenRecalcNeeded)(data);
}

function _setValue(index, value, data) {
  var value_1 = (0, _Util.isArrayLike)(value) ? value : [value];
  var attribute = (0, _Option.defaultArg)(data.ParentAttribute, data);
  var startIndex = data.StartIndex + data.IndexStride * index | 0;
  var count = data.Info.TypeInfo.ElementCount | 0;
  var dataValues = data.Values;
  var enumerator = (0, _Seq.getEnumerator)((0, _List.ofSeq)((0, _Seq.rangeNumber)(0, 1, count - 1)));

  try {
    while (enumerator["System.Collections.IEnumerator.MoveNext"]()) {
      var i = enumerator["System.Collections.Generic.IEnumerator`1.get_Current"]() | 0;
      dataValues[startIndex + i] = value_1[i];
    }
  } finally {
    enumerator.Dispose();
  }

  (0, _glbuffer.GlBuffer__SetValuesOffset_Z59CA6BE1)(attribute.Buffer, value_1, startIndex);
  (0, _glattribcommonn.dirty)(attribute);
}
},{"../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./glattribcommonn.js":"../JS/webgl_data/glattribcommonn.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","./glbuffer.js":"../JS/webgl_data/glbuffer.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../js/typedarray_utils.js":"../JS/js/typedarray_utils.js","../webgl_core/program_utils.js":"../JS/webgl_core/program_utils.js","../webgl_core/webgl_types.js":"../JS/webgl_core/webgl_types.js","../webgl_core/webgl_browser_types.js":"../JS/webgl_core/webgl_browser_types.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","./glinterleavechildattribute.js":"../JS/webgl_data/glinterleavechildattribute.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js"}],"../JS/webgl_data/glattrib.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.delete$ = delete$;
exports.setValues = setValues;
exports.setValue = setValue;

var _glbuffer = require("./glbuffer.js");

var _glinterleaveattribute = require("./glinterleaveattribute.js");

var _glsingleattribute = require("./glsingleattribute.js");

function delete$(data) {
  (0, _glbuffer.GlBuffer__Delete)(data.Buffer);
}

function setValues(values, data) {
  if (data.Link == null) {
    var matchValue_1 = data.Kind;

    switch (matchValue_1.tag) {
      case 1:
        {
          (0, _glinterleaveattribute._setValues)(values, data);
          break;
        }

      case 2:
        {
          break;
        }

      default:
        {
          (0, _glsingleattribute._setValues)(values, data);
        }
    }
  }
}

function setValue(index, value, data) {
  if (data.Link == null) {
    var matchValue_1 = data.Kind;

    switch (matchValue_1.tag) {
      case 1:
        {
          (0, _glinterleaveattribute._setValue)(index, value, data);
          break;
        }

      case 2:
        {
          break;
        }

      default:
        {
          (0, _glsingleattribute._setValue)(index, value, data);
        }
    }
  }
}
},{"./glbuffer.js":"../JS/webgl_data/glbuffer.js","./glinterleaveattribute.js":"../JS/webgl_data/glinterleaveattribute.js","./glsingleattribute.js":"../JS/webgl_data/glsingleattribute.js"}],"../JS/webgl_data/glindicies.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.create = create;
exports.delete$ = delete$;
exports.update = update;

var _glcommon = require("./glcommon.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _typedarray_utils = require("../js/typedarray_utils.js");

var _webgl_data = require("./webgl_data.js");

var _glbuffer = require("./glbuffer.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

function clean(data) {
  data.IsDirty = false;
}

function dirty(data) {
  data.IsDirty = true;
  (0, _glcommon.dirtyObject)(data.ParentObject);
}

function dirtyLinkedChildren(data) {
  (0, _List.iterate)(function (data_1) {
    dirty(data_1);
  }, data.LinkedChildren);
}

function recalcNeeded(data) {
  data.RecalcNeeded = true;
  data.IsDirty = true;
  (0, _glcommon.objectRecalcNeeded)(data.ParentObject);
}

function linkedChildrenRecalcNeeded(data) {
  (0, _List.iterate)(function (data_1) {
    recalcNeeded(data_1);
  }, data.LinkedChildren);
}

function updateArrayCreator(data) {
  var arrayCreator;
  var matchValue = data.IndicesType | 0;

  switch (matchValue) {
    case 5121:
      {
        arrayCreator = _typedarray_utils.uint8ArrayFactory;
        break;
      }

    case 5123:
      {
        arrayCreator = _typedarray_utils.uint16ArrayFactory;
        break;
      }

    default:
      {
        arrayCreator = _typedarray_utils.uint16ArrayFactory;
      }
  }

  return new _webgl_data.Data_GlIndicesData(data.Name, data.IsDirty, data.IndicesType, arrayCreator, data.Offset, data.Values, data.DataCount, data.BufferUsage, data.Buffer, data.ParentObject, data.Link, data.LinkedChildren, data.RecalcNeeded, data.CalcDataCount);
}

function initBuffer(data) {
  if (data.Link == null) {
    (0, _glbuffer.GlBuffer__Init_71B7C75E)(data.Buffer, 34963, data.BufferUsage, data.ArrayCreator);
    (0, _glbuffer.GlBuffer__SetValues_5975E3)(data.Buffer, data.Values);
  }

  return data;
}

function updateCalcFlags(data) {
  return new _webgl_data.Data_GlIndicesData(data.Name, data.IsDirty, data.IndicesType, data.ArrayCreator, data.Offset, data.Values, data.DataCount, data.BufferUsage, data.Buffer, data.ParentObject, data.Link, data.LinkedChildren, data.RecalcNeeded, data.DataCount < 0);
}

function linkTo(parent, data) {
  (0, _glbuffer.GlBuffer__set_AutoClean_Z1FBCCD16)(parent.Buffer, false);
  var data_1 = new _webgl_data.Data_GlIndicesData(data.Name, data.IsDirty, data.IndicesType, data.ArrayCreator, data.Offset, data.Values, data.DataCount, data.BufferUsage, data.Buffer, data.ParentObject, parent, data.LinkedChildren, data.RecalcNeeded, data.CalcDataCount);
  parent.LinkedChildren = (0, _List.cons)(data_1, parent.LinkedChildren);
  return data_1;
}

function processLink(objectName, data) {
  var globj = (0, _glcommon.getObject)(objectName, data.ParentObject.Scene);
  var matchValue = globj.Indices;

  if (matchValue == null) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Cannot link to undefined Indices of %P().", [globj.Name]));
    throw new Error(msg);
  } else {
    var indices = matchValue;
    return linkTo(indices, data);
  }
}

function apply(props, data) {
  var loop = function loop(props_1_mut, data_1_mut) {
    loop: while (true) {
      var props_1 = props_1_mut,
          data_1 = data_1_mut;

      if (props_1.tail != null) {
        var t = props_1.tail;
        var h = props_1.head;

        switch (h.tag) {
          case 1:
            {
              var x_1 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlIndicesData(data_1.Name, data_1.IsDirty, data_1.IndicesType, data_1.ArrayCreator, x_1, data_1.Values, data_1.DataCount, data_1.BufferUsage, data_1.Buffer, data_1.ParentObject, data_1.Link, data_1.LinkedChildren, data_1.RecalcNeeded, data_1.CalcDataCount);
              continue loop;
            }

          case 2:
            {
              var x_2 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlIndicesData(data_1.Name, data_1.IsDirty, data_1.IndicesType, data_1.ArrayCreator, data_1.Offset, x_2, data_1.DataCount, data_1.BufferUsage, data_1.Buffer, data_1.ParentObject, data_1.Link, data_1.LinkedChildren, data_1.RecalcNeeded, data_1.CalcDataCount);
              continue loop;
            }

          case 3:
            {
              var x_3 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlIndicesData(data_1.Name, data_1.IsDirty, data_1.IndicesType, data_1.ArrayCreator, data_1.Offset, data_1.Values, data_1.DataCount, x_3, data_1.Buffer, data_1.ParentObject, data_1.Link, data_1.LinkedChildren, data_1.RecalcNeeded, data_1.CalcDataCount);
              continue loop;
            }

          case 4:
            {
              var x_4 = h.fields[0];
              props_1_mut = t;
              data_1_mut = processLink(x_4, data_1);
              continue loop;
            }

          default:
            {
              var x = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlIndicesData(data_1.Name, data_1.IsDirty, x, data_1.ArrayCreator, data_1.Offset, data_1.Values, data_1.DataCount, data_1.BufferUsage, data_1.Buffer, data_1.ParentObject, data_1.Link, data_1.LinkedChildren, data_1.RecalcNeeded, data_1.CalcDataCount);
              continue loop;
            }
        }
      } else {
        return data_1;
      }

      break;
    }
  };

  return initBuffer(updateCalcFlags(updateArrayCreator(loop(props, data))));
}

function updateCalculated(data) {
  if (data.RecalcNeeded) {
    data.RecalcNeeded = false;

    if (data.CalcDataCount) {
      var newDataCount = data.Values.length - data.Offset | 0;

      if (newDataCount !== data.DataCount) {
        data.DataCount = data.Values.length - data.Offset;
        (0, _glcommon.objectRecalcNeeded)(data.ParentObject);
        linkedChildrenRecalcNeeded(data);
      }
    }
  }
}

function create(props, parentObject) {
  return apply(props, new _webgl_data.Data_GlIndicesData("Indices", true, 5121, _typedarray_utils.uint8ArrayFactory, 0, new Int32Array([]), -1, 35044, (0, _glbuffer.GlBuffer_$ctor_10C6D16C)(parentObject.Scene.Canvas.Context), parentObject, void 0, (0, _List.empty)(), true, true));
}

function delete$(data) {
  (0, _glbuffer.GlBuffer__Delete)(data.Buffer);
}

function update(data) {
  if (data.IsDirty) {
    updateCalculated(data);
    clean(data);
    (0, _glbuffer.GlBuffer__Bind)(data.Buffer);
    (0, _glbuffer.GlBuffer__Update)(data.Buffer);
  }
}
},{"./glcommon.js":"../JS/webgl_data/glcommon.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../js/typedarray_utils.js":"../JS/js/typedarray_utils.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","./glbuffer.js":"../JS/webgl_data/glbuffer.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js"}],"../JS/webgl_data/gltexture.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TextureDataInfo$reflection = TextureDataInfo$reflection;
exports.emptyTexture = emptyTexture;
exports.apply = apply;
exports.create = create;
exports.delete$ = delete$;
exports.clean = clean;
exports.dirty = dirty;
exports.dirtyLinkedChildren = dirtyLinkedChildren;
exports.update = update;
exports.setPixelData = setPixelData;
exports.emptyTextureData = exports.TextureDataInfo = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _typedarray_utils = require("../js/typedarray_utils.js");

var _webgl_data_types = require("./webgl_data_types.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _webgl_data = require("./webgl_data.js");

var _glcommon = require("./glcommon.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _utils = require("../core/utils.js");

var _webgl_types = require("../webgl_core/webgl_types.js");

var _webgl_browser_types = require("../webgl_core/webgl_browser_types.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var TextureDataInfo = /*#__PURE__*/function (_Record) {
  _inherits(TextureDataInfo, _Record);

  var _super = _createSuper(TextureDataInfo);

  function TextureDataInfo(Width, Height, InternalFormat, Format, DataType, Data) {
    var _this;

    _classCallCheck(this, TextureDataInfo);

    _this = _super.call(this);
    _this.Width = Width;
    _this.Height = Height;
    _this.InternalFormat = InternalFormat | 0;
    _this.Format = Format | 0;
    _this.DataType = DataType | 0;
    _this.Data = Data;
    return _this;
  }

  return TextureDataInfo;
}(_Types.Record);

exports.TextureDataInfo = TextureDataInfo;

function TextureDataInfo$reflection() {
  return (0, _Reflection.record_type)("GlTexture.TextureDataInfo", [], TextureDataInfo, function () {
    return [["Width", _Reflection.float64_type], ["Height", _Reflection.float64_type], ["InternalFormat", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlInternalColorFormat", _Reflection.int32_type, [["RGB", 6407], ["RGBA", 6408], ["LUMINANCE", 6409], ["LUMINANCE_ALPHA", 6410], ["ALPHA", 6406], ["R8", 33321], ["R16F", 33325], ["R32F", 33326], ["R8UI", 33330], ["RG8", 33323], ["RG16F", 33327], ["RG32F", 33328], ["RG8UI", 33336], ["RGB8", 32849], ["SRGB8", 35905], ["RGB565", 36194], ["R11F_G11F_B10F", 35898], ["RGB9_E5", 35901], ["RGB16F", 34843], ["RGB32F", 34837], ["RGB8UI", 36221], ["RGBA8", 32856], ["SRGB8_ALPHA8", 35907], ["RGB5_A1", 32855], ["RGB10_A2", 32857], ["RGBA4", 32854], ["RGBA16F", 34842], ["RGBA32F", 34836], ["RGBA8UI", 36220], ["R8_SNORM", 36756], ["RG8_SNORM", 36757], ["RGB8_SNORM", 36758], ["RGBA8_SNORM", 36759], ["RGB10_A2UI", 36975], ["R8I", 33329], ["R16I", 33331], ["R16UI", 33332], ["R32I", 33333], ["R32UI", 33334], ["RG8I", 33335], ["RG16I", 33337], ["RG16UI", 33338], ["RG32I", 33339], ["RG32UI", 33340], ["RGB16I", 36233], ["RGB16UI", 36215], ["RGB32I", 36227], ["RGB32UI", 36209], ["RGBA8I", 36238], ["RGBA16I", 36232], ["RGBA16UI", 36214], ["RGBA32I", 36226], ["RGBA32UI", 36208], ["DEPTH_COMPONENT16", 33189], ["DEPTH_COMPONENT24", 33190], ["DEPTH_COMPONENT32F", 36012], ["DEPTH24_STENCIL8", 35056], ["DEPTH32F_STENCIL8", 36013]])], ["Format", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlColorFormat", _Reflection.int32_type, [["RGB", 6407], ["RGBA", 6408], ["LUMINANCE_ALPHA", 6410], ["LUMINANCE", 6409], ["ALPHA", 6406], ["RED", 6403], ["RED_INTEGER", 36244], ["RG", 33319], ["RG_INTEGER", 33320], ["RGB_INTEGER", 36248], ["RGBA_INTEGER", 36249], ["DEPTH_COMPONENT", 6402], ["DEPTH_STENCIL", 34041]])], ["DataType", (0, _Reflection.enum_type)("Wil.Webgl.Types.WebglTypes.GlTextureType", _Reflection.int32_type, [["UNSIGNED_BYTE", 5121], ["UNSIGNED_SHORT_4_4_4_4", 32819], ["UNSIGNED_SHORT_5_5_5_1", 32820], ["UNSIGNED_SHORT_5_6_5", 33635], ["UNSIGNED_SHORT", 5123], ["UNSIGNED_INT", 5125], ["UNSIGNED_INT_24_8", 34042], ["FLOAT", 5126], ["HALF_FLOAT", 5131], ["BYTE", 5120], ["SHORT", 5122], ["INT", 5124], ["UNSIGNED_INT_2_10_10_10_REV", 33640], ["UNSIGNED_INT_10F_11F_11F_REV", 35899], ["UNSIGNED_INT_5_9_9_9_REV", 35902], ["FLOAT_32_UNSIGNED_INT_24_8_REV", 36269]])], ["Data", (0, _Reflection.class_type)("Fable.Core.JS.TypedArray")]];
  });
}

var emptyTextureData = new TextureDataInfo(2, 2, 6408, 6408, 5121, (0, _typedarray_utils.uint8Array)(new Int32Array([255, 0, 0, 255, 0, 255, 0, 255, 0, 0, 255, 255, 255, 255, 0, 255])));
exports.emptyTextureData = emptyTextureData;

function emptyTexture(parent) {
  var gl = parent.Scene.Canvas.Context;
  var empty = emptyTextureData;
  return new _webgl_data.Data_GlTextureData(0, "", true, 3553, gl.createTexture(), -1, 0, empty.Width, empty.Height, empty.InternalFormat, empty.Format, empty.DataType, new _webgl_data_types.GlTexturePixels(0, empty.Data), 0, true, 9728, 9728, void 0, void 0, void 0, void 0, void 0, void 0, void 0, void 0, void 0, parent, void 0, (0, _List.empty)());
}

function addLinkedChild(parent, data) {
  parent.LinkedChildren = (0, _List.cons)(data, parent.LinkedChildren);
  return data;
}

function linkTo(parent, data) {
  return addLinkedChild(parent, new _webgl_data.Data_GlTextureData(data.Id, data.Name, data.IsDirty, data.Target, data.TextureId, data.Index, data.Level, data.Width, data.Height, data.InternalFormat, data.Format, data.DataType, new _webgl_data_types.GlTexturePixels(0, emptyTextureData.Data), data.Offset, data.GenerateMipMap, data.MagFilter, data.MinFilter, data.WrapS, data.WrapT, data.WrapR, data.BaseLevel, data.CompareFunc, data.CompareMode, data.MaxLevel, data.MaxLod, data.MinLod, data.ParentObject, parent, data.LinkedChildren));
}

function processLink(name, data) {
  var patternInput = (0, _glcommon.splitName)(name);
  var textureName = patternInput[1];
  var objectName = patternInput[0];
  var globj = (0, _glcommon.getObject)(objectName, data.ParentObject.Scene);
  var texture = (0, _glcommon.getTexture)(textureName, globj);
  return linkTo(texture, data);
}

function apply(props, data) {
  var loop = function loop(props_1_mut, data_1_mut) {
    loop: while (true) {
      var props_1 = props_1_mut,
          data_1 = data_1_mut;

      if (props_1.tail != null) {
        var t = props_1.tail;
        var h = props_1.head;

        switch (h.tag) {
          case 1:
            {
              var x_1 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, x_1, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 2:
            {
              var x_2 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, x_2, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 3:
            {
              var x_3 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, x_3, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 6:
            {
              var x_4 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, x_4, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 4:
            {
              var x_5 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, x_5, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 5:
            {
              var x_6 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, x_6, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 7:
            {
              var x_7 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, x_7, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 8:
            {
              var x_8 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, x_8, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 10:
            {
              var x_9 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, x_9, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 11:
            {
              var x_10 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, x_10, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 9:
            {
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, false, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 12:
            {
              var x_11 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, x_11, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 13:
            {
              var x_12 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, x_12, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 14:
            {
              var x_13 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, x_13, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 15:
            {
              var x_14 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, x_14, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 16:
            {
              var x_15 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, x_15, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 17:
            {
              var x_16 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, x_16, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 18:
            {
              var x_17 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, x_17, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 19:
            {
              var x_18 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, x_18, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 20:
            {
              var x_19 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, x_19, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 21:
            {
              var x_20 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, x_20, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 22:
            {
              var x_21 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, data_1.Name, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, x_21, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }

          case 23:
            {
              var x_22 = h.fields[0];
              props_1_mut = t;
              data_1_mut = processLink(x_22, data_1);
              continue loop;
            }

          default:
            {
              var x = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlTextureData(data_1.Id, x, data_1.IsDirty, data_1.Target, data_1.TextureId, data_1.Index, data_1.Level, data_1.Width, data_1.Height, data_1.InternalFormat, data_1.Format, data_1.DataType, data_1.Pixels, data_1.Offset, data_1.GenerateMipMap, data_1.MagFilter, data_1.MinFilter, data_1.WrapS, data_1.WrapT, data_1.WrapR, data_1.BaseLevel, data_1.CompareFunc, data_1.CompareMode, data_1.MaxLevel, data_1.MaxLod, data_1.MinLod, data_1.ParentObject, data_1.Link, data_1.LinkedChildren);
              continue loop;
            }
        }
      } else {
        return data_1;
      }

      break;
    }
  };

  return loop(props, data);
}

function create(props, parentObject) {
  var inputRecord;
  return apply(props, (inputRecord = emptyTexture(parentObject), new _webgl_data.Data_GlTextureData(inputRecord.Id, inputRecord.Name, inputRecord.IsDirty, inputRecord.Target, inputRecord.TextureId, (0, _glcommon.nextTextureIndex)(parentObject), inputRecord.Level, inputRecord.Width, inputRecord.Height, inputRecord.InternalFormat, inputRecord.Format, inputRecord.DataType, inputRecord.Pixels, inputRecord.Offset, inputRecord.GenerateMipMap, inputRecord.MagFilter, inputRecord.MinFilter, inputRecord.WrapS, inputRecord.WrapT, inputRecord.WrapR, inputRecord.BaseLevel, inputRecord.CompareFunc, inputRecord.CompareMode, inputRecord.MaxLevel, inputRecord.MaxLod, inputRecord.MinLod, inputRecord.ParentObject, inputRecord.Link, inputRecord.LinkedChildren)));
}

function delete$(data) {
  var gl = data.ParentObject.Scene.Canvas.Context;
  gl.deleteTexture(data.TextureId);
}

function clean(data) {
  data.IsDirty = false;
}

function dirty(data) {
  data.IsDirty = true;
  (0, _glcommon.dirtyObject)(data.ParentObject);
}

function dirtyLinkedChildren(data) {
  (0, _List.iterate)(function (data_1) {
    dirty(data_1);
  }, data.LinkedChildren);
}

function activateTexture(vdata, data) {
  var gl = data.ParentObject.Scene.Canvas.Context;
  var value = data.MinFilter;

  if (value == null) {} else {
    var value_1 = value | 0;
    var target = vdata.Target | 0;
    var param_1 = 10241;
    var value_2 = value_1;
    gl.texParameteri(target, param_1, value_2);
  }

  var value_3 = data.MagFilter;

  if (value_3 == null) {} else {
    var value_4 = value_3 | 0;
    var target_1 = vdata.Target | 0;
    var param_3 = 10240;
    var value_5 = value_4;
    gl.texParameteri(target_1, param_3, value_5);
  }

  var value_6 = data.WrapS;

  if (value_6 == null) {} else {
    var value_7 = value_6 | 0;
    var target_2 = vdata.Target | 0;
    var param_5 = 10242;
    var value_8 = value_7;
    gl.texParameteri(target_2, param_5, value_8);
  }

  var value_9 = data.WrapT;

  if (value_9 == null) {} else {
    var value_10 = value_9 | 0;
    var target_3 = vdata.Target | 0;
    var param_7 = 10243;
    var value_11 = value_10;
    gl.texParameteri(target_3, param_7, value_11);
  }

  var value_12 = data.WrapR;

  if (value_12 == null) {} else {
    var value_13 = value_12 | 0;
    var target_4 = vdata.Target | 0;
    var param_9 = 32882;
    var value_14 = value_13;
    gl.texParameteri(target_4, param_9, value_14);
  }

  var value_15 = data.BaseLevel;

  if (value_15 == null) {} else {
    var value_16 = value_15 | 0;
    var target_5 = vdata.Target | 0;
    var param_11 = 33084;
    var value_17 = value_16;
    gl.texParameteri(target_5, param_11, value_17);
  }

  var value_18 = data.CompareFunc;

  if (value_18 == null) {} else {
    var value_19 = value_18 | 0;
    var target_6 = vdata.Target | 0;
    var param_13 = 34893;
    var value_20 = value_19;
    gl.texParameteri(target_6, param_13, value_20);
  }

  var value_21 = data.CompareMode;

  if (value_21 == null) {} else {
    var value_22 = value_21 | 0;
    var target_7 = vdata.Target | 0;
    var param_15 = 34892;
    var value_23 = value_22;
    gl.texParameteri(target_7, param_15, value_23);
  }

  var value_24 = data.MaxLevel;

  if (value_24 == null) {} else {
    var value_25 = value_24 | 0;
    var target_8 = vdata.Target | 0;
    var param_17 = 33085;
    var value_26 = value_25;
    gl.texParameteri(target_8, param_17, value_26);
  }

  var value_27 = data.MaxLod;

  if (value_27 == null) {} else {
    var value_28 = value_27;
    var target_9 = vdata.Target | 0;
    var param_19 = 33083;
    var value_29 = value_28;
    gl.texParameterf(target_9, param_19, value_29);
  }

  var value_30 = data.MinLod;

  if (value_30 == null) {} else {
    var value_31 = value_30;
    var target_10 = vdata.Target | 0;
    var param_21 = 33082;
    var value_32 = value_31;
    gl.texParameterf(target_10, param_21, value_32);
  }
}

function updateDataTexture(pixels, vdata, data) {
  (0, _webgl_browser_types.GlCommon_texImage2DData2)(vdata.Target, vdata.Level, vdata.InternalFormat, vdata.Width, vdata.Height, vdata.Format, vdata.DataType, (0, _typedarray_utils.bufferView)(pixels), vdata.Offset, data.ParentObject.Scene.Canvas.Context);

  if (data.GenerateMipMap) {
    data.ParentObject.Scene.Canvas.Context.generateMipmap(vdata.Target);
  }

  clean(data);
}

function updateImageTexture(pixels, vdata, data) {
  var isLoaded = pixels.complete ? pixels.naturalWidth !== 0 : false;

  if (isLoaded) {
    vdata.Width = pixels.naturalWidth;
    vdata.Height = pixels.naturalHeight;
    (0, _webgl_browser_types.GlCommon_texImage2DImage2)(vdata.Target, vdata.Level, vdata.InternalFormat, vdata.Width, vdata.Height, vdata.Format, vdata.DataType, pixels, data.ParentObject.Scene.Canvas.Context);

    if (data.GenerateMipMap) {
      data.ParentObject.Scene.Canvas.Context.generateMipmap(vdata.Target);
    }

    clean(data);
  } else {
    var empty = emptyTextureData;
    (0, _webgl_browser_types.GlCommon_texImage2DData2)(vdata.Target, vdata.Level, empty.InternalFormat, empty.Width, empty.Height, empty.Format, empty.DataType, (0, _typedarray_utils.bufferView)(empty.Data), vdata.Offset, data.ParentObject.Scene.Canvas.Context);
  }
}

function update(data) {
  var gl = data.ParentObject.Scene.Canvas.Context;
  var vdata = (0, _Option.defaultArg)(data.Link, data);
  gl.activeTexture(gl.TEXTURE0 + data.Index);
  gl.bindTexture(data.Target, data.TextureId);

  if (data.IsDirty) {
    var matchValue = vdata.Pixels;

    switch (matchValue.tag) {
      case 1:
        {
          throw new Error("PixelImageData not implemented");
          break;
        }

      case 2:
        {
          var pixels_1 = matchValue.fields[0];
          updateImageTexture(pixels_1, vdata, data);
          break;
        }

      case 3:
        {
          throw new Error("PixelCanvas not implemented");
          break;
        }

      case 4:
        {
          throw new Error("PixelVideo not implemented");
          break;
        }

      case 5:
        {
          throw new Error("PixelBitmap not implemented");
          break;
        }

      default:
        {
          var pixels = matchValue.fields[0];
          updateDataTexture(pixels, vdata, data);
        }
    }

    activateTexture(vdata, data);
  }
}

function setPixelData(height, pixels, data) {
  data.Pixels = new _webgl_data_types.GlTexturePixels(0, (0, _typedarray_utils.uint8Array)(pixels));
  data.Width = ~~(~~(pixels.length / height) / 4);
  data.Height = height;
  dirty(data);
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../js/typedarray_utils.js":"../JS/js/typedarray_utils.js","./webgl_data_types.js":"../JS/webgl_data/webgl_data_types.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","./glcommon.js":"../JS/webgl_data/glcommon.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../core/utils.js":"../JS/core/utils.js","../webgl_core/webgl_types.js":"../JS/webgl_core/webgl_types.js","../webgl_core/webgl_browser_types.js":"../JS/webgl_core/webgl_browser_types.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js"}],"../JS/webgl_data/globj.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.degreesToRadians = degreesToRadians;
exports.emptyObject = emptyObject;
exports._cleanLinkedBuffers = _cleanLinkedBuffers;
exports.create = create;
exports.delete$ = delete$;
exports.update = update;
exports.render = render;
exports.setInstanceCount = setInstanceCount;
exports.setAngle = setAngle;
exports.setAngleZ = setAngleZ;
exports.setAngleDegrees = setAngleDegrees;
exports.setAngleDegreesZ = setAngleDegreesZ;
exports.setPositionXYZ = setPositionXYZ;
exports.setPositionXY = setPositionXY;
exports.setPosition = setPosition;
exports.setScale = setScale;
exports.addTexture = exports.addAttribute = exports.addUniform = exports.addUbo = exports.tryGetTexture = exports.getTexture = exports.tryGetAttribute = exports.getAttribute = exports.tryGetUniform = exports.getUniform = exports.tryGetUbo = exports.getUbo = exports.dirtyParallax = exports.dirtyModel = exports.dirty = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _webgl_data = require("./webgl_data.js");

var _glcommon = require("./glcommon.js");

var _vectors = require("../core/vectors.js");

var _utils = require("../core/utils.js");

var _program_utils = require("../webgl_core/program_utils.js");

var _webgl_types = require("../webgl_core/webgl_types.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _matricies = require("../core/matricies.js");

var _optionex = require("../core/optionex.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _glbuffer = require("./glbuffer.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _glubo = require("./glubo.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _gluniform = require("./gluniform.js");

var _glattribcommonn = require("./glattribcommonn.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _glsingleattribute = require("./glsingleattribute.js");

var _glcapabilities = require("./glcapabilities.js");

var _glattrib = require("./glattrib.js");

var _glindicies = require("./glindicies.js");

var _glinterleaveattribute = require("./glinterleaveattribute.js");

var _webgl_browser_types = require("../webgl_core/webgl_browser_types.js");

var _gltexture = require("./gltexture.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var Builder = /*#__PURE__*/function (_Record) {
  _inherits(Builder, _Record);

  var _super = _createSuper(Builder);

  function Builder(Name, ParallaxCamera, LinkTo, UboCreators, UniformCreators, AttributeCreators, IndicesCreator, TextureCreators, Data) {
    var _this;

    _classCallCheck(this, Builder);

    _this = _super.call(this);
    _this.Name = Name;
    _this.ParallaxCamera = ParallaxCamera;
    _this.LinkTo = LinkTo;
    _this.UboCreators = UboCreators;
    _this.UniformCreators = UniformCreators;
    _this.AttributeCreators = AttributeCreators;
    _this.IndicesCreator = IndicesCreator;
    _this.TextureCreators = TextureCreators;
    _this.Data = Data;
    return _this;
  }

  return Builder;
}(_Types.Record);

function Builder$reflection() {
  return (0, _Reflection.record_type)("GlObj.Builder", [], Builder, function () {
    return [["Name", _Reflection.string_type], ["ParallaxCamera", (0, _Reflection.option_type)(_Reflection.string_type)], ["LinkTo", (0, _Reflection.option_type)(_Reflection.string_type)], ["UboCreators", (0, _Reflection.list_type)((0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlUboProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlObjData$reflection)(), (0, _webgl_data.Data_GlUboData$reflection)())))], ["UniformCreators", (0, _Reflection.list_type)((0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlUniformProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlObjData$reflection)(), (0, _webgl_data.Data_GlUniformData$reflection)())))], ["AttributeCreators", (0, _Reflection.list_type)((0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlAttrProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlObjData$reflection)(), (0, _webgl_data.Data_GlRootAttribute$reflection)())))], ["IndicesCreator", (0, _Reflection.option_type)((0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlIndicesProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlObjData$reflection)(), (0, _webgl_data.Data_GlIndicesData$reflection)())))], ["TextureCreators", (0, _Reflection.list_type)((0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlTextureProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlObjData$reflection)(), (0, _webgl_data.Data_GlTextureData$reflection)())))], ["Data", (0, _webgl_data.Data_GlObjData$reflection)()]];
  });
}

var dirty = function dirty(data) {
  (0, _glcommon.dirtyObject)(data);
};

exports.dirty = dirty;

var dirtyModel = function dirtyModel(data) {
  (0, _glcommon.dirtyModel)(data);
};

exports.dirtyModel = dirtyModel;

var dirtyParallax = function dirtyParallax(data) {
  (0, _glcommon.dirtyParallax)(data);
};

exports.dirtyParallax = dirtyParallax;

function degreesToRadians(angle) {
  return (0, _vectors.Vec3_Create_8ED0A5D)(angle.values[0] * 1 * _utils.RAD_PER_DEG, angle.values[1] * 1 * _utils.RAD_PER_DEG, angle.values[2] * 1 * _utils.RAD_PER_DEG);
}

function emptyObject(scene) {
  return new _webgl_data.Data_GlObjData(0, "", (0, _program_utils.GlProgram_emptyProgramInfo)(scene.Canvas.Context), true, scene, new _webgl_types.GlDrawMethod(4), 4, -1, 0, 0, 0, 0, 0, 0, (0, _List.empty)(), (0, _List.empty)(), (0, _List.empty)(), (0, _List.empty)(), void 0, (0, _List.empty)(), (0, _List.empty)(), (0, _List.empty)(), null, false, -1, void 0, 1, (0, _vectors.Vec3_Create)(), (0, _vectors.Vec3_Create)(), (0, _vectors.Vec3_Create)(), (0, _vectors.Vec3_Create)(), 1, (0, _matricies.Mat4_Create)(), void 0, void 0, void 0, (0, _List.empty)(), true, true, true, true, true, true);
}

var getUbo = function getUbo(name) {
  return function (data) {
    return (0, _glcommon.getUbo)(name, data);
  };
};

exports.getUbo = getUbo;

var tryGetUbo = function tryGetUbo(name) {
  return function (data) {
    return (0, _glcommon.tryGetUbo)(name, data);
  };
};

exports.tryGetUbo = tryGetUbo;

var getUniform = function getUniform(name) {
  return function (data) {
    return (0, _glcommon.getUniform)(name, data);
  };
};

exports.getUniform = getUniform;

var tryGetUniform = function tryGetUniform(name) {
  return function (data) {
    return (0, _glcommon.tryGetUniform)(name, data);
  };
};

exports.tryGetUniform = tryGetUniform;

var getAttribute = function getAttribute(name) {
  return function (data) {
    return (0, _glcommon.getAttribute)(name, data);
  };
};

exports.getAttribute = getAttribute;

var tryGetAttribute = function tryGetAttribute(name) {
  return function (data) {
    return (0, _glcommon.tryGetAttribute)(name, data);
  };
};

exports.tryGetAttribute = tryGetAttribute;

var getTexture = function getTexture(name) {
  return function (data) {
    return (0, _glcommon.getTexture)(name, data);
  };
};

exports.getTexture = getTexture;

var tryGetTexture = function tryGetTexture(name) {
  return function (data) {
    return (0, _glcommon.tryGetTexture)(name, data);
  };
};

exports.tryGetTexture = tryGetTexture;

var addUbo = function addUbo(creator) {
  return function (data) {
    return (0, _glcommon.addUbo)(creator, data);
  };
};

exports.addUbo = addUbo;

var addUniform = function addUniform(creator) {
  return function (data) {
    return (0, _glcommon.addUniform)(creator, data);
  };
};

exports.addUniform = addUniform;

var addAttribute = function addAttribute(creator) {
  return function (data) {
    return (0, _glcommon.addAttribute)(creator, data);
  };
};

exports.addAttribute = addAttribute;

var addTexture = function addTexture(creator) {
  return function (data) {
    return (0, _glcommon.addTexture)(creator, data);
  };
};

exports.addTexture = addTexture;

function tryGetParentUbo(name, data) {
  var matchValue = (0, _optionex.executeDefault)(void 0, tryGetUbo(name), data.Parent);

  if (matchValue == null) {
    return (0, _optionex.executeDefault)(void 0, function (data_1) {
      return tryGetParentUbo(name, data_1);
    }, data.Parent);
  } else {
    var result = matchValue;
    return result;
  }
}

function tryGetParentUniform(name, data) {
  var matchValue = (0, _optionex.executeDefault)(void 0, tryGetUniform(name), data.Parent);

  if (matchValue == null) {
    return (0, _optionex.executeDefault)(void 0, function (data_1) {
      return tryGetParentUniform(name, data_1);
    }, data.Parent);
  } else {
    var result = matchValue;
    return result;
  }
}

function getParentAttribute(name, data) {
  var matchValue = (0, _optionex.executeDefault)(void 0, tryGetAttribute(name), data.Parent);

  if (matchValue == null) {
    return (0, _optionex.executeDefault)(void 0, function (data_1) {
      return getParentAttribute(name, data_1);
    }, data.Parent);
  } else {
    var result = matchValue;
    return result;
  }
}

function _cleanLinkedBuffers(data) {
  (0, _Seq.iterate)(function (a_1) {
    (0, _glbuffer.GlBuffer__Clean_Z1FBCCD16)(a_1.Buffer, true);
  }, (0, _Seq.where)(function (a) {
    return (0, _List.length)(a.LinkedChildren) > 0;
  }, (0, _glcommon.allAttributes)(data)));
  var matchValue = data.Indices;

  if (matchValue == null) {} else {
    var a_2 = matchValue;

    if ((0, _List.length)(a_2.LinkedChildren) > 0) {
      (0, _glbuffer.GlBuffer__Clean_Z1FBCCD16)(a_2.Buffer, true);
    }
  }
}

function addLinkedUbos(data) {
  var addLinkedUbo = function addLinkedUbo(data_1, parent) {
    data_1.Ubos = (0, _List.cons)((0, _glubo.createLinked)(parent, data_1), data_1.Ubos);
  };

  var source_2 = (0, _Seq.choose)(function (info_1) {
    return tryGetParentUbo(info_1.Name, data);
  }, (0, _Seq.where)(function (info) {
    return tryGetUbo(info.Name)(data) == null;
  }, data.ProgramInfo.Ubos));
  (0, _Seq.iterate)((0, _Util.partialApply)(1, addLinkedUbo, [data]), source_2);
  return data;
}

function addLinkedUniforms(data) {
  var source_2;

  var createLinkedUniform = function createLinkedUniform(data_1, parent) {
    return (0, _gluniform.createLinked)(parent, data_1);
  };

  var assignUniforms = function assignUniforms(uniforms) {
    data.Uniforms = uniforms;
    return data;
  };

  return assignUniforms((0, _List.ofSeq)((0, _Seq.append)(data.Uniforms, (source_2 = (0, _Seq.choose)(function (info_1) {
    return tryGetParentUniform(info_1.Name, data);
  }, (0, _Seq.where)(function (info) {
    return tryGetUniform(info.Name)(data) == null;
  }, data.ProgramInfo.Uniforms)), (0, _Seq.map)((0, _Util.partialApply)(1, createLinkedUniform, [data]), source_2)))));
}

function addLinkedAttributes(data) {
  var source_2;

  var createLinkedAttribute = function createLinkedAttribute(data_1, parent) {
    if (parent.Kind.tag === 0) {
      return new _webgl_data.Data_GlRootAttribute(0, (0, _glattribcommonn.createLinked)(parent, data_1));
    } else {
      return new _webgl_data.Data_GlRootAttribute(1, (0, _glattribcommonn.createLinked)(parent, data_1));
    }
  };

  var assignAttributes = function assignAttributes(attributes) {
    data.Attributes = attributes;
    return data;
  };

  return assignAttributes((0, _List.ofSeq)((0, _Seq.append)(data.Attributes, (source_2 = (0, _Seq.choose)(function (info_1) {
    return getParentAttribute(info_1.Name, data);
  }, (0, _Seq.where)(function (info) {
    return tryGetAttribute(info.Name)(data) == null;
  }, data.ProgramInfo.Attributes)), (0, _Seq.map)((0, _Util.partialApply)(1, createLinkedAttribute, [data]), source_2)))));
}

function addLinkedObjects(data) {
  if (data.Parent != null) {
    return addLinkedAttributes(addLinkedUniforms(addLinkedUbos(data)));
  } else {
    return data;
  }
}

function addDynamicUbos(data) {
  var addDynamicUbo = function addDynamicUbo(data_1, info) {
    data_1.Ubos = (0, _List.cons)((0, _glubo.createFrom)(info, (0, _List.empty)(), data_1), data_1.Ubos);
  };

  var source_1 = (0, _Seq.where)(function (info_1) {
    return tryGetUbo(info_1.Name)(data) == null;
  }, data.ProgramInfo.Ubos);
  (0, _Seq.iterate)((0, _Util.partialApply)(1, addDynamicUbo, [data]), source_1);
  return data;
}

function getDefaultValue(info) {
  var count = info.ElementCount * info.Length | 0;
  var matchValue = info.Type | 0;

  switch (matchValue) {
    case 0:
      {
        throw new Error("Uniform type not initialized");
      }

    case 5120:
    case 5121:
    case 5122:
    case 5123:
    case 5125:
    case 36294:
    case 36295:
    case 36296:
      {
        return new Uint32Array(count);
      }

    case 5124:
    case 35667:
    case 35668:
    case 35669:
    case 35678:
    case 35679:
    case 35680:
    case 35682:
    case 36289:
    case 36292:
    case 36293:
    case 36298:
    case 36299:
    case 36300:
    case 36303:
    case 36306:
    case 36307:
    case 36308:
    case 36311:
      {
        return new Int32Array(count);
      }

    case 5126:
    case 5131:
    case 35664:
    case 35665:
    case 35666:
    case 35674:
    case 35675:
    case 35676:
    case 35685:
    case 35686:
    case 35687:
    case 35688:
    case 35689:
    case 35690:
      {
        return new Float64Array(count);
      }

    case 35670:
    case 35671:
    case 35672:
    case 35673:
      {
        return (0, _Array.fill)(new Array(count), 0, count, false);
      }

    default:
      {
        throw new Error("Uniform type not initialized");
      }
  }
}

function addDynamicUniforms(data) {
  var source_1;

  var createDynamicUniform = function createDynamicUniform(data_1, info) {
    return (0, _gluniform.createFrom)(info, (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, getDefaultValue(info))), data_1);
  };

  var assignUniforms = function assignUniforms(uniforms) {
    data.Uniforms = uniforms;
    return data;
  };

  return assignUniforms((0, _List.ofSeq)((0, _Seq.append)(data.Uniforms, (source_1 = (0, _Seq.where)(function (info_1) {
    return tryGetUniform(info_1.Name)(data) == null;
  }, data.ProgramInfo.Uniforms), (0, _Seq.map)((0, _Util.partialApply)(1, createDynamicUniform, [data]), source_1)))));
}

function addDynamicAttributes(data) {
  var source_1;

  var createDynamicAttribute = function createDynamicAttribute(data_1, info) {
    return (0, _glsingleattribute.createFrom)(info, (0, _List.empty)(), data_1);
  };

  var assignAttributes = function assignAttributes(attributes) {
    data.Attributes = attributes;
    return data;
  };

  return assignAttributes((0, _List.ofSeq)((0, _Seq.append)(data.Attributes, (source_1 = (0, _Seq.where)(function (info_1) {
    return tryGetAttribute(info_1.Name)(data) == null;
  }, data.ProgramInfo.Attributes), (0, _Seq.map)((0, _Util.partialApply)(1, createDynamicAttribute, [data]), source_1)))));
}

function addDynamicObjects(data) {
  return addDynamicAttributes(addDynamicUniforms(addDynamicUbos(data)));
}

function calcVertexCountAttributes(data) {
  var result = (0, _List.ofSeq)((0, _Seq.filter)(function (a) {
    return a.DeterminesVertexCount;
  }, (0, _glcommon.allAttributes)(data)));

  if (result.tail == null) {
    var matchValue = data.Attributes;

    if (matchValue.tail != null) {
      var first = matchValue.head;
      var a_1 = (0, _glcommon.getAttributeData)(first);
      return (0, _List.singleton)(a_1);
    } else {
      return (0, _List.empty)();
    }
  } else {
    var a_2 = result;
    return a_2;
  }
}

function calcInstanceCountAttributes(data) {
  return (0, _List.ofSeq)((0, _Seq.filter)(function (a) {
    return a.DeterminesInstanceCount;
  }, (0, _glcommon.allAttributes)(data)));
}

function linkTo(parent, data) {
  var data_1 = new _webgl_data.Data_GlObjData(data.Id, data.Name, data.ProgramInfo, data.IsDirty, data.Scene, data.DrawMethod, data.DrawPrimitive, data.VertexCount, data.VertexOffset, data.VertexCountOffset, data.InstanceCount, data.InstanceOffset, data.InstanceCountOffset, data.IndicesOffset, data.Capabilities, data.Uniforms, data.Ubos, data.Attributes, data.Indices, data.Textures, data.VertexCountAttributes, data.InstanceCountAttributes, data.Vao, data.ProcessLinked, data.Layer, data.ParallaxCamera, data.ParallaxDistance, data.ParallaxOffset, data.ParallaxLastPosition, data.Angle, data.Position, data.Scale, data.ModelMatrix, data.ParallaxMatrix, data.Parent, parent, data.LinkedChildren, data.IsModelDirty, data.IsParallaxDirty, data.RecalcNeeded, data.CalcDrawMethod, data.CalcVertexCount, data.CalcInstanceCount);
  parent.LinkedChildren = (0, _List.cons)(data_1, parent.LinkedChildren);
  return data_1;
}

function processLink(builder) {
  var matchValue = builder.LinkTo;

  if (matchValue != null) {
    var objectName = matchValue;

    if (!(0, _String.isNullOrWhiteSpace)(objectName)) {
      var data = builder.Data;
      var globj = (0, _glcommon.getObject)(objectName, data.Scene);
      builder.Data = linkTo(globj, data);
    }

    return builder;
  } else {
    return builder;
  }
}

function applyCreators(builder) {
  var data = builder.Data;

  var createUniform = function createUniform(creator) {
    return creator((0, _List.empty)(), data);
  };

  var createAttribute = function createAttribute(creator_1) {
    return creator_1((0, _List.empty)(), data);
  };

  var createIndices = function createIndices(creator_2) {
    return creator_2((0, _List.empty)(), data);
  };

  var createTexture = function createTexture(creator_3) {
    return creator_3((0, _List.empty)(), data);
  };

  var addUbo_1 = function addUbo_1(c) {
    var value = (0, _glcommon.addUbo)(c, data);
    void value;
  };

  (0, _List.iterate)((0, _Util.mapCurriedArgs)(addUbo_1, [[0, 2]]), builder.UboCreators);
  data.Uniforms = (0, _List.map)((0, _Util.mapCurriedArgs)(createUniform, [[0, 2]]), builder.UniformCreators);
  data.Attributes = (0, _List.map)((0, _Util.mapCurriedArgs)(createAttribute, [[0, 2]]), builder.AttributeCreators);
  (0, _optionex.call)((0, _Util.mapCurriedArgs)(function (c_1) {
    data.Indices = createIndices(c_1);
  }, [[0, 2]]), (0, _Util.curry)(2, builder.IndicesCreator));
  data.Textures = (0, _List.map)((0, _Util.mapCurriedArgs)(createTexture, [[0, 2]]), (0, _List.reverse)(builder.TextureCreators));
  data.VertexCountAttributes = calcVertexCountAttributes(data);
  data.InstanceCountAttributes = calcInstanceCountAttributes(data);
  return data;
}

function build(builder) {
  var sortChildren = function sortChildren(data) {
    var getAttribIndex = function getAttribIndex(att) {
      var pattern_matching_result, a;

      if (att.tag === 1) {
        pattern_matching_result = 0;
        a = att.fields[0];
      } else {
        pattern_matching_result = 0;
        a = att.fields[0];
      }

      switch (pattern_matching_result) {
        case 0:
          {
            return a.Info.Index | 0;
          }
      }
    };

    data.Uniforms = (0, _List.sortBy)(function (u) {
      return u.Info.Index;
    }, data.Uniforms, {
      Compare: _Util.comparePrimitives
    });
    data.Ubos = (0, _List.sortBy)(function (u_1) {
      return u_1.Info.BlockIndex;
    }, data.Ubos, {
      Compare: _Util.comparePrimitives
    });
    data.Attributes = (0, _List.sortBy)(getAttribIndex, data.Attributes, {
      Compare: _Util.comparePrimitives
    });
    data.Id = 5;
    return data;
  };

  var applyCalculations = function applyCalculations(builder_1) {
    var name;
    var data_1 = builder_1.Data;
    var parallaxCamera;
    var matchValue = builder_1.ParallaxCamera;

    if (matchValue != null) {
      if (name = matchValue, (0, _String.isNullOrWhiteSpace)(name)) {
        var name_1 = matchValue;
        parallaxCamera = void 0;
      } else if (matchValue != null) {
        var name_2 = matchValue;
        parallaxCamera = (0, _glcommon.getCamera)(name_2, data_1.Scene);
      } else {
        throw new Error("The match cases were incomplete");
      }
    } else {
      parallaxCamera = void 0;
    }

    var parallaxPosition;

    if (parallaxCamera != null) {
      var cam = parallaxCamera;
      parallaxPosition = (0, _vectors.Vec3__Clone)(cam.Position);
    } else {
      parallaxPosition = data_1.ParallaxLastPosition;
    }

    var parallaxMatrix = (0, _optionex.execute)(function (_arg1) {
      return (0, _matricies.Mat4_Create)();
    }, parallaxCamera);
    var layer = ((data_1.Layer >= 0 ? data_1.Layer < data_1.Scene.Layers.length : false) ? data_1.Layer : data_1.Scene.DefaultLayer) | 0;
    builder_1.Data = new _webgl_data.Data_GlObjData(data_1.Id, builder_1.Name, data_1.ProgramInfo, data_1.IsDirty, data_1.Scene, data_1.DrawMethod, data_1.DrawPrimitive, data_1.VertexCount, data_1.VertexOffset, data_1.VertexCountOffset, data_1.InstanceCount, data_1.InstanceOffset, data_1.InstanceCountOffset, data_1.IndicesOffset, (0, _List.append)((0, _glcapabilities.defaultCapabilities)(), data_1.Capabilities), data_1.Uniforms, data_1.Ubos, data_1.Attributes, data_1.Indices, data_1.Textures, data_1.VertexCountAttributes, data_1.InstanceCountAttributes, data_1.Vao, data_1.ProcessLinked, layer, parallaxCamera, data_1.ParallaxDistance, data_1.ParallaxOffset, parallaxPosition, data_1.Angle, data_1.Position, data_1.Scale, data_1.ModelMatrix, parallaxMatrix, data_1.Parent, data_1.Link, data_1.LinkedChildren, data_1.IsModelDirty, data_1.IsParallaxDirty, data_1.RecalcNeeded, (0, _Util.equalsSafe)(builder_1.Data.DrawMethod, new _webgl_types.GlDrawMethod(4)), builder_1.Data.VertexCount < 0, builder_1.Data.InstanceCount <= 0);
    return builder_1;
  };

  return sortChildren(addDynamicObjects(addLinkedObjects(applyCreators(processLink(applyCalculations(builder))))));
}

function apply(props, builder) {
  var loop = function loop(props_1_mut, b_mut) {
    var inputRecord, inputRecord_1, inputRecord_2, inputRecord_3, inputRecord_4, inputRecord_5, inputRecord_6, inputRecord_7, inputRecord_8, inputRecord_9, inputRecord_10, inputRecord_11, inputRecord_12, inputRecord_13, inputRecord_14, inputRecord_15, _, inputRecord_16, __1, value_2, inputRecord_17, inputRecord_18;

    var _loop = function _loop() {
      var props_1 = props_1_mut,
          b = b_mut;

      var updateName = function updateName(name) {
        if (b.Name !== "global") {
          b.Name = name;
        }

        return b;
      };

      var updateData = function updateData(data) {
        b.Data = data;
        return b;
      };

      var addParallaxCam = function addParallaxCam(c) {
        b.ParallaxCamera = c;
        return b;
      };

      var addLink = function addLink(s) {
        b.LinkTo = s;
        return b;
      };

      var addUniform_1 = function addUniform_1(creator) {
        b.UniformCreators = (0, _List.cons)((0, _Util.curry)(2, creator), b.UniformCreators);
        return b;
      };

      var addUbo_1 = function addUbo_1(creator_1) {
        b.UboCreators = (0, _List.cons)((0, _Util.curry)(2, creator_1), b.UboCreators);
        return b;
      };

      var addAttribute_1 = function addAttribute_1(creator_2) {
        b.AttributeCreators = (0, _List.cons)((0, _Util.curry)(2, creator_2), b.AttributeCreators);
        return b;
      };

      var addIndices = function addIndices(creator_3) {
        b.IndicesCreator = creator_3;
        return b;
      };

      var addTexture_1 = function addTexture_1(creator_4) {
        b.TextureCreators = (0, _List.cons)((0, _Util.curry)(2, creator_4), b.TextureCreators);
        return b;
      };

      if (props_1.tail != null) {
        var t = props_1.tail;
        var h = props_1.head;

        switch (h.tag) {
          case 1:
            {
              var x_1 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord = b.Data, new _webgl_data.Data_GlObjData(inputRecord.Id, inputRecord.Name, inputRecord.ProgramInfo, inputRecord.IsDirty, inputRecord.Scene, x_1, inputRecord.DrawPrimitive, inputRecord.VertexCount, inputRecord.VertexOffset, inputRecord.VertexCountOffset, inputRecord.InstanceCount, inputRecord.InstanceOffset, inputRecord.InstanceCountOffset, inputRecord.IndicesOffset, inputRecord.Capabilities, inputRecord.Uniforms, inputRecord.Ubos, inputRecord.Attributes, inputRecord.Indices, inputRecord.Textures, inputRecord.VertexCountAttributes, inputRecord.InstanceCountAttributes, inputRecord.Vao, inputRecord.ProcessLinked, inputRecord.Layer, inputRecord.ParallaxCamera, inputRecord.ParallaxDistance, inputRecord.ParallaxOffset, inputRecord.ParallaxLastPosition, inputRecord.Angle, inputRecord.Position, inputRecord.Scale, inputRecord.ModelMatrix, inputRecord.ParallaxMatrix, inputRecord.Parent, inputRecord.Link, inputRecord.LinkedChildren, inputRecord.IsModelDirty, inputRecord.IsParallaxDirty, inputRecord.RecalcNeeded, inputRecord.CalcDrawMethod, inputRecord.CalcVertexCount, inputRecord.CalcInstanceCount)));
              return "continue|loop";
            }

          case 2:
            {
              var x_2 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_1 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_1.Id, inputRecord_1.Name, inputRecord_1.ProgramInfo, inputRecord_1.IsDirty, inputRecord_1.Scene, inputRecord_1.DrawMethod, x_2, inputRecord_1.VertexCount, inputRecord_1.VertexOffset, inputRecord_1.VertexCountOffset, inputRecord_1.InstanceCount, inputRecord_1.InstanceOffset, inputRecord_1.InstanceCountOffset, inputRecord_1.IndicesOffset, inputRecord_1.Capabilities, inputRecord_1.Uniforms, inputRecord_1.Ubos, inputRecord_1.Attributes, inputRecord_1.Indices, inputRecord_1.Textures, inputRecord_1.VertexCountAttributes, inputRecord_1.InstanceCountAttributes, inputRecord_1.Vao, inputRecord_1.ProcessLinked, inputRecord_1.Layer, inputRecord_1.ParallaxCamera, inputRecord_1.ParallaxDistance, inputRecord_1.ParallaxOffset, inputRecord_1.ParallaxLastPosition, inputRecord_1.Angle, inputRecord_1.Position, inputRecord_1.Scale, inputRecord_1.ModelMatrix, inputRecord_1.ParallaxMatrix, inputRecord_1.Parent, inputRecord_1.Link, inputRecord_1.LinkedChildren, inputRecord_1.IsModelDirty, inputRecord_1.IsParallaxDirty, inputRecord_1.RecalcNeeded, inputRecord_1.CalcDrawMethod, inputRecord_1.CalcVertexCount, inputRecord_1.CalcInstanceCount)));
              return "continue|loop";
            }

          case 3:
            {
              var x_3 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_2 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_2.Id, inputRecord_2.Name, inputRecord_2.ProgramInfo, inputRecord_2.IsDirty, inputRecord_2.Scene, inputRecord_2.DrawMethod, inputRecord_2.DrawPrimitive, x_3, inputRecord_2.VertexOffset, inputRecord_2.VertexCountOffset, inputRecord_2.InstanceCount, inputRecord_2.InstanceOffset, inputRecord_2.InstanceCountOffset, inputRecord_2.IndicesOffset, inputRecord_2.Capabilities, inputRecord_2.Uniforms, inputRecord_2.Ubos, inputRecord_2.Attributes, inputRecord_2.Indices, inputRecord_2.Textures, inputRecord_2.VertexCountAttributes, inputRecord_2.InstanceCountAttributes, inputRecord_2.Vao, inputRecord_2.ProcessLinked, inputRecord_2.Layer, inputRecord_2.ParallaxCamera, inputRecord_2.ParallaxDistance, inputRecord_2.ParallaxOffset, inputRecord_2.ParallaxLastPosition, inputRecord_2.Angle, inputRecord_2.Position, inputRecord_2.Scale, inputRecord_2.ModelMatrix, inputRecord_2.ParallaxMatrix, inputRecord_2.Parent, inputRecord_2.Link, inputRecord_2.LinkedChildren, inputRecord_2.IsModelDirty, inputRecord_2.IsParallaxDirty, inputRecord_2.RecalcNeeded, inputRecord_2.CalcDrawMethod, inputRecord_2.CalcVertexCount, inputRecord_2.CalcInstanceCount)));
              return "continue|loop";
            }

          case 4:
            {
              var x_4 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_3 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_3.Id, inputRecord_3.Name, inputRecord_3.ProgramInfo, inputRecord_3.IsDirty, inputRecord_3.Scene, inputRecord_3.DrawMethod, inputRecord_3.DrawPrimitive, inputRecord_3.VertexCount, x_4, inputRecord_3.VertexCountOffset, inputRecord_3.InstanceCount, inputRecord_3.InstanceOffset, inputRecord_3.InstanceCountOffset, inputRecord_3.IndicesOffset, inputRecord_3.Capabilities, inputRecord_3.Uniforms, inputRecord_3.Ubos, inputRecord_3.Attributes, inputRecord_3.Indices, inputRecord_3.Textures, inputRecord_3.VertexCountAttributes, inputRecord_3.InstanceCountAttributes, inputRecord_3.Vao, inputRecord_3.ProcessLinked, inputRecord_3.Layer, inputRecord_3.ParallaxCamera, inputRecord_3.ParallaxDistance, inputRecord_3.ParallaxOffset, inputRecord_3.ParallaxLastPosition, inputRecord_3.Angle, inputRecord_3.Position, inputRecord_3.Scale, inputRecord_3.ModelMatrix, inputRecord_3.ParallaxMatrix, inputRecord_3.Parent, inputRecord_3.Link, inputRecord_3.LinkedChildren, inputRecord_3.IsModelDirty, inputRecord_3.IsParallaxDirty, inputRecord_3.RecalcNeeded, inputRecord_3.CalcDrawMethod, inputRecord_3.CalcVertexCount, inputRecord_3.CalcInstanceCount)));
              return "continue|loop";
            }

          case 5:
            {
              var x_5 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_4 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_4.Id, inputRecord_4.Name, inputRecord_4.ProgramInfo, inputRecord_4.IsDirty, inputRecord_4.Scene, inputRecord_4.DrawMethod, inputRecord_4.DrawPrimitive, inputRecord_4.VertexCount, inputRecord_4.VertexOffset, x_5, inputRecord_4.InstanceCount, inputRecord_4.InstanceOffset, inputRecord_4.InstanceCountOffset, inputRecord_4.IndicesOffset, inputRecord_4.Capabilities, inputRecord_4.Uniforms, inputRecord_4.Ubos, inputRecord_4.Attributes, inputRecord_4.Indices, inputRecord_4.Textures, inputRecord_4.VertexCountAttributes, inputRecord_4.InstanceCountAttributes, inputRecord_4.Vao, inputRecord_4.ProcessLinked, inputRecord_4.Layer, inputRecord_4.ParallaxCamera, inputRecord_4.ParallaxDistance, inputRecord_4.ParallaxOffset, inputRecord_4.ParallaxLastPosition, inputRecord_4.Angle, inputRecord_4.Position, inputRecord_4.Scale, inputRecord_4.ModelMatrix, inputRecord_4.ParallaxMatrix, inputRecord_4.Parent, inputRecord_4.Link, inputRecord_4.LinkedChildren, inputRecord_4.IsModelDirty, inputRecord_4.IsParallaxDirty, inputRecord_4.RecalcNeeded, inputRecord_4.CalcDrawMethod, inputRecord_4.CalcVertexCount, inputRecord_4.CalcInstanceCount)));
              return "continue|loop";
            }

          case 6:
            {
              var x_6 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_5 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_5.Id, inputRecord_5.Name, inputRecord_5.ProgramInfo, inputRecord_5.IsDirty, inputRecord_5.Scene, inputRecord_5.DrawMethod, inputRecord_5.DrawPrimitive, inputRecord_5.VertexCount, inputRecord_5.VertexOffset, inputRecord_5.VertexCountOffset, x_6, inputRecord_5.InstanceOffset, inputRecord_5.InstanceCountOffset, inputRecord_5.IndicesOffset, inputRecord_5.Capabilities, inputRecord_5.Uniforms, inputRecord_5.Ubos, inputRecord_5.Attributes, inputRecord_5.Indices, inputRecord_5.Textures, inputRecord_5.VertexCountAttributes, inputRecord_5.InstanceCountAttributes, inputRecord_5.Vao, inputRecord_5.ProcessLinked, inputRecord_5.Layer, inputRecord_5.ParallaxCamera, inputRecord_5.ParallaxDistance, inputRecord_5.ParallaxOffset, inputRecord_5.ParallaxLastPosition, inputRecord_5.Angle, inputRecord_5.Position, inputRecord_5.Scale, inputRecord_5.ModelMatrix, inputRecord_5.ParallaxMatrix, inputRecord_5.Parent, inputRecord_5.Link, inputRecord_5.LinkedChildren, inputRecord_5.IsModelDirty, inputRecord_5.IsParallaxDirty, inputRecord_5.RecalcNeeded, inputRecord_5.CalcDrawMethod, inputRecord_5.CalcVertexCount, inputRecord_5.CalcInstanceCount)));
              return "continue|loop";
            }

          case 7:
            {
              var x_7 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_6 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_6.Id, inputRecord_6.Name, inputRecord_6.ProgramInfo, inputRecord_6.IsDirty, inputRecord_6.Scene, inputRecord_6.DrawMethod, inputRecord_6.DrawPrimitive, inputRecord_6.VertexCount, inputRecord_6.VertexOffset, inputRecord_6.VertexCountOffset, inputRecord_6.InstanceCount, x_7, inputRecord_6.InstanceCountOffset, inputRecord_6.IndicesOffset, inputRecord_6.Capabilities, inputRecord_6.Uniforms, inputRecord_6.Ubos, inputRecord_6.Attributes, inputRecord_6.Indices, inputRecord_6.Textures, inputRecord_6.VertexCountAttributes, inputRecord_6.InstanceCountAttributes, inputRecord_6.Vao, inputRecord_6.ProcessLinked, inputRecord_6.Layer, inputRecord_6.ParallaxCamera, inputRecord_6.ParallaxDistance, inputRecord_6.ParallaxOffset, inputRecord_6.ParallaxLastPosition, inputRecord_6.Angle, inputRecord_6.Position, inputRecord_6.Scale, inputRecord_6.ModelMatrix, inputRecord_6.ParallaxMatrix, inputRecord_6.Parent, inputRecord_6.Link, inputRecord_6.LinkedChildren, inputRecord_6.IsModelDirty, inputRecord_6.IsParallaxDirty, inputRecord_6.RecalcNeeded, inputRecord_6.CalcDrawMethod, inputRecord_6.CalcVertexCount, inputRecord_6.CalcInstanceCount)));
              return "continue|loop";
            }

          case 8:
            {
              var x_8 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_7 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_7.Id, inputRecord_7.Name, inputRecord_7.ProgramInfo, inputRecord_7.IsDirty, inputRecord_7.Scene, inputRecord_7.DrawMethod, inputRecord_7.DrawPrimitive, inputRecord_7.VertexCount, inputRecord_7.VertexOffset, inputRecord_7.VertexCountOffset, inputRecord_7.InstanceCount, inputRecord_7.InstanceOffset, x_8, inputRecord_7.IndicesOffset, inputRecord_7.Capabilities, inputRecord_7.Uniforms, inputRecord_7.Ubos, inputRecord_7.Attributes, inputRecord_7.Indices, inputRecord_7.Textures, inputRecord_7.VertexCountAttributes, inputRecord_7.InstanceCountAttributes, inputRecord_7.Vao, inputRecord_7.ProcessLinked, inputRecord_7.Layer, inputRecord_7.ParallaxCamera, inputRecord_7.ParallaxDistance, inputRecord_7.ParallaxOffset, inputRecord_7.ParallaxLastPosition, inputRecord_7.Angle, inputRecord_7.Position, inputRecord_7.Scale, inputRecord_7.ModelMatrix, inputRecord_7.ParallaxMatrix, inputRecord_7.Parent, inputRecord_7.Link, inputRecord_7.LinkedChildren, inputRecord_7.IsModelDirty, inputRecord_7.IsParallaxDirty, inputRecord_7.RecalcNeeded, inputRecord_7.CalcDrawMethod, inputRecord_7.CalcVertexCount, inputRecord_7.CalcInstanceCount)));
              return "continue|loop";
            }

          case 9:
            {
              var x_9 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_8 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_8.Id, inputRecord_8.Name, inputRecord_8.ProgramInfo, inputRecord_8.IsDirty, inputRecord_8.Scene, inputRecord_8.DrawMethod, inputRecord_8.DrawPrimitive, inputRecord_8.VertexCount, inputRecord_8.VertexOffset, inputRecord_8.VertexCountOffset, inputRecord_8.InstanceCount, inputRecord_8.InstanceOffset, inputRecord_8.InstanceCountOffset, x_9, inputRecord_8.Capabilities, inputRecord_8.Uniforms, inputRecord_8.Ubos, inputRecord_8.Attributes, inputRecord_8.Indices, inputRecord_8.Textures, inputRecord_8.VertexCountAttributes, inputRecord_8.InstanceCountAttributes, inputRecord_8.Vao, inputRecord_8.ProcessLinked, inputRecord_8.Layer, inputRecord_8.ParallaxCamera, inputRecord_8.ParallaxDistance, inputRecord_8.ParallaxOffset, inputRecord_8.ParallaxLastPosition, inputRecord_8.Angle, inputRecord_8.Position, inputRecord_8.Scale, inputRecord_8.ModelMatrix, inputRecord_8.ParallaxMatrix, inputRecord_8.Parent, inputRecord_8.Link, inputRecord_8.LinkedChildren, inputRecord_8.IsModelDirty, inputRecord_8.IsParallaxDirty, inputRecord_8.RecalcNeeded, inputRecord_8.CalcDrawMethod, inputRecord_8.CalcVertexCount, inputRecord_8.CalcInstanceCount)));
              return "continue|loop";
            }

          case 10:
            {
              var x_10 = h.fields[0];
              props_1_mut = t;
              b_mut = addUniform_1(x_10);
              return "continue|loop";
            }

          case 11:
            {
              var x_11 = h.fields[0];
              props_1_mut = t;
              b_mut = addUbo_1(x_11);
              return "continue|loop";
            }

          case 12:
            {
              var x_12 = h.fields[0];
              props_1_mut = t;
              b_mut = addAttribute_1(x_12);
              return "continue|loop";
            }

          case 13:
            {
              var x_13 = h.fields[0];
              props_1_mut = t;
              b_mut = addIndices(x_13);
              return "continue|loop";
            }

          case 14:
            {
              var x_14 = h.fields[0];
              props_1_mut = t;
              b_mut = addTexture_1(x_14);
              return "continue|loop";
            }

          case 15:
            {
              var x_15 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_9 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_9.Id, inputRecord_9.Name, inputRecord_9.ProgramInfo, inputRecord_9.IsDirty, inputRecord_9.Scene, inputRecord_9.DrawMethod, inputRecord_9.DrawPrimitive, inputRecord_9.VertexCount, inputRecord_9.VertexOffset, inputRecord_9.VertexCountOffset, inputRecord_9.InstanceCount, inputRecord_9.InstanceOffset, inputRecord_9.InstanceCountOffset, inputRecord_9.IndicesOffset, (0, _List.cons)(x_15, b.Data.Capabilities), inputRecord_9.Uniforms, inputRecord_9.Ubos, inputRecord_9.Attributes, inputRecord_9.Indices, inputRecord_9.Textures, inputRecord_9.VertexCountAttributes, inputRecord_9.InstanceCountAttributes, inputRecord_9.Vao, inputRecord_9.ProcessLinked, inputRecord_9.Layer, inputRecord_9.ParallaxCamera, inputRecord_9.ParallaxDistance, inputRecord_9.ParallaxOffset, inputRecord_9.ParallaxLastPosition, inputRecord_9.Angle, inputRecord_9.Position, inputRecord_9.Scale, inputRecord_9.ModelMatrix, inputRecord_9.ParallaxMatrix, inputRecord_9.Parent, inputRecord_9.Link, inputRecord_9.LinkedChildren, inputRecord_9.IsModelDirty, inputRecord_9.IsParallaxDirty, inputRecord_9.RecalcNeeded, inputRecord_9.CalcDrawMethod, inputRecord_9.CalcVertexCount, inputRecord_9.CalcInstanceCount)));
              return "continue|loop";
            }

          case 16:
            {
              var x_16 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_10 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_10.Id, inputRecord_10.Name, inputRecord_10.ProgramInfo, inputRecord_10.IsDirty, inputRecord_10.Scene, inputRecord_10.DrawMethod, inputRecord_10.DrawPrimitive, inputRecord_10.VertexCount, inputRecord_10.VertexOffset, inputRecord_10.VertexCountOffset, inputRecord_10.InstanceCount, inputRecord_10.InstanceOffset, inputRecord_10.InstanceCountOffset, inputRecord_10.IndicesOffset, inputRecord_10.Capabilities, inputRecord_10.Uniforms, inputRecord_10.Ubos, inputRecord_10.Attributes, inputRecord_10.Indices, inputRecord_10.Textures, inputRecord_10.VertexCountAttributes, inputRecord_10.InstanceCountAttributes, inputRecord_10.Vao, x_16, inputRecord_10.Layer, inputRecord_10.ParallaxCamera, inputRecord_10.ParallaxDistance, inputRecord_10.ParallaxOffset, inputRecord_10.ParallaxLastPosition, inputRecord_10.Angle, inputRecord_10.Position, inputRecord_10.Scale, inputRecord_10.ModelMatrix, inputRecord_10.ParallaxMatrix, inputRecord_10.Parent, inputRecord_10.Link, inputRecord_10.LinkedChildren, inputRecord_10.IsModelDirty, inputRecord_10.IsParallaxDirty, inputRecord_10.RecalcNeeded, inputRecord_10.CalcDrawMethod, inputRecord_10.CalcVertexCount, inputRecord_10.CalcInstanceCount)));
              return "continue|loop";
            }

          case 17:
            {
              var x_17 = h.fields[0];
              props_1_mut = t;
              b_mut = addParallaxCam(x_17);
              return "continue|loop";
            }

          case 18:
            {
              var x_18 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_11 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_11.Id, inputRecord_11.Name, inputRecord_11.ProgramInfo, inputRecord_11.IsDirty, inputRecord_11.Scene, inputRecord_11.DrawMethod, inputRecord_11.DrawPrimitive, inputRecord_11.VertexCount, inputRecord_11.VertexOffset, inputRecord_11.VertexCountOffset, inputRecord_11.InstanceCount, inputRecord_11.InstanceOffset, inputRecord_11.InstanceCountOffset, inputRecord_11.IndicesOffset, inputRecord_11.Capabilities, inputRecord_11.Uniforms, inputRecord_11.Ubos, inputRecord_11.Attributes, inputRecord_11.Indices, inputRecord_11.Textures, inputRecord_11.VertexCountAttributes, inputRecord_11.InstanceCountAttributes, inputRecord_11.Vao, inputRecord_11.ProcessLinked, inputRecord_11.Layer, inputRecord_11.ParallaxCamera, x_18, inputRecord_11.ParallaxOffset, inputRecord_11.ParallaxLastPosition, inputRecord_11.Angle, inputRecord_11.Position, inputRecord_11.Scale, inputRecord_11.ModelMatrix, inputRecord_11.ParallaxMatrix, inputRecord_11.Parent, inputRecord_11.Link, inputRecord_11.LinkedChildren, inputRecord_11.IsModelDirty, inputRecord_11.IsParallaxDirty, inputRecord_11.RecalcNeeded, inputRecord_11.CalcDrawMethod, inputRecord_11.CalcVertexCount, inputRecord_11.CalcInstanceCount)));
              return "continue|loop";
            }

          case 19:
            {
              var x_19 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_12 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_12.Id, inputRecord_12.Name, inputRecord_12.ProgramInfo, inputRecord_12.IsDirty, inputRecord_12.Scene, inputRecord_12.DrawMethod, inputRecord_12.DrawPrimitive, inputRecord_12.VertexCount, inputRecord_12.VertexOffset, inputRecord_12.VertexCountOffset, inputRecord_12.InstanceCount, inputRecord_12.InstanceOffset, inputRecord_12.InstanceCountOffset, inputRecord_12.IndicesOffset, inputRecord_12.Capabilities, inputRecord_12.Uniforms, inputRecord_12.Ubos, inputRecord_12.Attributes, inputRecord_12.Indices, inputRecord_12.Textures, inputRecord_12.VertexCountAttributes, inputRecord_12.InstanceCountAttributes, inputRecord_12.Vao, inputRecord_12.ProcessLinked, x_19, inputRecord_12.ParallaxCamera, inputRecord_12.ParallaxDistance, inputRecord_12.ParallaxOffset, inputRecord_12.ParallaxLastPosition, inputRecord_12.Angle, inputRecord_12.Position, inputRecord_12.Scale, inputRecord_12.ModelMatrix, inputRecord_12.ParallaxMatrix, inputRecord_12.Parent, inputRecord_12.Link, inputRecord_12.LinkedChildren, inputRecord_12.IsModelDirty, inputRecord_12.IsParallaxDirty, inputRecord_12.RecalcNeeded, inputRecord_12.CalcDrawMethod, inputRecord_12.CalcVertexCount, inputRecord_12.CalcInstanceCount)));
              return "continue|loop";
            }

          case 20:
            {
              var x_20 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_13 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_13.Id, inputRecord_13.Name, inputRecord_13.ProgramInfo, inputRecord_13.IsDirty, inputRecord_13.Scene, inputRecord_13.DrawMethod, inputRecord_13.DrawPrimitive, inputRecord_13.VertexCount, inputRecord_13.VertexOffset, inputRecord_13.VertexCountOffset, inputRecord_13.InstanceCount, inputRecord_13.InstanceOffset, inputRecord_13.InstanceCountOffset, inputRecord_13.IndicesOffset, inputRecord_13.Capabilities, inputRecord_13.Uniforms, inputRecord_13.Ubos, inputRecord_13.Attributes, inputRecord_13.Indices, inputRecord_13.Textures, inputRecord_13.VertexCountAttributes, inputRecord_13.InstanceCountAttributes, inputRecord_13.Vao, inputRecord_13.ProcessLinked, inputRecord_13.Layer, inputRecord_13.ParallaxCamera, inputRecord_13.ParallaxDistance, inputRecord_13.ParallaxOffset, inputRecord_13.ParallaxLastPosition, x_20, inputRecord_13.Position, inputRecord_13.Scale, inputRecord_13.ModelMatrix, inputRecord_13.ParallaxMatrix, inputRecord_13.Parent, inputRecord_13.Link, inputRecord_13.LinkedChildren, inputRecord_13.IsModelDirty, inputRecord_13.IsParallaxDirty, inputRecord_13.RecalcNeeded, inputRecord_13.CalcDrawMethod, inputRecord_13.CalcVertexCount, inputRecord_13.CalcInstanceCount)));
              return "continue|loop";
            }

          case 21:
            {
              var x_21 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_14 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_14.Id, inputRecord_14.Name, inputRecord_14.ProgramInfo, inputRecord_14.IsDirty, inputRecord_14.Scene, inputRecord_14.DrawMethod, inputRecord_14.DrawPrimitive, inputRecord_14.VertexCount, inputRecord_14.VertexOffset, inputRecord_14.VertexCountOffset, inputRecord_14.InstanceCount, inputRecord_14.InstanceOffset, inputRecord_14.InstanceCountOffset, inputRecord_14.IndicesOffset, inputRecord_14.Capabilities, inputRecord_14.Uniforms, inputRecord_14.Ubos, inputRecord_14.Attributes, inputRecord_14.Indices, inputRecord_14.Textures, inputRecord_14.VertexCountAttributes, inputRecord_14.InstanceCountAttributes, inputRecord_14.Vao, inputRecord_14.ProcessLinked, inputRecord_14.Layer, inputRecord_14.ParallaxCamera, inputRecord_14.ParallaxDistance, inputRecord_14.ParallaxOffset, inputRecord_14.ParallaxLastPosition, degreesToRadians(x_21), inputRecord_14.Position, inputRecord_14.Scale, inputRecord_14.ModelMatrix, inputRecord_14.ParallaxMatrix, inputRecord_14.Parent, inputRecord_14.Link, inputRecord_14.LinkedChildren, inputRecord_14.IsModelDirty, inputRecord_14.IsParallaxDirty, inputRecord_14.RecalcNeeded, inputRecord_14.CalcDrawMethod, inputRecord_14.CalcVertexCount, inputRecord_14.CalcInstanceCount)));
              return "continue|loop";
            }

          case 22:
            {
              var x_22 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_15 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_15.Id, inputRecord_15.Name, inputRecord_15.ProgramInfo, inputRecord_15.IsDirty, inputRecord_15.Scene, inputRecord_15.DrawMethod, inputRecord_15.DrawPrimitive, inputRecord_15.VertexCount, inputRecord_15.VertexOffset, inputRecord_15.VertexCountOffset, inputRecord_15.InstanceCount, inputRecord_15.InstanceOffset, inputRecord_15.InstanceCountOffset, inputRecord_15.IndicesOffset, inputRecord_15.Capabilities, inputRecord_15.Uniforms, inputRecord_15.Ubos, inputRecord_15.Attributes, inputRecord_15.Indices, inputRecord_15.Textures, inputRecord_15.VertexCountAttributes, inputRecord_15.InstanceCountAttributes, inputRecord_15.Vao, inputRecord_15.ProcessLinked, inputRecord_15.Layer, inputRecord_15.ParallaxCamera, inputRecord_15.ParallaxDistance, inputRecord_15.ParallaxOffset, inputRecord_15.ParallaxLastPosition, ((_ = b.Data.Angle, _.values[2] = x_22), b.Data.Angle), inputRecord_15.Position, inputRecord_15.Scale, inputRecord_15.ModelMatrix, inputRecord_15.ParallaxMatrix, inputRecord_15.Parent, inputRecord_15.Link, inputRecord_15.LinkedChildren, inputRecord_15.IsModelDirty, inputRecord_15.IsParallaxDirty, inputRecord_15.RecalcNeeded, inputRecord_15.CalcDrawMethod, inputRecord_15.CalcVertexCount, inputRecord_15.CalcInstanceCount)));
              return "continue|loop";
            }

          case 23:
            {
              var x_23 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_16 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_16.Id, inputRecord_16.Name, inputRecord_16.ProgramInfo, inputRecord_16.IsDirty, inputRecord_16.Scene, inputRecord_16.DrawMethod, inputRecord_16.DrawPrimitive, inputRecord_16.VertexCount, inputRecord_16.VertexOffset, inputRecord_16.VertexCountOffset, inputRecord_16.InstanceCount, inputRecord_16.InstanceOffset, inputRecord_16.InstanceCountOffset, inputRecord_16.IndicesOffset, inputRecord_16.Capabilities, inputRecord_16.Uniforms, inputRecord_16.Ubos, inputRecord_16.Attributes, inputRecord_16.Indices, inputRecord_16.Textures, inputRecord_16.VertexCountAttributes, inputRecord_16.InstanceCountAttributes, inputRecord_16.Vao, inputRecord_16.ProcessLinked, inputRecord_16.Layer, inputRecord_16.ParallaxCamera, inputRecord_16.ParallaxDistance, inputRecord_16.ParallaxOffset, inputRecord_16.ParallaxLastPosition, ((__1 = b.Data.Angle, (value_2 = x_23 * _utils.RAD_PER_DEG, __1.values[2] = value_2)), b.Data.Angle), inputRecord_16.Position, inputRecord_16.Scale, inputRecord_16.ModelMatrix, inputRecord_16.ParallaxMatrix, inputRecord_16.Parent, inputRecord_16.Link, inputRecord_16.LinkedChildren, inputRecord_16.IsModelDirty, inputRecord_16.IsParallaxDirty, inputRecord_16.RecalcNeeded, inputRecord_16.CalcDrawMethod, inputRecord_16.CalcVertexCount, inputRecord_16.CalcInstanceCount)));
              return "continue|loop";
            }

          case 24:
            {
              var x_24 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_17 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_17.Id, inputRecord_17.Name, inputRecord_17.ProgramInfo, inputRecord_17.IsDirty, inputRecord_17.Scene, inputRecord_17.DrawMethod, inputRecord_17.DrawPrimitive, inputRecord_17.VertexCount, inputRecord_17.VertexOffset, inputRecord_17.VertexCountOffset, inputRecord_17.InstanceCount, inputRecord_17.InstanceOffset, inputRecord_17.InstanceCountOffset, inputRecord_17.IndicesOffset, inputRecord_17.Capabilities, inputRecord_17.Uniforms, inputRecord_17.Ubos, inputRecord_17.Attributes, inputRecord_17.Indices, inputRecord_17.Textures, inputRecord_17.VertexCountAttributes, inputRecord_17.InstanceCountAttributes, inputRecord_17.Vao, inputRecord_17.ProcessLinked, inputRecord_17.Layer, inputRecord_17.ParallaxCamera, inputRecord_17.ParallaxDistance, inputRecord_17.ParallaxOffset, inputRecord_17.ParallaxLastPosition, inputRecord_17.Angle, x_24, inputRecord_17.Scale, inputRecord_17.ModelMatrix, inputRecord_17.ParallaxMatrix, inputRecord_17.Parent, inputRecord_17.Link, inputRecord_17.LinkedChildren, inputRecord_17.IsModelDirty, inputRecord_17.IsParallaxDirty, inputRecord_17.RecalcNeeded, inputRecord_17.CalcDrawMethod, inputRecord_17.CalcVertexCount, inputRecord_17.CalcInstanceCount)));
              return "continue|loop";
            }

          case 25:
            {
              var x_25 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_18 = b.Data, new _webgl_data.Data_GlObjData(inputRecord_18.Id, inputRecord_18.Name, inputRecord_18.ProgramInfo, inputRecord_18.IsDirty, inputRecord_18.Scene, inputRecord_18.DrawMethod, inputRecord_18.DrawPrimitive, inputRecord_18.VertexCount, inputRecord_18.VertexOffset, inputRecord_18.VertexCountOffset, inputRecord_18.InstanceCount, inputRecord_18.InstanceOffset, inputRecord_18.InstanceCountOffset, inputRecord_18.IndicesOffset, inputRecord_18.Capabilities, inputRecord_18.Uniforms, inputRecord_18.Ubos, inputRecord_18.Attributes, inputRecord_18.Indices, inputRecord_18.Textures, inputRecord_18.VertexCountAttributes, inputRecord_18.InstanceCountAttributes, inputRecord_18.Vao, inputRecord_18.ProcessLinked, inputRecord_18.Layer, inputRecord_18.ParallaxCamera, inputRecord_18.ParallaxDistance, inputRecord_18.ParallaxOffset, inputRecord_18.ParallaxLastPosition, inputRecord_18.Angle, inputRecord_18.Position, x_25, inputRecord_18.ModelMatrix, inputRecord_18.ParallaxMatrix, inputRecord_18.Parent, inputRecord_18.Link, inputRecord_18.LinkedChildren, inputRecord_18.IsModelDirty, inputRecord_18.IsParallaxDirty, inputRecord_18.RecalcNeeded, inputRecord_18.CalcDrawMethod, inputRecord_18.CalcVertexCount, inputRecord_18.CalcInstanceCount)));
              return "continue|loop";
            }

          case 26:
            {
              var x_26 = h.fields[0];
              props_1_mut = t;
              b_mut = addLink(x_26);
              return "continue|loop";
            }

          default:
            {
              var x = h.fields[0];
              props_1_mut = t;
              b_mut = updateName(x);
              return "continue|loop";
            }
        }
      } else {
        return {
          v: b
        };
      }

      return "break";
    };

    loop: while (true) {
      var _ret = _loop();

      if (_ret === "continue|loop") continue loop;
      if (_ret === "break") break;
      if (_typeof(_ret) === "object") return _ret.v;
    }
  };

  return loop(props, builder);
}

function create(vertex, fragment, parent, scene, props) {
  var inputRecord;
  var gl = scene.Canvas.Context;
  var programInfo = (0, _program_utils.GlProgram_createProgramInfo)(gl, vertex, fragment);
  var vao = gl.createVertexArray();
  return build(apply(props, new Builder("", void 0, void 0, (0, _List.empty)(), (0, _List.empty)(), (0, _List.empty)(), (0, _Util.uncurry)(2, void 0), (0, _List.empty)(), (inputRecord = emptyObject(scene), new _webgl_data.Data_GlObjData(inputRecord.Id, inputRecord.Name, programInfo, inputRecord.IsDirty, inputRecord.Scene, inputRecord.DrawMethod, inputRecord.DrawPrimitive, inputRecord.VertexCount, inputRecord.VertexOffset, inputRecord.VertexCountOffset, inputRecord.InstanceCount, inputRecord.InstanceOffset, inputRecord.InstanceCountOffset, inputRecord.IndicesOffset, inputRecord.Capabilities, inputRecord.Uniforms, inputRecord.Ubos, inputRecord.Attributes, inputRecord.Indices, inputRecord.Textures, inputRecord.VertexCountAttributes, inputRecord.InstanceCountAttributes, vao, true, inputRecord.Layer, inputRecord.ParallaxCamera, inputRecord.ParallaxDistance, inputRecord.ParallaxOffset, inputRecord.ParallaxLastPosition, inputRecord.Angle, inputRecord.Position, inputRecord.Scale, inputRecord.ModelMatrix, inputRecord.ParallaxMatrix, parent, inputRecord.Link, inputRecord.LinkedChildren, inputRecord.IsModelDirty, inputRecord.IsParallaxDirty, inputRecord.RecalcNeeded, inputRecord.CalcDrawMethod, inputRecord.CalcVertexCount, inputRecord.CalcInstanceCount)))));
}

function delete$(data) {
  var deleteAttribute = function deleteAttribute(attribute) {
    if (attribute.tag === 1) {
      var a_1 = attribute.fields[0];
      (0, _glattrib.delete$)(a_1);
    } else {
      var a = attribute.fields[0];
      (0, _glattrib.delete$)(a);
    }
  };

  var gl = data.Scene.Canvas.Context;
  (0, _program_utils.GlProgram_deleteProgramInfo)(data.ProgramInfo);
  gl.deleteVertexArray(data.Vao);
  (0, _List.iterate)(function (data_1) {
    (0, _glubo.delete$)(data_1);
  }, data.Ubos);
  (0, _List.iterate)(deleteAttribute, data.Attributes);
  (0, _optionex.call)(function (data_2) {
    (0, _glindicies.delete$)(data_2);
  }, data.Indices);
}

function updateCalculated(data) {
  var sumDataCount = function sumDataCount(attribs) {
    return (0, _List.sumBy)(function (a) {
      return a.DataCount;
    }, attribs, {
      GetZero: function GetZero() {
        return 0;
      },
      Add: function Add(x, y) {
        return x + y;
      }
    });
  };

  if (data.RecalcNeeded) {
    data.RecalcNeeded = false;

    if (data.CalcVertexCount) {
      data.VertexCount = sumDataCount(data.VertexCountAttributes);
    }

    if (data.CalcInstanceCount) {
      data.InstanceCount = sumDataCount(data.InstanceCountAttributes);
    }

    if (data.CalcDrawMethod) {
      var hasIndices = data.Indices != null;
      var hasDivisor = data.InstanceCount > 0 ? true : (0, _Seq.exists)(function (a_1) {
        return a_1.Divisor >= 0;
      }, (0, _glcommon.allAttributes)(data));

      if (data.CalcDrawMethod) {
        var matchValue_1 = [hasIndices, hasDivisor];
        data.DrawMethod = matchValue_1[0] ? matchValue_1[1] ? new _webgl_types.GlDrawMethod(3) : new _webgl_types.GlDrawMethod(1) : matchValue_1[1] ? new _webgl_types.GlDrawMethod(2) : new _webgl_types.GlDrawMethod(0);
      }
    }
  }
}

function clean(data) {
  data.IsDirty = false;
  data.IsModelDirty = false;
}

function calcModelMatrix(data) {
  if (data.IsModelDirty) {
    var mat = data.ModelMatrix;
    var ws = data.Scene.WorldScale;
    var scale = data.Scale === 1 ? ws : data.Scale + (ws !== 1 ? ws : 0);
    var matchValue_1 = data.Link;

    if (matchValue_1 != null) {
      var link = matchValue_1;
      (0, _matricies.Mat4__Set_Z33A93963)(mat, (0, _matricies.Mat4__get_Values)(link.ModelMatrix));

      if (ws !== 1) {
        var invScale = 1 / ws;
        (0, _matricies.Mat4__ScaleM_8ED0A5D)(mat, invScale, invScale, invScale);
      }
    } else {
      (0, _matricies.Mat4__SetToIdentity)(mat);
    }

    (0, _matricies.Mat4__TranslateM_8ED0A5D)(mat, data.Position.values[0] * ws, data.Position.values[1] * ws, data.Position.values[2] * ws);
    (0, _matricies.Mat4__RotateZM_6069AC9A)(mat, data.Angle.values[2] * 1);
    (0, _matricies.Mat4__ScaleM_8ED0A5D)(mat, scale, scale, scale);
    data.IsModelDirty = false;
    data.IsParallaxDirty = true;
    (0, _List.iterate)(dirtyModel, data.LinkedChildren);
  }
}

function calcParallaxMatrix(data) {
  if (data.IsParallaxDirty) {
    data.IsParallaxDirty = false;
    var matchValue = data.ParallaxMatrix;

    if (matchValue != null) {
      var mat = matchValue;
      var ws = data.Scene.WorldScale;
      var scale = data.Scale + (ws !== 1 ? ws : 0);
      var position = (0, _vectors.Vec3_op_Addition_Z24FF85E0)(data.Position, data.ParallaxOffset);
      (0, _matricies.Mat4__SetToIdentity)(mat);
      (0, _matricies.Mat4__TranslateM_8ED0A5D)(mat, position.values[0] * ws, position.values[1] * ws, position.values[2] * ws);
      (0, _matricies.Mat4__RotateZM_6069AC9A)(mat, data.Angle.values[2] * 1);
      (0, _matricies.Mat4__ScaleM_8ED0A5D)(mat, scale, scale, scale);
    }
  }
}

function isParallaxCamera(camera, data) {
  return camera === data.ParallaxCamera;
}

function updateModelMatrix(camera, data) {
  var matchValue = tryGetUniform("modelMat")(data);

  if (matchValue != null) {
    var modelMat = matchValue;
    calcModelMatrix(data);
    calcParallaxMatrix(data);
    var mat_1;
    var matchValue_1 = [isParallaxCamera(camera, data), data.ParallaxMatrix];
    var pattern_matching_result;

    if (matchValue_1[0]) {
      if (matchValue_1[1] != null) {
        pattern_matching_result = 0;
      } else {
        pattern_matching_result = 1;
      }
    } else {
      pattern_matching_result = 1;
    }

    switch (pattern_matching_result) {
      case 0:
        {
          var mat = matchValue_1[1];
          mat_1 = mat;
          break;
        }

      case 1:
        {
          mat_1 = data.ModelMatrix;
          break;
        }
    }

    (0, _gluniform.setValue)((0, _matricies.Mat4__get_Values)(mat_1), modelMat);
  }
}

function updateParallax(camera, data) {
  var matchValue = data.ParallaxCamera;

  if (matchValue != null) {
    var cam = matchValue;
    var isParallaxCam = isParallaxCamera(camera, data);

    if (isParallaxCam ? !(0, _Util.equals)(data.ParallaxLastPosition, cam.LookAt) : false) {
      var delta = (0, _vectors.Vec3_op_Subtraction_Z24FF85E0)(data.ParallaxLastPosition, cam.LookAt);
      var frac = 1 - 1 / data.ParallaxDistance;
      (0, _vectors.Vec3_op_AdditionAssignment_Z24FF85E0)(data.ParallaxOffset, (0, _vectors.Vec3_op_Multiply_Z18D588CE)((0, _vectors.Vec3_op_UnaryNegation_Z3D47FC51)(delta), frac));
      var other = cam.LookAt;
      var value_3;
      var __4 = data.ParallaxLastPosition.v.contents;
      var x = other.values[0];
      var y = other.values[1];
      var z = other.values[2];
      var __5 = __4.v.contents;
      __5.values[0] = x;
      var __6 = __4.v.contents;
      __6.values[1] = y;
      var __7 = __4.v.contents;
      __7.values[2] = z;
      value_3 = __4.v.contents;
      void value_3;
      data.IsParallaxDirty = true;
    }
  }
}

function updateAttribute(attr) {
  if (attr.tag === 1) {
    var a_1 = attr.fields[0];
    (0, _glinterleaveattribute.update)(a_1);
  } else {
    var a = attr.fields[0];
    (0, _glsingleattribute.update)(a);
  }
}

function update(camera, data) {
  var gl = data.Scene.Canvas.Context;
  (0, _webgl_browser_types.GlCommon_useProgram)(gl, data.ProgramInfo.Program);
  (0, _webgl_browser_types.GlCommon_bindVertexArray)(gl, data.Vao);

  if (data.IsDirty) {
    updateParallax(camera, data);
    updateModelMatrix(camera, data);
  }

  (0, _List.iterate)(function (data_1) {
    (0, _glubo.update)(data_1);
  }, data.Ubos);

  if (data.IsDirty) {
    (0, _List.iterate)(function (data_2) {
      (0, _gluniform.update)(data_2);
    }, data.Uniforms);
    (0, _List.iterate)(function (attr) {
      updateAttribute(attr);
    }, data.Attributes);
    (0, _optionex.call)(function (data_3) {
      (0, _glindicies.update)(data_3);
    }, data.Indices);
    (0, _List.iterate)(function (data_4) {
      (0, _gltexture.update)(data_4);
    }, data.Textures);
    updateCalculated(data);
    clean(data);
  }
}

function render(camera, data) {
  var gl = data.Scene.Canvas.Context;
  update(camera, data);
  (0, _List.iterate)(function (capability) {
    capability(gl);
  }, data.Capabilities);
  var uResolution = tryGetUniform("resolution")(data);

  if (uResolution != null) {
    var bounds = uResolution;
    var values = bounds.Value;
    console.log((0, _Option.some)((0, _String.toText)((0, _String.interpolate)("got resolution: %P()", [values]))));
  }

  var matchValue = data.DrawMethod;

  switch (matchValue.tag) {
    case 4:
      {
        var vertexCount = data.VertexCount + data.VertexCountOffset | 0;
        (0, _webgl_browser_types.GlCommon_drawArrays)(gl, data.DrawPrimitive, data.VertexOffset, vertexCount);
        break;
      }

    case 1:
      {
        var index = data.Indices;
        (0, _webgl_browser_types.GlCommon_drawElements)(gl, data.DrawPrimitive, index.DataCount, index.IndicesType, index.Offset);
        break;
      }

    case 2:
      {
        var vertexCount_1 = data.VertexCount + data.VertexCountOffset | 0;
        var instanceCount = data.InstanceCount + data.InstanceCountOffset | 0;
        (0, _webgl_browser_types.GlCommon_drawArraysInstanced)(gl, data.DrawPrimitive, data.InstanceOffset, vertexCount_1, instanceCount);
        break;
      }

    case 3:
      {
        break;
      }

    default:
      {
        var _vertexCount = data.VertexCount + data.VertexCountOffset | 0;

        (0, _webgl_browser_types.GlCommon_drawArrays)(gl, data.DrawPrimitive, data.VertexOffset, _vertexCount);
      }
  }
}

function setInstanceCount(value, data) {
  data.InstanceCount = value;
  (0, _glcommon.objectRecalcNeeded)(data);
}

function setAngle(angle, data) {
  var value_4;
  var _ = angle;
  var value_3;
  var __4 = data.Angle;
  var x = _.v.contents.values[0];
  var y = _.v.contents.values[1];
  var z = _.v.contents.values[2];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  var __7 = __4.v.contents;
  __7.values[2] = z;
  value_3 = __4.v.contents;
  value_4 = void value_3;
  void undefined;
  dirtyModel(data);
}

function setAngleZ(angle, data) {
  data.Angle.values[2] = angle;
  dirtyModel(data);
}

function setAngleDegrees(angle, data) {
  var __3 = data.Angle;
  var value_3 = (0, _vectors.Vec3__WithXYZ_Z6FDE0AF9)(__3.v.contents, angle.values[0] * 1 * _utils.RAD_PER_DEG, angle.values[1] * 1 * _utils.RAD_PER_DEG, angle.values[2] * 1 * _utils.RAD_PER_DEG, __3.v.contents);
  void value_3;
  dirtyModel(data);
}

function setAngleDegreesZ(angle, data) {
  var value_1 = angle * _utils.RAD_PER_DEG;
  data.Angle.values[2] = value_1;
  dirtyModel(data);
}

function setPositionXYZ(x, y, z, data) {
  var _ = data.Position;
  var value = (0, _vectors.Vec3__WithXYZ_Z6FDE0AF9)(_.v.contents, x, y, z, _.v.contents);
  void value;
  dirtyModel(data);
}

function setPositionXY(x, y, data) {
  setPositionXYZ(x, y, 0, data);
}

function setPosition(position, data) {
  setPositionXYZ(position.values[0], position.values[1], position.values[2], data);
}

function setScale(s, data) {
  data.Scale = s;
  dirtyModel(data);
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","./glcommon.js":"../JS/webgl_data/glcommon.js","../core/vectors.js":"../JS/core/vectors.js","../core/utils.js":"../JS/core/utils.js","../webgl_core/program_utils.js":"../JS/webgl_core/program_utils.js","../webgl_core/webgl_types.js":"../JS/webgl_core/webgl_types.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../core/matricies.js":"../JS/core/matricies.js","../core/optionex.js":"../JS/core/optionex.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","./glbuffer.js":"../JS/webgl_data/glbuffer.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","./glubo.js":"../JS/webgl_data/glubo.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./gluniform.js":"../JS/webgl_data/gluniform.js","./glattribcommonn.js":"../JS/webgl_data/glattribcommonn.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","./glsingleattribute.js":"../JS/webgl_data/glsingleattribute.js","./glcapabilities.js":"../JS/webgl_data/glcapabilities.js","./glattrib.js":"../JS/webgl_data/glattrib.js","./glindicies.js":"../JS/webgl_data/glindicies.js","./glinterleaveattribute.js":"../JS/webgl_data/glinterleaveattribute.js","../webgl_core/webgl_browser_types.js":"../JS/webgl_core/webgl_browser_types.js","./gltexture.js":"../JS/webgl_data/gltexture.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js"}],"../JS/webgl_data/glortho2d.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.clean = clean;
exports.setLookAtXYZ = setLookAtXYZ;
exports.setViewSize = setViewSize;
exports.create = create;
exports.update = update;
exports.render = render;
exports.toWorldO = toWorldO;
exports.containsPoint = containsPoint;
exports.getZoom = getZoom;
exports.zoom = zoom;
exports.zoomBy = zoomBy;
exports.zoomToward = zoomToward;
exports.rotateTo = rotateTo;
exports.rotateBy = rotateBy;

var _glcommon = require("./glcommon.js");

var _vectors = require("../core/vectors.js");

var _bounds = require("../twod/bounds.js");

var _webgl_data = require("./webgl_data.js");

var _matricies = require("../core/matricies.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _globj = require("./globj.js");

var positionZ = 10;

function dirty(data) {
  data.IsDirty = true;
  (0, _glcommon.dirtyScene)(data.Scene);
}

function clean(data) {
  data.IsDirty = false;
}

function updatePosition(data) {
  var lookAt = data.LookAt;
  var __2 = data.Position;
  var value = (0, _vectors.Vec3__WithXYZ_Z6FDE0AF9)(__2.v.contents, lookAt.values[0], lookAt.values[1], positionZ, __2.v.contents);
  void value;
}

function clampViewToWorld(data) {
  var viewCenter;
  var _ = data.LookAt;
  viewCenter = (0, _vectors.Vec2_Create_7B00E9A0)(_.v.contents.values[0], _.v.contents.values[1]);
  var viewBounds = (0, _bounds.BoundsModule_boundsCenterV)(viewCenter, data.ViewSize);
  (0, _bounds.Bounds__ClampM_Z134B2C62)(viewBounds, data.Scene.WorldBounds);
  var __3 = data.LookAt;
  var value = (0, _vectors.Vec3__WithXY_Z50E8266C)(__3.v.contents, (0, _bounds.Bounds__get_Center)(viewBounds), __3.v.contents);
  void value;
  updatePosition(data);
}

function clampViewToViewport(data) {
  var scaledViewportSize = (0, _vectors.Vec2_op_Division_47807E55)((0, _bounds.Bounds__get_Size)(data.ViewportBounds), data.Scene.WorldScale);
  var _ = data.ViewSize;
  var value = (0, _vectors.Vec2__Min_Z50E8264B)(_.v.contents, scaledViewportSize, _.v.contents);
  void value;
  var viewCenter;
  var __1 = data.LookAt;
  viewCenter = (0, _vectors.Vec2_Create_7B00E9A0)(__1.v.contents.values[0], __1.v.contents.values[1]);
  var viewBounds = (0, _bounds.BoundsModule_boundsCenterV)(viewCenter, data.ViewSize);
  var __4 = data.LookAt;
  var value_1 = (0, _vectors.Vec3__WithXY_Z50E8266C)(__4.v.contents, (0, _bounds.Bounds__get_Center)(viewBounds), __4.v.contents);
  void value_1;
}

function clampView(data) {
  clampViewToViewport(data);
  clampViewToWorld(data);
}

function clampViewportToScene(data) {
  (0, _bounds.Bounds__ClampM_Z134B2C62)(data.ViewportBounds, data.Scene.SceneBounds);
}

function setLookAtXYZ(x, y, z, data) {
  var _ = data.LookAt;
  var value = (0, _vectors.Vec3__WithXYZ_Z6FDE0AF9)(_.v.contents, x, y, z, _.v.contents);
  void value;
  clampView(data);
  dirty(data);
}

function setViewSize(size, data) {
  var value = (0, _vectors.Vec2__Min_Z50E8264B)(size, (0, _bounds.Bounds__get_Size)(data.Scene.WorldBounds), data.ViewSize);
  void value;

  if (data.UseViewSizeAspect) {
    var viewps = (0, _bounds.Bounds__get_Size)(data.ViewportBounds);
    var __3 = data.ViewSize;
    var value_1 = (0, _vectors.Vec2__WithY_Z6C68B1C0)(__3.v.contents, data.ViewSize.values[0] * viewps.values[1] / viewps.values[0], __3.v.contents);
    void value_1;
  }

  clampView(data);
  dirty(data);
}

function apply(props, data) {
  var loop = function loop(props_1_mut, data_1_mut) {
    loop: while (true) {
      var props_1 = props_1_mut,
          data_1 = data_1_mut;

      if (props_1.tail != null) {
        var t = props_1.tail;
        var h = props_1.head;

        switch (h.tag) {
          case 1:
            {
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, false, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 2:
            {
              var x_1 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, x_1, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 3:
            {
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask | 16384, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 4:
            {
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask | 256, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 5:
            {
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask | 1024, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 6:
            {
              var x_2 = h.fields[0] | 0;
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, x_2, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 7:
            {
              var x_3 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, x_3, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 8:
            {
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, false, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 9:
            {
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, false, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 10:
            {
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, false, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 11:
            {
              props_1_mut = t;
              data_1_mut = data_1;
              continue loop;
            }

          case 12:
            {
              var x_4 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, x_4, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 13:
            {
              var x_5 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, x_5, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 14:
            {
              var x_6 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, x_6, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 15:
            {
              var x_7 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, x_7, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 16:
            {
              var x_8 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, x_8, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 17:
            {
              var x_9 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, x_9, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 18:
            {
              var x_10 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, x_10, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          case 19:
            {
              var x_11 = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, data_1.Name, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, x_11, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }

          default:
            {
              var x = h.fields[0];
              props_1_mut = t;
              data_1_mut = new _webgl_data.Data_GlCameraData(data_1.Id, data_1.Kind, x, data_1.IsDirty, data_1.Scene, data_1.ClearViewport, data_1.CameraBackground, data_1.ClearMask, data_1.BorderWidth, data_1.AutoSizeViewport, data_1.UseViewSizeAspect, data_1.AutoPosition, data_1.Position, data_1.LookAt, data_1.ViewSize, data_1.ViewportBounds, data_1.ScissorBounds, data_1.Up, data_1.Near, data_1.Far, data_1.Aspect, data_1.Fov, data_1.ProjectionMatrix, data_1.ViewMatrix);
              continue loop;
            }
        }
      } else {
        return data_1;
      }

      break;
    }
  };

  return loop(props, data);
}

function create(props, scene) {
  var worldBounds = scene.WorldBounds;
  var viewport = (0, _bounds.Bounds__Clone)(scene.SceneBounds);
  var scaledViewportSize = (0, _vectors.Vec2_op_Division_47807E55)((0, _bounds.Bounds__get_Size)(viewport), scene.WorldScale);

  var updateScissorBounds = function updateScissorBounds(data) {
    return new _webgl_data.Data_GlCameraData(data.Id, data.Kind, data.Name, data.IsDirty, data.Scene, data.ClearViewport, data.CameraBackground, data.ClearMask, data.BorderWidth, data.AutoSizeViewport, data.UseViewSizeAspect, data.AutoPosition, data.Position, data.LookAt, data.ViewSize, (0, _bounds.Bounds__Inflate_5E38073B)(data.ViewportBounds, -data.BorderWidth), data.ViewportBounds, data.Up, data.Near, data.Far, data.Aspect, data.Fov, data.ProjectionMatrix, data.ViewMatrix);
  };

  var adjustParams = function adjustParams(data_1) {
    clampViewportToScene(data_1);
    setViewSize(data_1.ViewSize, data_1);
    var center = data_1.LookAt;
    setLookAtXYZ(center.values[0], center.values[1], center.values[2], data_1);
    return data_1;
  };

  return adjustParams(updateScissorBounds(apply(props, new _webgl_data.Data_GlCameraData(0, new _webgl_data.Data_GlCameraKind(0), "", true, scene, true, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0, 0, 1), 16384, 0, true, true, true, (0, _vectors.Vec3_Create_Z18D5882D)((0, _bounds.Bounds__get_Center)(worldBounds), positionZ), (0, _vectors.Vec3_Create_Z18D5882D)((0, _bounds.Bounds__get_Center)(worldBounds), 0), (0, _vectors.Vec2__Min_Z50E8264B)((0, _bounds.Bounds__get_Size)(worldBounds), scaledViewportSize), viewport, viewport, (0, _vectors.Vec3_Create_8ED0A5D)(0, 1, 0), 0, 1000, 0, 3.141592653589793, (0, _matricies.Mat4_Create)(), (0, _matricies.Mat4_Create)()))));
}

function update(data) {
  if (data.IsDirty) {
    clean(data);
    var cam = data;
    var ws = cam.Scene.WorldScale;
    var halfSize = (0, _vectors.Vec2_op_Multiply_47807E55)((0, _vectors.Vec2_op_Multiply_47807E55)(cam.ViewSize, ws), 0.5);
    var hw = halfSize.values[0];
    var hh = halfSize.values[1];
    var position = (0, _vectors.Vec3_op_Multiply_Z18D588CE)(cam.Position, ws);
    var lookAt = (0, _vectors.Vec3_op_Multiply_Z18D588CE)(cam.LookAt, ws);
    (0, _matricies.Mat4__LookAtM_Z6484271)(cam.ViewMatrix, position, lookAt, cam.Up);
    (0, _matricies.Mat4__OrthoM_357D8320)(cam.ProjectionMatrix, -hw, hw, -hh, hh, cam.Near, cam.Far);
  }
}

function render(data) {
  update(data);
  (0, _Seq.iterate)(function (data_2) {
    (0, _globj.render)(data, data_2);
  }, (0, _glcommon.objects)(data.Scene));
}

function toWorldO(point, result, data) {
  var __2;

  var gl = data.Scene.Canvas.Context;
  var vb = data.ViewportBounds;
  var minViewport = (0, _bounds.Bounds__get_Min)(vb);
  var __1 = minViewport;
  var value = (0, _vectors.Vec2__WithY_Z6C68B1C0)(__1.v.contents, gl.canvas.height - minViewport.values[1] - (0, _bounds.Bounds__get_Height)(vb), __1.v.contents);
  void value;
  var minWorld = (0, _vectors.Vec2_op_Subtraction_Z24FF8540)((__2 = data.LookAt, (0, _vectors.Vec2_Create_7B00E9A0)(__2.v.contents.values[0], __2.v.contents.values[1])), (0, _vectors.Vec2_op_Multiply_47807E55)(data.ViewSize, 0.5));
  var pos = (0, _vectors.Vec2_op_Addition_Z24FF8540)(minWorld, (0, _vectors.Vec2_op_Multiply_Z24FF8540)((0, _vectors.Vec2__Sub_Z50E8264B)(point, minViewport), (0, _vectors.Vec2_op_Division_Z24FF8540)(data.ViewSize, (0, _bounds.Bounds__get_Size)(vb))));
  var __7 = result;
  var value_1 = (0, _vectors.Vec3__WithXYZ_Z6FDE0AF9)(__7.v.contents, pos.values[0], pos.values[1], 0, __7.v.contents);
  void value_1;
  return result;
}

function containsPoint(point, data) {
  var _, __3;

  var worldPoint = toWorldO(point, (0, _vectors.Vec3_Create)(), data);
  var viewBounds = (0, _bounds.BoundsModule_boundsCenterV)((_ = data.LookAt, (0, _vectors.Vec2_Create_7B00E9A0)(_.v.contents.values[0], _.v.contents.values[1])), data.ViewSize);
  return (0, _bounds.Bounds__Contains_Z3D47FC52)(viewBounds, (__3 = worldPoint, (0, _vectors.Vec2_Create_7B00E9A0)(__3.v.contents.values[0], __3.v.contents.values[1])));
}

function getZoom(data) {
  return (0, _bounds.Bounds__get_Size)(data.Scene.WorldBounds).values[0] / data.ViewSize.values[0];
}

function zoom(amount, data) {
  if (amount > 0) {
    setViewSize((0, _vectors.Vec2__Scale_Z6C68B1C0)((0, _bounds.Bounds__get_Size)(data.Scene.WorldBounds), amount), data);
  }
}

function zoomBy(amount, data) {
  if (amount > 0) {
    var _ = data.ViewSize;
    var value = (0, _vectors.Vec2__Scale_Z6C68B1C0)(_.v.contents, amount, _.v.contents);
    void value;
    setViewSize(data.ViewSize, data);
  }
}

function zoomToward(center, amount, data) {
  var delta = (0, _vectors.Vec3_op_Subtraction_Z24FF85E0)(center, data.LookAt);
  var _ = delta;
  var value = (0, _vectors.Vec3__Scale_667C46A7)(_.v.contents, amount - 1, _.v.contents);
  void value;
  zoomBy(amount, data);
  var center_1 = (0, _vectors.Vec3_op_Subtraction_Z24FF85E0)(data.LookAt, delta);
  setLookAtXYZ(center_1.values[0], center_1.values[1], center_1.values[2], data);
}

function rotateTo(angle, data) {
  var up;
  var _ = data.Up;
  up = (0, _vectors.Vec2_Create_7B00E9A0)(_.v.contents.values[0], _.v.contents.values[1]);
  var __3 = up;
  var value = (0, _vectors.Vec2__SetAngle_Z24CF60FF)(__3.v.contents, angle, __3.v.contents);
  void value;
  var __4 = data.Up;
  var value_1 = (0, _vectors.Vec3__WithXY_Z50E8266C)(__4.v.contents, up, __4.v.contents);
  void value_1;
  dirty(data);
}

function rotateBy(angle, data) {
  var up;
  var _ = data.Up;
  up = (0, _vectors.Vec2_Create_7B00E9A0)(_.v.contents.values[0], _.v.contents.values[1]);
  var __3 = up;
  var value = (0, _vectors.Vec2__Rotate_Z24CF60FF)(__3.v.contents, angle, __3.v.contents);
  void value;
  var __4 = data.Up;
  var value_1 = (0, _vectors.Vec3__WithXY_Z50E8266C)(__4.v.contents, up, __4.v.contents);
  void value_1;
  dirty(data);
}
},{"./glcommon.js":"../JS/webgl_data/glcommon.js","../core/vectors.js":"../JS/core/vectors.js","../twod/bounds.js":"../JS/twod/bounds.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","../core/matricies.js":"../JS/core/matricies.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","./globj.js":"../JS/webgl_data/globj.js"}],"../JS/webgl_data/glcamera.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.dirty = dirty;
exports.getGlViewportValues = getGlViewportValues;
exports.update = update;
exports.render = render;
exports.toWorldO = toWorldO;
exports.containsPoint = containsPoint;
exports.getZoom = getZoom;
exports.panByXY = panByXY;
exports.panToXYZ = panToXYZ;
exports.zoom = zoom;
exports.zoomBy = zoomBy;
exports.zoomToward = zoomToward;
exports.rotateTo = rotateTo;
exports.rotateBy = rotateBy;

var _glcommon = require("./glcommon.js");

var _bounds = require("../twod/bounds.js");

var _vectors = require("../core/vectors.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _glortho2d = require("./glortho2d.js");

function dirty(data) {
  data.IsDirty = true;
  (0, _glcommon.dirtyScene)(data.Scene);
}

function getGlViewportValues(data) {
  var gl = data.Scene.Canvas.Context;
  var vp = (0, _bounds.Bounds__get_Values)(data.ViewportBounds);
  var vpy = gl.canvas.height - vp[1] - vp[3];
  vp[1] = vpy;
  return vp;
}

function resetViewport(data) {
  var gl = data.Scene.Canvas.Context;
  var vp = getGlViewportValues(data);
  gl.viewport(vp[0], vp[1], vp[2], vp[3]);
}

function clearViewport(data) {
  var gl = data.Scene.Canvas.Context;
  var sb = (0, _bounds.Bounds__get_Values)(data.ScissorBounds);
  var cc = (0, _vectors.Vec4__get_Values)(data.CameraBackground);
  var sby = gl.canvas.height - sb[1] - sb[3];
  gl.scissor(sb[0], sby, sb[2], sb[3]);
  gl.clearColor(cc[0], cc[1], cc[2], cc[3]);
  gl.enable(gl.SCISSOR_TEST);
  gl.clear(data.ClearMask);
  gl.disable(gl.SCISSOR_TEST);
}

function update(data) {
  if (data.IsDirty) {
    if (data.Kind.tag === 1) {
      var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera update not implemented", []));
      throw new Error(msg);
    } else {
      (0, _glortho2d.update)(data);
    }
  }
}

function render(data) {
  update(data);

  if (data.ClearViewport) {
    clearViewport(data);
  }

  resetViewport(data);

  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera rendering not implemented", []));
    throw new Error(msg);
  } else {
    (0, _glortho2d.render)(data);
  }
}

function toWorldO(point, result, data) {
  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera conversions not implemented", []));
    throw new Error(msg);
  } else {
    return (0, _glortho2d.toWorldO)(point, result, data);
  }
}

function containsPoint(point, data) {
  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera containsPoint not implemented", []));
    throw new Error(msg);
  } else {
    return (0, _glortho2d.containsPoint)(point, data);
  }
}

function getZoom(data) {
  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera zooming not implemented", []));
    throw new Error(msg);
  } else {
    return (0, _glortho2d.getZoom)(data);
  }
}

function panByXY(x, y, data) {
  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera panning not implemented", []));
    throw new Error(msg);
  } else {
    var data_1 = data;
    var lookAt = data_1.LookAt;
    var data_2 = data_1;
    (0, _glortho2d.setLookAtXYZ)(lookAt.values[0] + x, lookAt.values[1] + y, data_2.LookAt.values[2], data_2);
  }
}

function panToXYZ(x, y, z, data) {
  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera panning not implemented", []));
    throw new Error(msg);
  } else {
    (0, _glortho2d.setLookAtXYZ)(x, y, z, data);
  }
}

function zoom(amount, data) {
  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera zooming not implemented", []));
    throw new Error(msg);
  } else {
    (0, _glortho2d.zoom)(amount, data);
  }
}

function zoomBy(amount, data) {
  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera zooming not implemented", []));
    throw new Error(msg);
  } else {
    (0, _glortho2d.zoomBy)(amount, data);
  }
}

function zoomToward(center, amount, data) {
  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera zooming not implemented", []));
    throw new Error(msg);
  } else {
    (0, _glortho2d.zoomToward)(center, amount, data);
  }
}

function rotateTo(angle, data) {
  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera rotating not implemented", []));
    throw new Error(msg);
  } else {
    (0, _glortho2d.rotateTo)(angle, data);
  }
}

function rotateBy(angle, data) {
  if (data.Kind.tag === 1) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Perspective camera rotating not implemented", []));
    throw new Error(msg);
  } else {
    (0, _glortho2d.rotateBy)(angle, data);
  }
}
},{"./glcommon.js":"../JS/webgl_data/glcommon.js","../twod/bounds.js":"../JS/twod/bounds.js","../core/vectors.js":"../JS/core/vectors.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","./glortho2d.js":"../JS/webgl_data/glortho2d.js"}],"../JS/webgl_data/glscene.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.clean = clean;
exports.create = create;
exports.clearSceneBackground = clearSceneBackground;
exports.render = render;
exports.pixelsToWorld = pixelsToWorld;
exports.worldToPixels = worldToPixels;
exports.removeObject = exports.addObject = exports.removeCamera = exports.addCamera = exports.tryGetObject = exports.getObject = exports.tryGetCamera = exports.getCamera = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _webgl_data = require("./webgl_data.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _glcommon = require("./glcommon.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _glortho2d = require("./glortho2d.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _bounds = require("../twod/bounds.js");

var _globj = require("./globj.js");

var _vectors = require("../core/vectors.js");

var _glcamera = require("./glcamera.js");

var _gluniform = require("./gluniform.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _matricies = require("../core/matricies.js");

var _optionex = require("../core/optionex.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var Builder = /*#__PURE__*/function (_Record) {
  _inherits(Builder, _Record);

  var _super = _createSuper(Builder);

  function Builder(CameraCreators, ObjectCreators, SharedCreator, Data) {
    var _this;

    _classCallCheck(this, Builder);

    _this = _super.call(this);
    _this.CameraCreators = CameraCreators;
    _this.ObjectCreators = ObjectCreators;
    _this.SharedCreator = SharedCreator;
    _this.Data = Data;
    return _this;
  }

  return Builder;
}(_Types.Record);

function Builder$reflection() {
  return (0, _Reflection.record_type)("GlScene.Builder", [], Builder, function () {
    return [["CameraCreators", (0, _Reflection.list_type)((0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlCamProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlSceneData$reflection)(), (0, _webgl_data.Data_GlCameraData$reflection)())))], ["ObjectCreators", (0, _Reflection.list_type)((0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlObjProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlSceneData$reflection)(), (0, _webgl_data.Data_GlObjData$reflection)())))], ["SharedCreator", (0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlObjProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlSceneData$reflection)(), (0, _webgl_data.Data_GlObjData$reflection)()))], ["Data", (0, _webgl_data.Data_GlSceneData$reflection)()]];
  });
}

var getCamera = function getCamera(name) {
  return function (data) {
    return (0, _glcommon.getCamera)(name, data);
  };
};

exports.getCamera = getCamera;

var tryGetCamera = function tryGetCamera(name) {
  return function (data) {
    return (0, _glcommon.tryGetCamera)(name, data);
  };
};

exports.tryGetCamera = tryGetCamera;

var getObject = function getObject(name) {
  return function (data) {
    return (0, _glcommon.getObject)(name, data);
  };
};

exports.getObject = getObject;

var tryGetObject = function tryGetObject(name) {
  return function (data) {
    return (0, _glcommon.tryGetObject)(name, data);
  };
};

exports.tryGetObject = tryGetObject;

var addCamera = function addCamera(creator) {
  return function (data) {
    return (0, _glcommon.addCamera)(creator, data);
  };
};

exports.addCamera = addCamera;

var removeCamera = function removeCamera(cam) {
  return function (data) {
    return (0, _glcommon.removeCamera)(cam, data);
  };
};

exports.removeCamera = removeCamera;

var addObject = function addObject(creator) {
  return function (data) {
    return (0, _glcommon.addObject)(creator, data);
  };
};

exports.addObject = addObject;

var removeObject = function removeObject(globj) {
  return function (data) {
    return (0, _glcommon.removeObject)(globj, data);
  };
};

exports.removeObject = removeObject;

function clean(data) {
  data.IsDirty = false;
}

function applyCreators(builder) {
  var data = builder.Data;

  var createCamera = function createCamera(creator) {
    return creator((0, _List.empty)(), data);
  };

  var createCameras = function createCameras(creators) {
    return (0, _List.map)((0, _Util.mapCurriedArgs)(createCamera, [[0, 2]]), creators);
  };

  var createObject = function createObject(creator_1) {
    return creator_1((0, _List.empty)(), data);
  };

  var createObjects = function createObjects(creators_1) {
    return (0, _List.map)((0, _Util.mapCurriedArgs)(createObject, [[0, 2]]), creators_1);
  };

  var createShared = function createShared(creator_2) {
    return creator_2((0, _List.singleton)(new _webgl_data.BuilderTypes_GlObjProp(0, "shared")), data);
  };

  var addObjects = function addObjects(data_1) {
    (0, _List.iterate)((0, _Util.mapCurriedArgs)(function (c) {
      var value = (0, _glcommon.addObject)(c, data_1);
      void value;
    }, [[0, 2]]), (0, _List.reverse)(builder.ObjectCreators));
    return data_1;
  };

  if (builder.CameraCreators.tail == null) {
    builder.CameraCreators = (0, _List.singleton)(function (p) {
      return function (d) {
        return (0, _glortho2d.create)((0, _List.append)((0, _List.singleton)(new _webgl_data.BuilderTypes_GlCamProp(0, "defaultCamera")), p), d);
      };
    });
  }

  data.Shared = createShared(builder.SharedCreator);
  data.Cameras = createCameras((0, _List.reverse)(builder.CameraCreators));
  return addObjects(data);
}

function build(builder) {
  return applyCreators(builder);
}

function createLayer(index) {
  return new _webgl_data.Data_GlLayerData(index, (0, _List.empty)());
}

function apply(props, builder) {
  var loop = function loop(props_1_mut, b_mut) {
    var inputRecord_1, inputRecord_2, inputRecord_3, inputRecord_4, inputRecord_5, inputRecord_6, inputRecord_7, inputRecord_8, inputRecord_9, inputRecord_10, inputRecord_11, inputRecord;

    var _loop = function _loop() {
      var props_1 = props_1_mut,
          b = b_mut;

      var updateData = function updateData(data) {
        b.Data = data;
        return b;
      };

      var addShared = function addShared(creator) {
        b.SharedCreator = creator;
        return b;
      };

      var addCamera_1 = function addCamera_1(creator_1) {
        b.CameraCreators = (0, _List.cons)((0, _Util.curry)(2, creator_1), b.CameraCreators);
        return b;
      };

      var addObject_1 = function addObject_1(creator_2) {
        b.ObjectCreators = (0, _List.cons)((0, _Util.curry)(2, creator_2), b.ObjectCreators);
        return b;
      };

      var createLayers = function createLayers(count) {
        return (0, _Array.map)(createLayer, Int32Array.from((0, _Seq.rangeNumber)(0, 1, count - 1)));
      };

      if (props_1.tail != null) {
        var t = props_1.tail;
        var h = props_1.head;

        switch (h.tag) {
          case 3:
            {
              var x_1 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_1 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_1.Id, inputRecord_1.Name, inputRecord_1.IsDirty, inputRecord_1.Canvas, x_1, inputRecord_1.ClearMask, inputRecord_1.WorldBounds, inputRecord_1.SceneBounds, inputRecord_1.WorldScale, inputRecord_1.LineWidthScale, inputRecord_1.ClearSceneBackground, inputRecord_1.Layers, inputRecord_1.DefaultLayer, inputRecord_1.Shared, inputRecord_1.Cameras)));
              return "continue|loop";
            }

          case 4:
            {
              props_1_mut = t;
              b_mut = updateData((inputRecord_2 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_2.Id, inputRecord_2.Name, inputRecord_2.IsDirty, inputRecord_2.Canvas, inputRecord_2.SceneBackground, b.Data.ClearMask | 16384, inputRecord_2.WorldBounds, inputRecord_2.SceneBounds, inputRecord_2.WorldScale, inputRecord_2.LineWidthScale, inputRecord_2.ClearSceneBackground, inputRecord_2.Layers, inputRecord_2.DefaultLayer, inputRecord_2.Shared, inputRecord_2.Cameras)));
              return "continue|loop";
            }

          case 5:
            {
              props_1_mut = t;
              b_mut = updateData((inputRecord_3 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_3.Id, inputRecord_3.Name, inputRecord_3.IsDirty, inputRecord_3.Canvas, inputRecord_3.SceneBackground, b.Data.ClearMask | 256, inputRecord_3.WorldBounds, inputRecord_3.SceneBounds, inputRecord_3.WorldScale, inputRecord_3.LineWidthScale, inputRecord_3.ClearSceneBackground, inputRecord_3.Layers, inputRecord_3.DefaultLayer, inputRecord_3.Shared, inputRecord_3.Cameras)));
              return "continue|loop";
            }

          case 6:
            {
              props_1_mut = t;
              b_mut = updateData((inputRecord_4 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_4.Id, inputRecord_4.Name, inputRecord_4.IsDirty, inputRecord_4.Canvas, inputRecord_4.SceneBackground, b.Data.ClearMask | 1024, inputRecord_4.WorldBounds, inputRecord_4.SceneBounds, inputRecord_4.WorldScale, inputRecord_4.LineWidthScale, inputRecord_4.ClearSceneBackground, inputRecord_4.Layers, inputRecord_4.DefaultLayer, inputRecord_4.Shared, inputRecord_4.Cameras)));
              return "continue|loop";
            }

          case 7:
            {
              var x_2 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_5 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_5.Id, inputRecord_5.Name, inputRecord_5.IsDirty, inputRecord_5.Canvas, inputRecord_5.SceneBackground, x_2, inputRecord_5.WorldBounds, inputRecord_5.SceneBounds, inputRecord_5.WorldScale, inputRecord_5.LineWidthScale, inputRecord_5.ClearSceneBackground, inputRecord_5.Layers, inputRecord_5.DefaultLayer, inputRecord_5.Shared, inputRecord_5.Cameras)));
              return "continue|loop";
            }

          case 8:
            {
              var x_3 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_6 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_6.Id, inputRecord_6.Name, inputRecord_6.IsDirty, inputRecord_6.Canvas, inputRecord_6.SceneBackground, inputRecord_6.ClearMask, x_3, inputRecord_6.SceneBounds, inputRecord_6.WorldScale, inputRecord_6.LineWidthScale, inputRecord_6.ClearSceneBackground, inputRecord_6.Layers, inputRecord_6.DefaultLayer, inputRecord_6.Shared, inputRecord_6.Cameras)));
              return "continue|loop";
            }

          case 9:
            {
              var x_4 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_7 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_7.Id, inputRecord_7.Name, inputRecord_7.IsDirty, inputRecord_7.Canvas, inputRecord_7.SceneBackground, inputRecord_7.ClearMask, inputRecord_7.WorldBounds, x_4, inputRecord_7.WorldScale, inputRecord_7.LineWidthScale, inputRecord_7.ClearSceneBackground, inputRecord_7.Layers, inputRecord_7.DefaultLayer, inputRecord_7.Shared, inputRecord_7.Cameras)));
              return "continue|loop";
            }

          case 10:
            {
              var x_5 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_8 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_8.Id, inputRecord_8.Name, inputRecord_8.IsDirty, inputRecord_8.Canvas, inputRecord_8.SceneBackground, inputRecord_8.ClearMask, inputRecord_8.WorldBounds, inputRecord_8.SceneBounds, x_5, 1 / x_5, inputRecord_8.ClearSceneBackground, inputRecord_8.Layers, inputRecord_8.DefaultLayer, inputRecord_8.Shared, inputRecord_8.Cameras)));
              return "continue|loop";
            }

          case 11:
            {
              props_1_mut = t;
              b_mut = updateData((inputRecord_9 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_9.Id, inputRecord_9.Name, inputRecord_9.IsDirty, inputRecord_9.Canvas, inputRecord_9.SceneBackground, inputRecord_9.ClearMask, inputRecord_9.WorldBounds, inputRecord_9.SceneBounds, inputRecord_9.WorldScale, inputRecord_9.LineWidthScale, false, inputRecord_9.Layers, inputRecord_9.DefaultLayer, inputRecord_9.Shared, inputRecord_9.Cameras)));
              return "continue|loop";
            }

          case 1:
            {
              var x_6 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_10 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_10.Id, inputRecord_10.Name, inputRecord_10.IsDirty, inputRecord_10.Canvas, inputRecord_10.SceneBackground, inputRecord_10.ClearMask, inputRecord_10.WorldBounds, inputRecord_10.SceneBounds, inputRecord_10.WorldScale, inputRecord_10.LineWidthScale, inputRecord_10.ClearSceneBackground, createLayers(x_6), inputRecord_10.DefaultLayer, inputRecord_10.Shared, inputRecord_10.Cameras)));
              return "continue|loop";
            }

          case 2:
            {
              var x_7 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_11 = b.Data, new _webgl_data.Data_GlSceneData(inputRecord_11.Id, inputRecord_11.Name, inputRecord_11.IsDirty, inputRecord_11.Canvas, inputRecord_11.SceneBackground, inputRecord_11.ClearMask, inputRecord_11.WorldBounds, inputRecord_11.SceneBounds, inputRecord_11.WorldScale, inputRecord_11.LineWidthScale, inputRecord_11.ClearSceneBackground, inputRecord_11.Layers, x_7, inputRecord_11.Shared, inputRecord_11.Cameras)));
              return "continue|loop";
            }

          case 13:
            {
              var x_8 = h.fields[0];
              props_1_mut = t;
              b_mut = addShared(x_8);
              return "continue|loop";
            }

          case 12:
            {
              var x_9 = h.fields[0];
              props_1_mut = t;
              b_mut = addCamera_1(x_9);
              return "continue|loop";
            }

          case 14:
            {
              var x_10 = h.fields[0];
              props_1_mut = t;
              b_mut = addObject_1(x_10);
              return "continue|loop";
            }

          default:
            {
              var x = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord = b.Data, new _webgl_data.Data_GlSceneData(inputRecord.Id, x, inputRecord.IsDirty, inputRecord.Canvas, inputRecord.SceneBackground, inputRecord.ClearMask, inputRecord.WorldBounds, inputRecord.SceneBounds, inputRecord.WorldScale, inputRecord.LineWidthScale, inputRecord.ClearSceneBackground, inputRecord.Layers, inputRecord.DefaultLayer, inputRecord.Shared, inputRecord.Cameras)));
              return "continue|loop";
            }
        }
      } else {
        return {
          v: b
        };
      }

      return "break";
    };

    loop: while (true) {
      var _ret = _loop();

      if (_ret === "continue|loop") continue loop;
      if (_ret === "break") break;
      if (_typeof(_ret) === "object") return _ret.v;
    }
  };

  return loop(props, builder);
}

function create(canvas, props) {
  var gl = canvas.Context;
  var worldBounds = (0, _bounds.Bounds__Clone)(canvas.WorldBounds);

  var sharedCreator = function sharedCreator(props_1, scene) {
    return (0, _globj.create)("emptyVertex", "emptyFragment", canvas.Global, scene, props_1);
  };

  return build(apply(props, new Builder((0, _List.empty)(), (0, _List.empty)(), sharedCreator, new _webgl_data.Data_GlSceneData(0, "", true, canvas, (0, _vectors.Vec4_Create)(), 16384, worldBounds, (0, _bounds.BoundsModule_boundsSizeV)(canvas.Size), 1, 1, false, [createLayer(0)], 0, void 0, (0, _List.empty)()))));
}

function clearSceneBackground(data) {
  var gl = data.Canvas.Context;
  var vp = (0, _bounds.Bounds__get_Values)(data.SceneBounds);
  var cc = (0, _vectors.Vec4__get_Values)(data.SceneBackground);
  gl.scissor(vp[0], vp[1], vp[2], vp[3]);
  gl.clearColor(cc[0], cc[1], cc[2], cc[3]);
  gl.enable(gl.SCISSOR_TEST);
  gl.clear(data.ClearMask);
  gl.disable(gl.SCISSOR_TEST);
}

function render(data) {
  var updateCameraViewport = function updateCameraViewport(camera, viewport) {
    var vp = (0, _glcamera.getGlViewportValues)(camera);
    (0, _gluniform.setValue)(vp, viewport);
  };

  var updateCameraZoom = function updateCameraZoom(camera_1, zoom) {
    var z = (0, _glcamera.getZoom)(camera_1);
    (0, _gluniform.setValue)(z, zoom);
  };

  var renderCamera = function renderCamera(camera_2) {
    (0, _globj.update)(camera_2, data.Shared);
    (0, _glcamera.render)(camera_2);
  };

  var renderCameraMat = function renderCameraMat(projMat, viewMat, camera_3) {
    (0, _glcamera.update)(camera_3);
    (0, _gluniform.setValue)((0, _matricies.Mat4__get_Values)(camera_3.ProjectionMatrix), projMat);
    (0, _gluniform.setValue)((0, _matricies.Mat4__get_Values)(camera_3.ViewMatrix), viewMat);
    (0, _globj.update)(camera_3, data.Shared);
    (0, _glcamera.render)(camera_3);
  };

  if (data.IsDirty) {
    if (data.ClearSceneBackground) {
      clearSceneBackground(data);
    }

    var glob = data.Canvas.Global;
    var viewport_1 = (0, _globj.tryGetUniform)("viewport")(data.Shared);
    var projMat_1 = (0, _globj.tryGetUniform)("projMat")(data.Shared);
    var viewMat_1 = (0, _globj.tryGetUniform)("viewMat")(data.Shared);
    var zoom_1 = (0, _globj.tryGetUniform)("zoom")(data.Shared);
    var matchValue = (0, _globj.tryGetUniform)("worldScale")(glob);

    if (matchValue != null) {
      var uWorldScale = matchValue;
      (0, _gluniform.setValue)(data.WorldScale, uWorldScale);
      (0, _globj.update)((0, _List.head)(data.Cameras), glob);
    }

    var renderCam = function renderCam(camera_5) {
      (0, _optionex.call)((0, _Util.partialApply)(1, updateCameraViewport, [camera_5]), viewport_1);
      (0, _optionex.call)((0, _Util.partialApply)(1, updateCameraZoom, [camera_5]), zoom_1);
      var matchValue_1 = [projMat_1, viewMat_1];
      var pattern_matching_result, proj, view;

      if (matchValue_1[0] != null) {
        if (matchValue_1[1] != null) {
          pattern_matching_result = 0;
          proj = matchValue_1[0];
          view = matchValue_1[1];
        } else {
          pattern_matching_result = 1;
        }
      } else {
        pattern_matching_result = 1;
      }

      switch (pattern_matching_result) {
        case 0:
          {
            renderCameraMat(proj, view, camera_5);
            break;
          }

        case 1:
          {
            renderCamera(camera_5);
            break;
          }
      }
    };

    (0, _List.iterate)(renderCam, data.Cameras);
    (0, _globj._cleanLinkedBuffers)(data.Shared);
    (0, _Seq.iterate)(function (data_5) {
      (0, _globj._cleanLinkedBuffers)(data_5);
    }, (0, _glcommon.objects)(data));
  }
}

function pixelsToWorld(pixels, data) {
  return pixels * data.LineWidthScale;
}

function worldToPixels(value, data) {
  return value * data.WorldScale * 1;
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./glcommon.js":"../JS/webgl_data/glcommon.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./glortho2d.js":"../JS/webgl_data/glortho2d.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../twod/bounds.js":"../JS/twod/bounds.js","./globj.js":"../JS/webgl_data/globj.js","../core/vectors.js":"../JS/core/vectors.js","./glcamera.js":"../JS/webgl_data/glcamera.js","./gluniform.js":"../JS/webgl_data/gluniform.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../core/matricies.js":"../JS/core/matricies.js","../core/optionex.js":"../JS/core/optionex.js"}],"../JS/webgl_data/glcanvas.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getSceneCount = getSceneCount;
exports.getSceneByIndex = getSceneByIndex;
exports.dirty = dirty;
exports.clean = clean;
exports.create = create;
exports.render = render;
exports.getScene = exports.removeScene = exports.addScene = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _webgl_data_types = require("./webgl_data_types.js");

var _webgl_data = require("./webgl_data.js");

var _glcommon = require("./glcommon.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _utils = require("../core/utils.js");

var _webgl_types = require("../webgl_core/webgl_types.js");

var _MapUtil = require("../.fable/fable-library.3.0.0/MapUtil.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _glscene = require("./glscene.js");

var _vectors = require("../core/vectors.js");

var _globj = require("./globj.js");

var _glcanvasparams = require("./glcanvasparams.js");

var _bounds = require("../twod/bounds.js");

var _glmouse = require("./glmouse.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _gluniform = require("./gluniform.js");

var _optionex = require("../core/optionex.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var Builder = /*#__PURE__*/function (_Record) {
  _inherits(Builder, _Record);

  var _super = _createSuper(Builder);

  function Builder(Canvas, Attributes, PixelStorageParams, GlobalCreator, SceneCreators, Data) {
    var _this;

    _classCallCheck(this, Builder);

    _this = _super.call(this);
    _this.Canvas = Canvas;
    _this.Attributes = Attributes;
    _this.PixelStorageParams = PixelStorageParams;
    _this.GlobalCreator = GlobalCreator;
    _this.SceneCreators = SceneCreators;
    _this.Data = Data;
    return _this;
  }

  return Builder;
}(_Types.Record);

function Builder$reflection() {
  return (0, _Reflection.record_type)("GlCanvas.Builder", [], Builder, function () {
    return [["Canvas", (0, _Reflection.class_type)("Browser.Types.HTMLCanvasElement")], ["Attributes", (0, _Reflection.list_type)((0, _webgl_data_types.GlContextAttribute$reflection)())], ["PixelStorageParams", (0, _Reflection.list_type)((0, _webgl_data_types.GlPixelStorage$reflection)())], ["GlobalCreator", (0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlObjProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlSceneData$reflection)(), (0, _webgl_data.Data_GlObjData$reflection)()))], ["SceneCreators", (0, _Reflection.list_type)((0, _Reflection.lambda_type)((0, _Reflection.list_type)((0, _webgl_data.BuilderTypes_GlSceneProp$reflection)()), (0, _Reflection.lambda_type)((0, _webgl_data.Data_GlCanvasData$reflection)(), (0, _webgl_data.Data_GlSceneData$reflection)())))], ["Data", (0, _webgl_data.Data_GlCanvasData$reflection)()]];
  });
}

var addScene = function addScene(creator) {
  return function (data) {
    return (0, _glcommon.addScene)(creator, data);
  };
};

exports.addScene = addScene;

var removeScene = function removeScene(scene) {
  return function (data) {
    return (0, _glcommon.removeScene)(scene, data);
  };
};

exports.removeScene = removeScene;

var getScene = function getScene(name) {
  return function (data) {
    return (0, _glcommon.getScene)(name, data);
  };
};

exports.getScene = getScene;

function getSceneCount(data) {
  return data.Scenes.length;
}

function getSceneByIndex(index, data) {
  return data.Scenes[index];
}

function dirty(data) {
  data.IsDirty = true;
}

function clean(data) {
  data.IsDirty = false;
}

function applyPixelStorageParams(gl, builder) {
  var loop = function loop(storageParams_mut) {
    loop: while (true) {
      var storageParams = storageParams_mut;

      if (storageParams.tail != null) {
        var remaining = storageParams.tail;
        var param = storageParams.head;

        switch (param.tag) {
          case 1:
            {
              var x_1 = param.fields[0] | 0;
              var param_2 = 3317;
              var value_1 = x_1 | 0;
              gl.pixelStorei(param_2, value_1);
              break;
            }

          case 2:
            {
              var param_3 = 37440;
              var value_2 = 1;
              gl.pixelStorei(param_3, value_2);
              break;
            }

          case 3:
            {
              var param_4 = 37441;
              var value_3 = 1;
              gl.pixelStorei(param_4, value_3);
              break;
            }

          case 4:
            {
              var x_2 = param.fields[0] | 0;
              var param_5 = 37443;
              var value_4 = x_2 | 0;
              gl.pixelStorei(param_5, value_4);
              break;
            }

          case 5:
            {
              var x_3 = param.fields[0] | 0;
              var param_6 = 3330;
              var value_5 = x_3 | 0;
              gl.pixelStorei(param_6, value_5);
              break;
            }

          case 6:
            {
              var x_4 = param.fields[0] | 0;
              var param_7 = 3332;
              var value_6 = x_4 | 0;
              gl.pixelStorei(param_7, value_6);
              break;
            }

          case 7:
            {
              var x_5 = param.fields[0] | 0;
              var param_8 = 3331;
              var value_7 = x_5 | 0;
              gl.pixelStorei(param_8, value_7);
              break;
            }

          case 8:
            {
              var x_6 = param.fields[0] | 0;
              var param_9 = 3314;
              var value_8 = x_6 | 0;
              gl.pixelStorei(param_9, value_8);
              break;
            }

          case 9:
            {
              var x_7 = param.fields[0] | 0;
              var param_10 = 32878;
              var value_9 = x_7 | 0;
              gl.pixelStorei(param_10, value_9);
              break;
            }

          case 10:
            {
              var x_8 = param.fields[0] | 0;
              var param_11 = 3316;
              var value_10 = x_8 | 0;
              gl.pixelStorei(param_11, value_10);
              break;
            }

          case 11:
            {
              var x_9 = param.fields[0] | 0;
              var param_12 = 3315;
              var value_11 = x_9 | 0;
              gl.pixelStorei(param_12, value_11);
              break;
            }

          case 12:
            {
              var x_10 = param.fields[0] | 0;
              var param_13 = 32877;
              var value_12 = x_10 | 0;
              gl.pixelStorei(param_13, value_12);
              break;
            }

          default:
            {
              var x = param.fields[0] | 0;
              var param_1 = 3333;
              var value = x | 0;
              gl.pixelStorei(param_1, value);
            }
        }

        storageParams_mut = remaining;
        continue loop;
      }

      break;
    }
  };

  loop(builder.PixelStorageParams);
}

function updateContext(builder) {
  var canvas = builder.Canvas;
  var data = builder.Data;
  canvas.width = data.Size.values[0];
  canvas.height = data.Size.values[1];
  var att = (0, _MapUtil.keyValueList)(builder.Attributes, 1);
  var gl = canvas.getContext("webgl2", (0, _Option.some)(att));
  applyPixelStorageParams(gl, builder);
  var inputRecord = builder.Data;
  builder.Data = new _webgl_data.Data_GlCanvasData(inputRecord.Name, inputRecord.IsDirty, gl, inputRecord.Params, inputRecord.CanvasBackground, inputRecord.ClearMask, inputRecord.ClearCanvas, inputRecord.Size, inputRecord.WorldBounds, inputRecord.Mouse, inputRecord.Global, inputRecord.Scenes);
  return builder;
}

function applyCreators(builder) {
  var data = builder.Data;

  var createScene = function createScene(creator) {
    return creator((0, _List.empty)(), data);
  };

  var createScenes = function createScenes(creators) {
    return (0, _List.map)((0, _Util.mapCurriedArgs)(createScene, [[0, 2]]), creators);
  };

  var createGlobal = function createGlobal(creator_1) {
    var scene = (0, _glscene.create)(data, (0, _List.singleton)(new _webgl_data.BuilderTypes_GlSceneProp(0, "globalScene")));
    return creator_1((0, _List.singleton)(new _webgl_data.BuilderTypes_GlObjProp(0, "global")), scene);
  };

  data.Global = createGlobal(builder.GlobalCreator);
  data.Scenes = Array.from(createScenes((0, _List.reverse)(builder.SceneCreators)));
  return data;
}

function build(builder) {
  return applyCreators(updateContext(builder));
}

function apply(props, builder) {
  var loop = function loop(props_1_mut, b_mut) {
    var inputRecord_1, inputRecord_2, inputRecord_3, inputRecord_4, inputRecord_5, inputRecord_6, inputRecord_7, inputRecord_8, inputRecord_9, _, value, inputRecord_10, __1, value_1, inputRecord;

    var _loop = function _loop() {
      var props_1 = props_1_mut,
          b = b_mut;

      var updateData = function updateData(data) {
        b.Data = data;
        return b;
      };

      var addGlobal = function addGlobal(creator) {
        b.GlobalCreator = creator;
        return b;
      };

      var addScene_1 = function addScene_1(creator_1) {
        b.SceneCreators = (0, _List.cons)((0, _Util.curry)(2, creator_1), b.SceneCreators);
        return b;
      };

      var addAttribute = function addAttribute(x) {
        b.Attributes = (0, _List.cons)(x, b.Attributes);
        return b;
      };

      var addPixelStorage = function addPixelStorage(x_1) {
        b.PixelStorageParams = (0, _List.cons)(x_1, b.PixelStorageParams);
        return b;
      };

      if (props_1.tail != null) {
        var t = props_1.tail;
        var h = props_1.head;

        switch (h.tag) {
          case 5:
            {
              var x_3 = h.fields[0];
              props_1_mut = t;
              b_mut = addAttribute(x_3);
              return "continue|loop";
            }

          case 6:
            {
              var x_4 = h.fields[0];
              props_1_mut = t;
              b_mut = (b.PixelStorageParams = x_4, b);
              return "continue|loop";
            }

          case 7:
            {
              var x_5 = h.fields[0];
              props_1_mut = t;
              b_mut = addPixelStorage(x_5);
              return "continue|loop";
            }

          case 8:
            {
              var x_6 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_1 = b.Data, new _webgl_data.Data_GlCanvasData(inputRecord_1.Name, inputRecord_1.IsDirty, inputRecord_1.Context, inputRecord_1.Params, x_6, inputRecord_1.ClearMask, inputRecord_1.ClearCanvas, inputRecord_1.Size, inputRecord_1.WorldBounds, inputRecord_1.Mouse, inputRecord_1.Global, inputRecord_1.Scenes)));
              return "continue|loop";
            }

          case 9:
            {
              props_1_mut = t;
              b_mut = updateData((inputRecord_2 = b.Data, new _webgl_data.Data_GlCanvasData(inputRecord_2.Name, inputRecord_2.IsDirty, inputRecord_2.Context, inputRecord_2.Params, inputRecord_2.CanvasBackground, b.Data.ClearMask | 16384, inputRecord_2.ClearCanvas, inputRecord_2.Size, inputRecord_2.WorldBounds, inputRecord_2.Mouse, inputRecord_2.Global, inputRecord_2.Scenes)));
              return "continue|loop";
            }

          case 10:
            {
              props_1_mut = t;
              b_mut = updateData((inputRecord_3 = b.Data, new _webgl_data.Data_GlCanvasData(inputRecord_3.Name, inputRecord_3.IsDirty, inputRecord_3.Context, inputRecord_3.Params, inputRecord_3.CanvasBackground, b.Data.ClearMask | 256, inputRecord_3.ClearCanvas, inputRecord_3.Size, inputRecord_3.WorldBounds, inputRecord_3.Mouse, inputRecord_3.Global, inputRecord_3.Scenes)));
              return "continue|loop";
            }

          case 11:
            {
              props_1_mut = t;
              b_mut = updateData((inputRecord_4 = b.Data, new _webgl_data.Data_GlCanvasData(inputRecord_4.Name, inputRecord_4.IsDirty, inputRecord_4.Context, inputRecord_4.Params, inputRecord_4.CanvasBackground, b.Data.ClearMask | 1024, inputRecord_4.ClearCanvas, inputRecord_4.Size, inputRecord_4.WorldBounds, inputRecord_4.Mouse, inputRecord_4.Global, inputRecord_4.Scenes)));
              return "continue|loop";
            }

          case 12:
            {
              var x_7 = h.fields[0] | 0;
              props_1_mut = t;
              b_mut = updateData((inputRecord_5 = b.Data, new _webgl_data.Data_GlCanvasData(inputRecord_5.Name, inputRecord_5.IsDirty, inputRecord_5.Context, inputRecord_5.Params, inputRecord_5.CanvasBackground, x_7, inputRecord_5.ClearCanvas, inputRecord_5.Size, inputRecord_5.WorldBounds, inputRecord_5.Mouse, inputRecord_5.Global, inputRecord_5.Scenes)));
              return "continue|loop";
            }

          case 13:
            {
              props_1_mut = t;
              b_mut = updateData((inputRecord_6 = b.Data, new _webgl_data.Data_GlCanvasData(inputRecord_6.Name, inputRecord_6.IsDirty, inputRecord_6.Context, inputRecord_6.Params, inputRecord_6.CanvasBackground, inputRecord_6.ClearMask, false, inputRecord_6.Size, inputRecord_6.WorldBounds, inputRecord_6.Mouse, inputRecord_6.Global, inputRecord_6.Scenes)));
              return "continue|loop";
            }

          case 4:
            {
              var x_8 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_7 = b.Data, new _webgl_data.Data_GlCanvasData(inputRecord_7.Name, inputRecord_7.IsDirty, inputRecord_7.Context, inputRecord_7.Params, inputRecord_7.CanvasBackground, inputRecord_7.ClearMask, inputRecord_7.ClearCanvas, inputRecord_7.Size, x_8, inputRecord_7.Mouse, inputRecord_7.Global, inputRecord_7.Scenes)));
              return "continue|loop";
            }

          case 1:
            {
              var x_9 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_8 = b.Data, new _webgl_data.Data_GlCanvasData(inputRecord_8.Name, inputRecord_8.IsDirty, inputRecord_8.Context, inputRecord_8.Params, inputRecord_8.CanvasBackground, inputRecord_8.ClearMask, inputRecord_8.ClearCanvas, x_9, inputRecord_8.WorldBounds, inputRecord_8.Mouse, inputRecord_8.Global, inputRecord_8.Scenes)));
              return "continue|loop";
            }

          case 2:
            {
              var x_10 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_9 = b.Data, new _webgl_data.Data_GlCanvasData(inputRecord_9.Name, inputRecord_9.IsDirty, inputRecord_9.Context, inputRecord_9.Params, inputRecord_9.CanvasBackground, inputRecord_9.ClearMask, inputRecord_9.ClearCanvas, ((_ = b.Data.Size, (value = (0, _vectors.Vec2__WithX_Z6C68B1C0)(_.v.contents, x_10, _.v.contents), void value)), b.Data.Size), inputRecord_9.WorldBounds, inputRecord_9.Mouse, inputRecord_9.Global, inputRecord_9.Scenes)));
              return "continue|loop";
            }

          case 3:
            {
              var x_12 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord_10 = b.Data, new _webgl_data.Data_GlCanvasData(inputRecord_10.Name, inputRecord_10.IsDirty, inputRecord_10.Context, inputRecord_10.Params, inputRecord_10.CanvasBackground, inputRecord_10.ClearMask, inputRecord_10.ClearCanvas, ((__1 = b.Data.Size, (value_1 = (0, _vectors.Vec2__WithY_Z6C68B1C0)(__1.v.contents, x_12, __1.v.contents), void value_1)), b.Data.Size), inputRecord_10.WorldBounds, inputRecord_10.Mouse, inputRecord_10.Global, inputRecord_10.Scenes)));
              return "continue|loop";
            }

          case 14:
            {
              var x_13 = h.fields[0];
              props_1_mut = t;
              b_mut = addGlobal(x_13);
              return "continue|loop";
            }

          case 15:
            {
              var x_14 = h.fields[0];
              props_1_mut = t;
              b_mut = addScene_1(x_14);
              return "continue|loop";
            }

          case 16:
            {
              var x_15 = h.fields[0];
              props_1_mut = t;
              b_mut = (b.Attributes = x_15, b);
              return "continue|loop";
            }

          case 17:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(0, false));
              return "continue|loop";
            }

          case 18:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(1, true));
              return "continue|loop";
            }

          case 19:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(2, false));
              return "continue|loop";
            }

          case 20:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(3, false));
              return "continue|loop";
            }

          case 21:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(4, true));
              return "continue|loop";
            }

          case 22:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(6, false));
              return "continue|loop";
            }

          case 23:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(7, true));
              return "continue|loop";
            }

          case 24:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(8, true));
              return "continue|loop";
            }

          case 25:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(5, "default"));
              return "continue|loop";
            }

          case 26:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(5, "high-performance"));
              return "continue|loop";
            }

          case 27:
            {
              props_1_mut = t;
              b_mut = addAttribute(new _webgl_data_types.GlContextAttribute(5, "low-power"));
              return "continue|loop";
            }

          default:
            {
              var x_2 = h.fields[0];
              props_1_mut = t;
              b_mut = updateData((inputRecord = b.Data, new _webgl_data.Data_GlCanvasData(x_2, inputRecord.IsDirty, inputRecord.Context, inputRecord.Params, inputRecord.CanvasBackground, inputRecord.ClearMask, inputRecord.ClearCanvas, inputRecord.Size, inputRecord.WorldBounds, inputRecord.Mouse, inputRecord.Global, inputRecord.Scenes)));
              return "continue|loop";
            }
        }
      } else {
        return {
          v: b
        };
      }

      return "break";
    };

    loop: while (true) {
      var _ret = _loop();

      if (_ret === "continue|loop") continue loop;
      if (_ret === "break") break;
      if (_typeof(_ret) === "object") return _ret.v;
    }
  };

  return loop(props, builder);
}

function create(canvasId, props) {
  var canvas;
  var matchValue = document.getElementById(canvasId);

  if ((0, _Util.equals)(matchValue, null)) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Could not find canvas with ID '%P()'.", [canvasId]));
    throw new Error(msg);
  } else {
    var element = matchValue;

    if (element.nodeName.toLocaleLowerCase() === "canvas") {
      canvas = element;
    } else {
      var c = document.createElement("canvas");
      var value = element.appendChild(c);
      void value;
      canvas = c;
    }
  }

  var canvasSize = (0, _vectors.Vec2_Create_7B00E9A0)(canvas.width, canvas.height);

  var globalCreator = function globalCreator(props_1, scene) {
    return (0, _globj.create)("globalVertex2d", "emptyFragment", void 0, scene, props_1);
  };

  return build(apply(props, new Builder(canvas, (0, _List.empty)(), (0, _List.empty)(), globalCreator, (0, _List.empty)(), new _webgl_data.Data_GlCanvasData(canvasId, true, null, (0, _glcanvasparams.GlCanvasParams_$ctor)(), (0, _vectors.Vec4_Create)(), 16384, false, canvasSize, (0, _bounds.BoundsModule_boundsSizeV)(canvasSize), (0, _glmouse.GlMouse_$ctor_Z38C79397)(canvas), void 0, []))));
}

function clearCanvas(data) {
  var gl = data.Context;
  var cc = (0, _vectors.Vec4__get_Values)(data.CanvasBackground);
  gl.clearColor(cc[0], cc[1], cc[2], cc[3]);
  gl.clear(data.ClearMask);
}

function updateGlobal(time, data) {
  var value;
  var glob = data.Global;
  var uResolution = (0, _globj.tryGetUniform)("resolution")(glob);
  var uMouse = (0, _globj.tryGetUniform)("mouse")(glob);
  var uTime = (0, _globj.tryGetUniform)("time")(glob);

  if (uResolution != null) {
    var bounds = uResolution;
    var values = bounds.Value;
    var bvalues = (0, _vectors.Vec2__get_Values)(data.Size);

    if (!(0, _Array.equalsWith)(_Util.comparePrimitives, values, bvalues)) {
      (0, _gluniform.setValue)(bvalues, bounds);
    }
  }

  (0, _optionex.call)((value = (0, _vectors.Vec2__get_Values)((0, _glmouse.GlMouse__get_Position)(data.Mouse)), function (data_1) {
    (0, _gluniform.setValue)(value, data_1);
  }), uMouse);
  (0, _optionex.call)(function (data_2) {
    (0, _gluniform.setValue)(time, data_2);
  }, uTime);
  var cam = (0, _List.head)(glob.Scene.Cameras);
  (0, _globj.update)(cam, glob);
}

function render(time, data) {
  if (data.IsDirty) {
    if (data.ClearCanvas) {
      clearCanvas(data);
    }

    updateGlobal(time, data);
    data.Scenes.forEach(function (data_1) {
      (0, _glscene.render)(data_1);
    });
  }

  clean(data);
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./webgl_data_types.js":"../JS/webgl_data/webgl_data_types.js","./webgl_data.js":"../JS/webgl_data/webgl_data.js","./glcommon.js":"../JS/webgl_data/glcommon.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../core/utils.js":"../JS/core/utils.js","../webgl_core/webgl_types.js":"../JS/webgl_core/webgl_types.js","../.fable/fable-library.3.0.0/MapUtil.js":"../JS/.fable/fable-library.3.0.0/MapUtil.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./glscene.js":"../JS/webgl_data/glscene.js","../core/vectors.js":"../JS/core/vectors.js","./globj.js":"../JS/webgl_data/globj.js","./glcanvasparams.js":"../JS/webgl_data/glcanvasparams.js","../twod/bounds.js":"../JS/twod/bounds.js","./glmouse.js":"../JS/webgl_data/glmouse.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","./gluniform.js":"../JS/webgl_data/gluniform.js","../core/optionex.js":"../JS/core/optionex.js"}],"../JS/webgl_objects/props.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Props_glcanvas = Props_glcanvas;
exports.Props_glscene = Props_glscene;
exports.Props_globject = Props_globject;
exports.Props_glubo = Props_glubo;
exports.Props_gltexture = Props_gltexture;
exports.CanvasProps_canvasglobal = CanvasProps_canvasglobal;
exports.CanvasProps_scene = CanvasProps_scene;
exports.CanvasProps_canvasName = CanvasProps_canvasName;
exports.CanvasProps_canvasSize = CanvasProps_canvasSize;
exports.CanvasProps_canvasWidth = CanvasProps_canvasWidth;
exports.CanvasProps_canvasHeight = CanvasProps_canvasHeight;
exports.CanvasProps_worldBounds = CanvasProps_worldBounds;
exports.CanvasProps_pixelStorageParams = CanvasProps_pixelStorageParams;
exports.CanvasProps_pixelStorage = CanvasProps_pixelStorage;
exports.CanvasProps_canvasBackground = CanvasProps_canvasBackground;
exports.CanvasProps_clearMask = CanvasProps_clearMask;
exports.CanvasProps_attributes = CanvasProps_attributes;
exports.AttributesProps_alpha = AttributesProps_alpha;
exports.AttributesProps_desynchronized = AttributesProps_desynchronized;
exports.AttributesProps_antialias = AttributesProps_antialias;
exports.AttributesProps_depth = AttributesProps_depth;
exports.AttributesProps_failIfMajorPerformanceCaveat = AttributesProps_failIfMajorPerformanceCaveat;
exports.AttributesProps_powerPreference = AttributesProps_powerPreference;
exports.AttributesProps_premultipliedAlpha = AttributesProps_premultipliedAlpha;
exports.AttributesProps_preserveDrawingBuffer = AttributesProps_preserveDrawingBuffer;
exports.AttributesProps_stencil = AttributesProps_stencil;
exports.PixelStorageParamsProps_pack_alignment = PixelStorageParamsProps_pack_alignment;
exports.PixelStorageParamsProps_unpack_alignment = PixelStorageParamsProps_unpack_alignment;
exports.PixelStorageParamsProps_unpack_colorspace_conversion_webgl = PixelStorageParamsProps_unpack_colorspace_conversion_webgl;
exports.PixelStorageParamsProps_pack_row_length = PixelStorageParamsProps_pack_row_length;
exports.PixelStorageParamsProps_pack_skip_pixels = PixelStorageParamsProps_pack_skip_pixels;
exports.PixelStorageParamsProps_pack_skip_rows = PixelStorageParamsProps_pack_skip_rows;
exports.PixelStorageParamsProps_unpack_row_length = PixelStorageParamsProps_unpack_row_length;
exports.PixelStorageParamsProps_unpack_image_height = PixelStorageParamsProps_unpack_image_height;
exports.PixelStorageParamsProps_unpack_skip_pixels = PixelStorageParamsProps_unpack_skip_pixels;
exports.PixelStorageParamsProps_unpack_skip_rows = PixelStorageParamsProps_unpack_skip_rows;
exports.PixelStorageParamsProps_unpack_skip_images = PixelStorageParamsProps_unpack_skip_images;
exports.SceneProps_orthoCam2d = SceneProps_orthoCam2d;
exports.SceneProps_shared = SceneProps_shared;
exports.SceneProps_object = SceneProps_object;
exports.SceneProps_sceneName = SceneProps_sceneName;
exports.SceneProps_layers = SceneProps_layers;
exports.SceneProps_defaultLayer = SceneProps_defaultLayer;
exports.SceneProps_sceneBackground = SceneProps_sceneBackground;
exports.SceneProps_sceneClearMask = SceneProps_sceneClearMask;
exports.SceneProps_sceneWorldBounds = SceneProps_sceneWorldBounds;
exports.SceneProps_sceneBounds = SceneProps_sceneBounds;
exports.SceneProps_worldScale = SceneProps_worldScale;
exports.SceneProps_camera = SceneProps_camera;
exports.SceneProps_sceneObject = SceneProps_sceneObject;
exports.CameraProps_cameraName = CameraProps_cameraName;
exports.CameraProps_cameraBackground = CameraProps_cameraBackground;
exports.CameraProps_cameraClearMask = CameraProps_cameraClearMask;
exports.CameraProps_borderWidth = CameraProps_borderWidth;
exports.CameraProps_cameraPosition = CameraProps_cameraPosition;
exports.CameraProps_lookAt = CameraProps_lookAt;
exports.CameraProps_viewSize = CameraProps_viewSize;
exports.CameraProps_viewportBounds = CameraProps_viewportBounds;
exports.CameraProps_up = CameraProps_up;
exports.CameraProps_near = CameraProps_near;
exports.CameraProps_far = CameraProps_far;
exports.CameraProps_aspect = CameraProps_aspect;
exports.CameraProps_fov = CameraProps_fov;
exports.UniformProps_value = UniformProps_value;
exports.UniformProps_uniformLink = UniformProps_uniformLink;
exports.UniformProps_vec2Value = UniformProps_vec2Value;
exports.UniformProps_vec2ValueV = UniformProps_vec2ValueV;
exports.UniformProps_vec4Value = UniformProps_vec4Value;
exports.UniformProps_vec4ValueV = UniformProps_vec4ValueV;
exports.UboProps_u = UboProps_u;
exports.UboProps_bufferIndex = UboProps_bufferIndex;
exports.UboProps_uboUniform = UboProps_uboUniform;
exports.UboProps_uboLink = UboProps_uboLink;
exports.AttributeProps_baseType = AttributeProps_baseType;
exports.AttributeProps_stride = AttributeProps_stride;
exports.AttributeProps_offset = AttributeProps_offset;
exports.AttributeProps_values = AttributeProps_values;
exports.AttributeProps_dataCount = AttributeProps_dataCount;
exports.AttributeProps_bufferUsage = AttributeProps_bufferUsage;
exports.AttributeProps_divisor = AttributeProps_divisor;
exports.AttributeProps_childAttribute = AttributeProps_childAttribute;
exports.AttributeProps_attributeLink = AttributeProps_attributeLink;
exports.AttributeProps_vec2Values = AttributeProps_vec2Values;
exports.AttributeProps_vec2ValuesL = AttributeProps_vec2ValuesL;
exports.IndicesProps_IndexType = IndicesProps_IndexType;
exports.IndicesProps_IndexOffset = IndicesProps_IndexOffset;
exports.IndicesProps_IndexValues = IndicesProps_IndexValues;
exports.IndicesProps_IndexBufferUsage = IndicesProps_IndexBufferUsage;
exports.IndicesProps_IndicesLink = IndicesProps_IndicesLink;
exports.TextureProps_textureName = TextureProps_textureName;
exports.TextureProps_textureTarget = TextureProps_textureTarget;
exports.TextureProps_textureIndex = TextureProps_textureIndex;
exports.TextureProps_level = TextureProps_level;
exports.TextureProps_internalFormat = TextureProps_internalFormat;
exports.TextureProps_textureWidth = TextureProps_textureWidth;
exports.TextureProps_textureHeight = TextureProps_textureHeight;
exports.TextureProps_format = TextureProps_format;
exports.TextureProps_textureDataType = TextureProps_textureDataType;
exports.TextureProps_pixels = TextureProps_pixels;
exports.TextureProps_byteOffset = TextureProps_byteOffset;
exports.TextureProps_magFilter = TextureProps_magFilter;
exports.TextureProps_minFilter = TextureProps_minFilter;
exports.TextureProps_wrapS = TextureProps_wrapS;
exports.TextureProps_wrapT = TextureProps_wrapT;
exports.TextureProps_wrapR = TextureProps_wrapR;
exports.TextureProps_baseLevel = TextureProps_baseLevel;
exports.TextureProps_compareFunc = TextureProps_compareFunc;
exports.TextureProps_compareMode = TextureProps_compareMode;
exports.TextureProps_maxLevel = TextureProps_maxLevel;
exports.TextureProps_maxLod = TextureProps_maxLod;
exports.TextureProps_minLod = TextureProps_minLod;
exports.TextureProps_textureLink = TextureProps_textureLink;
exports.InterleaveProps_child = InterleaveProps_child;
exports.ObjectProps_uniform = ObjectProps_uniform;
exports.ObjectProps_ubo = ObjectProps_ubo;
exports.ObjectProps_attribute = ObjectProps_attribute;
exports.ObjectProps_interleave = ObjectProps_interleave;
exports.ObjectProps_Indices = ObjectProps_Indices;
exports.ObjectProps_texture = ObjectProps_texture;
exports.ObjectProps_position2d = ObjectProps_position2d;
exports.ObjectProps_position2dv = ObjectProps_position2dv;
exports.ObjectProps_pixelDataUint8 = ObjectProps_pixelDataUint8;
exports.ObjectProps_pixelImageId = ObjectProps_pixelImageId;
exports.ObjectProps_objectName = ObjectProps_objectName;
exports.ObjectProps_drawMethod = ObjectProps_drawMethod;
exports.ObjectProps_drawPrimitive = ObjectProps_drawPrimitive;
exports.ObjectProps_vertexCount = ObjectProps_vertexCount;
exports.ObjectProps_vertexOffset = ObjectProps_vertexOffset;
exports.ObjectProps_vertexCountOffset = ObjectProps_vertexCountOffset;
exports.ObjectProps_instanceCount = ObjectProps_instanceCount;
exports.ObjectProps_instanceOffset = ObjectProps_instanceOffset;
exports.ObjectProps_instanceCountOffset = ObjectProps_instanceCountOffset;
exports.ObjectProps_IndicesOffset = ObjectProps_IndicesOffset;
exports.ObjectProps_capability = ObjectProps_capability;
exports.ObjectProps_processLinked = ObjectProps_processLinked;
exports.ObjectProps_parallaxCamera = ObjectProps_parallaxCamera;
exports.ObjectProps_parallaxDistance = ObjectProps_parallaxDistance;
exports.ObjectProps_layer = ObjectProps_layer;
exports.ObjectProps_angle = ObjectProps_angle;
exports.ObjectProps_angleDegrees = ObjectProps_angleDegrees;
exports.ObjectProps_angleZ = ObjectProps_angleZ;
exports.ObjectProps_angleDegreesZ = ObjectProps_angleDegreesZ;
exports.ObjectProps_position = ObjectProps_position;
exports.ObjectProps_scale = ObjectProps_scale;
exports.ObjectProps_objectLink = ObjectProps_objectLink;
exports.ObjectProps_pathParams = ObjectProps_pathParams;
exports.ObjectProps_disable = exports.ObjectProps_enable = exports.ObjectProps_disableBlending = exports.ObjectProps_enableBlending = exports.ObjectProps_blendEquationSeparate = exports.ObjectProps_blendEquation = exports.ObjectProps_blendFuncSeparate = exports.ObjectProps_blendFunc = exports.ObjectProps_blendColorV = exports.ObjectProps_blendColor = exports.ObjectProps_disableCulling = exports.ObjectProps_enableCulling = exports.ObjectProps_cullFace = exports.ObjectProps_cullFrontAndBack = exports.ObjectProps_cullBack = exports.ObjectProps_cullFront = exports.ObjectProps_disableDepthTesting = exports.ObjectProps_enableDepthTesting = exports.TextureProps_noMipMap = exports.AttributeProps_determinesInstanceCount = exports.AttributeProps_determinesVertexCount = exports.AttributeProps_normalize = exports.CameraProps_dontAutoPosition = exports.CameraProps_dontUseViewSizeAspect = exports.CameraProps_dontAutoSizeViewport = exports.CameraProps_cameraClearStencilBuffer = exports.CameraProps_cameraClearDepthBuffer = exports.CameraProps_cameraClearColorBuffer = exports.CameraProps_dontClearViewport = exports.SceneProps_dontClearSceneBackground = exports.SceneProps_sceneClearStencilBuffer = exports.SceneProps_sceneClearDepthBuffer = exports.SceneProps_sceneClearColorBuffer = exports.SceneProps_sharedObjectWithCamera2d = exports.PixelStorageParamsProps_unpack_premultiply_alpha_webgl = exports.PixelStorageParamsProps_unpack_flip_y_webgl = exports.CanvasProps_powerPreferenceLowPower = exports.CanvasProps_powerPreferenceHighPerformance = exports.CanvasProps_powerPreferenceDefault = exports.CanvasProps_stencil = exports.CanvasProps_preserveDrawingBuffer = exports.CanvasProps_noPremultipliedAlpha = exports.CanvasProps_failIfMajorPerformanceCaveat = exports.CanvasProps_noDepth = exports.CanvasProps_noAntialias = exports.CanvasProps_desynchronized = exports.CanvasProps_noAlpha = exports.CanvasProps_dontClearCanvas = exports.CanvasProps_clearStencilBuffer = exports.CanvasProps_clearDepthBuffer = exports.CanvasProps_clearColorBuffer = exports.CanvasProps_globalWithResolutionTime2d = void 0;

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _glcanvas = require("../webgl_data/glcanvas.js");

var _glscene = require("../webgl_data/glscene.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _globj = require("../webgl_data/globj.js");

var _glubo = require("../webgl_data/glubo.js");

var _gltexture = require("../webgl_data/gltexture.js");

var _webgl_data = require("../webgl_data/webgl_data.js");

var _webgl_data_types = require("../webgl_data/webgl_data_types.js");

var _glortho2d = require("../webgl_data/glortho2d.js");

var _vectors = require("../core/vectors.js");

var _glubouniform = require("../webgl_data/glubouniform.js");

var _glinterleavechildattribute = require("../webgl_data/glinterleavechildattribute.js");

var _gluniform = require("../webgl_data/gluniform.js");

var _glsingleattribute = require("../webgl_data/glsingleattribute.js");

var _glinterleaveattribute = require("../webgl_data/glinterleaveattribute.js");

var _glindicies = require("../webgl_data/glindicies.js");

var _typedarray_utils = require("../js/typedarray_utils.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _glcanvasparams = require("../webgl_data/glcanvasparams.js");

var _glcapabilities = require("../webgl_data/glcapabilities.js");

function Props_glcanvas(canvasId, props) {
  var res = function () {
    return (0, _glcanvas.create)(canvasId, props);
  }();

  return res;
}

function Props_glscene(props, overrides, canvas) {
  var res = function () {
    return (0, _glscene.create)(canvas, (0, _List.append)(props, overrides));
  }();

  return res;
}

function Props_globject(vertex, fragment, props, overrides, scene) {
  var res = function () {
    return (0, _globj.create)(vertex, fragment, scene.Shared, scene, (0, _List.append)(props, overrides));
  }();

  return res;
}

function Props_glubo(name, props, overrides, parentObject) {
  var name_1 = (0, _String.toText)((0, _String.interpolate)("UBO %P()", [name]));

  var res = function () {
    return (0, _glubo.create)(name, (0, _List.append)(props, overrides), parentObject);
  }();

  return res;
}

function Props_gltexture(props, overrides, parentObject) {
  var name = (0, _String.toText)((0, _String.interpolate)("texture", []));

  var res = function () {
    return (0, _gltexture.create)((0, _List.append)(props, overrides), parentObject);
  }();

  return res;
}

function CanvasProps_canvasglobal(vertex, fragment, props) {
  var result = function result(overrides, scene) {
    var res = function () {
      return (0, _globj.create)(vertex, fragment, void 0, scene, (0, _List.cons)(new _webgl_data.BuilderTypes_GlObjProp(16, false), (0, _List.append)(props, overrides)));
    }();

    return res;
  };

  return new _webgl_data.BuilderTypes_GlCanvasProp(14, result);
}

function CanvasProps_scene(props) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(15, function (overrides, canvas) {
    return Props_glscene(props, overrides, canvas);
  });
}

var CanvasProps_globalWithResolutionTime2d = CanvasProps_canvasglobal("globalVertex2d", "emptyFragment", (0, _List.empty)());
exports.CanvasProps_globalWithResolutionTime2d = CanvasProps_globalWithResolutionTime2d;

function CanvasProps_canvasName(name) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(0, name);
}

function CanvasProps_canvasSize(x) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(1, x);
}

function CanvasProps_canvasWidth(x) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(2, x);
}

function CanvasProps_canvasHeight(x) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(3, x);
}

function CanvasProps_worldBounds(x) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(4, x);
}

function CanvasProps_pixelStorageParams(x) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(6, x);
}

function CanvasProps_pixelStorage(x) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(7, x);
}

function CanvasProps_canvasBackground(x) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(8, x);
}

var CanvasProps_clearColorBuffer = new _webgl_data.BuilderTypes_GlCanvasProp(9);
exports.CanvasProps_clearColorBuffer = CanvasProps_clearColorBuffer;
var CanvasProps_clearDepthBuffer = new _webgl_data.BuilderTypes_GlCanvasProp(10);
exports.CanvasProps_clearDepthBuffer = CanvasProps_clearDepthBuffer;
var CanvasProps_clearStencilBuffer = new _webgl_data.BuilderTypes_GlCanvasProp(11);
exports.CanvasProps_clearStencilBuffer = CanvasProps_clearStencilBuffer;

function CanvasProps_clearMask(x) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(12, x);
}

var CanvasProps_dontClearCanvas = new _webgl_data.BuilderTypes_GlCanvasProp(13);
exports.CanvasProps_dontClearCanvas = CanvasProps_dontClearCanvas;

function CanvasProps_attributes(x) {
  return new _webgl_data.BuilderTypes_GlCanvasProp(16, x);
}

var CanvasProps_noAlpha = new _webgl_data.BuilderTypes_GlCanvasProp(17);
exports.CanvasProps_noAlpha = CanvasProps_noAlpha;
var CanvasProps_desynchronized = new _webgl_data.BuilderTypes_GlCanvasProp(18);
exports.CanvasProps_desynchronized = CanvasProps_desynchronized;
var CanvasProps_noAntialias = new _webgl_data.BuilderTypes_GlCanvasProp(19);
exports.CanvasProps_noAntialias = CanvasProps_noAntialias;
var CanvasProps_noDepth = new _webgl_data.BuilderTypes_GlCanvasProp(20);
exports.CanvasProps_noDepth = CanvasProps_noDepth;
var CanvasProps_failIfMajorPerformanceCaveat = new _webgl_data.BuilderTypes_GlCanvasProp(21);
exports.CanvasProps_failIfMajorPerformanceCaveat = CanvasProps_failIfMajorPerformanceCaveat;
var CanvasProps_noPremultipliedAlpha = new _webgl_data.BuilderTypes_GlCanvasProp(22);
exports.CanvasProps_noPremultipliedAlpha = CanvasProps_noPremultipliedAlpha;
var CanvasProps_preserveDrawingBuffer = new _webgl_data.BuilderTypes_GlCanvasProp(23);
exports.CanvasProps_preserveDrawingBuffer = CanvasProps_preserveDrawingBuffer;
var CanvasProps_stencil = new _webgl_data.BuilderTypes_GlCanvasProp(24);
exports.CanvasProps_stencil = CanvasProps_stencil;
var CanvasProps_powerPreferenceDefault = new _webgl_data.BuilderTypes_GlCanvasProp(25);
exports.CanvasProps_powerPreferenceDefault = CanvasProps_powerPreferenceDefault;
var CanvasProps_powerPreferenceHighPerformance = new _webgl_data.BuilderTypes_GlCanvasProp(26);
exports.CanvasProps_powerPreferenceHighPerformance = CanvasProps_powerPreferenceHighPerformance;
var CanvasProps_powerPreferenceLowPower = new _webgl_data.BuilderTypes_GlCanvasProp(27);
exports.CanvasProps_powerPreferenceLowPower = CanvasProps_powerPreferenceLowPower;

function AttributesProps_alpha(x) {
  return new _webgl_data_types.GlContextAttribute(0, x);
}

function AttributesProps_desynchronized(x) {
  return new _webgl_data_types.GlContextAttribute(1, x);
}

function AttributesProps_antialias(x) {
  return new _webgl_data_types.GlContextAttribute(2, x);
}

function AttributesProps_depth(x) {
  return new _webgl_data_types.GlContextAttribute(3, x);
}

function AttributesProps_failIfMajorPerformanceCaveat(x) {
  return new _webgl_data_types.GlContextAttribute(4, x);
}

function AttributesProps_powerPreference(x) {
  return new _webgl_data_types.GlContextAttribute(5, x);
}

function AttributesProps_premultipliedAlpha(x) {
  return new _webgl_data_types.GlContextAttribute(6, x);
}

function AttributesProps_preserveDrawingBuffer(x) {
  return new _webgl_data_types.GlContextAttribute(7, x);
}

function AttributesProps_stencil(x) {
  return new _webgl_data_types.GlContextAttribute(8, x);
}

function PixelStorageParamsProps_pack_alignment(x) {
  return new _webgl_data_types.GlPixelStorage(0, x);
}

function PixelStorageParamsProps_unpack_alignment(x) {
  return new _webgl_data_types.GlPixelStorage(1, x);
}

var PixelStorageParamsProps_unpack_flip_y_webgl = new _webgl_data_types.GlPixelStorage(2);
exports.PixelStorageParamsProps_unpack_flip_y_webgl = PixelStorageParamsProps_unpack_flip_y_webgl;
var PixelStorageParamsProps_unpack_premultiply_alpha_webgl = new _webgl_data_types.GlPixelStorage(3);
exports.PixelStorageParamsProps_unpack_premultiply_alpha_webgl = PixelStorageParamsProps_unpack_premultiply_alpha_webgl;

function PixelStorageParamsProps_unpack_colorspace_conversion_webgl(x) {
  return new _webgl_data_types.GlPixelStorage(4, x);
}

function PixelStorageParamsProps_pack_row_length(x) {
  return new _webgl_data_types.GlPixelStorage(5, x);
}

function PixelStorageParamsProps_pack_skip_pixels(x) {
  return new _webgl_data_types.GlPixelStorage(6, x);
}

function PixelStorageParamsProps_pack_skip_rows(x) {
  return new _webgl_data_types.GlPixelStorage(7, x);
}

function PixelStorageParamsProps_unpack_row_length(x) {
  return new _webgl_data_types.GlPixelStorage(8, x);
}

function PixelStorageParamsProps_unpack_image_height(x) {
  return new _webgl_data_types.GlPixelStorage(9, x);
}

function PixelStorageParamsProps_unpack_skip_pixels(x) {
  return new _webgl_data_types.GlPixelStorage(10, x);
}

function PixelStorageParamsProps_unpack_skip_rows(x) {
  return new _webgl_data_types.GlPixelStorage(11, x);
}

function PixelStorageParamsProps_unpack_skip_images(x) {
  return new _webgl_data_types.GlPixelStorage(12, x);
}

function SceneProps_orthoCam2d(props) {
  var result = function result(overrides, scene) {
    var res = function () {
      return (0, _glortho2d.create)((0, _List.append)(props, overrides), scene);
    }();

    return res;
  };

  return new _webgl_data.BuilderTypes_GlSceneProp(12, result);
}

function SceneProps_shared(vertex, fragment, props) {
  var result = function result(overrides, scene) {
    var parent = scene.Canvas.Global;

    var res = function () {
      return (0, _globj.create)(vertex, fragment, parent, scene, (0, _List.cons)(new _webgl_data.BuilderTypes_GlObjProp(16, false), (0, _List.append)(props, overrides)));
    }();

    return res;
  };

  return new _webgl_data.BuilderTypes_GlSceneProp(13, result);
}

var SceneProps_sharedObjectWithCamera2d = SceneProps_shared("sharedCameraVertex2d", "emptyFragment", (0, _List.empty)());
exports.SceneProps_sharedObjectWithCamera2d = SceneProps_sharedObjectWithCamera2d;

function SceneProps_object(vertex, fragment, props) {
  return new _webgl_data.BuilderTypes_GlSceneProp(14, function (overrides, scene) {
    return Props_globject(vertex, fragment, props, overrides, scene);
  });
}

function SceneProps_sceneName(x) {
  return new _webgl_data.BuilderTypes_GlSceneProp(0, x);
}

function SceneProps_layers(x) {
  return new _webgl_data.BuilderTypes_GlSceneProp(1, x);
}

function SceneProps_defaultLayer(x) {
  return new _webgl_data.BuilderTypes_GlSceneProp(2, x);
}

function SceneProps_sceneBackground(x) {
  return new _webgl_data.BuilderTypes_GlSceneProp(3, x);
}

var SceneProps_sceneClearColorBuffer = new _webgl_data.BuilderTypes_GlSceneProp(4);
exports.SceneProps_sceneClearColorBuffer = SceneProps_sceneClearColorBuffer;
var SceneProps_sceneClearDepthBuffer = new _webgl_data.BuilderTypes_GlSceneProp(5);
exports.SceneProps_sceneClearDepthBuffer = SceneProps_sceneClearDepthBuffer;
var SceneProps_sceneClearStencilBuffer = new _webgl_data.BuilderTypes_GlSceneProp(6);
exports.SceneProps_sceneClearStencilBuffer = SceneProps_sceneClearStencilBuffer;

function SceneProps_sceneClearMask(x) {
  return new _webgl_data.BuilderTypes_GlSceneProp(7, x);
}

function SceneProps_sceneWorldBounds(x) {
  return new _webgl_data.BuilderTypes_GlSceneProp(8, x);
}

function SceneProps_sceneBounds(x) {
  return new _webgl_data.BuilderTypes_GlSceneProp(9, x);
}

function SceneProps_worldScale(x) {
  return new _webgl_data.BuilderTypes_GlSceneProp(10, x);
}

var SceneProps_dontClearSceneBackground = new _webgl_data.BuilderTypes_GlSceneProp(11);
exports.SceneProps_dontClearSceneBackground = SceneProps_dontClearSceneBackground;

function SceneProps_camera(x) {
  return new _webgl_data.BuilderTypes_GlSceneProp(12, x);
}

function SceneProps_sceneObject(x) {
  return new _webgl_data.BuilderTypes_GlSceneProp(14, x);
}

function CameraProps_cameraName(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(0, x);
}

var CameraProps_dontClearViewport = new _webgl_data.BuilderTypes_GlCamProp(1);
exports.CameraProps_dontClearViewport = CameraProps_dontClearViewport;

function CameraProps_cameraBackground(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(2, x);
}

var CameraProps_cameraClearColorBuffer = new _webgl_data.BuilderTypes_GlCamProp(3);
exports.CameraProps_cameraClearColorBuffer = CameraProps_cameraClearColorBuffer;
var CameraProps_cameraClearDepthBuffer = new _webgl_data.BuilderTypes_GlCamProp(4);
exports.CameraProps_cameraClearDepthBuffer = CameraProps_cameraClearDepthBuffer;
var CameraProps_cameraClearStencilBuffer = new _webgl_data.BuilderTypes_GlCamProp(5);
exports.CameraProps_cameraClearStencilBuffer = CameraProps_cameraClearStencilBuffer;

function CameraProps_cameraClearMask(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(6, x);
}

function CameraProps_borderWidth(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(7, x);
}

var CameraProps_dontAutoSizeViewport = new _webgl_data.BuilderTypes_GlCamProp(8);
exports.CameraProps_dontAutoSizeViewport = CameraProps_dontAutoSizeViewport;
var CameraProps_dontUseViewSizeAspect = new _webgl_data.BuilderTypes_GlCamProp(9);
exports.CameraProps_dontUseViewSizeAspect = CameraProps_dontUseViewSizeAspect;
var CameraProps_dontAutoPosition = new _webgl_data.BuilderTypes_GlCamProp(10);
exports.CameraProps_dontAutoPosition = CameraProps_dontAutoPosition;

function CameraProps_cameraPosition(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(11, x);
}

function CameraProps_lookAt(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(12, x);
}

function CameraProps_viewSize(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(13, x);
}

function CameraProps_viewportBounds(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(14, x);
}

function CameraProps_up(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(15, x);
}

function CameraProps_near(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(16, x);
}

function CameraProps_far(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(17, x);
}

function CameraProps_aspect(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(18, x);
}

function CameraProps_fov(x) {
  return new _webgl_data.BuilderTypes_GlCamProp(19, x);
}

function UniformProps_value(x) {
  return new _webgl_data.BuilderTypes_GlUniformProp(0, x);
}

function UniformProps_uniformLink(x) {
  return new _webgl_data.BuilderTypes_GlUniformProp(1, x);
}

function UniformProps_vec2Value(x, y) {
  return new _webgl_data.BuilderTypes_GlUniformProp(0, [x, y]);
}

function UniformProps_vec2ValueV(v) {
  return new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec2__get_Values)(v));
}

function UniformProps_vec4Value(x, y, z, w) {
  return new _webgl_data.BuilderTypes_GlUniformProp(0, [x, y, z, w]);
}

function UniformProps_vec4ValueV(v) {
  return new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec4__get_Values)(v));
}

function UboProps_u(name, props) {
  var result = function result(overrides, parentUbo, parentObject) {
    var name_1 = (0, _String.toText)((0, _String.interpolate)("ubo uniform %P()", [name]));

    var res = function () {
      return (0, _glubouniform.create)(name, (0, _List.append)(props, overrides), parentUbo, parentObject);
    }();

    return res;
  };

  return new _webgl_data.BuilderTypes_GlUboProp(1, result);
}

function UboProps_bufferIndex(x) {
  return new _webgl_data.BuilderTypes_GlUboProp(0, x);
}

function UboProps_uboUniform(x) {
  return new _webgl_data.BuilderTypes_GlUboProp(1, x);
}

function UboProps_uboLink(x) {
  return new _webgl_data.BuilderTypes_GlUboProp(2, x);
}

function AttributeProps_baseType(x) {
  return new _webgl_data.BuilderTypes_GlAttrProp(0, x);
}

var AttributeProps_normalize = new _webgl_data.BuilderTypes_GlAttrProp(1);
exports.AttributeProps_normalize = AttributeProps_normalize;

function AttributeProps_stride(x) {
  return new _webgl_data.BuilderTypes_GlAttrProp(3, x);
}

function AttributeProps_offset(x) {
  return new _webgl_data.BuilderTypes_GlAttrProp(4, x);
}

function AttributeProps_values(x) {
  return new _webgl_data.BuilderTypes_GlAttrProp(5, x);
}

function AttributeProps_dataCount(x) {
  return new _webgl_data.BuilderTypes_GlAttrProp(6, x);
}

function AttributeProps_bufferUsage(x) {
  return new _webgl_data.BuilderTypes_GlAttrProp(7, x);
}

var AttributeProps_determinesVertexCount = new _webgl_data.BuilderTypes_GlAttrProp(8);
exports.AttributeProps_determinesVertexCount = AttributeProps_determinesVertexCount;
var AttributeProps_determinesInstanceCount = new _webgl_data.BuilderTypes_GlAttrProp(9);
exports.AttributeProps_determinesInstanceCount = AttributeProps_determinesInstanceCount;

function AttributeProps_divisor(x) {
  return new _webgl_data.BuilderTypes_GlAttrProp(10, x);
}

function AttributeProps_childAttribute(x) {
  return new _webgl_data.BuilderTypes_GlAttrProp(11, x);
}

function AttributeProps_attributeLink(x) {
  return new _webgl_data.BuilderTypes_GlAttrProp(12, x);
}

function AttributeProps_vec2Values(arr) {
  return new _webgl_data.BuilderTypes_GlAttrProp(5, (0, _vectors.Vec_vec2Values)(arr));
}

function AttributeProps_vec2ValuesL(arr) {
  return AttributeProps_vec2Values(Array.from(arr));
}

function IndicesProps_IndexType(x) {
  return new _webgl_data.BuilderTypes_GlIndicesProp(0, x);
}

function IndicesProps_IndexOffset(x) {
  return new _webgl_data.BuilderTypes_GlIndicesProp(1, x);
}

function IndicesProps_IndexValues(x) {
  return new _webgl_data.BuilderTypes_GlIndicesProp(2, x);
}

function IndicesProps_IndexBufferUsage(x) {
  return new _webgl_data.BuilderTypes_GlIndicesProp(3, x);
}

function IndicesProps_IndicesLink(x) {
  return new _webgl_data.BuilderTypes_GlIndicesProp(4, x);
}

function TextureProps_textureName(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(0, x);
}

function TextureProps_textureTarget(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(1, x);
}

function TextureProps_textureIndex(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(2, x);
}

function TextureProps_level(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(3, x);
}

function TextureProps_internalFormat(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(6, x);
}

function TextureProps_textureWidth(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(4, x);
}

function TextureProps_textureHeight(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(5, x);
}

function TextureProps_format(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(7, x);
}

function TextureProps_textureDataType(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(8, x);
}

function TextureProps_pixels(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(10, x);
}

function TextureProps_byteOffset(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(11, x);
}

var TextureProps_noMipMap = new _webgl_data.BuilderTypes_GlTextureProp(9);
exports.TextureProps_noMipMap = TextureProps_noMipMap;

function TextureProps_magFilter(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(12, x);
}

function TextureProps_minFilter(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(13, x);
}

function TextureProps_wrapS(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(14, x);
}

function TextureProps_wrapT(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(15, x);
}

function TextureProps_wrapR(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(16, x);
}

function TextureProps_baseLevel(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(17, x);
}

function TextureProps_compareFunc(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(18, x);
}

function TextureProps_compareMode(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(19, x);
}

function TextureProps_maxLevel(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(20, x);
}

function TextureProps_maxLod(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(21, x);
}

function TextureProps_minLod(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(22, x);
}

function TextureProps_textureLink(x) {
  return new _webgl_data.BuilderTypes_GlTextureProp(23, x);
}

function InterleaveProps_child(name, props) {
  var result = function result(overrides, parentAttribute, parentObject) {
    var name_1 = (0, _String.toText)((0, _String.interpolate)("child %P()", [name]));

    var res = function () {
      return (0, _glinterleavechildattribute.create)(name, (0, _List.append)(props, overrides), parentAttribute, parentObject);
    }();

    return res;
  };

  return new _webgl_data.BuilderTypes_GlAttrProp(11, result);
}

function ObjectProps_uniform(name, props) {
  var result = function result(overrides, parentObject) {
    var name_1 = (0, _String.toText)((0, _String.interpolate)("uniform %P()", [name]));

    var res = function () {
      return (0, _gluniform.create)(name, (0, _List.append)(props, overrides), parentObject);
    }();

    return res;
  };

  return new _webgl_data.BuilderTypes_GlObjProp(10, result);
}

function ObjectProps_ubo(name, props) {
  return new _webgl_data.BuilderTypes_GlObjProp(11, function (overrides, parentObject) {
    return Props_glubo(name, props, overrides, parentObject);
  });
}

function ObjectProps_attribute(name, props) {
  var result = function result(overrides, parentObject) {
    var name_1 = (0, _String.toText)((0, _String.interpolate)("attribute %P()", [name]));

    var res = function () {
      return (0, _glsingleattribute.create)(name, (0, _List.append)(props, overrides), parentObject);
    }();

    return res;
  };

  return new _webgl_data.BuilderTypes_GlObjProp(12, result);
}

function ObjectProps_interleave(name, props) {
  var result = function result(overrides, parentObject) {
    var name_1 = (0, _String.toText)((0, _String.interpolate)("attribute %P()", [name]));

    var res = function () {
      return (0, _glinterleaveattribute.create)(name, (0, _List.append)(props, overrides), parentObject);
    }();

    return res;
  };

  return new _webgl_data.BuilderTypes_GlObjProp(12, result);
}

function ObjectProps_Indices(props) {
  var result = function result(overrides, parentObject) {
    var res = function () {
      return (0, _glindicies.create)((0, _List.append)(props, overrides), parentObject);
    }();

    return res;
  };

  return new _webgl_data.BuilderTypes_GlObjProp(13, result);
}

function ObjectProps_texture(props) {
  return new _webgl_data.BuilderTypes_GlObjProp(14, function (overrides, parentObject) {
    return Props_gltexture(props, overrides, parentObject);
  });
}

function ObjectProps_position2d(x, y) {
  return new _webgl_data.BuilderTypes_GlObjProp(24, (0, _vectors.Vec3_Create_8ED0A5D)(x, y, 0));
}

function ObjectProps_position2dv(p) {
  return new _webgl_data.BuilderTypes_GlObjProp(24, (0, _vectors.Vec3_Create_Z18D5882D)(p, 0));
}

function ObjectProps_pixelDataUint8(values) {
  return new _webgl_data.BuilderTypes_GlTextureProp(10, new _webgl_data_types.GlTexturePixels(0, (0, _typedarray_utils.uint8Array)(values)));
}

function ObjectProps_pixelImageId(id) {
  var img = document.getElementById(id);
  return new _webgl_data.BuilderTypes_GlTextureProp(10, new _webgl_data_types.GlTexturePixels(2, img));
}

function ObjectProps_objectName(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(0, x);
}

function ObjectProps_drawMethod(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(1, x);
}

function ObjectProps_drawPrimitive(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(2, x);
}

function ObjectProps_vertexCount(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(3, x);
}

function ObjectProps_vertexOffset(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(4, x);
}

function ObjectProps_vertexCountOffset(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(5, x);
}

function ObjectProps_instanceCount(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(6, x);
}

function ObjectProps_instanceOffset(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(7, x);
}

function ObjectProps_instanceCountOffset(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(8, x);
}

function ObjectProps_IndicesOffset(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(9, x);
}

function ObjectProps_capability(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(15, x);
}

function ObjectProps_processLinked(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(16, x);
}

function ObjectProps_parallaxCamera(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(17, x);
}

function ObjectProps_parallaxDistance(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(18, x);
}

function ObjectProps_layer(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(19, x);
}

function ObjectProps_angle(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(20, x);
}

function ObjectProps_angleDegrees(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(21, x);
}

function ObjectProps_angleZ(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(22, x);
}

function ObjectProps_angleDegreesZ(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(23, x);
}

function ObjectProps_position(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(24, x);
}

function ObjectProps_scale(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(25, x);
}

function ObjectProps_objectLink(x) {
  return new _webgl_data.BuilderTypes_GlObjProp(26, x);
}

function ObjectProps_pathParams(config, scene) {
  var props;
  return new _webgl_data.BuilderTypes_GlObjProp(11, (0, _Util.uncurry)(2, (props = (0, _List.ofArray)([UboProps_u("strokeColor", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec4__get_Values)((0, _glcanvasparams.GlCanvasParams__get_StrokeColor)(config))))), UboProps_u("fillColor", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec4__get_Values)((0, _glcanvasparams.GlCanvasParams__get_FillColor)(config))))), UboProps_u("lineWidth", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glscene.pixelsToWorld)((0, _glcanvasparams.GlCanvasParams__get_LineWidth)(config), scene))))]), function (overrides) {
    return function (parentObject) {
      return Props_glubo("pathParams", props, overrides, parentObject);
    };
  })));
}

var ObjectProps_enableDepthTesting = _glcapabilities.enableDepthTesting;
exports.ObjectProps_enableDepthTesting = ObjectProps_enableDepthTesting;
var ObjectProps_disableDepthTesting = _glcapabilities.disableDepthTesting;
exports.ObjectProps_disableDepthTesting = ObjectProps_disableDepthTesting;
var ObjectProps_cullFront = _glcapabilities.cullFront;
exports.ObjectProps_cullFront = ObjectProps_cullFront;
var ObjectProps_cullBack = _glcapabilities.cullBack;
exports.ObjectProps_cullBack = ObjectProps_cullBack;
var ObjectProps_cullFrontAndBack = _glcapabilities.cullFrontAndBack;
exports.ObjectProps_cullFrontAndBack = ObjectProps_cullFrontAndBack;
var ObjectProps_cullFace = _glcapabilities.cullFace;
exports.ObjectProps_cullFace = ObjectProps_cullFace;
var ObjectProps_enableCulling = _glcapabilities.enableCulling;
exports.ObjectProps_enableCulling = ObjectProps_enableCulling;
var ObjectProps_disableCulling = _glcapabilities.disableCulling;
exports.ObjectProps_disableCulling = ObjectProps_disableCulling;

var ObjectProps_blendColor = function ObjectProps_blendColor(r) {
  return function (g) {
    return function (b) {
      return function (a) {
        return (0, _glcapabilities.blendColor)(r, g, b, a);
      };
    };
  };
};

exports.ObjectProps_blendColor = ObjectProps_blendColor;
var ObjectProps_blendColorV = _glcapabilities.blendColorV;
exports.ObjectProps_blendColorV = ObjectProps_blendColorV;

var ObjectProps_blendFunc = function ObjectProps_blendFunc(sfactor) {
  return function (dfactor) {
    return (0, _glcapabilities.blendFunc)(sfactor, dfactor);
  };
};

exports.ObjectProps_blendFunc = ObjectProps_blendFunc;

var ObjectProps_blendFuncSeparate = function ObjectProps_blendFuncSeparate(srcRGB) {
  return function (dstRGB) {
    return function (srcAlpha) {
      return function (dstAlpha) {
        return (0, _glcapabilities.blendFuncSeparate)(srcRGB, dstRGB, srcAlpha, dstAlpha);
      };
    };
  };
};

exports.ObjectProps_blendFuncSeparate = ObjectProps_blendFuncSeparate;
var ObjectProps_blendEquation = _glcapabilities.blendEquation;
exports.ObjectProps_blendEquation = ObjectProps_blendEquation;

var ObjectProps_blendEquationSeparate = function ObjectProps_blendEquationSeparate(modeRGB) {
  return function (modeAlpha) {
    return (0, _glcapabilities.blendEquationSeparate)(modeRGB, modeAlpha);
  };
};

exports.ObjectProps_blendEquationSeparate = ObjectProps_blendEquationSeparate;
var ObjectProps_enableBlending = _glcapabilities.enableBlending;
exports.ObjectProps_enableBlending = ObjectProps_enableBlending;
var ObjectProps_disableBlending = _glcapabilities.disableBlending;
exports.ObjectProps_disableBlending = ObjectProps_disableBlending;
var ObjectProps_enable = _glcapabilities.enable;
exports.ObjectProps_enable = ObjectProps_enable;
var ObjectProps_disable = _glcapabilities.disable;
exports.ObjectProps_disable = ObjectProps_disable;
},{"../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../webgl_data/glcanvas.js":"../JS/webgl_data/glcanvas.js","../webgl_data/glscene.js":"../JS/webgl_data/glscene.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../webgl_data/globj.js":"../JS/webgl_data/globj.js","../webgl_data/glubo.js":"../JS/webgl_data/glubo.js","../webgl_data/gltexture.js":"../JS/webgl_data/gltexture.js","../webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_data/webgl_data_types.js":"../JS/webgl_data/webgl_data_types.js","../webgl_data/glortho2d.js":"../JS/webgl_data/glortho2d.js","../core/vectors.js":"../JS/core/vectors.js","../webgl_data/glubouniform.js":"../JS/webgl_data/glubouniform.js","../webgl_data/glinterleavechildattribute.js":"../JS/webgl_data/glinterleavechildattribute.js","../webgl_data/gluniform.js":"../JS/webgl_data/gluniform.js","../webgl_data/glsingleattribute.js":"../JS/webgl_data/glsingleattribute.js","../webgl_data/glinterleaveattribute.js":"../JS/webgl_data/glinterleaveattribute.js","../webgl_data/glindicies.js":"../JS/webgl_data/glindicies.js","../js/typedarray_utils.js":"../JS/js/typedarray_utils.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../webgl_data/glcanvasparams.js":"../JS/webgl_data/glcanvasparams.js","../webgl_data/glcapabilities.js":"../JS/webgl_data/glcapabilities.js"}],"../JS/webgl_objects/webglobject.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.WebglObject$reflection = WebglObject$reflection;
exports.WebglObject_$ctor_E676F7D = WebglObject_$ctor_E676F7D;
exports.WebglObject__get_ObjectDef = WebglObject__get_ObjectDef;
exports.WebglObject__get_Scene = WebglObject__get_Scene;
exports.WebglObject__get_Position = WebglObject__get_Position;
exports.WebglObject__set_Position_Z3D47FC51 = WebglObject__set_Position_Z3D47FC51;
exports.WebglObject__get_Position2 = WebglObject__get_Position2;
exports.WebglObject__set_Position2_Z3D47FC52 = WebglObject__set_Position2_Z3D47FC52;
exports.WebglObject__get_Angle = WebglObject__get_Angle;
exports.WebglObject__set_Angle_Z3D47FC51 = WebglObject__set_Angle_Z3D47FC51;
exports.WebglObject__get_AngleZ = WebglObject__get_AngleZ;
exports.WebglObject__set_AngleZ_6069AC9A = WebglObject__set_AngleZ_6069AC9A;
exports.WebglObject__get_AngleDegrees = WebglObject__get_AngleDegrees;
exports.WebglObject__set_AngleDegrees_Z3D47FC51 = WebglObject__set_AngleDegrees_Z3D47FC51;
exports.WebglObject__get_AngleDegreesZ = WebglObject__get_AngleDegreesZ;
exports.WebglObject__set_AngleDegreesZ_60759B6B = WebglObject__set_AngleDegreesZ_60759B6B;
exports.WebglObject__get_Scale = WebglObject__get_Scale;
exports.WebglObject__set_Scale_5E38073B = WebglObject__set_Scale_5E38073B;
exports.WebglObject = void 0;

var _glscene = require("../webgl_data/glscene.js");

var _globj = require("../webgl_data/globj.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _vectors = require("../core/vectors.js");

var _utils = require("../core/utils.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var WebglObject = /*#__PURE__*/function () {
  function WebglObject(scene, objectCreator) {
    _classCallCheck(this, WebglObject);

    this.scene = scene;
    this.objectDef = (0, _glscene.addObject)(objectCreator)(this.scene);
  }

  _createClass(WebglObject, [{
    key: "Wil.Webgl.WebglObject.Delete",
    value: function WilWebglWebglObjectDelete() {
      var _ = this;

      var value = (0, _glscene.removeObject)(_.objectDef)(_.scene);
      void value;
      (0, _globj.delete$)(_.objectDef);
    }
  }]);

  return WebglObject;
}();

exports.WebglObject = WebglObject;

function WebglObject$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.WebglObject", void 0, WebglObject);
}

function WebglObject_$ctor_E676F7D(scene, objectCreator) {
  return new WebglObject(scene, objectCreator);
}

function WebglObject__get_ObjectDef(_) {
  return _.objectDef;
}

function WebglObject__get_Scene(_) {
  return _.objectDef.Scene;
}

function WebglObject__get_Position(_) {
  return _.objectDef.Position;
}

function WebglObject__set_Position_Z3D47FC51(_, value) {
  (0, _globj.setPosition)(value, _.objectDef);
}

function WebglObject__get_Position2(_) {
  var __1 = _.objectDef.Position;
  return (0, _vectors.Vec2_Create_7B00E9A0)(__1.v.contents.values[0], __1.v.contents.values[1]);
}

function WebglObject__set_Position2_Z3D47FC52(_, value) {
  (0, _globj.setPositionXY)(value.values[0], value.values[1], _.objectDef);
}

function WebglObject__get_Angle(_) {
  return _.objectDef.Angle;
}

function WebglObject__set_Angle_Z3D47FC51(_, value) {
  (0, _globj.setAngle)(value, _.objectDef);
}

function WebglObject__get_AngleZ(_) {
  return _.objectDef.Angle.values[2] * 1;
}

function WebglObject__set_AngleZ_6069AC9A(_, value) {
  (0, _globj.setAngleZ)(value, _.objectDef);
}

function WebglObject__get_AngleDegrees(_) {
  return (0, _globj.degreesToRadians)(_.objectDef.Angle);
}

function WebglObject__set_AngleDegrees_Z3D47FC51(_, value) {
  (0, _globj.setAngleDegrees)(value, _.objectDef);
}

function WebglObject__get_AngleDegreesZ(_) {
  return _.objectDef.Angle.values[2] * 1 * _utils.DEG_PER_RAD;
}

function WebglObject__set_AngleDegreesZ_60759B6B(_, value) {
  (0, _globj.setAngleDegreesZ)(value, _.objectDef);
}

function WebglObject__get_Scale(_) {
  return _.objectDef.Scale;
}

function WebglObject__set_Scale_5E38073B(_, value) {
  (0, _globj.setScale)(value, _.objectDef);
}
},{"../webgl_data/glscene.js":"../JS/webgl_data/glscene.js","../webgl_data/globj.js":"../JS/webgl_data/globj.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../core/vectors.js":"../JS/core/vectors.js","../core/utils.js":"../JS/core/utils.js"}],"../JS/webgl_objects/grid2d.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Grid2D$reflection = Grid2D$reflection;
exports.Grid2D_$ctor_Z166BE183 = Grid2D_$ctor_Z166BE183;
exports.Grid2D__get_MinorLineColor = Grid2D__get_MinorLineColor;
exports.Grid2D__set_MinorLineColor_Z3D47FC58 = Grid2D__set_MinorLineColor_Z3D47FC58;
exports.Grid2D__get_MajorLineColor = Grid2D__get_MajorLineColor;
exports.Grid2D__set_MajorLineColor_Z3D47FC58 = Grid2D__set_MajorLineColor_Z3D47FC58;
exports.Grid2D__get_AxisLineColor = Grid2D__get_AxisLineColor;
exports.Grid2D__set_AxisLineColor_Z3D47FC58 = Grid2D__set_AxisLineColor_Z3D47FC58;
exports.Grid2D__get_MinorLineWidth = Grid2D__get_MinorLineWidth;
exports.Grid2D__set_MinorLineWidth_5E38073B = Grid2D__set_MinorLineWidth_5E38073B;
exports.Grid2D__get_MajorLineWidth = Grid2D__get_MajorLineWidth;
exports.Grid2D__set_MajorLineWidth_5E38073B = Grid2D__set_MajorLineWidth_5E38073B;
exports.Grid2D__get_AxisLineWidth = Grid2D__get_AxisLineWidth;
exports.Grid2D__set_AxisLineWidth_5E38073B = Grid2D__set_AxisLineWidth_5E38073B;
exports.Grid2D__get_Size = Grid2D__get_Size;
exports.Grid2D__set_Size_Z3D47FC52 = Grid2D__set_Size_Z3D47FC52;
exports.Grid2D__get_MinorTick = Grid2D__get_MinorTick;
exports.Grid2D__set_MinorTick_5E38073B = Grid2D__set_MinorTick_5E38073B;
exports.Grid2D__get_MajorTick = Grid2D__get_MajorTick;
exports.Grid2D__set_MajorTick_Z524259A4 = Grid2D__set_MajorTick_Z524259A4;
exports.Grid2D = void 0;

var _shader_utils = require("../webgl_core/shader_utils.js");

var _vectors = require("../core/vectors.js");

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Map = require("../.fable/fable-library.3.0.0/Map.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _webgl_data = require("../webgl_data/webgl_data.js");

var _glcommon = require("../webgl_data/glcommon.js");

var _webglobject = require("./webglobject.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _props = require("./props.js");

var _glcanvasparams = require("../webgl_data/glcanvasparams.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _glscene = require("../webgl_data/glscene.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _gluniform = require("../webgl_data/gluniform.js");

var _globj = require("../webgl_data/globj.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var Shaders_gridUbo = "\r\nuniform grid {\r\n  vec4 minorLineColor;\r\n  vec4 majorLineColor;\r\n  vec4 axisLineColor;\r\n  float minorLineWidth;\r\n  float majorLineWidth;\r\n  float axisLineWidth;\r\n  vec2 size;\r\n  vec2 minorTick;\r\n  ivec2 majorTick;\r\n};\r\n";
var Shaders_grid2dVertex = "#version 300 es\r\n// Grid2D\r\n#include precision\r\n#include grid-ubo\r\n#include path-outvars\r\n#include lines2d-vertex\r\n#line 30\r\n// x, y: point a.  z, w: point b.\r\nconst vec4 edgeTemplate[] = vec4[2](\r\n  vec4(0.0, -0.5, 0.0, 0.5), // Vertical\r\n  vec4(-0.5, 0.0, 0.5, 0.0)  // Horizontal\r\n);\r\n\r\nconst vec2 offsetTemplate[] = vec2[2](\r\n  vec2(1.0, 0.0), // Vertical\r\n  vec2(0.0, 1.0)  // Horizontal\r\n);\r\n\r\nfloat priorEvenFloat(float f) {\r\n  int x = int(floor(f));\r\n  return mix(float(x), float(x) - 1.0, float(x % 2));\r\n}\r\n\r\nvec2 priorEven(vec2 v) { return vec2(priorEvenFloat(v.x), priorEvenFloat(v.y)); }\r\n\r\nfloat fmod(float a, float b) {\r\n  float res = abs(a / b);\r\n  return ceil(res) - res;\r\n}\r\n\r\nvoid main() {\r\n  vec2 majorValue = minorTick * vec2(majorTick);\r\n  vec2 esize = priorEven(size);\r\n  ivec2 halfTicks = ivec2(esize * 0.5 / minorTick);\r\n  ivec2 minorTickCount = halfTicks * 2 + 1;\r\n  int instanceCount = minorTickCount.x + minorTickCount.y;\r\n  ivec2 majorOffset = majorTick - (halfTicks % majorTick);\r\n  vec2 start = -vec2(halfTicks) * minorTick;\r\n  int edgeID = int(step(float(minorTickCount.x), float(gl_InstanceID)));\r\n  vec4 edge = edgeTemplate[edgeID];\r\n  vec2 ofs = offsetTemplate[edgeID];\r\n\r\n  vec2 a = edge.xy * size;\r\n  vec2 b = edge.zw * size;\r\n\r\n  int vertexID = gl_VertexID % 6;\r\n  ivec2 colRow = ivec2(gl_InstanceID % minorTickCount.x);\r\n  colRow.y = gl_InstanceID - minorTickCount.x;\r\n  vec2 center = start + vec2(colRow) * vec2(minorTick);\r\n  center *= ofs;\r\n\r\n  ivec2 isMajorv = (colRow + majorOffset) % majorTick;\r\n  isMajorv = ivec2(vec2(float(isMajorv.x == 0), float(isMajorv.y == 0)));\r\n  float isMajor = float(isMajorv.x) * ofs.x + float(isMajorv.y) * ofs.y;\r\n  vec2 isAxisv = vec2(float(colRow.x == halfTicks.x), float(colRow.y == halfTicks.y));\r\n  float isAxis = isAxisv.x * ofs.x + isAxisv.y * ofs.y;\r\n\r\n  float width = mix(minorLineWidth, majorLineWidth, isMajor);\r\n  width = mix(width, axisLineWidth, isAxis);\r\n  vec4 color = mix(minorLineColor, majorLineColor, isMajor);\r\n  color = mix(color, axisLineColor, isAxis);\r\n\r\n  vec2 direction = b - a;\r\n  vec2 leftNormal = normalize(perp(direction));\r\n  vec2 vertex = line2d(a, direction, leftNormal, width, vertexID);\r\n  vertex += center;\r\n  vec4 position = vec4(vertex, 0.0, 1.0);\r\n\r\n  position = projMat * viewMat * modelMat * position;\r\n\r\n  gl_Position = position;\r\n  v_fillColor = color;\r\n}";
var Shaders_grid2dVertexKey = "grid2dVertex";
(0, _shader_utils.WebglShaderUtils_addShaderInclude)("grid-ubo", Shaders_gridUbo);
(0, _shader_utils.WebglShaderUtils_addVertexShaderSource)(Shaders_grid2dVertexKey, Shaders_grid2dVertex);

function VecUtils_priorEven(v) {
  var priorEvenFloat = function priorEvenFloat(value) {
    var x = ~~Math.floor(value) | 0;

    if (x % 2 === 0) {
      return x;
    } else {
      return x - 1;
    }
  };

  var __2 = v;
  var value_2 = (0, _vectors.Vec2__WithXY_6DB1BD7B)(__2.v.contents, priorEvenFloat(v.values[0]), priorEvenFloat(v.values[1]), __2.v.contents);
  void value_2;
  return v;
}

var Grid2D = /*#__PURE__*/function (_WebglObject) {
  _inherits(Grid2D, _WebglObject);

  var _super = _createSuper(Grid2D);

  function Grid2D(config, scene, size, layer, name, linkTo, parallaxCam, parallaxDistance) {
    var _this;

    _classCallCheck(this, Grid2D);

    _this = _super.call(this, scene, (0, _Util.uncurry)(2, function () {
      var props = (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlObjProp(0, (0, _Option.defaultArg)(name, "")), new _webgl_data.BuilderTypes_GlObjProp(26, (0, _Option.defaultArg)(linkTo, "")), new _webgl_data.BuilderTypes_GlObjProp(17, (0, _Option.defaultArg)(parallaxCam, "")), new _webgl_data.BuilderTypes_GlObjProp(18, (0, _Option.defaultArg)(parallaxDistance, 1)), new _webgl_data.BuilderTypes_GlObjProp(19, (0, _Option.defaultArg)(layer, scene.DefaultLayer)), new _webgl_data.BuilderTypes_GlObjProp(3, 6), new _webgl_data.BuilderTypes_GlObjProp(6, 1), (0, _props.ObjectProps_ubo)("grid", (0, _List.ofArray)([(0, _props.UboProps_u)("minorLineColor", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec4__get_Values)((0, _glcanvasparams.GlCanvasParams__get_StrokeColor)(config))))), (0, _props.UboProps_u)("majorLineColor", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec4__get_Values)((0, _glcanvasparams.GlCanvasParams__get_StrokeColor)(config))))), (0, _props.UboProps_u)("axisLineColor", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec4__get_Values)((0, _glcanvasparams.GlCanvasParams__get_StrokeColor)(config))))), (0, _props.UboProps_u)("minorLineWidth", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glscene.pixelsToWorld)((0, _glcanvasparams.GlCanvasParams__get_LineWidth)(config) * 0.8, scene)))), (0, _props.UboProps_u)("majorLineWidth", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glscene.pixelsToWorld)((0, _glcanvasparams.GlCanvasParams__get_LineWidth)(config) * 1.5, scene)))), (0, _props.UboProps_u)("axisLineWidth", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glscene.pixelsToWorld)((0, _glcanvasparams.GlCanvasParams__get_LineWidth)(config) * 3, scene)))), (0, _props.UboProps_u)("size", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec2__get_Values)((0, _vectors.Vec2__Clone)(size))))), (0, _props.UboProps_u)("minorTick", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, new Float64Array([1, 1])))), (0, _props.UboProps_u)("majorTick", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, new Int32Array([10, 10]))))]))]);
      return function (overrides) {
        return function (scene_4) {
          return (0, _props.Props_globject)(Shaders_grid2dVertexKey, "simpleFragment2d", props, overrides, scene_4);
        };
      };
    }()));
    _this.o = new _Types.FSharpRef(null);
    _this.o.contents = _assertThisInitialized(_this);
    _this.uniforms = (0, _Map.ofSeq)((0, _Seq.map)(function (u) {
      return [(0, _webgl_data.Data_GlUniformData__get_Name)(u), u];
    }, (0, _glcommon.allUniforms)((0, _webglobject.WebglObject__get_ObjectDef)(_this.o.contents))), {
      Compare: _Util.comparePrimitives
    });
    _this["init@112-11"] = 1;
    Grid2D__updateInstanceCount(_assertThisInitialized(_this));
    return _this;
  }

  return Grid2D;
}(_webglobject.WebglObject);

exports.Grid2D = Grid2D;

function Grid2D$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.Grid2D", void 0, Grid2D, (0, _webglobject.WebglObject$reflection)());
}

function Grid2D_$ctor_Z166BE183(config, scene, size, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return new Grid2D(config, scene, size, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function Grid2D__get_MinorLineColor(_) {
  var name_1, matchValue, msg, uniform;
  return (0, _vectors.Vec4_$ctor_Z14AF5965)((name_1 = "minorLineColor", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))).Value);
}

function Grid2D__set_MinorLineColor_Z3D47FC58(_, value) {
  var data;
  var name_1 = "minorLineColor";
  var matchValue = (0, _Map.tryFind)(name_1, _.uniforms);

  if (matchValue == null) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1]));
    throw new Error(msg);
  } else {
    var uniform = matchValue;
    data = uniform;
  }

  (0, _gluniform.setValue)((0, _vectors.Vec4__get_Values)(value), data);
}

function Grid2D__get_MajorLineColor(_) {
  var name_1, matchValue, msg, uniform;
  return (0, _vectors.Vec4_$ctor_Z14AF5965)((name_1 = "majorLineColor", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))).Value);
}

function Grid2D__set_MajorLineColor_Z3D47FC58(_, value) {
  var data;
  var name_1 = "majorLineColor";
  var matchValue = (0, _Map.tryFind)(name_1, _.uniforms);

  if (matchValue == null) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1]));
    throw new Error(msg);
  } else {
    var uniform = matchValue;
    data = uniform;
  }

  (0, _gluniform.setValue)((0, _vectors.Vec4__get_Values)(value), data);
}

function Grid2D__get_AxisLineColor(_) {
  var name_1, matchValue, msg, uniform;
  return (0, _vectors.Vec4_$ctor_Z14AF5965)((name_1 = "axisLineColor", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))).Value);
}

function Grid2D__set_AxisLineColor_Z3D47FC58(_, value) {
  var data;
  var name_1 = "axisLineColor";
  var matchValue = (0, _Map.tryFind)(name_1, _.uniforms);

  if (matchValue == null) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1]));
    throw new Error(msg);
  } else {
    var uniform = matchValue;
    data = uniform;
  }

  (0, _gluniform.setValue)((0, _vectors.Vec4__get_Values)(value), data);
}

function Grid2D__get_MinorLineWidth(_) {
  var name_1, matchValue, msg, uniform;
  return (name_1 = "minorLineWidth", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))).Value[0];
}

function Grid2D__set_MinorLineWidth_5E38073B(_, value) {
  var name_1, matchValue, msg, uniform;
  (0, _gluniform.setValue)(value, (name_1 = "minorLineWidth", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))));
}

function Grid2D__get_MajorLineWidth(_) {
  var name_1, matchValue, msg, uniform;
  return (name_1 = "majorLineWidth", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))).Value[0];
}

function Grid2D__set_MajorLineWidth_5E38073B(_, value) {
  var name_1, matchValue, msg, uniform;
  (0, _gluniform.setValue)(value, (name_1 = "majorLineWidth", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))));
}

function Grid2D__get_AxisLineWidth(_) {
  var name_1, matchValue, msg, uniform;
  return (name_1 = "axisLineWidth", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))).Value[0];
}

function Grid2D__set_AxisLineWidth_5E38073B(_, value) {
  var name_1, matchValue, msg, uniform;
  (0, _gluniform.setValue)(value, (name_1 = "axisLineWidth", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))));
}

function Grid2D__get_Size(_) {
  var name_1, matchValue, msg, uniform;
  return (0, _vectors.Vec2_$ctor_Z33A93963)((name_1 = "size", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))).Value);
}

function Grid2D__set_Size_Z3D47FC52(_, value) {
  var data;
  var name_1 = "size";
  var matchValue = (0, _Map.tryFind)(name_1, _.uniforms);

  if (matchValue == null) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1]));
    throw new Error(msg);
  } else {
    var uniform = matchValue;
    data = uniform;
  }

  (0, _gluniform.setValue)((0, _vectors.Vec2__get_Values)(value), data);
  Grid2D__updateInstanceCount(_);
}

function Grid2D__get_MinorTick(_) {
  var name_1, matchValue, msg, uniform;
  return (0, _vectors.Vec2_$ctor_Z33A93963)((name_1 = "minorTick", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))).Value).values[0];
}

function Grid2D__set_MinorTick_5E38073B(_, value) {
  var data;
  var name_1 = "minorTick";
  var matchValue = (0, _Map.tryFind)(name_1, _.uniforms);

  if (matchValue == null) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1]));
    throw new Error(msg);
  } else {
    var uniform = matchValue;
    data = uniform;
  }

  (0, _gluniform.setValue)((0, _vectors.Vec2__get_Values)((0, _vectors.Vec2_Create_5E38073B)(value)), data);
  Grid2D__updateInstanceCount(_);
}

function Grid2D__get_MajorTick(_) {
  var name_1, matchValue, msg, uniform;
  return ~~(0, _vectors.Vec2_$ctor_Z33A93963)((name_1 = "majorTick", (matchValue = (0, _Map.tryFind)(name_1, _.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))).Value).values[0];
}

function Grid2D__set_MajorTick_Z524259A4(_, value) {
  var data;
  var name_1 = "majorTick";
  var matchValue = (0, _Map.tryFind)(name_1, _.uniforms);

  if (matchValue == null) {
    var msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1]));
    throw new Error(msg);
  } else {
    var uniform = matchValue;
    data = uniform;
  }

  (0, _gluniform.setValue)((0, _vectors.Vec2__get_Values)((0, _vectors.Vec2_Create_5E38073B)(value)), data);
}

function Grid2D__calcInstanceCount(this$) {
  var name_1, matchValue, msg, uniform, name_3, matchValue_1, msg_1, uniform_1;
  var size = VecUtils_priorEven((0, _vectors.Vec2_$ctor_Z33A93963)((name_1 = "size", (matchValue = (0, _Map.tryFind)(name_1, this$.uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_1])), function () {
    throw new Error(msg);
  }()) : (uniform = matchValue, uniform))).Value));
  var minorTicks = (0, _vectors.Vec2_$ctor_Z33A93963)((name_3 = "minorTick", (matchValue_1 = (0, _Map.tryFind)(name_3, this$.uniforms), matchValue_1 == null ? (msg_1 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_3])), function () {
    throw new Error(msg_1);
  }()) : (uniform_1 = matchValue_1, uniform_1))).Value);
  var minorTickCount = (0, _vectors.Vec2_op_Addition_47807E55)((0, _vectors.Vec2_op_Multiply_47807E55)((0, _vectors.Vec2_op_Division_Z24FF8540)((0, _vectors.Vec2_op_Multiply_47807E55)(size, 0.5), minorTicks), 2), 1);
  return ~~(minorTickCount.values[0] + minorTickCount.values[1]) | 0;
}

function Grid2D__updateInstanceCount(this$) {
  var data = (0, _webglobject.WebglObject__get_ObjectDef)(this$.o.contents);
  (0, _globj.setInstanceCount)(Grid2D__calcInstanceCount(this$), data);
}
},{"../webgl_core/shader_utils.js":"../JS/webgl_core/shader_utils.js","../core/vectors.js":"../JS/core/vectors.js","../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Map.js":"../JS/.fable/fable-library.3.0.0/Map.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_data/glcommon.js":"../JS/webgl_data/glcommon.js","./webglobject.js":"../JS/webgl_objects/webglobject.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./props.js":"../JS/webgl_objects/props.js","../webgl_data/glcanvasparams.js":"../JS/webgl_data/glcanvasparams.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../webgl_data/glscene.js":"../JS/webgl_data/glscene.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../webgl_data/gluniform.js":"../JS/webgl_data/gluniform.js","../webgl_data/globj.js":"../JS/webgl_data/globj.js"}],"../JS/webgl_objects/quadobjectbase.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.QuadObjectBase$reflection = QuadObjectBase$reflection;
exports.QuadObjectBase_$ctor_5421FB7E = QuadObjectBase_$ctor_5421FB7E;
exports.QuadObjectBase__get_Size = QuadObjectBase__get_Size;
exports.QuadObjectBase__set_Size_Z3D47FC52 = QuadObjectBase__set_Size_Z3D47FC52;
exports.QuadObjectBase__get_StrokeColor = QuadObjectBase__get_StrokeColor;
exports.QuadObjectBase__set_StrokeColor_Z3D47FC58 = QuadObjectBase__set_StrokeColor_Z3D47FC58;
exports.QuadObjectBase__get_FillColor = QuadObjectBase__get_FillColor;
exports.QuadObjectBase__set_FillColor_Z3D47FC58 = QuadObjectBase__set_FillColor_Z3D47FC58;
exports.QuadObjectBase__get_FillType = QuadObjectBase__get_FillType;
exports.QuadObjectBase__set_FillType_Z1454C5A5 = QuadObjectBase__set_FillType_Z1454C5A5;
exports.QuadObjectBase__get_AliasWidth = QuadObjectBase__get_AliasWidth;
exports.QuadObjectBase__set_AliasWidth_21F3BA25 = QuadObjectBase__set_AliasWidth_21F3BA25;
exports.QuadObjectBase = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Map = require("../.fable/fable-library.3.0.0/Map.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _webgl_data = require("../webgl_data/webgl_data.js");

var _glcommon = require("../webgl_data/glcommon.js");

var _webglobject = require("./webglobject.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _gluniform = require("../webgl_data/gluniform.js");

var _vectors = require("../core/vectors.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _props = require("./props.js");

var _glcanvasparams = require("../webgl_data/glcanvasparams.js");

var _glscene = require("../webgl_data/glscene.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var QuadObjectBase = /*#__PURE__*/function (_WebglObject) {
  _inherits(QuadObjectBase, _WebglObject);

  var _super = _createSuper(QuadObjectBase);

  function QuadObjectBase(config, scene, vertex, fragment, props, layer, name, linkTo, parallaxCam, parallaxDistance) {
    var _this;

    _classCallCheck(this, QuadObjectBase);

    _this = _super.call(this, scene, (0, _Util.uncurry)(2, function () {
      var props_1 = (0, _List.append)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlObjProp(0, (0, _Option.defaultArg)(name, "")), new _webgl_data.BuilderTypes_GlObjProp(26, (0, _Option.defaultArg)(linkTo, "")), new _webgl_data.BuilderTypes_GlObjProp(17, (0, _Option.defaultArg)(parallaxCam, "")), new _webgl_data.BuilderTypes_GlObjProp(18, (0, _Option.defaultArg)(parallaxDistance, 1)), new _webgl_data.BuilderTypes_GlObjProp(19, (0, _Option.defaultArg)(layer, scene.DefaultLayer)), new _webgl_data.BuilderTypes_GlObjProp(3, 4), new _webgl_data.BuilderTypes_GlObjProp(2, 5), (0, _props.ObjectProps_ubo)("quadParams", (0, _List.ofArray)([(0, _props.UboProps_u)("size", (0, _List.singleton)((0, _props.UniformProps_vec2Value)(0, 0))), (0, _props.UboProps_u)("strokeColor", (0, _List.singleton)((0, _props.UniformProps_vec4ValueV)((0, _glcanvasparams.GlCanvasParams__get_StrokeColor)(config)))), (0, _props.UboProps_u)("fillColor", (0, _List.singleton)((0, _props.UniformProps_vec4ValueV)((0, _glcanvasparams.GlCanvasParams__get_FillColor)(config)))), (0, _props.UboProps_u)("fillType", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glcanvasparams.GlCanvasParams__get_FillType)(config)))), (0, _props.UboProps_u)("lineWidth", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glscene.pixelsToWorld)((0, _glcanvasparams.GlCanvasParams__get_LineWidth)(config), scene)))), (0, _props.UboProps_u)("aliasWidth", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 2))), (0, _props.UboProps_u)("angle", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 0))), (0, _props.UboProps_u)("instanceCount", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 1)))]))]), props);
      return function (overrides) {
        return function (scene_1) {
          return (0, _props.Props_globject)(vertex, fragment, props_1, overrides, scene_1);
        };
      };
    }()));
    var o = new _Types.FSharpRef(null);
    _this.scene_1 = scene;
    o.contents = _assertThisInitialized(_this);
    var uniforms = (0, _Map.ofSeq)((0, _Seq.map)(function (u) {
      return [(0, _webgl_data.Data_GlUniformData__get_Name)(u), u];
    }, (0, _glcommon.allUniforms)((0, _webglobject.WebglObject__get_ObjectDef)(o.contents))), {
      Compare: _Util.comparePrimitives
    });

    _this.getFloat = function (name_1) {
      var name_3, matchValue, msg, uniform;
      return (name_3 = name_1, (matchValue = (0, _Map.tryFind)(name_3, uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_3])), function () {
        throw new Error(msg);
      }()) : (uniform = matchValue, uniform))).Value[0];
    };

    _this.setFloat = function (name_4, value) {
      var name_6, matchValue_1, msg_1, uniform_1;
      (0, _gluniform.setValue)(value, (name_6 = name_4, (matchValue_1 = (0, _Map.tryFind)(name_6, uniforms), matchValue_1 == null ? (msg_1 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_6])), function () {
        throw new Error(msg_1);
      }()) : (uniform_1 = matchValue_1, uniform_1))));
    };

    _this.getInt = function (name_7) {
      var name_9, matchValue_2, msg_2, uniform_2;
      return (name_9 = name_7, (matchValue_2 = (0, _Map.tryFind)(name_9, uniforms), matchValue_2 == null ? (msg_2 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_9])), function () {
        throw new Error(msg_2);
      }()) : (uniform_2 = matchValue_2, uniform_2))).Value[0];
    };

    _this.setInt = function (name_10, value_2) {
      var name_12, matchValue_3, msg_3, uniform_3;
      (0, _gluniform.setValue)(value_2, (name_12 = name_10, (matchValue_3 = (0, _Map.tryFind)(name_12, uniforms), matchValue_3 == null ? (msg_3 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_12])), function () {
        throw new Error(msg_3);
      }()) : (uniform_3 = matchValue_3, uniform_3))));
    };

    _this.getVec2 = function (name_13) {
      var name_15, matchValue_4, msg_4, uniform_4;
      return (0, _vectors.Vec2_$ctor_Z33A93963)((name_15 = name_13, (matchValue_4 = (0, _Map.tryFind)(name_15, uniforms), matchValue_4 == null ? (msg_4 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_15])), function () {
        throw new Error(msg_4);
      }()) : (uniform_4 = matchValue_4, uniform_4))).Value);
    };

    _this.setVec2 = function (name_16, value_4) {
      var data_3;
      var name_18 = name_16;
      var matchValue_5 = (0, _Map.tryFind)(name_18, uniforms);

      if (matchValue_5 == null) {
        var msg_5 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_18]));
        throw new Error(msg_5);
      } else {
        var uniform_5 = matchValue_5;
        data_3 = uniform_5;
      }

      (0, _gluniform.setValue)((0, _vectors.Vec2__get_Values)(value_4), data_3);
    };

    _this.getVec4 = function (name_19) {
      var name_21, matchValue_6, msg_6, uniform_6;
      return (0, _vectors.Vec4_$ctor_Z14AF5965)((name_21 = name_19, (matchValue_6 = (0, _Map.tryFind)(name_21, uniforms), matchValue_6 == null ? (msg_6 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_21])), function () {
        throw new Error(msg_6);
      }()) : (uniform_6 = matchValue_6, uniform_6))).Value);
    };

    _this.setVec4 = function (name_22, value_7) {
      var data_4;
      var name_24 = name_22;
      var matchValue_7 = (0, _Map.tryFind)(name_24, uniforms);

      if (matchValue_7 == null) {
        var msg_7 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_24]));
        throw new Error(msg_7);
      } else {
        var uniform_7 = matchValue_7;
        data_4 = uniform_7;
      }

      (0, _gluniform.setValue)((0, _vectors.Vec4__get_Values)(value_7), data_4);
    };

    _this["init@12-12"] = 1;
    return _this;
  }

  _createClass(QuadObjectBase, [{
    key: "Wil.Webgl.QuadObjectBase.get_LineWidth",
    value: function WilWebglQuadObjectBaseGet_LineWidth() {
      var _ = this;

      return _.getFloat("lineWidth");
    }
  }, {
    key: "Wil.Webgl.QuadObjectBase.set_LineWidth",
    value: function WilWebglQuadObjectBaseSet_LineWidth(value) {
      var _ = this;

      _.setFloat("lineWidth", value);
    }
  }]);

  return QuadObjectBase;
}(_webglobject.WebglObject);

exports.QuadObjectBase = QuadObjectBase;

function QuadObjectBase$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.QuadObjectBase", void 0, QuadObjectBase, (0, _webglobject.WebglObject$reflection)());
}

function QuadObjectBase_$ctor_5421FB7E(config, scene, vertex, fragment, props, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return new QuadObjectBase(config, scene, vertex, fragment, props, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function QuadObjectBase__get_Size(_) {
  return _.getVec2("size");
}

function QuadObjectBase__set_Size_Z3D47FC52(_, value) {
  _.setVec2("size", value);
}

function QuadObjectBase__get_StrokeColor(_) {
  return _.getVec4("strokeColor");
}

function QuadObjectBase__set_StrokeColor_Z3D47FC58(_, value) {
  _.setVec4("strokeColor", value);
}

function QuadObjectBase__get_FillColor(_) {
  return _.getVec4("fillColor");
}

function QuadObjectBase__set_FillColor_Z3D47FC58(_, value) {
  _.setVec4("fillColor", value);
}

function QuadObjectBase__get_FillType(_) {
  return _.getInt("fillType");
}

function QuadObjectBase__set_FillType_Z1454C5A5(_, value) {
  _.setInt("fillType", value);
}

function QuadObjectBase__get_AliasWidth(_) {
  return (0, _glscene.worldToPixels)(_.getFloat("aliasWidth"), _.scene_1);
}

function QuadObjectBase__set_AliasWidth_21F3BA25(_, value) {
  _.setFloat("aliasWidth", (0, _glscene.pixelsToWorld)(value, _.scene_1));
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Map.js":"../JS/.fable/fable-library.3.0.0/Map.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_data/glcommon.js":"../JS/webgl_data/glcommon.js","./webglobject.js":"../JS/webgl_objects/webglobject.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../webgl_data/gluniform.js":"../JS/webgl_data/gluniform.js","../core/vectors.js":"../JS/core/vectors.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./props.js":"../JS/webgl_objects/props.js","../webgl_data/glcanvasparams.js":"../JS/webgl_data/glcanvasparams.js","../webgl_data/glscene.js":"../JS/webgl_data/glscene.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js"}],"../JS/webgl_objects/vectorobject2d.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.VectorObject2D$reflection = VectorObject2D$reflection;
exports.VectorObject2D_$ctor_Z166BE183 = VectorObject2D_$ctor_Z166BE183;
exports.VectorObject2D__get_Vector = VectorObject2D__get_Vector;
exports.VectorObject2D__set_Vector_Z3D47FC52 = VectorObject2D__set_Vector_Z3D47FC52;
exports.VectorObject2D = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Map = require("../.fable/fable-library.3.0.0/Map.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _webgl_data = require("../webgl_data/webgl_data.js");

var _glcommon = require("../webgl_data/glcommon.js");

var _webglobject = require("./webglobject.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _gluniform = require("../webgl_data/gluniform.js");

var _globj = require("../webgl_data/globj.js");

var _quadobjectbase = require("./quadobjectbase.js");

var _props = require("./props.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _vectors = require("../core/vectors.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var VectorObject2D = /*#__PURE__*/function (_QuadObjectBase) {
  _inherits(VectorObject2D, _QuadObjectBase);

  var _super = _createSuper(VectorObject2D);

  function VectorObject2D(config, scene, vector, layer, name, linkTo, parallaxCam, parallaxDistance) {
    var _this;

    _classCallCheck(this, VectorObject2D);

    _this = _super.call(this, config, scene, "quadStripRightVertex2d", "vectorFragment2d", (0, _List.singleton)((0, _props.ObjectProps_blendFunc)(1)(771)), layer, name, linkTo, parallaxCam, parallaxDistance);
    var o = new _Types.FSharpRef(null);
    o.contents = _assertThisInitialized(_this);
    var uniforms = (0, _Map.ofSeq)((0, _Seq.map)(function (u) {
      return [(0, _webgl_data.Data_GlUniformData__get_Name)(u), u];
    }, (0, _glcommon.allUniforms)((0, _webglobject.WebglObject__get_ObjectDef)(o.contents))), {
      Compare: _Util.comparePrimitives
    });

    _this.getFloat_1 = function (name_1) {
      var name_3, matchValue, msg, uniform;
      return (name_3 = name_1, (matchValue = (0, _Map.tryFind)(name_3, uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_3])), function () {
        throw new Error(msg);
      }()) : (uniform = matchValue, uniform))).Value[0];
    };

    _this.setFloat_1 = function (name_4, value) {
      var name_6, matchValue_1, msg_1, uniform_1;
      (0, _gluniform.setValue)(value, (name_6 = name_4, (matchValue_1 = (0, _Map.tryFind)(name_6, uniforms), matchValue_1 == null ? (msg_1 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_6])), function () {
        throw new Error(msg_1);
      }()) : (uniform_1 = matchValue_1, uniform_1))));
    };

    _this.vec = vector;
    _this.uSize = (0, _globj.getUniform)("size")((0, _webglobject.WebglObject__get_ObjectDef)(o.contents));
    _this.uAngle = (0, _globj.getUniform)("angle")((0, _webglobject.WebglObject__get_ObjectDef)(o.contents));
    _this["init@18-13"] = 1;
    VectorObject2D__updateSize(_assertThisInitialized(_this));
    VectorObject2D__updateAngle(_assertThisInitialized(_this));
    return _this;
  }

  _createClass(VectorObject2D, [{
    key: "Wil.Webgl.QuadObjectBase.get_LineWidth",
    value: function WilWebglQuadObjectBaseGet_LineWidth() {
      var _ = this;

      return _.getFloat_1("lineWidth");
    }
  }, {
    key: "Wil.Webgl.QuadObjectBase.set_LineWidth",
    value: function WilWebglQuadObjectBaseSet_LineWidth(value) {
      var _ = this;

      _.setFloat_1("lineWidth", value);

      VectorObject2D__updateSize(_);
    }
  }]);

  return VectorObject2D;
}(_quadobjectbase.QuadObjectBase);

exports.VectorObject2D = VectorObject2D;

function VectorObject2D$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.VectorObject2D", void 0, VectorObject2D, (0, _quadobjectbase.QuadObjectBase$reflection)());
}

function VectorObject2D_$ctor_Z166BE183(config, scene, vector, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return new VectorObject2D(config, scene, vector, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function VectorObject2D__get_Vector(_) {
  return _.vec;
}

function VectorObject2D__set_Vector_Z3D47FC52(_, value) {
  var other = value;
  var value_3;
  var __4 = _.vec.v.contents;
  var x = other.values[0];
  var y = other.values[1];
  var __5 = __4.v.contents;
  __5.values[0] = x;
  var __6 = __4.v.contents;
  __6.values[1] = y;
  value_3 = __4.v.contents;
  void value_3;
  VectorObject2D__updateSize(_);
  VectorObject2D__updateAngle(_);
}

function VectorObject2D__calcSize(this$) {
  var _, __5;

  return (0, _vectors.Vec2__get_Values)((0, _vectors.Vec2_Create_7B00E9A0)((_ = this$.vec, Math.sqrt(_.v.contents.values[0] * _.v.contents.values[0] + _.v.contents.values[1] * _.v.contents.values[1])), (__5 = this$.vec, Math.sqrt(__5.v.contents.values[0] * __5.v.contents.values[0] + __5.v.contents.values[1] * __5.v.contents.values[1]))));
}

function VectorObject2D__updateSize(this$) {
  (0, _gluniform.setValue)(VectorObject2D__calcSize(this$), this$.uSize);
}

function VectorObject2D__updateAngle(this$) {
  (0, _gluniform.setValue)((0, _vectors.Vec2__get_Angle)(this$.vec), this$.uAngle);
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Map.js":"../JS/.fable/fable-library.3.0.0/Map.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_data/glcommon.js":"../JS/webgl_data/glcommon.js","./webglobject.js":"../JS/webgl_objects/webglobject.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../webgl_data/gluniform.js":"../JS/webgl_data/gluniform.js","../webgl_data/globj.js":"../JS/webgl_data/globj.js","./quadobjectbase.js":"../JS/webgl_objects/quadobjectbase.js","./props.js":"../JS/webgl_objects/props.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../core/vectors.js":"../JS/core/vectors.js"}],"../JS/webgl_objects/lineobjects2d.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LineObjects2D$reflection = LineObjects2D$reflection;
exports.LineObjects2D_$ctor_22E93213 = LineObjects2D_$ctor_22E93213;
exports.LineObjects2D__get_P1 = LineObjects2D__get_P1;
exports.LineObjects2D__set_P1_Z3D47FC52 = LineObjects2D__set_P1_Z3D47FC52;
exports.LineObjects2D__get_P2 = LineObjects2D__get_P2;
exports.LineObjects2D__set_P2_Z3D47FC52 = LineObjects2D__set_P2_Z3D47FC52;
exports.LineObjects2D__get_StrokeColor = LineObjects2D__get_StrokeColor;
exports.LineObjects2D__set_StrokeColor_Z3D47FC58 = LineObjects2D__set_StrokeColor_Z3D47FC58;
exports.LineObjects2D__get_LineWidth = LineObjects2D__get_LineWidth;
exports.LineObjects2D__set_LineWidth_5E38073B = LineObjects2D__set_LineWidth_5E38073B;
exports.LineObjects2D__get_LineCap = LineObjects2D__get_LineCap;
exports.LineObjects2D__set_LineCap_7B1263D0 = LineObjects2D__set_LineCap_7B1263D0;
exports.LineObjects2D = void 0;

var _shader_utils = require("../webgl_core/shader_utils.js");

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Map = require("../.fable/fable-library.3.0.0/Map.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _webgl_data = require("../webgl_data/webgl_data.js");

var _glcommon = require("../webgl_data/glcommon.js");

var _webglobject = require("./webglobject.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _gluniform = require("../webgl_data/gluniform.js");

var _vectors = require("../core/vectors.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _glcapabilities = require("../webgl_data/glcapabilities.js");

var _props = require("./props.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _glcanvasparams = require("../webgl_data/glcanvasparams.js");

var _glscene = require("../webgl_data/glscene.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

(0, _shader_utils.WebglShaderUtils_addShaderInclude)("line2d-params", "\r\nuniform line2dParams {\r\n  vec2 p1;\r\n  vec2 p2;\r\n  vec4 strokeColor;\r\n  float lineWidth;\r\n  int lineCap;\r\n};");
var Shaders_line2dVertex = "#version 300 es\r\n// LineObjects2D\r\n#include precision\r\n#include line2d-params\r\n#include path-outvars\r\n#include circle-outvars\r\n// #include lines2d-vertex\r\n// #include lines2d2-vertex\r\n#include lines2d3-vertex\r\n#line 28\r\n\r\nvoid main() {\r\n  vec2 position = line2d(p1, p2, lineWidth, lineCap, gl_VertexID, v_isSemicircle, v_circleCenter, v_radiusDirection);\r\n\r\n  gl_Position = modelToClip(position);\r\n  v_fillColor = strokeColor;\r\n\r\n  // if (gl_VertexID % 6 >= 3) v_fillColor = 1.0 - v_fillColor;\r\n  // if (gl_VertexID % 4 == 0) v_fillColor = vec4(vec3(1.0 - v_fillColor.rgb), v_fillColor.a);\r\n}";
var Shaders_line2dVertexKey = "line2dVertex";
(0, _shader_utils.WebglShaderUtils_addVertexShaderSource)(Shaders_line2dVertexKey, Shaders_line2dVertex);

var LineObjects2D = /*#__PURE__*/function (_WebglObject) {
  _inherits(LineObjects2D, _WebglObject);

  var _super = _createSuper(LineObjects2D);

  function LineObjects2D(config, scene, p1, p2, layer, name, linkTo, parallaxCam, parallaxDistance) {
    var _this;

    _classCallCheck(this, LineObjects2D);

    _this = _super.call(this, scene, (0, _Util.uncurry)(2, function () {
      var props = (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlObjProp(0, (0, _Option.defaultArg)(name, "")), new _webgl_data.BuilderTypes_GlObjProp(26, (0, _Option.defaultArg)(linkTo, "")), new _webgl_data.BuilderTypes_GlObjProp(17, (0, _Option.defaultArg)(parallaxCam, "")), new _webgl_data.BuilderTypes_GlObjProp(18, (0, _Option.defaultArg)(parallaxDistance, 1)), new _webgl_data.BuilderTypes_GlObjProp(19, (0, _Option.defaultArg)(layer, scene.DefaultLayer)), new _webgl_data.BuilderTypes_GlObjProp(3, 8), new _webgl_data.BuilderTypes_GlObjProp(2, 5), (0, _glcapabilities.blendFunc)(1, 771), (0, _props.ObjectProps_ubo)("line2dParams", (0, _List.ofArray)([(0, _props.UboProps_u)("p1", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec2__get_Values)(p1)))), (0, _props.UboProps_u)("p2", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec2__get_Values)(p2)))), (0, _props.UboProps_u)("strokeColor", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec4__get_Values)((0, _glcanvasparams.GlCanvasParams__get_StrokeColor)(config))))), (0, _props.UboProps_u)("lineWidth", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glscene.pixelsToWorld)((0, _glcanvasparams.GlCanvasParams__get_LineWidth)(config), scene)))), (0, _props.UboProps_u)("lineCap", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glcanvasparams.GlCanvasParams__get_LineCap)(config))))]))]);
      return function (overrides) {
        return function (scene_1) {
          return (0, _props.Props_globject)(Shaders_line2dVertexKey, "semicircleFragment2d", props, overrides, scene_1);
        };
      };
    }()));
    var o = new _Types.FSharpRef(null);
    o.contents = _assertThisInitialized(_this);
    var uniforms = (0, _Map.ofSeq)((0, _Seq.map)(function (u) {
      return [(0, _webgl_data.Data_GlUniformData__get_Name)(u), u];
    }, (0, _glcommon.allUniforms)((0, _webglobject.WebglObject__get_ObjectDef)(o.contents))), {
      Compare: _Util.comparePrimitives
    });

    _this.getInt = function (name_1) {
      var name_3, matchValue, msg, uniform;
      return (name_3 = name_1, (matchValue = (0, _Map.tryFind)(name_3, uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_3])), function () {
        throw new Error(msg);
      }()) : (uniform = matchValue, uniform))).Value[0];
    };

    _this.setInt = function (name_4, value) {
      var name_6, matchValue_1, msg_1, uniform_1;
      (0, _gluniform.setValue)(value, (name_6 = name_4, (matchValue_1 = (0, _Map.tryFind)(name_6, uniforms), matchValue_1 == null ? (msg_1 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_6])), function () {
        throw new Error(msg_1);
      }()) : (uniform_1 = matchValue_1, uniform_1))));
    };

    _this.getFloat = function (name_7) {
      var name_9, matchValue_2, msg_2, uniform_2;
      return (name_9 = name_7, (matchValue_2 = (0, _Map.tryFind)(name_9, uniforms), matchValue_2 == null ? (msg_2 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_9])), function () {
        throw new Error(msg_2);
      }()) : (uniform_2 = matchValue_2, uniform_2))).Value[0];
    };

    _this.setFloat = function (name_10, value_2) {
      var name_12, matchValue_3, msg_3, uniform_3;
      (0, _gluniform.setValue)(value_2, (name_12 = name_10, (matchValue_3 = (0, _Map.tryFind)(name_12, uniforms), matchValue_3 == null ? (msg_3 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_12])), function () {
        throw new Error(msg_3);
      }()) : (uniform_3 = matchValue_3, uniform_3))));
    };

    _this.getVec2 = function (name_13) {
      var name_15, matchValue_4, msg_4, uniform_4;
      return (0, _vectors.Vec2_$ctor_Z33A93963)((name_15 = name_13, (matchValue_4 = (0, _Map.tryFind)(name_15, uniforms), matchValue_4 == null ? (msg_4 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_15])), function () {
        throw new Error(msg_4);
      }()) : (uniform_4 = matchValue_4, uniform_4))).Value);
    };

    _this.setVec2 = function (name_16, value_4) {
      var data_3;
      var name_18 = name_16;
      var matchValue_5 = (0, _Map.tryFind)(name_18, uniforms);

      if (matchValue_5 == null) {
        var msg_5 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_18]));
        throw new Error(msg_5);
      } else {
        var uniform_5 = matchValue_5;
        data_3 = uniform_5;
      }

      (0, _gluniform.setValue)((0, _vectors.Vec2__get_Values)(value_4), data_3);
    };

    _this.getVec4 = function (name_19) {
      var name_21, matchValue_6, msg_6, uniform_6;
      return (0, _vectors.Vec4_$ctor_Z14AF5965)((name_21 = name_19, (matchValue_6 = (0, _Map.tryFind)(name_21, uniforms), matchValue_6 == null ? (msg_6 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_21])), function () {
        throw new Error(msg_6);
      }()) : (uniform_6 = matchValue_6, uniform_6))).Value);
    };

    _this.setVec4 = function (name_22, value_7) {
      var data_4;
      var name_24 = name_22;
      var matchValue_7 = (0, _Map.tryFind)(name_24, uniforms);

      if (matchValue_7 == null) {
        var msg_7 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_24]));
        throw new Error(msg_7);
      } else {
        var uniform_7 = matchValue_7;
        data_4 = uniform_7;
      }

      (0, _gluniform.setValue)((0, _vectors.Vec4__get_Values)(value_7), data_4);
    };

    _this["init@47-9"] = 1;
    return _this;
  }

  return LineObjects2D;
}(_webglobject.WebglObject);

exports.LineObjects2D = LineObjects2D;

function LineObjects2D$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.LineObjects2D", void 0, LineObjects2D, (0, _webglobject.WebglObject$reflection)());
}

function LineObjects2D_$ctor_22E93213(config, scene, p1, p2, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return new LineObjects2D(config, scene, p1, p2, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function LineObjects2D__get_P1(_) {
  return _.getVec2("p1");
}

function LineObjects2D__set_P1_Z3D47FC52(_, value) {
  _.setVec2("p1", value);
}

function LineObjects2D__get_P2(_) {
  return _.getVec2("p2");
}

function LineObjects2D__set_P2_Z3D47FC52(_, value) {
  _.setVec2("p2", value);
}

function LineObjects2D__get_StrokeColor(_) {
  return _.getVec4("strokeColor");
}

function LineObjects2D__set_StrokeColor_Z3D47FC58(_, value) {
  _.setVec4("strokeColor", value);
}

function LineObjects2D__get_LineWidth(_) {
  return _.getFloat("lineWidth");
}

function LineObjects2D__set_LineWidth_5E38073B(_, value) {
  _.setFloat("lineWidth", value);
}

function LineObjects2D__get_LineCap(_) {
  return _.getInt("lineCap");
}

function LineObjects2D__set_LineCap_7B1263D0(_, value) {
  _.setInt("lineCap", value);
}
},{"../webgl_core/shader_utils.js":"../JS/webgl_core/shader_utils.js","../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Map.js":"../JS/.fable/fable-library.3.0.0/Map.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_data/glcommon.js":"../JS/webgl_data/glcommon.js","./webglobject.js":"../JS/webgl_objects/webglobject.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../webgl_data/gluniform.js":"../JS/webgl_data/gluniform.js","../core/vectors.js":"../JS/core/vectors.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","../webgl_data/glcapabilities.js":"../JS/webgl_data/glcapabilities.js","./props.js":"../JS/webgl_objects/props.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../webgl_data/glcanvasparams.js":"../JS/webgl_data/glcanvasparams.js","../webgl_data/glscene.js":"../JS/webgl_data/glscene.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js"}],"../JS/webgl_objects/linepathobject2d.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LinePathObject2D$reflection = LinePathObject2D$reflection;
exports.LinePathObject2D_$ctor_3F122D1B = LinePathObject2D_$ctor_3F122D1B;
exports.LinePathObject2D__get_StrokeColor = LinePathObject2D__get_StrokeColor;
exports.LinePathObject2D__set_StrokeColor_Z3D47FC58 = LinePathObject2D__set_StrokeColor_Z3D47FC58;
exports.LinePathObject2D__get_LineWidth = LinePathObject2D__get_LineWidth;
exports.LinePathObject2D__set_LineWidth_5E38073B = LinePathObject2D__set_LineWidth_5E38073B;
exports.LinePathObject2D__get_LineCap = LinePathObject2D__get_LineCap;
exports.LinePathObject2D__set_LineCap_7B1263D0 = LinePathObject2D__set_LineCap_7B1263D0;
exports.LinePathObject2D__get_LineJoin = LinePathObject2D__get_LineJoin;
exports.LinePathObject2D__set_LineJoin_Z229C3C20 = LinePathObject2D__set_LineJoin_Z229C3C20;
exports.LinePathObject2D__get_MiterFallback = LinePathObject2D__get_MiterFallback;
exports.LinePathObject2D__set_MiterFallback_Z229C3C20 = LinePathObject2D__set_MiterFallback_Z229C3C20;
exports.LinePathObject2D__get_MiterLimit = LinePathObject2D__get_MiterLimit;
exports.LinePathObject2D__set_MiterLimit_5E38073B = LinePathObject2D__set_MiterLimit_5E38073B;
exports.LinePathObject2D__Add_Z3D47FC52 = LinePathObject2D__Add_Z3D47FC52;
exports.LinePathObject2D__Add_50C79F88 = LinePathObject2D__Add_50C79F88;
exports.LinePathObject2D__Set_Z58358D8E = LinePathObject2D__Set_Z58358D8E;
exports.LinePathObject2D = void 0;

var _shader_utils = require("../webgl_core/shader_utils.js");

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Map = require("../.fable/fable-library.3.0.0/Map.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _webgl_data = require("../webgl_data/webgl_data.js");

var _glcommon = require("../webgl_data/glcommon.js");

var _webglobject = require("./webglobject.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _gluniform = require("../webgl_data/gluniform.js");

var _vectors = require("../core/vectors.js");

var _globj = require("../webgl_data/globj.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _glcapabilities = require("../webgl_data/glcapabilities.js");

var _props = require("./props.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _glcanvasparams = require("../webgl_data/glcanvasparams.js");

var _glscene = require("../webgl_data/glscene.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _glattrib = require("../webgl_data/glattrib.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

(0, _shader_utils.WebglShaderUtils_addShaderInclude)("linepath-params", "\r\nuniform linepathParams {\r\n  vec4 strokeColor;\r\n  float lineWidth;\r\n  int lineCap;\r\n  int lineJoin;\r\n  float miterLimit;\r\n  int miterFallback;\r\n  int instanceCount;\r\n};");
var Shaders_linePath2dVertex = "#version 300 es\r\n// LinePathObject2D\r\n#include precision\r\n#include linepath-params\r\n#include path-outvars\r\n#include circle-outvars\r\n// #include lines2d-vertex\r\n// #include lines2d2-vertex\r\n// #include lines2d3-vertex\r\n#include sdf-consts\r\n#include sdf-line-outvars\r\n#include lines2d4-vertex\r\n#line 40\r\n\r\nin vec2 priorA;\r\nin vec2 a;\r\nin vec2 b;\r\nin vec2 c;\r\n\r\nvoid main() {\r\n  // vec3 position = linepath2d(a, b, c, lineWidth, lineCap, lineJoin, miterLimit, miterFallback, gl_InstanceID, instanceCount, gl_VertexID, v_isCircle, v_circleCenter, v_radiusDirection);\r\n  vec2 position = linepath2d(priorA, a, b, c, lineWidth, lineCap, lineJoin, miterLimit, miterFallback, gl_InstanceID, instanceCount, gl_VertexID, 2.0, worldScale, v_sdfLineParams, v_sdfPriorLineParams, v_sdfNextLineParams);\r\n\r\n  gl_Position = modelToClip(position);\r\n  v_fillColor = strokeColor;\r\n  v_strokeColor = strokeColor;\r\n\r\n  // if (gl_VertexID > 1) v_strokeColor = vec4(vec3(1.0 - v_strokeColor.rgb), v_strokeColor.a);\r\n  // if (gl_VertexID % 3 == 0) v_fillColor = vec4(vec3(1.0 - v_fillColor.rgb), v_fillColor.a);\r\n  // if (gl_VertexID > 5) v_fillColor = vec4(0.0, 0.0, 0.0, 1.0);\r\n  // if (gl_VertexID / 6 == 2 && gl_InstanceID != instanceCount - 1) {\r\n  //   if (gl_VertexID % 6 < 3)\r\n  //     v_fillColor = vec4(vec3(0.0), 1.0);\r\n  //   else\r\n  //     v_fillColor = vec4(0.0, 1.0, 0.0, 1.0);\r\n  // }\r\n  // if (gl_VertexID / 6 != 2) gl_Position = vec4(0.0);\r\n}";
var Shaders_linePath2dVertexKey = "linePath2dVertex";
(0, _shader_utils.WebglShaderUtils_addVertexShaderSource)(Shaders_linePath2dVertexKey, Shaders_linePath2dVertex);

var LinePathObject2D = /*#__PURE__*/function (_WebglObject) {
  _inherits(LinePathObject2D, _WebglObject);

  var _super = _createSuper(LinePathObject2D);

  function LinePathObject2D(config, scene, points, layer, name, linkTo, parallaxCam, parallaxDistance) {
    var _this;

    _classCallCheck(this, LinePathObject2D);

    _this = _super.call(this, scene, (0, _Util.uncurry)(2, function () {
      var props = (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlObjProp(0, (0, _Option.defaultArg)(name, "")), new _webgl_data.BuilderTypes_GlObjProp(26, (0, _Option.defaultArg)(linkTo, "")), new _webgl_data.BuilderTypes_GlObjProp(17, (0, _Option.defaultArg)(parallaxCam, "")), new _webgl_data.BuilderTypes_GlObjProp(18, (0, _Option.defaultArg)(parallaxDistance, 1)), new _webgl_data.BuilderTypes_GlObjProp(19, (0, _Option.defaultArg)(layer, scene.DefaultLayer)), new _webgl_data.BuilderTypes_GlObjProp(3, 4), new _webgl_data.BuilderTypes_GlObjProp(2, 5), new _webgl_data.BuilderTypes_GlObjProp(8, -2), (0, _glcapabilities.blendFunc)(1, 771), (0, _props.ObjectProps_interleave)("priorA", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlAttrProp(9), new _webgl_data.BuilderTypes_GlAttrProp(10, 1), new _webgl_data.BuilderTypes_GlAttrProp(5, (0, _vectors.Vec_vec2Values)((0, _Array.append)([(0, _vectors.Vec2_Create)()], points))), (0, _props.InterleaveProps_child)("a", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlAttrProp(10, 1), new _webgl_data.BuilderTypes_GlAttrProp(2)])), (0, _props.InterleaveProps_child)("b", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlAttrProp(10, 1), new _webgl_data.BuilderTypes_GlAttrProp(2)])), (0, _props.InterleaveProps_child)("c", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlAttrProp(10, 1), new _webgl_data.BuilderTypes_GlAttrProp(2)]))])), (0, _props.ObjectProps_ubo)("linepathParams", (0, _List.ofArray)([(0, _props.UboProps_u)("strokeColor", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec4__get_Values)((0, _glcanvasparams.GlCanvasParams__get_StrokeColor)(config))))), (0, _props.UboProps_u)("lineWidth", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glscene.pixelsToWorld)((0, _glcanvasparams.GlCanvasParams__get_LineWidth)(config), scene)))), (0, _props.UboProps_u)("lineCap", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glcanvasparams.GlCanvasParams__get_LineCap)(config)))), (0, _props.UboProps_u)("lineJoin", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glcanvasparams.GlCanvasParams__get_LineJoin)(config)))), (0, _props.UboProps_u)("miterLimit", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glscene.pixelsToWorld)((0, _glcanvasparams.GlCanvasParams__get_MiterLimit)(config), scene)))), (0, _props.UboProps_u)("miterFallback", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _glcanvasparams.GlCanvasParams__get_MiterFallback)(config)))), (0, _props.UboProps_u)("instanceCount", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 2)))]))]);
      return function (overrides) {
        return function (scene_3) {
          return (0, _props.Props_globject)(Shaders_linePath2dVertexKey, "linepath2d-fragment", props, overrides, scene_3);
        };
      };
    }()));
    var o = new _Types.FSharpRef(null);
    _this.scene_1 = scene;
    o.contents = _assertThisInitialized(_this);
    var uniforms = (0, _Map.ofSeq)((0, _Seq.map)(function (u) {
      return [(0, _webgl_data.Data_GlUniformData__get_Name)(u), u];
    }, (0, _glcommon.allUniforms)((0, _webglobject.WebglObject__get_ObjectDef)(o.contents))), {
      Compare: _Util.comparePrimitives
    });

    _this.getInt = function (name_1) {
      var name_3, matchValue, msg, uniform;
      return (name_3 = name_1, (matchValue = (0, _Map.tryFind)(name_3, uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_3])), function () {
        throw new Error(msg);
      }()) : (uniform = matchValue, uniform))).Value[0];
    };

    _this.setInt = function (name_4, value_2) {
      var name_6, matchValue_1, msg_1, uniform_1;
      (0, _gluniform.setValue)(value_2, (name_6 = name_4, (matchValue_1 = (0, _Map.tryFind)(name_6, uniforms), matchValue_1 == null ? (msg_1 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_6])), function () {
        throw new Error(msg_1);
      }()) : (uniform_1 = matchValue_1, uniform_1))));
    };

    _this.getFloat = function (name_7) {
      var name_9, matchValue_2, msg_2, uniform_2;
      return (name_9 = name_7, (matchValue_2 = (0, _Map.tryFind)(name_9, uniforms), matchValue_2 == null ? (msg_2 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_9])), function () {
        throw new Error(msg_2);
      }()) : (uniform_2 = matchValue_2, uniform_2))).Value[0];
    };

    _this.setFloat = function (name_10, value_4) {
      var name_12, matchValue_3, msg_3, uniform_3;
      (0, _gluniform.setValue)(value_4, (name_12 = name_10, (matchValue_3 = (0, _Map.tryFind)(name_12, uniforms), matchValue_3 == null ? (msg_3 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_12])), function () {
        throw new Error(msg_3);
      }()) : (uniform_3 = matchValue_3, uniform_3))));
    };

    var getVec2 = function getVec2(name_13) {
      var name_15, matchValue_4, msg_4, uniform_4;
      return (0, _vectors.Vec2_$ctor_Z33A93963)((name_15 = name_13, (matchValue_4 = (0, _Map.tryFind)(name_15, uniforms), matchValue_4 == null ? (msg_4 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_15])), function () {
        throw new Error(msg_4);
      }()) : (uniform_4 = matchValue_4, uniform_4))).Value);
    };

    var setVec2 = function setVec2(name_16, value_6) {
      var data_5;
      var name_18 = name_16;
      var matchValue_5 = (0, _Map.tryFind)(name_18, uniforms);

      if (matchValue_5 == null) {
        var msg_5 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_18]));
        throw new Error(msg_5);
      } else {
        var uniform_5 = matchValue_5;
        data_5 = uniform_5;
      }

      (0, _gluniform.setValue)((0, _vectors.Vec2__get_Values)(value_6), data_5);
    };

    _this.getVec4 = function (name_19) {
      var name_21, matchValue_6, msg_6, uniform_6;
      return (0, _vectors.Vec4_$ctor_Z14AF5965)((name_21 = name_19, (matchValue_6 = (0, _Map.tryFind)(name_21, uniforms), matchValue_6 == null ? (msg_6 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_21])), function () {
        throw new Error(msg_6);
      }()) : (uniform_6 = matchValue_6, uniform_6))).Value);
    };

    _this.setVec4 = function (name_22, value_9) {
      var data_6;
      var name_24 = name_22;
      var matchValue_7 = (0, _Map.tryFind)(name_24, uniforms);

      if (matchValue_7 == null) {
        var msg_7 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_24]));
        throw new Error(msg_7);
      } else {
        var uniform_7 = matchValue_7;
        data_6 = uniform_7;
      }

      (0, _gluniform.setValue)((0, _vectors.Vec4__get_Values)(value_9), data_6);
    };

    _this.a = (0, _globj.getAttribute)("priorA")((0, _webglobject.WebglObject__get_ObjectDef)(o.contents));
    _this["init@71-10"] = 1;
    LinePathObject2D__updateInstanceCount(_assertThisInitialized(_this));
    return _this;
  }

  return LinePathObject2D;
}(_webglobject.WebglObject);

exports.LinePathObject2D = LinePathObject2D;

function LinePathObject2D$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.LinePathObject2D", void 0, LinePathObject2D, (0, _webglobject.WebglObject$reflection)());
}

function LinePathObject2D_$ctor_3F122D1B(config, scene, points, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return new LinePathObject2D(config, scene, points, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function LinePathObject2D__get_StrokeColor(_) {
  return _.getVec4("strokeColor");
}

function LinePathObject2D__set_StrokeColor_Z3D47FC58(_, value) {
  _.setVec4("strokeColor", value);
}

function LinePathObject2D__get_LineWidth(_) {
  return (0, _glscene.pixelsToWorld)(_.getFloat("lineWidth") * 1, _.scene_1);
}

function LinePathObject2D__set_LineWidth_5E38073B(_, value) {
  _.setFloat("lineWidth", (0, _glscene.worldToPixels)(value, _.scene_1));
}

function LinePathObject2D__get_LineCap(_) {
  return _.getInt("lineCap");
}

function LinePathObject2D__set_LineCap_7B1263D0(_, value) {
  _.setInt("lineCap", value);
}

function LinePathObject2D__get_LineJoin(_) {
  return _.getInt("lineJoin");
}

function LinePathObject2D__set_LineJoin_Z229C3C20(_, value) {
  _.setInt("lineJoin", value);
}

function LinePathObject2D__get_MiterFallback(_) {
  return _.getInt("miterFallback");
}

function LinePathObject2D__set_MiterFallback_Z229C3C20(_, value) {
  _.setInt("miterFallback", value);
}

function LinePathObject2D__get_MiterLimit(_) {
  return _.getFloat("miterLimit");
}

function LinePathObject2D__set_MiterLimit_5E38073B(_, value) {
  _.setFloat("miterLimit", value);
}

function LinePathObject2D__Add_Z3D47FC52(_, point) {
  var aValues = LinePathObject2D__getValues(_);
  (0, _glattrib.setValues)((0, _Array.append)(aValues, (0, _vectors.Vec2__get_Values)(point), Float64Array), _.a);
  LinePathObject2D__updateInstanceCount(_);
}

function LinePathObject2D__Add_50C79F88(_, points) {
  var aValues = LinePathObject2D__getValues(_);
  (0, _glattrib.setValues)((0, _Array.append)(aValues, (0, _vectors.Vec_vec2Values)(points), Float64Array), _.a);
  LinePathObject2D__updateInstanceCount(_);
}

function LinePathObject2D__Set_Z58358D8E(_, index, point) {
  (0, _glattrib.setValue)(index + 1, (0, _vectors.Vec2__get_Values)(point), _.a);
}

function LinePathObject2D__getValues(this$) {
  var v = this$.a.Values;

  if (v.length === 0) {
    return (0, _vectors.Vec_vec2Values)([(0, _vectors.Vec2_Create)()]);
  } else {
    return v;
  }
}

function LinePathObject2D__calcInstanceCount(this$) {
  var aValues = this$.a.Values;
  return ~~(aValues.length / 2) - 2 | 0;
}

function LinePathObject2D__updateInstanceCount(this$) {
  this$.setInt("instanceCount", LinePathObject2D__calcInstanceCount(this$));
}
},{"../webgl_core/shader_utils.js":"../JS/webgl_core/shader_utils.js","../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Map.js":"../JS/.fable/fable-library.3.0.0/Map.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_data/glcommon.js":"../JS/webgl_data/glcommon.js","./webglobject.js":"../JS/webgl_objects/webglobject.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../webgl_data/gluniform.js":"../JS/webgl_data/gluniform.js","../core/vectors.js":"../JS/core/vectors.js","../webgl_data/globj.js":"../JS/webgl_data/globj.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","../webgl_data/glcapabilities.js":"../JS/webgl_data/glcapabilities.js","./props.js":"../JS/webgl_objects/props.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../webgl_data/glcanvasparams.js":"../JS/webgl_data/glcanvasparams.js","../webgl_data/glscene.js":"../JS/webgl_data/glscene.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../webgl_data/glattrib.js":"../JS/webgl_data/glattrib.js"}],"../JS/core/arrayex.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.shuffleInPlace = shuffleInPlace;

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

function swapIndexPairs(fRand, lst) {
  return (0, _Seq.delay)(function () {
    return (0, _Seq.map)(function (i) {
      return [i, fRand(i + 1)];
    }, (0, _Seq.rangeNumber)(lst.length - 1, -1, 1));
  });
}

function swapIndexMap(index, fromIndex, toIndex) {
  if ((0, _Util.equals)(index, fromIndex)) {
    return toIndex;
  } else if ((0, _Util.equals)(index, toIndex)) {
    return fromIndex;
  } else {
    return index;
  }
}

function swap(indexPair_0, indexPair_1, lst) {
  var indexPair = [indexPair_0, indexPair_1];
  return (0, _Array.permute)(function (index) {
    return swapIndexMap(index, indexPair[0], indexPair[1]);
  }, lst);
}

function shuffleInPlace(fRand, lst) {
  var swap_1 = function swap_1(pair) {
    var temp = lst[pair[0]];
    lst[pair[0]] = lst[pair[1]];
    lst[pair[1]] = temp;
  };

  (0, _Seq.iterate)(swap_1, swapIndexPairs(fRand, lst));
  return lst;
}
},{"../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js"}],"../JS/core/perlinnoise.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PerlinShared_createPerm = PerlinShared_createPerm;
exports.PerlinNoise$reflection = PerlinNoise$reflection;
exports.PerlinNoise_$ctor = PerlinNoise_$ctor;
exports.PerlinNoise__get_Octaves = PerlinNoise__get_Octaves;
exports.PerlinNoise__set_Octaves_Z524259A4 = PerlinNoise__set_Octaves_Z524259A4;
exports.PerlinNoise__get_Frequency = PerlinNoise__get_Frequency;
exports.PerlinNoise__set_Frequency_Z3D47FC58 = PerlinNoise__set_Frequency_Z3D47FC58;
exports.PerlinNoise__get_Amplitude = PerlinNoise__get_Amplitude;
exports.PerlinNoise__set_Amplitude_Z16DF143 = PerlinNoise__set_Amplitude_Z16DF143;
exports.PerlinNoise__get_Lacunarity = PerlinNoise__get_Lacunarity;
exports.PerlinNoise__set_Lacunarity_Z16DF143 = PerlinNoise__set_Lacunarity_Z16DF143;
exports.PerlinNoise__get_Gain = PerlinNoise__get_Gain;
exports.PerlinNoise__set_Gain_Z16DF143 = PerlinNoise__set_Gain_Z16DF143;
exports.PerlinNoise__Noise_5E38073B = PerlinNoise__Noise_5E38073B;
exports.PerlinNoise__Noise_Z3D47FC52 = PerlinNoise__Noise_Z3D47FC52;
exports.PerlinNoise__Noise_Z3D47FC51 = PerlinNoise__Noise_Z3D47FC51;
exports.PerlinNoise__Fbm_38B00632 = PerlinNoise__Fbm_38B00632;
exports.PerlinNoise__Fbm_Z202B522C = PerlinNoise__Fbm_Z202B522C;
exports.PerlinNoise__Fbm_Z1F5DA94C = PerlinNoise__Fbm_Z1F5DA94C;
exports.PerlinNoise__Turbulence_Z18D5882D = PerlinNoise__Turbulence_Z18D5882D;
exports.PerlinNoise__Turbulence_Z18D588CE = PerlinNoise__Turbulence_Z18D588CE;
exports.Noise_getOctaves = Noise_getOctaves;
exports.Noise_setOctaves = Noise_setOctaves;
exports.Noise_getFrequency = Noise_getFrequency;
exports.Noise_setFrequency = Noise_setFrequency;
exports.Noise_getAmplitude = Noise_getAmplitude;
exports.Noise_setAmplitude = Noise_setAmplitude;
exports.Noise_getLacunarity = Noise_getLacunarity;
exports.Noise_setLacunarity = Noise_setLacunarity;
exports.Noise_getGain = Noise_getGain;
exports.Noise_setGain = Noise_setGain;
exports.Noise_noise1 = Noise_noise1;
exports.Noise_noise2 = Noise_noise2;
exports.Noise_noise3 = Noise_noise3;
exports.Noise_fbm1 = Noise_fbm1;
exports.Noise_fbm2 = Noise_fbm2;
exports.Noise_fbm3 = Noise_fbm3;
exports.Noise_turbulence2 = Noise_turbulence2;
exports.Noise_turbulence3 = Noise_turbulence3;
exports.PerlinNoise = exports.PerlinShared_defaultPerms = void 0;

var _arrayex = require("./arrayex.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _Array = require("../.fable/fable-library.3.0.0/Array.js");

var _vectors = require("./vectors.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PerlinShared_defaultPerms = new Uint8Array([151, 137, 91, 90, 160, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180]);
exports.PerlinShared_defaultPerms = PerlinShared_defaultPerms;

function PerlinShared_createPerm(seed) {
  if (seed === 0) {
    return PerlinShared_defaultPerms;
  } else {
    var rand = {};
    return (0, _arrayex.shuffleInPlace)(function (arg00) {
      return (0, _Util.randomNext)(0, arg00);
    }, (0, _Array.initialize)(256, function (i) {
      return i & 0xFF;
    }, Uint8Array));
  }
}

var PerlinNoise = function PerlinNoise() {
  _classCallCheck(this, PerlinNoise);

  this.perms = (0, _Array.append)(PerlinShared_defaultPerms, PerlinShared_defaultPerms, Uint8Array);
  var frequency = (0, _vectors.Vec4_Create_Z16DF143)(0.01);
  this["Octaves@"] = 4;
  this["Frequency@"] = (0, _vectors.Vec4_Create_Z16DF143)(0.01);
  this["Amplitude@"] = 10;
  this["Lacunarity@"] = 2;
  this["Gain@"] = 0.5;
};

exports.PerlinNoise = PerlinNoise;

function PerlinNoise$reflection() {
  return (0, _Reflection.class_type)("Wil.Core.PerlinNoise", void 0, PerlinNoise);
}

function PerlinNoise_$ctor() {
  return new PerlinNoise();
}

function PerlinNoise__get_Octaves(__) {
  return __["Octaves@"];
}

function PerlinNoise__set_Octaves_Z524259A4(__, v) {
  __["Octaves@"] = v;
}

function PerlinNoise__get_Frequency(__) {
  return __["Frequency@"];
}

function PerlinNoise__set_Frequency_Z3D47FC58(__, v) {
  __["Frequency@"] = v;
}

function PerlinNoise__get_Amplitude(__) {
  return __["Amplitude@"];
}

function PerlinNoise__set_Amplitude_Z16DF143(__, v) {
  __["Amplitude@"] = v;
}

function PerlinNoise__get_Lacunarity(__) {
  return __["Lacunarity@"];
}

function PerlinNoise__set_Lacunarity_Z16DF143(__, v) {
  __["Lacunarity@"] = v;
}

function PerlinNoise__get_Gain(__) {
  return __["Gain@"];
}

function PerlinNoise__set_Gain_Z16DF143(__, v) {
  __["Gain@"] = v;
}

function PerlinNoise__Noise_5E38073B(_, p) {
  var p0;
  var x = p;
  p0 = x - Math.floor(x);
  var p1 = p0 - 1;
  var idx = ~~Math.floor(p) | 0;
  var v0 = PerlinNoise__perm1_Z524259A4(_, idx);
  var v1 = PerlinNoise__perm1_Z524259A4(_, idx + 1);
  var fx = PerlinNoise__fade_Z16DF143(_, p0);
  var t = fx;
  return PerlinNoise__grad1(_, v0, p0) * (1 - t) + PerlinNoise__grad1(_, v1, p1) * t;
}

function PerlinNoise__Noise_Z3D47FC52(_, p) {
  var p0 = (0, _vectors.Vec2__Fract_Z49505F25)(p);
  var p1;
  var v = p0;
  p1 = (0, _vectors.Vec2_Create_7B00E9A0)(v.values[0] + -1, v.values[1] + 0);
  var p2;
  var v_1 = p0;
  p2 = (0, _vectors.Vec2_Create_7B00E9A0)(v_1.values[0] + 0, v_1.values[1] + -1);
  var p3;
  var v_2 = p0;
  p3 = (0, _vectors.Vec2_Create_7B00E9A0)(v_2.values[0] + -1, v_2.values[1] + -1);
  var id = (0, _vectors.Vec2__Floor_Z49505F25)(p);
  var v0 = PerlinNoise__perm2(_, ~~id.values[0], ~~id.values[1]);
  var v1 = PerlinNoise__perm2(_, ~~id.values[0] + 1, ~~id.values[1]);
  var v2 = PerlinNoise__perm2(_, ~~id.values[0], ~~id.values[1] + 1);
  var v3 = PerlinNoise__perm2(_, ~~id.values[0] + 1, ~~id.values[1] + 1);
  var fx = PerlinNoise__fade_Z16DF143(_, p0.values[0]);
  var fy = PerlinNoise__fade_Z16DF143(_, p0.values[1]);
  var a_1;
  var t_2 = fx;
  a_1 = PerlinNoise__grad2(_, v0, p0) * (1 - t_2) + PerlinNoise__grad2(_, v1, p1) * t_2;
  var b_2;
  var t_3 = fx;
  b_2 = PerlinNoise__grad2(_, v2, p2) * (1 - t_3) + PerlinNoise__grad2(_, v3, p3) * t_3;
  var t_4 = fy;
  return a_1 * (1 - t_4) + b_2 * t_4;
}

function PerlinNoise__Noise_Z3D47FC51(_, p) {
  var p0 = (0, _vectors.Vec3__Fract_Z49505F06)(p);
  var p1;
  var v = p0;
  p1 = (0, _vectors.Vec3_Create_8ED0A5D)(v.values[0] + -1, v.values[1] + 0, v.values[2] + 0);
  var p2;
  var v_1 = p0;
  p2 = (0, _vectors.Vec3_Create_8ED0A5D)(v_1.values[0] + 0, v_1.values[1] + -1, v_1.values[2] + 0);
  var p3;
  var v_2 = p0;
  p3 = (0, _vectors.Vec3_Create_8ED0A5D)(v_2.values[0] + -1, v_2.values[1] + -1, v_2.values[2] + 0);
  var p4;
  var v_3 = p0;
  p4 = (0, _vectors.Vec3_Create_8ED0A5D)(v_3.values[0] + 0, v_3.values[1] + 0, v_3.values[2] + -1);
  var p5;
  var v_4 = p0;
  p5 = (0, _vectors.Vec3_Create_8ED0A5D)(v_4.values[0] + -1, v_4.values[1] + 0, v_4.values[2] + -1);
  var p6;
  var v_5 = p0;
  p6 = (0, _vectors.Vec3_Create_8ED0A5D)(v_5.values[0] + 0, v_5.values[1] + -1, v_5.values[2] + -1);
  var p7;
  var v_6 = p0;
  p7 = (0, _vectors.Vec3_Create_8ED0A5D)(v_6.values[0] + -1, v_6.values[1] + -1, v_6.values[2] + -1);
  var id = (0, _vectors.Vec3__Floor_Z49505F06)(p);
  var v0 = PerlinNoise__perm3(_, ~~id.values[0], ~~id.values[1], ~~id.values[2]);
  var v1 = PerlinNoise__perm3(_, ~~id.values[0] + 1, ~~id.values[1], ~~id.values[2]);
  var v2 = PerlinNoise__perm3(_, ~~id.values[0], ~~id.values[1] + 1, ~~id.values[2]);
  var v3 = PerlinNoise__perm3(_, ~~id.values[0] + 1, ~~id.values[1] + 1, ~~id.values[2]);
  var v4 = PerlinNoise__perm3(_, ~~id.values[0], ~~id.values[1], ~~id.values[2] + 1);
  var v5 = PerlinNoise__perm3(_, ~~id.values[0] + 1, ~~id.values[1], ~~id.values[2] + 1);
  var v6 = PerlinNoise__perm3(_, ~~id.values[0], ~~id.values[1] + 1, ~~id.values[2] + 1);
  var v7 = PerlinNoise__perm3(_, ~~id.values[0] + 1, ~~id.values[1] + 1, ~~id.values[2] + 1);
  var fx = PerlinNoise__fade_Z16DF143(_, p0.values[0]);
  var fy = PerlinNoise__fade_Z16DF143(_, p0.values[1]);
  var fz = PerlinNoise__fade_Z16DF143(_, p0.values[2]);
  var a1;
  var t_3 = fx;
  a1 = PerlinNoise__grad3(_, v0, p0) * (1 - t_3) + PerlinNoise__grad3(_, v1, p1) * t_3;
  var b1;
  var t_4 = fx;
  b1 = PerlinNoise__grad3(_, v2, p2) * (1 - t_4) + PerlinNoise__grad3(_, v3, p3) * t_4;
  var a2;
  var t_5 = fx;
  a2 = PerlinNoise__grad3(_, v4, p4) * (1 - t_5) + PerlinNoise__grad3(_, v5, p5) * t_5;
  var b2;
  var t_6 = fx;
  b2 = PerlinNoise__grad3(_, v6, p6) * (1 - t_6) + PerlinNoise__grad3(_, v7, p7) * t_6;
  var c1;
  var t_7 = fy;
  c1 = a1 * (1 - t_7) + b1 * t_7;
  var c2;
  var t_8 = fy;
  c2 = a2 * (1 - t_8) + b2 * t_8;
  var t_9 = fz;
  return c1 * (1 - t_9) + c2 * t_9;
}

function PerlinNoise__Fbm_38B00632(this$, p, octaves, frequency, amplitude, lacunarity, gain) {
  var freq = (0, _Option.defaultArg)(frequency, PerlinNoise__get_Frequency(this$).values[0]);
  var amp = (0, _Option.defaultArg)(amplitude, PerlinNoise__get_Amplitude(this$));
  var lac = (0, _Option.defaultArg)(lacunarity, PerlinNoise__get_Lacunarity(this$));
  var gain_1 = (0, _Option.defaultArg)(gain, PerlinNoise__get_Gain(this$));
  var result = 0;
  var oct = (0, _Util.max)(_Util.comparePrimitives, (0, _Option.defaultArg)(octaves, PerlinNoise__get_Octaves(this$)), 1) | 0;

  for (var i = 0; i <= oct - 1; i++) {
    result = result + PerlinNoise__Noise_5E38073B(this$, p * freq) * amp;
    freq = freq * lac;
    amp = amp * gain_1;
  }

  return result;
}

function PerlinNoise__Fbm_Z202B522C(this$, p, octaves, frequency, amplitude, lacunarity, gain) {
  var _;

  var freq = (0, _Option.defaultArg)(frequency, (_ = PerlinNoise__get_Frequency(this$), (0, _vectors.Vec2_Create_7B00E9A0)(_.v.contents.values[0], _.v.contents.values[1])));
  var amp = (0, _Option.defaultArg)(amplitude, PerlinNoise__get_Amplitude(this$));
  var lac = (0, _Option.defaultArg)(lacunarity, PerlinNoise__get_Lacunarity(this$));
  var gain_1 = (0, _Option.defaultArg)(gain, PerlinNoise__get_Gain(this$));
  var result = 0;
  var oct = (0, _Util.max)(_Util.comparePrimitives, (0, _Option.defaultArg)(octaves, PerlinNoise__get_Octaves(this$)), 1) | 0;

  for (var i = 0; i <= oct - 1; i++) {
    result = result + PerlinNoise__Noise_Z3D47FC52(this$, (0, _vectors.Vec2_op_Multiply_Z24FF8540)(p, freq)) * amp;
    freq = (0, _vectors.Vec2_op_Multiply_47807E55)(freq, lac);
    amp = amp * gain_1;
  }

  return result;
}

function PerlinNoise__Fbm_Z1F5DA94C(this$, p, octaves, frequency, amplitude, lacunarity, gain) {
  var _;

  var freq = (0, _Option.defaultArg)(frequency, (_ = PerlinNoise__get_Frequency(this$), (0, _vectors.Vec3_Create_8ED0A5D)(_.v.contents.values[0], _.v.contents.values[1], _.v.contents.values[2])));
  var amp = (0, _Option.defaultArg)(amplitude, PerlinNoise__get_Amplitude(this$));
  var lac = (0, _Option.defaultArg)(lacunarity, PerlinNoise__get_Lacunarity(this$));
  var gain_1 = (0, _Option.defaultArg)(gain, PerlinNoise__get_Gain(this$));
  var result = 0;
  var oct = (0, _Util.max)(_Util.comparePrimitives, (0, _Option.defaultArg)(octaves, PerlinNoise__get_Octaves(this$)), 1) | 0;

  for (var i = 0; i <= oct - 1; i++) {
    result = result + PerlinNoise__Noise_Z3D47FC51(this$, (0, _vectors.Vec3_op_Multiply_Z24FF85E0)(p, freq)) * amp;
    freq = (0, _vectors.Vec3_op_Multiply_Z18D588CE)(freq, lac);
    amp = amp * gain_1;
  }

  return result;
}

function PerlinNoise__Turbulence_Z18D5882D(this$, pos, pixelSize) {
  var t = 0;
  var scale = 1;
  var p = (0, _vectors.Vec2__Clone)(pos);

  while (scale > pixelSize) {
    (0, _vectors.Vec2_op_DivisionAssignment_47807E55)(p, scale);
    t = t + Math.abs(PerlinNoise__Noise_Z3D47FC52(this$, p)) * scale;
    scale = scale * 0.5;
  }

  return t;
}

function PerlinNoise__Turbulence_Z18D588CE(this$, pos, pixelSize) {
  var t = 0;
  var scale = 1;
  var p = (0, _vectors.Vec3__Clone)(pos);

  while (scale > pixelSize) {
    (0, _vectors.Vec3_op_DivisionAssignment_47807EB4)(p, scale);
    t = t + Math.abs(PerlinNoise__Noise_Z3D47FC51(this$, p)) * scale;
    scale = scale * 0.5;
  }

  return t;
}

function PerlinNoise__fade_Z16DF143(this$, t) {
  return t * t * t * (t * (t * 6 - 15) + 10);
}

function PerlinNoise__perm1_Z524259A4(this$, idx) {
  return this$.perms[idx];
}

function PerlinNoise__perm2(this$, x, y) {
  return PerlinNoise__perm1_Z524259A4(this$, y + ~~PerlinNoise__perm1_Z524259A4(this$, x));
}

function PerlinNoise__perm3(this$, x, y, z) {
  return PerlinNoise__perm1_Z524259A4(this$, z + ~~PerlinNoise__perm1_Z524259A4(this$, y + ~~PerlinNoise__perm1_Z524259A4(this$, x)));
}

function PerlinNoise__grad1(this$, hash, p) {
  if ((hash & 1) === 0) {
    return -p;
  } else {
    return p;
  }
}

function PerlinNoise__grad2(this$, hash, p) {
  var matchValue = hash & 3;

  switch (matchValue) {
    case 0:
      {
        return p.values[0] + p.values[1];
      }

    case 1:
      {
        return -p.values[0] + p.values[1];
      }

    case 2:
      {
        return p.values[0] - p.values[1];
      }

    case 3:
      {
        return -p.values[0] - p.values[1];
      }

    default:
      {
        throw new Error("Can't happen!");
      }
  }
}

function PerlinNoise__grad3(this$, hash, p) {
  var matchValue = hash & 15;

  switch (matchValue) {
    case 0:
      {
        return p.values[0] + p.values[1];
      }

    case 1:
      {
        return -p.values[0] + p.values[1];
      }

    case 2:
      {
        return p.values[0] - p.values[1];
      }

    case 3:
      {
        return -p.values[0] - p.values[1];
      }

    case 4:
      {
        return p.values[0] + p.values[2];
      }

    case 5:
      {
        return -p.values[0] + p.values[2];
      }

    case 6:
      {
        return p.values[0] - p.values[2];
      }

    case 7:
      {
        return -p.values[0] - p.values[2];
      }

    case 8:
      {
        return p.values[1] + p.values[2];
      }

    case 9:
      {
        return -p.values[1] + p.values[2];
      }

    case 10:
      {
        return p.values[1] - p.values[2];
      }

    case 11:
      {
        return -p.values[1] - p.values[2];
      }

    case 12:
      {
        return p.values[0] + p.values[1];
      }

    case 13:
      {
        return -p.values[0] + p.values[1];
      }

    case 14:
      {
        return -p.values[1] + p.values[2];
      }

    case 15:
      {
        return -p.values[1] - p.values[2];
      }

    default:
      {
        throw new Error("Can't happen!");
      }
  }
}

function PerlinNoise__grad4(this$, hash, p) {
  var matchValue = hash & 31;

  switch (matchValue) {
    case 0:
      {
        return p.values[0] + p.values[1] + p.values[3];
      }

    case 1:
      {
        return -p.values[0] + p.values[1] + p.values[3];
      }

    case 2:
      {
        return p.values[0] + -p.values[1] + p.values[3];
      }

    case 3:
      {
        return -p.values[0] + -p.values[1] + p.values[3];
      }

    case 4:
      {
        return p.values[0] + p.values[2] + p.values[3];
      }

    case 5:
      {
        return -p.values[0] + p.values[2] + p.values[3];
      }

    case 6:
      {
        return p.values[0] + -p.values[2] + p.values[3];
      }

    case 7:
      {
        return -p.values[0] + -p.values[2] + p.values[3];
      }

    case 8:
      {
        return p.values[1] + p.values[2] + p.values[3];
      }

    case 9:
      {
        return -p.values[1] + p.values[2] + p.values[3];
      }

    case 10:
      {
        return p.values[1] + -p.values[2] + p.values[3];
      }

    case 11:
      {
        return -p.values[1] + -p.values[2] + p.values[3];
      }

    case 12:
      {
        return p.values[0] + p.values[1] + -p.values[3];
      }

    case 13:
      {
        return -p.values[0] + p.values[1] + -p.values[3];
      }

    case 14:
      {
        return p.values[0] + -p.values[1] + -p.values[3];
      }

    case 15:
      {
        return -p.values[0] + -p.values[1] + -p.values[3];
      }

    case 16:
      {
        return p.values[0] + p.values[2] + -p.values[3];
      }

    case 17:
      {
        return -p.values[0] + p.values[2] + -p.values[3];
      }

    case 18:
      {
        return p.values[0] + -p.values[2] + -p.values[3];
      }

    case 19:
      {
        return -p.values[0] + -p.values[2] + -p.values[3];
      }

    case 20:
      {
        return p.values[1] + p.values[2] + -p.values[3];
      }

    case 21:
      {
        return -p.values[1] + p.values[2] + -p.values[3];
      }

    case 22:
      {
        return p.values[1] + -p.values[2] + -p.values[3];
      }

    case 23:
      {
        return -p.values[1] + -p.values[2] + -p.values[3];
      }

    case 24:
      {
        return p.values[0] + p.values[1] + p.values[2];
      }

    case 25:
      {
        return -p.values[0] + p.values[1] + p.values[2];
      }

    case 26:
      {
        return p.values[0] + -p.values[1] + -p.values[2];
      }

    case 27:
      {
        return -p.values[0] + -p.values[1] + -p.values[2];
      }

    case 28:
      {
        return p.values[0] + p.values[1] + -p.values[2];
      }

    case 29:
      {
        return -p.values[0] + p.values[1] + -p.values[2];
      }

    case 30:
      {
        return p.values[0] + -p.values[1] + p.values[2];
      }

    case 31:
      {
        return -p.values[0] + -p.values[1] + p.values[2];
      }

    default:
      {
        throw new Error("Can't happen!");
      }
  }
}

var Noise__noise = PerlinNoise_$ctor();

function Noise_getOctaves() {
  return PerlinNoise__get_Octaves(Noise__noise);
}

function Noise_setOctaves(x, unitVar1) {
  PerlinNoise__set_Octaves_Z524259A4(Noise__noise, x);
}

function Noise_getFrequency() {
  return PerlinNoise__get_Frequency(Noise__noise);
}

function Noise_setFrequency(x, unitVar1) {
  PerlinNoise__set_Frequency_Z3D47FC58(Noise__noise, x);
}

function Noise_getAmplitude() {
  return PerlinNoise__get_Amplitude(Noise__noise);
}

function Noise_setAmplitude(x, unitVar1) {
  PerlinNoise__set_Amplitude_Z16DF143(Noise__noise, x);
}

function Noise_getLacunarity() {
  return PerlinNoise__get_Lacunarity(Noise__noise);
}

function Noise_setLacunarity(x, unitVar1) {
  PerlinNoise__set_Lacunarity_Z16DF143(Noise__noise, x);
}

function Noise_getGain() {
  return PerlinNoise__get_Gain(Noise__noise);
}

function Noise_setGain(x, unitVar1) {
  PerlinNoise__set_Gain_Z16DF143(Noise__noise, x);
}

function Noise_noise1(p) {
  return PerlinNoise__Noise_5E38073B(Noise__noise, p);
}

function Noise_noise2(p) {
  return PerlinNoise__Noise_Z3D47FC52(Noise__noise, p);
}

function Noise_noise3(p) {
  return PerlinNoise__Noise_Z3D47FC51(Noise__noise, p);
}

function Noise_fbm1(p) {
  return PerlinNoise__Fbm_38B00632(Noise__noise, p);
}

function Noise_fbm2(p) {
  return PerlinNoise__Fbm_Z202B522C(Noise__noise, p);
}

function Noise_fbm3(p) {
  return PerlinNoise__Fbm_Z1F5DA94C(Noise__noise, p);
}

function Noise_turbulence2(p, pixelSize) {
  return PerlinNoise__Turbulence_Z18D5882D(Noise__noise, p, pixelSize);
}

function Noise_turbulence3(p, pixelSize) {
  return PerlinNoise__Turbulence_Z18D588CE(Noise__noise, p, pixelSize);
}
},{"./arrayex.js":"../JS/core/arrayex.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","./vectors.js":"../JS/core/vectors.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js"}],"../JS/webgl_objects/glpalette.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ColorStopData$reflection = ColorStopData$reflection;
exports.GlPalette_normalizeStops = GlPalette_normalizeStops;
exports.GlPalette_calcStopData = GlPalette_calcStopData;
exports.GlPalette_createPaletteData = GlPalette_createPaletteData;
exports.GlPalette_create = GlPalette_create;
exports.ColorStopData = void 0;

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _vectors = require("../core/vectors.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _webgl_data = require("../webgl_data/webgl_data.js");

var _props = require("./props.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var ColorStopData = /*#__PURE__*/function (_Record) {
  _inherits(ColorStopData, _Record);

  var _super = _createSuper(ColorStopData);

  function ColorStopData(StartPct, EndPct, StartColor, EndColor, StartIndex, EndIndex) {
    var _this;

    _classCallCheck(this, ColorStopData);

    _this = _super.call(this);
    _this.StartPct = StartPct;
    _this.EndPct = EndPct;
    _this.StartColor = StartColor;
    _this.EndColor = EndColor;
    _this.StartIndex = StartIndex | 0;
    _this.EndIndex = EndIndex | 0;
    return _this;
  }

  return ColorStopData;
}(_Types.Record);

exports.ColorStopData = ColorStopData;

function ColorStopData$reflection() {
  return (0, _Reflection.record_type)("Wil.Webgl.ColorStopData", [], ColorStopData, function () {
    return [["StartPct", _Reflection.float64_type], ["EndPct", _Reflection.float64_type], ["StartColor", (0, _vectors.Vec4$reflection)()], ["EndColor", (0, _vectors.Vec4$reflection)()], ["StartIndex", _Reflection.int32_type], ["EndIndex", _Reflection.int32_type]];
  });
}

function GlPalette_normalizeStops(stops) {
  var patternInput = (0, _List.head)(stops);
  var firstPct = patternInput[0];
  var firstColor = patternInput[1];
  var patternInput_1 = (0, _List.last)(stops);
  var lastPct = patternInput_1[0];
  var lastColor = patternInput_1[1];
  var res;

  if (firstPct === 0) {
    res = stops;
  } else {
    var h = [0, firstColor];
    res = (0, _List.cons)(h, stops);
  }

  if (lastPct === 1) {
    return res;
  } else {
    var t = [1, lastColor];
    return (0, _List.append)(res, (0, _List.singleton)(t));
  }
}

function GlPalette_calcStopData(count, s1, s2) {
  var countMinus1 = count - 1;
  return new ColorStopData(s1[0], s2[0], s1[1], s2[1], ~~(0, _Util.round)(countMinus1 * s1[0]), ~~(0, _Util.round)(countMinus1 * s2[0]));
}

function GlPalette_createPaletteData(count, stops) {
  var loop = function loop(startColor_mut, endColor_mut, count_1_mut, index_mut, remain_mut, acc_mut) {
    loop: while (true) {
      var startColor = startColor_mut,
          endColor = endColor_mut,
          count_1 = count_1_mut,
          index = index_mut,
          remain = remain_mut,
          acc = acc_mut;

      if (remain < 0) {
        return acc;
      } else {
        var t = remain / count_1;
        var color = (0, _vectors.Vec_lerp4)(startColor, endColor, t);
        acc[index - 0] = color.values[3] & 0xFF;
        acc[index - 1] = color.values[2] & 0xFF;
        acc[index - 2] = color.values[1] & 0xFF;
        acc[index - 3] = color.values[0] & 0xFF;
        startColor_mut = startColor;
        endColor_mut = endColor;
        count_1_mut = count_1;
        index_mut = index - 4;
        remain_mut = remain - 1;
        acc_mut = acc;
        continue loop;
      }

      break;
    }
  };

  var processData = function processData(d, a) {
    var count_2 = d.EndIndex - d.StartIndex | 0;
    var startIndex = (d.EndIndex + 1) * 4 - 1 | 0;
    return loop(d.StartColor, d.EndColor, count_2, startIndex, count_2, a);
  };

  var stopData = (0, _List.map)(function (tupledArg) {
    return GlPalette_calcStopData(count, tupledArg[0], tupledArg[1]);
  }, (0, _List.pairwise)(GlPalette_normalizeStops(stops)));
  var acc_1 = new Uint8Array(count * 4);
  return (0, _List.foldBack)(processData, stopData, acc_1);
}

function GlPalette_create(name, index, count, stops) {
  var props;
  return new _webgl_data.BuilderTypes_GlObjProp(14, (0, _Util.uncurry)(2, (props = (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlTextureProp(0, name), new _webgl_data.BuilderTypes_GlTextureProp(2, index), new _webgl_data.BuilderTypes_GlTextureProp(4, count), new _webgl_data.BuilderTypes_GlTextureProp(5, 1), (0, _props.ObjectProps_pixelDataUint8)(GlPalette_createPaletteData(count, stops)), new _webgl_data.BuilderTypes_GlTextureProp(9), new _webgl_data.BuilderTypes_GlTextureProp(6, 6408), new _webgl_data.BuilderTypes_GlTextureProp(7, 6408), new _webgl_data.BuilderTypes_GlTextureProp(14, 33071), new _webgl_data.BuilderTypes_GlTextureProp(15, 33071), new _webgl_data.BuilderTypes_GlTextureProp(12, 9728), new _webgl_data.BuilderTypes_GlTextureProp(13, 9728)]), function (overrides) {
    return function (parentObject) {
      return (0, _props.Props_gltexture)(props, overrides, parentObject);
    };
  })));
}
},{"../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../core/vectors.js":"../JS/core/vectors.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","./props.js":"../JS/webgl_objects/props.js"}],"../JS/webgl_objects/perlin_common.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.permTexture = permTexture;
exports.defaultColorMap = defaultColorMap;
exports.noiseFractalParams = void 0;

var _webgl_data = require("../webgl_data/webgl_data.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _props = require("./props.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _vectors = require("../core/vectors.js");

var _perlinnoise = require("../core/perlinnoise.js");

var _glpalette = require("./glpalette.js");

var noiseFractalParams = new _webgl_data.BuilderTypes_GlObjProp(11, (0, _Util.uncurry)(2, function () {
  var props = (0, _List.ofArray)([(0, _props.UboProps_u)("octaves", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 1))), (0, _props.UboProps_u)("frequency", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec4__get_Values)((0, _vectors.Vec4_Create_Z16DF143)(1))))), (0, _props.UboProps_u)("amplitude", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 2))), (0, _props.UboProps_u)("lacunarity", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 1))), (0, _props.UboProps_u)("gain", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 0.5))), (0, _props.UboProps_u)("noiseTime", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 0)))]);
  return function (overrides) {
    return function (parentObject) {
      return (0, _props.Props_glubo)("noiseFractalParams", props, overrides, parentObject);
    };
  };
}()));
exports.noiseFractalParams = noiseFractalParams;

function permTexture(seed) {
  var props;
  return new _webgl_data.BuilderTypes_GlObjProp(14, (0, _Util.uncurry)(2, (props = (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlTextureProp(4, 256), new _webgl_data.BuilderTypes_GlTextureProp(5, 1), (0, _props.ObjectProps_pixelDataUint8)((0, _perlinnoise.PerlinShared_createPerm)(seed)), new _webgl_data.BuilderTypes_GlTextureProp(9), new _webgl_data.BuilderTypes_GlTextureProp(6, 33321), new _webgl_data.BuilderTypes_GlTextureProp(7, 6403), new _webgl_data.BuilderTypes_GlTextureProp(14, 10497), new _webgl_data.BuilderTypes_GlTextureProp(15, 10497), new _webgl_data.BuilderTypes_GlTextureProp(12, 9728), new _webgl_data.BuilderTypes_GlTextureProp(13, 9728)]), function (overrides) {
    return function (parentObject) {
      return (0, _props.Props_gltexture)(props, overrides, parentObject);
    };
  })));
}

function defaultColorMap(index) {
  var stops = (0, _List.ofArray)([[0, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0, 0, 255)], [1, (0, _vectors.Vec4_Create_Z27E3A4C0)(255, 255, 255, 255)]]);
  return (0, _glpalette.GlPalette_create)("colorMap", index, 30, stops);
}
},{"../webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./props.js":"../JS/webgl_objects/props.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../core/vectors.js":"../JS/core/vectors.js","../core/perlinnoise.js":"../JS/core/perlinnoise.js","./glpalette.js":"../JS/webgl_objects/glpalette.js"}],"../JS/webgl_objects/perlinnoise1dobject2d.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PerlinNoise1DObject2D$reflection = PerlinNoise1DObject2D$reflection;
exports.PerlinNoise1DObject2D_$ctor_C1A1B4 = PerlinNoise1DObject2D_$ctor_C1A1B4;
exports.PerlinNoise1DObject2D__get_Octaves = PerlinNoise1DObject2D__get_Octaves;
exports.PerlinNoise1DObject2D__set_Octaves_Z524259A4 = PerlinNoise1DObject2D__set_Octaves_Z524259A4;
exports.PerlinNoise1DObject2D__get_Frequency = PerlinNoise1DObject2D__get_Frequency;
exports.PerlinNoise1DObject2D__set_Frequency_Z3D47FC52 = PerlinNoise1DObject2D__set_Frequency_Z3D47FC52;
exports.PerlinNoise1DObject2D__get_Amplitude = PerlinNoise1DObject2D__get_Amplitude;
exports.PerlinNoise1DObject2D__set_Amplitude_5E38073B = PerlinNoise1DObject2D__set_Amplitude_5E38073B;
exports.PerlinNoise1DObject2D__get_Lacunarity = PerlinNoise1DObject2D__get_Lacunarity;
exports.PerlinNoise1DObject2D__set_Lacunarity_5E38073B = PerlinNoise1DObject2D__set_Lacunarity_5E38073B;
exports.PerlinNoise1DObject2D__get_Gain = PerlinNoise1DObject2D__get_Gain;
exports.PerlinNoise1DObject2D__set_Gain_5E38073B = PerlinNoise1DObject2D__set_Gain_5E38073B;
exports.PerlinNoise1DObject2D__get_Time = PerlinNoise1DObject2D__get_Time;
exports.PerlinNoise1DObject2D__set_Time_5E38073B = PerlinNoise1DObject2D__set_Time_5E38073B;
exports.PerlinNoise1DObject2D__get_Range = PerlinNoise1DObject2D__get_Range;
exports.PerlinNoise1DObject2D__set_Range_5E38073B = PerlinNoise1DObject2D__set_Range_5E38073B;
exports.PerlinNoise1DObject2D__get_Start = PerlinNoise1DObject2D__get_Start;
exports.PerlinNoise1DObject2D__set_Start_5E38073B = PerlinNoise1DObject2D__set_Start_5E38073B;
exports.PerlinNoise1DObject2D__get_StrokeColor = PerlinNoise1DObject2D__get_StrokeColor;
exports.PerlinNoise1DObject2D__set_StrokeColor_Z3D47FC58 = PerlinNoise1DObject2D__set_StrokeColor_Z3D47FC58;
exports.PerlinNoise1DObject2D__get_FillColor = PerlinNoise1DObject2D__get_FillColor;
exports.PerlinNoise1DObject2D__set_FillColor_Z3D47FC58 = PerlinNoise1DObject2D__set_FillColor_Z3D47FC58;
exports.PerlinNoise1DObject2D__get_LineWidth = PerlinNoise1DObject2D__get_LineWidth;
exports.PerlinNoise1DObject2D__set_LineWidth_5E38073B = PerlinNoise1DObject2D__set_LineWidth_5E38073B;
exports.PerlinNoise1DObject2D = void 0;

var _shader_utils = require("../webgl_core/shader_utils.js");

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Map = require("../.fable/fable-library.3.0.0/Map.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _webgl_data = require("../webgl_data/webgl_data.js");

var _glcommon = require("../webgl_data/glcommon.js");

var _webglobject = require("./webglobject.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _gluniform = require("../webgl_data/gluniform.js");

var _vectors = require("../core/vectors.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _perlin_common = require("./perlin_common.js");

var _props = require("./props.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

(0, _shader_utils.WebglShaderUtils_addShaderInclude)("noise1d-params", "\r\nuniform noise1dParams {\r\n  vec2 size;\r\n  float start;\r\n  float noiseRange;\r\n};");
var Shaders_perlinNoise1d2dVertex = "#version 300 es\r\n// PerlinNoise1dObject2D\r\n#include precision\r\n#include noise1d-params\r\n#include path-params\r\n#include noise-outvars\r\n#include path-outvars\r\n#include coordinate-conversion-vertex\r\n#include quad-points-strip\r\n#line 34\r\n\r\nvoid main() {\r\n  int vertexID = gl_VertexID % 4;\r\n  vec2 position = quadPointsStrip[vertexID] * size;\r\n\r\n  vec2 centerLeft = vec2(-0.5, 0.0) * size;\r\n  vec2 centerLeftS = modelToScreen(centerLeft);\r\n  vec2 centerRight = vec2(0.5, 0.0) * size;\r\n  vec2 centerRightS = modelToScreen(centerRight);\r\n\r\n  gl_Position = modelToClip(position);\r\n  v_noiseStart = vec4(start);\r\n  v_noiseRange = noiseRange;\r\n  v_noiseDim = vec3(size, 0.0);\r\n  v_noiseCenterLeft = centerLeftS;\r\n  v_noiseCenterRight = centerRightS;\r\n  v_fillColor = fillColor;\r\n  v_strokeColor = strokeColor;\r\n  v_strokeWidth = lineWidth;\r\n}";
var Shaders_perlinNoise1d2dFragment = "#version 300 es\r\n// PerlinNoise1dObject2D\r\n#include precision\r\n#include noise-fractal-params\r\n#include noise-invars\r\n#include path-invars\r\n#include out-color-fragment\r\n#include conditionals\r\n#include vec2\r\n#include line-utils\r\n#include perlin-noise\r\n#line 66\r\n\r\nvoid main() {\r\n  vec2 p = gl_FragCoord.xy;\r\n  vec2 a = v_noiseCenterLeft;\r\n  vec2 b = v_noiseCenterRight;\r\n  vec2 ab = b - a;\r\n  vec2 r = normalize(ab);\r\n  vec2 up = perp(r);\r\n  vec2 ap = p - a;\r\n  float noiseScale = v_noiseDim.x / length(ab);\r\n  // float x = v_noiseStart.x + dot(ap, r) * noiseScale;\r\n  // float n = noise(x) * v_noiseRange;\r\n  vec2 coord = vec2(v_noiseStart.x + dot(ap, r) * noiseScale, noiseTime);\r\n  float n = noise(coord) * v_noiseRange;\r\n  float yDist = distToLine(p, up, a);\r\n  vec4 color = abs(n - yDist) <= v_strokeWidth ? v_strokeColor : v_fillColor;\r\n\r\n  if (abs(cross(ap, up)) <= 1.0) color = vec4(0.0, 0.0, 1.0, 1.0);\r\n\r\n\tglFragColor = color;\r\n}";
var Shaders_perlinNoise1d2dVertexKey = "perlinNoise1d2dVertex";
var Shaders_perlinNoise1d2dFragmentKey = "perlinNoise1d2dFragment";
(0, _shader_utils.WebglShaderUtils_addVertexShaderSource)(Shaders_perlinNoise1d2dVertexKey, Shaders_perlinNoise1d2dVertex);
(0, _shader_utils.WebglShaderUtils_addFragmentShaderSource)(Shaders_perlinNoise1d2dFragmentKey, Shaders_perlinNoise1d2dFragment);

var PerlinNoise1DObject2D = /*#__PURE__*/function (_WebglObject) {
  _inherits(PerlinNoise1DObject2D, _WebglObject);

  var _super = _createSuper(PerlinNoise1DObject2D);

  function PerlinNoise1DObject2D(config, scene, size, seed, layer, name, linkTo, parallaxCam, parallaxDistance) {
    var _this;

    _classCallCheck(this, PerlinNoise1DObject2D);

    _this = _super.call(this, scene, (0, _Util.uncurry)(2, function () {
      var props = (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlObjProp(0, (0, _Option.defaultArg)(name, "")), new _webgl_data.BuilderTypes_GlObjProp(26, (0, _Option.defaultArg)(linkTo, "")), new _webgl_data.BuilderTypes_GlObjProp(17, (0, _Option.defaultArg)(parallaxCam, "")), new _webgl_data.BuilderTypes_GlObjProp(18, (0, _Option.defaultArg)(parallaxDistance, 1)), new _webgl_data.BuilderTypes_GlObjProp(19, (0, _Option.defaultArg)(layer, scene.DefaultLayer)), new _webgl_data.BuilderTypes_GlObjProp(3, 4), new _webgl_data.BuilderTypes_GlObjProp(2, 5), (0, _perlin_common.permTexture)((0, _Option.defaultArg)(seed, 0)), _perlin_common.noiseFractalParams, (0, _props.ObjectProps_pathParams)(config, scene), (0, _props.ObjectProps_ubo)("noise1dParams", (0, _List.ofArray)([(0, _props.UboProps_u)("size", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec2__get_Values)(size)))), (0, _props.UboProps_u)("start", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 0))), (0, _props.UboProps_u)("noiseRange", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 10)))]))]);
      return function (overrides) {
        return function (scene_1) {
          return (0, _props.Props_globject)(Shaders_perlinNoise1d2dVertexKey, Shaders_perlinNoise1d2dFragmentKey, props, overrides, scene_1);
        };
      };
    }()));
    var o = new _Types.FSharpRef(null);
    _this.scene_1 = scene;
    o.contents = _assertThisInitialized(_this);
    var uniforms = (0, _Map.ofSeq)((0, _Seq.map)(function (u) {
      return [(0, _webgl_data.Data_GlUniformData__get_Name)(u), u];
    }, (0, _glcommon.allUniforms)((0, _webglobject.WebglObject__get_ObjectDef)(o.contents))), {
      Compare: _Util.comparePrimitives
    });

    _this.getInt = function (name_1) {
      var name_3, matchValue, msg, uniform;
      return (name_3 = name_1, (matchValue = (0, _Map.tryFind)(name_3, uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_3])), function () {
        throw new Error(msg);
      }()) : (uniform = matchValue, uniform))).Value[0];
    };

    _this.setInt = function (name_4, value) {
      var name_6, matchValue_1, msg_1, uniform_1;
      (0, _gluniform.setValue)(value, (name_6 = name_4, (matchValue_1 = (0, _Map.tryFind)(name_6, uniforms), matchValue_1 == null ? (msg_1 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_6])), function () {
        throw new Error(msg_1);
      }()) : (uniform_1 = matchValue_1, uniform_1))));
    };

    _this.getFloat = function (name_7) {
      var name_9, matchValue_2, msg_2, uniform_2;
      return (name_9 = name_7, (matchValue_2 = (0, _Map.tryFind)(name_9, uniforms), matchValue_2 == null ? (msg_2 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_9])), function () {
        throw new Error(msg_2);
      }()) : (uniform_2 = matchValue_2, uniform_2))).Value[0];
    };

    _this.setFloat = function (name_10, value_2) {
      var name_12, matchValue_3, msg_3, uniform_3;
      (0, _gluniform.setValue)(value_2, (name_12 = name_10, (matchValue_3 = (0, _Map.tryFind)(name_12, uniforms), matchValue_3 == null ? (msg_3 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_12])), function () {
        throw new Error(msg_3);
      }()) : (uniform_3 = matchValue_3, uniform_3))));
    };

    var getVec2 = function getVec2(name_13) {
      var name_15, matchValue_4, msg_4, uniform_4;
      return (0, _vectors.Vec2_$ctor_Z33A93963)((name_15 = name_13, (matchValue_4 = (0, _Map.tryFind)(name_15, uniforms), matchValue_4 == null ? (msg_4 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_15])), function () {
        throw new Error(msg_4);
      }()) : (uniform_4 = matchValue_4, uniform_4))).Value);
    };

    var setVec2 = function setVec2(name_16, value_4) {
      var data_3;
      var name_18 = name_16;
      var matchValue_5 = (0, _Map.tryFind)(name_18, uniforms);

      if (matchValue_5 == null) {
        var msg_5 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_18]));
        throw new Error(msg_5);
      } else {
        var uniform_5 = matchValue_5;
        data_3 = uniform_5;
      }

      (0, _gluniform.setValue)((0, _vectors.Vec2__get_Values)(value_4), data_3);
    };

    _this.getVec4 = function (name_19) {
      var name_21, matchValue_6, msg_6, uniform_6;
      return (0, _vectors.Vec4_$ctor_Z14AF5965)((name_21 = name_19, (matchValue_6 = (0, _Map.tryFind)(name_21, uniforms), matchValue_6 == null ? (msg_6 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_21])), function () {
        throw new Error(msg_6);
      }()) : (uniform_6 = matchValue_6, uniform_6))).Value);
    };

    _this.setVec4 = function (name_22, value_7) {
      var data_4;
      var name_24 = name_22;
      var matchValue_7 = (0, _Map.tryFind)(name_24, uniforms);

      if (matchValue_7 == null) {
        var msg_7 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_24]));
        throw new Error(msg_7);
      } else {
        var uniform_7 = matchValue_7;
        data_4 = uniform_7;
      }

      (0, _gluniform.setValue)((0, _vectors.Vec4__get_Values)(value_7), data_4);
    };

    _this["init@96-14"] = 1;
    return _this;
  }

  return PerlinNoise1DObject2D;
}(_webglobject.WebglObject);

exports.PerlinNoise1DObject2D = PerlinNoise1DObject2D;

function PerlinNoise1DObject2D$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.PerlinNoise1DObject2D", void 0, PerlinNoise1DObject2D, (0, _webglobject.WebglObject$reflection)());
}

function PerlinNoise1DObject2D_$ctor_C1A1B4(config, scene, size, seed, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return new PerlinNoise1DObject2D(config, scene, size, seed, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function PerlinNoise1DObject2D__get_Octaves(_) {
  return _.getInt("octaves");
}

function PerlinNoise1DObject2D__set_Octaves_Z524259A4(_, value) {
  _.setInt("octaves", value);
}

function PerlinNoise1DObject2D__get_Frequency(_) {
  var __1 = _.getVec4("frequency");

  return (0, _vectors.Vec2_Create_7B00E9A0)(__1.v.contents.values[0], __1.v.contents.values[1]);
}

function PerlinNoise1DObject2D__set_Frequency_Z3D47FC52(_, value) {
  _.setVec4("frequency", (0, _vectors.Vec4_Create_32EB7C8E)(value, 0, 0));
}

function PerlinNoise1DObject2D__get_Amplitude(_) {
  return _.getFloat("amplitude");
}

function PerlinNoise1DObject2D__set_Amplitude_5E38073B(_, value) {
  _.setFloat("amplitude", value);
}

function PerlinNoise1DObject2D__get_Lacunarity(_) {
  return _.getFloat("lacunarity");
}

function PerlinNoise1DObject2D__set_Lacunarity_5E38073B(_, value) {
  _.setFloat("lacunarity", value);
}

function PerlinNoise1DObject2D__get_Gain(_) {
  return _.getFloat("gain");
}

function PerlinNoise1DObject2D__set_Gain_5E38073B(_, value) {
  _.setFloat("gain", value);
}

function PerlinNoise1DObject2D__get_Time(_) {
  return _.getFloat("noiseTime");
}

function PerlinNoise1DObject2D__set_Time_5E38073B(_, value) {
  _.setFloat("noiseTime", value);
}

function PerlinNoise1DObject2D__get_Range(_) {
  return _.getFloat("noiseRange");
}

function PerlinNoise1DObject2D__set_Range_5E38073B(_, value) {
  _.setFloat("noiseRange", value);
}

function PerlinNoise1DObject2D__get_Start(_) {
  return _.getFloat("start");
}

function PerlinNoise1DObject2D__set_Start_5E38073B(_, value) {
  _.setFloat("start", value);
}

function PerlinNoise1DObject2D__get_StrokeColor(_) {
  return _.getVec4("strokeColor");
}

function PerlinNoise1DObject2D__set_StrokeColor_Z3D47FC58(_, value) {
  _.setVec4("strokeColor", value);
}

function PerlinNoise1DObject2D__get_FillColor(_) {
  return _.getVec4("fillColor");
}

function PerlinNoise1DObject2D__set_FillColor_Z3D47FC58(_, value) {
  _.setVec4("fillColor", value);
}

function PerlinNoise1DObject2D__get_LineWidth(_) {
  return _.getFloat("lineWidth") / _.scene_1.LineWidthScale;
}

function PerlinNoise1DObject2D__set_LineWidth_5E38073B(_, value) {
  _.setFloat("lineWidth", value * _.scene_1.LineWidthScale);
}
},{"../webgl_core/shader_utils.js":"../JS/webgl_core/shader_utils.js","../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Map.js":"../JS/.fable/fable-library.3.0.0/Map.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_data/glcommon.js":"../JS/webgl_data/glcommon.js","./webglobject.js":"../JS/webgl_objects/webglobject.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../webgl_data/gluniform.js":"../JS/webgl_data/gluniform.js","../core/vectors.js":"../JS/core/vectors.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./perlin_common.js":"../JS/webgl_objects/perlin_common.js","./props.js":"../JS/webgl_objects/props.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js"}],"../JS/webgl_objects/perlinnoise2dobject2d.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PerlinNoise2DObject2D$reflection = PerlinNoise2DObject2D$reflection;
exports.PerlinNoise2DObject2D_$ctor_C1A1B4 = PerlinNoise2DObject2D_$ctor_C1A1B4;
exports.PerlinNoise2DObject2D__get_Octaves = PerlinNoise2DObject2D__get_Octaves;
exports.PerlinNoise2DObject2D__set_Octaves_Z524259A4 = PerlinNoise2DObject2D__set_Octaves_Z524259A4;
exports.PerlinNoise2DObject2D__get_Frequency = PerlinNoise2DObject2D__get_Frequency;
exports.PerlinNoise2DObject2D__set_Frequency_Z3D47FC51 = PerlinNoise2DObject2D__set_Frequency_Z3D47FC51;
exports.PerlinNoise2DObject2D__get_Amplitude = PerlinNoise2DObject2D__get_Amplitude;
exports.PerlinNoise2DObject2D__set_Amplitude_5E38073B = PerlinNoise2DObject2D__set_Amplitude_5E38073B;
exports.PerlinNoise2DObject2D__get_Lacunarity = PerlinNoise2DObject2D__get_Lacunarity;
exports.PerlinNoise2DObject2D__set_Lacunarity_5E38073B = PerlinNoise2DObject2D__set_Lacunarity_5E38073B;
exports.PerlinNoise2DObject2D__get_Gain = PerlinNoise2DObject2D__get_Gain;
exports.PerlinNoise2DObject2D__set_Gain_5E38073B = PerlinNoise2DObject2D__set_Gain_5E38073B;
exports.PerlinNoise2DObject2D__get_Time = PerlinNoise2DObject2D__get_Time;
exports.PerlinNoise2DObject2D__set_Time_5E38073B = PerlinNoise2DObject2D__set_Time_5E38073B;
exports.PerlinNoise2DObject2D__get_Start = PerlinNoise2DObject2D__get_Start;
exports.PerlinNoise2DObject2D__set_Start_Z3D47FC52 = PerlinNoise2DObject2D__set_Start_Z3D47FC52;
exports.PerlinNoise2DObject2D__get_StrokeColor = PerlinNoise2DObject2D__get_StrokeColor;
exports.PerlinNoise2DObject2D__set_StrokeColor_Z3D47FC58 = PerlinNoise2DObject2D__set_StrokeColor_Z3D47FC58;
exports.PerlinNoise2DObject2D__get_FillColor = PerlinNoise2DObject2D__get_FillColor;
exports.PerlinNoise2DObject2D__set_FillColor_Z3D47FC58 = PerlinNoise2DObject2D__set_FillColor_Z3D47FC58;
exports.PerlinNoise2DObject2D__get_LineWidth = PerlinNoise2DObject2D__get_LineWidth;
exports.PerlinNoise2DObject2D__set_LineWidth_5E38073B = PerlinNoise2DObject2D__set_LineWidth_5E38073B;
exports.PerlinNoise2DObject2D__get_ColorMap = PerlinNoise2DObject2D__get_ColorMap;
exports.PerlinNoise2DObject2D__set_ColorMap_6C95DA22 = PerlinNoise2DObject2D__set_ColorMap_6C95DA22;
exports.PerlinNoise2DObject2D = void 0;

var _shader_utils = require("../webgl_core/shader_utils.js");

var _Types = require("../.fable/fable-library.3.0.0/Types.js");

var _Map = require("../.fable/fable-library.3.0.0/Map.js");

var _Seq = require("../.fable/fable-library.3.0.0/Seq.js");

var _webgl_data = require("../webgl_data/webgl_data.js");

var _glcommon = require("../webgl_data/glcommon.js");

var _webglobject = require("./webglobject.js");

var _Util = require("../.fable/fable-library.3.0.0/Util.js");

var _String = require("../.fable/fable-library.3.0.0/String.js");

var _gluniform = require("../webgl_data/gluniform.js");

var _vectors = require("../core/vectors.js");

var _Option = require("../.fable/fable-library.3.0.0/Option.js");

var _perlin_common = require("./perlin_common.js");

var _props = require("./props.js");

var _List = require("../.fable/fable-library.3.0.0/List.js");

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _globj = require("../webgl_data/globj.js");

var _gltexture = require("../webgl_data/gltexture.js");

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

(0, _shader_utils.WebglShaderUtils_addShaderInclude)("noise2d-params", "\r\nuniform noise2dParams {\r\n  vec2 size;\r\n  vec2 start;\r\n};");
var Shaders_perlinNoise2d2dVertex = "#version 300 es\r\n// PerlinNoise1dObject2D\r\n#include precision\r\n#include noise2d-params\r\n#include path-params\r\n#include noise-outvars\r\n#include path-outvars\r\n#include coordinate-conversion-vertex\r\n#include quad-points-strip\r\n#line 34\r\n\r\nvoid main() {\r\n  int vertexID = gl_VertexID % 4;\r\n  vec2 position = quadPointsStrip[vertexID] * size;\r\n\r\n  vec2 centerLeft = vec2(-0.5, 0.0) * size;\r\n  vec2 centerLeftS = modelToScreen(centerLeft);\r\n  vec2 centerRight = vec2(0.5, 0.0) * size;\r\n  vec2 centerRightS = modelToScreen(centerRight);\r\n  vec2 centerTop = vec2(0.0, 0.5) * size;\r\n  vec2 centerTopS = modelToScreen(centerTop);\r\n  vec2 centerBottom = vec2(0.0, -0.5) * size;\r\n  vec2 centerBottomS = modelToScreen(centerBottom);\r\n\r\n  gl_Position = modelToClip(position);\r\n  v_noiseStart = vec4(start, 0.0, 0.0);\r\n  v_noiseDim = vec3(size, 0.0);\r\n  v_noiseCenterLeft = centerLeftS;\r\n  v_noiseCenterRight = centerRightS;\r\n  v_noiseCenterTop = centerTopS;\r\n  v_noiseCenterBottom = centerBottomS;\r\n  v_fillColor = fillColor;\r\n  v_strokeColor = strokeColor;\r\n  v_strokeWidth = lineWidth;\r\n}";
var Shaders_perlinNoise2d2dFragment = "#version 300 es\r\n// PerlinNoise1dObject2D\r\n#include precision\r\n#include noise-fractal-params\r\n#include noise-invars\r\n#include path-invars\r\n#include out-color-fragment\r\n#include math-consts\r\n#include conditionals\r\n#include vec2\r\n#include line-utils\r\n#include perlin-noise\r\n#line 73\r\n\r\nuniform sampler2D colorMap;\r\n\r\nvec3 marble(vec2 pos, vec3 col) {\r\n  vec3 rgb = vec3(0.0);\r\n  // float x = sin((pos.z + 3.0 * turbulence(pos, 0.0125)) * PI);\r\n  float x = sin((pos.x + 3.0 * turbulence(pos * frequency.xy, 0.0125)) * PI);\r\n  // x = sqrt(x + 1.0) * 0.7071;\r\n  // rgb.g = 0.3 + 8.0 * x;\r\n  // x = sqrt(x);\r\n  // rgb.r = 0.3 + 0.6 * x;\r\n  // rgb.b = 0.6 + 0.4 * x;\r\n  rgb.g = col.g + 8.0 * x;\r\n  x = sqrt(x);\r\n  rgb.r = col.r + 0.6 * x;\r\n  rgb.b = col.b + 0.4 * x;\r\n  return rgb;\r\n}\r\n\r\nfloat marble(vec2 pos, float period, vec3 frequency, float pixelSize, float time) {\r\n  float x = sin((pos.x + period * turbulence(vec3(pos, time) * frequency, pixelSize)) * PI);\r\n  return x;\r\n}\r\n\r\n// https://lodev.org/cgtutor/randomnoise.html\r\nfloat marble(vec2 pos, vec2 period, float twistStrength, float initialTurbulence, vec3 frequency, vec2 size, float time) {\r\n  vec2 p = pos * period / size;\r\n  float n = p.x + p.y + twistStrength * turbulence(vec3(pos, time) * frequency, size.x * 0.00001 * initialTurbulence);\r\n  return abs(sin(n * PI));\r\n}\r\n\r\nfloat wood(vec2 pos, float rings, float twistStrength, float initialTurbulence, vec3 frequency, vec2 size, float time) {\r\n  vec2 p = (pos - size * 0.5) / size;\r\n  float n = sqrt(dot(p, p)) + twistStrength * turbulence(vec3(pos, time) * frequency, size.x * 0.00001 * initialTurbulence);\r\n  return abs(sin(2.0 * rings * n * PI));\r\n}\r\n\r\nvoid main() {\r\n  vec2 p = gl_FragCoord.xy;\r\n  vec2 a = v_noiseCenterLeft;\r\n  vec2 b = v_noiseCenterRight;\r\n  vec2 c = v_noiseCenterBottom;\r\n  vec2 d = v_noiseCenterTop;\r\n  vec2 ab = b - a;\r\n  vec2 cd = d - c;\r\n  vec2 r = normalize(ab);\r\n  vec2 up = perp(r);\r\n  vec2 ap = p - a;\r\n  float yDist = distToLine(p, up, a);\r\n  vec2 noiseScale = vec2(v_noiseDim.x / length(ab), v_noiseDim.y / length(cd));\r\n  float pixelSize = v_noiseDim.x * 0.00001;\r\n\r\n  // vec2 coord = v_noiseStart.xy + vec2(dot(ap, r), dot(ap, up)) * noiseScale;\r\n  // float n = (noise(coord) + 1.0) * 0.5;\r\n\r\n  vec2 xy = v_noiseStart.xy + vec2(dot(ap, r), dot(ap, up)) * noiseScale;\r\n  vec3 coord = vec3(xy, noiseTime);\r\n\r\n  float n = (noise(coord) + 1.0) * 0.5; // [0.0, 1.0]\r\n  vec2 cc = vec2(n, 0.0);\r\n  vec4 color = texture(colorMap, cc);\r\n\r\n  // float n = (_noise(coord * frequency.xyz) * amplitude + 1.0) * 0.5; // [0.0, 1.0]\r\n  // vec2 cc = vec2(n, 0.0);\r\n  // vec4 color = texture(colorMap, cc);\r\n\r\n  // float n = turbulence(coord * frequency.xyz, pixelSize);\r\n  // vec2 cc = vec2(n, 0.0);\r\n  // vec4 color = texture(colorMap, cc);\r\n\r\n  // float n = (noise(coord) + 1.0) * 0.5; // [0.0, 1.0]\r\n  // vec4 color = vec4(vec3(n), 1.0);\r\n\r\n  // float n = (noise(coord) + 1.0) * 0.5; // [0.0, 1.0]\r\n  // vec4 color = mix(vec4(1.0, 0.0, 0.0, 1.0), vec4(0.0, 0.0, 1.0, 1.0), n);\r\n\r\n  // float n = (_noise(coord * frequency.xyz) + 1.0) * 0.5; // [0.0, 1.0]\r\n  // n *= 3.0;\r\n  // n = n - floor(n);\r\n  // vec2 cc = vec2(n, 0.0);\r\n  // vec4 color = texture(colorMap, cc);\r\n\r\n  // vec3 rgb = marble(xy, vec3(0.5, 0.5, 0.5));\r\n  // vec4 color = vec4(rgb, 1.0);\r\n\r\n  // float t = marble(xy * frequency.xy, 8.0, frequency.xyz, pixelSize, noiseTime);\r\n  // t = (t + 1.0) * 0.5;\r\n  // vec2 cc = vec2(t, 0.0);\r\n  // vec4 color = texture(colorMap, cc);\r\n\r\n  // vec2 m = sin(xy + turbulence(xy * frequency.xy, pixelSize) * xy.x);\r\n  // float t = m.x + m.y;\r\n  // vec4 color = vec4(vec3(t), 1.0);\r\n\r\n  // float t = marble(xy * frequency.xy, vec2(0.0, 1.0), 5.0, 16.0, frequency.xy, v_noiseDim.xy, noiseTime) * amplitude;\r\n  // float t = marble(xy, vec2(5.0, 10.0), 1.2, 8.0, frequency.xyz, v_noiseDim.xy, noiseTime) * amplitude;\r\n  // t = (t + 1.0) * 0.5;\r\n  // vec4 color = vec4(vec3(t), 1.0);\r\n\r\n  // float t = (sin((_noise(xy * frequency.xy) * 70.0) * 2.0 * PI / 15.0) + 1.0) / 2.0 * amplitude;\r\n  // t = (t + 1.0) * 0.5;\r\n  // vec4 color = vec4(vec3(t), 1.0);\r\n\r\n  // float t = wood(xy, 8.0, 0.07, 16.0, frequency.xyz, v_noiseDim.xy, noiseTime) * amplitude;\r\n  // t = (t + 1.0) * 0.5;\r\n  // vec4 color = vec4(vec3(t), 1.0);\r\n  // color = vec4(vec3(0.6 * t, 0.45 * t, 0.27), 1.0);\r\n\r\n  // t = noise(xy);\r\n  // t = (t + 1.0) * 0.5;\r\n  // vec4 color = vec4(vec3(t), 1.0);\r\n\r\n  // float t = turbulence1(xy * frequency.xy, pixelSize, v_noiseDim.x) * amplitude;\r\n  // vec4 color = vec4(vec3(t), 1.0);\r\n\r\n  // float t = turbulence(xy * frequency.xy, 0.0125) * amplitude;\r\n  // float t = turbulence(coord * frequency.xyz, pixelSize) * amplitude;\r\n  // vec4 color = vec4(vec3(t), 1.0);\r\n\r\n  if (abs(cross(ap, up)) <= 1.0) color = vec4(0.0, 0.0, 1.0, 1.0);\r\n\r\n\tglFragColor = color;\r\n}";
var Shaders_perlinNoise2d2dVertexKey = "perlinNoise2d2dVertex";
var Shaders_perlinNoise2d2dFragmentKey = "perlinNoise2d2dFragment";
(0, _shader_utils.WebglShaderUtils_addVertexShaderSource)(Shaders_perlinNoise2d2dVertexKey, Shaders_perlinNoise2d2dVertex);
(0, _shader_utils.WebglShaderUtils_addFragmentShaderSource)(Shaders_perlinNoise2d2dFragmentKey, Shaders_perlinNoise2d2dFragment);

var PerlinNoise2DObject2D = /*#__PURE__*/function (_WebglObject) {
  _inherits(PerlinNoise2DObject2D, _WebglObject);

  var _super = _createSuper(PerlinNoise2DObject2D);

  function PerlinNoise2DObject2D(config, scene, size, seed, layer, name, linkTo, parallaxCam, parallaxDistance) {
    var _this;

    _classCallCheck(this, PerlinNoise2DObject2D);

    _this = _super.call(this, scene, (0, _Util.uncurry)(2, function () {
      var props = (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlObjProp(0, (0, _Option.defaultArg)(name, "")), new _webgl_data.BuilderTypes_GlObjProp(26, (0, _Option.defaultArg)(linkTo, "")), new _webgl_data.BuilderTypes_GlObjProp(17, (0, _Option.defaultArg)(parallaxCam, "")), new _webgl_data.BuilderTypes_GlObjProp(18, (0, _Option.defaultArg)(parallaxDistance, 1)), new _webgl_data.BuilderTypes_GlObjProp(19, (0, _Option.defaultArg)(layer, scene.DefaultLayer)), new _webgl_data.BuilderTypes_GlObjProp(3, 4), new _webgl_data.BuilderTypes_GlObjProp(2, 5), (0, _perlin_common.permTexture)((0, _Option.defaultArg)(seed, 0)), (0, _perlin_common.defaultColorMap)(1), _perlin_common.noiseFractalParams, (0, _props.ObjectProps_pathParams)(config, scene), (0, _props.ObjectProps_uniform)("permTexture", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 0))), (0, _props.ObjectProps_uniform)("colorMap", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, 1))), (0, _props.ObjectProps_ubo)("noise2dParams", (0, _List.ofArray)([(0, _props.UboProps_u)("size", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec2__get_Values)(size)))), (0, _props.UboProps_u)("start", (0, _List.singleton)(new _webgl_data.BuilderTypes_GlUniformProp(0, (0, _vectors.Vec2__get_Values)((0, _vectors.Vec2_Create_7B00E9A0)(0, 0)))))]))]);
      return function (overrides) {
        return function (scene_1) {
          return (0, _props.Props_globject)(Shaders_perlinNoise2d2dVertexKey, Shaders_perlinNoise2d2dFragmentKey, props, overrides, scene_1);
        };
      };
    }()));
    _this.o = new _Types.FSharpRef(null);
    _this.scene_1 = scene;
    _this.o.contents = _assertThisInitialized(_this);
    var uniforms = (0, _Map.ofSeq)((0, _Seq.map)(function (u) {
      return [(0, _webgl_data.Data_GlUniformData__get_Name)(u), u];
    }, (0, _glcommon.allUniforms)((0, _webglobject.WebglObject__get_ObjectDef)(_this.o.contents))), {
      Compare: _Util.comparePrimitives
    });

    _this.getInt = function (name_1) {
      var name_3, matchValue, msg, uniform;
      return (name_3 = name_1, (matchValue = (0, _Map.tryFind)(name_3, uniforms), matchValue == null ? (msg = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_3])), function () {
        throw new Error(msg);
      }()) : (uniform = matchValue, uniform))).Value[0];
    };

    _this.setInt = function (name_4, value) {
      var name_6, matchValue_1, msg_1, uniform_1;
      (0, _gluniform.setValue)(value, (name_6 = name_4, (matchValue_1 = (0, _Map.tryFind)(name_6, uniforms), matchValue_1 == null ? (msg_1 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_6])), function () {
        throw new Error(msg_1);
      }()) : (uniform_1 = matchValue_1, uniform_1))));
    };

    _this.getFloat = function (name_7) {
      var name_9, matchValue_2, msg_2, uniform_2;
      return (name_9 = name_7, (matchValue_2 = (0, _Map.tryFind)(name_9, uniforms), matchValue_2 == null ? (msg_2 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_9])), function () {
        throw new Error(msg_2);
      }()) : (uniform_2 = matchValue_2, uniform_2))).Value[0];
    };

    _this.setFloat = function (name_10, value_2) {
      var name_12, matchValue_3, msg_3, uniform_3;
      (0, _gluniform.setValue)(value_2, (name_12 = name_10, (matchValue_3 = (0, _Map.tryFind)(name_12, uniforms), matchValue_3 == null ? (msg_3 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_12])), function () {
        throw new Error(msg_3);
      }()) : (uniform_3 = matchValue_3, uniform_3))));
    };

    _this.getVec2 = function (name_13) {
      var name_15, matchValue_4, msg_4, uniform_4;
      return (0, _vectors.Vec2_$ctor_Z33A93963)((name_15 = name_13, (matchValue_4 = (0, _Map.tryFind)(name_15, uniforms), matchValue_4 == null ? (msg_4 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_15])), function () {
        throw new Error(msg_4);
      }()) : (uniform_4 = matchValue_4, uniform_4))).Value);
    };

    _this.setVec2 = function (name_16, value_4) {
      var data_3;
      var name_18 = name_16;
      var matchValue_5 = (0, _Map.tryFind)(name_18, uniforms);

      if (matchValue_5 == null) {
        var msg_5 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_18]));
        throw new Error(msg_5);
      } else {
        var uniform_5 = matchValue_5;
        data_3 = uniform_5;
      }

      (0, _gluniform.setValue)((0, _vectors.Vec2__get_Values)(value_4), data_3);
    };

    _this.getVec4 = function (name_19) {
      var name_21, matchValue_6, msg_6, uniform_6;
      return (0, _vectors.Vec4_$ctor_Z14AF5965)((name_21 = name_19, (matchValue_6 = (0, _Map.tryFind)(name_21, uniforms), matchValue_6 == null ? (msg_6 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_21])), function () {
        throw new Error(msg_6);
      }()) : (uniform_6 = matchValue_6, uniform_6))).Value);
    };

    _this.setVec4 = function (name_22, value_7) {
      var data_4;
      var name_24 = name_22;
      var matchValue_7 = (0, _Map.tryFind)(name_24, uniforms);

      if (matchValue_7 == null) {
        var msg_7 = (0, _String.toText)((0, _String.interpolate)("Uniform '%P()' not found.", [name_24]));
        throw new Error(msg_7);
      } else {
        var uniform_7 = matchValue_7;
        data_4 = uniform_7;
      }

      (0, _gluniform.setValue)((0, _vectors.Vec4__get_Values)(value_7), data_4);
    };

    _this["init@204-15"] = 1;
    return _this;
  }

  return PerlinNoise2DObject2D;
}(_webglobject.WebglObject);

exports.PerlinNoise2DObject2D = PerlinNoise2DObject2D;

function PerlinNoise2DObject2D$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.PerlinNoise2DObject2D", void 0, PerlinNoise2DObject2D, (0, _webglobject.WebglObject$reflection)());
}

function PerlinNoise2DObject2D_$ctor_C1A1B4(config, scene, size, seed, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return new PerlinNoise2DObject2D(config, scene, size, seed, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function PerlinNoise2DObject2D__get_Octaves(_) {
  return _.getInt("octaves");
}

function PerlinNoise2DObject2D__set_Octaves_Z524259A4(_, value) {
  _.setInt("octaves", value);
}

function PerlinNoise2DObject2D__get_Frequency(_) {
  var __1 = _.getVec4("frequency");

  return (0, _vectors.Vec3_Create_8ED0A5D)(__1.v.contents.values[0], __1.v.contents.values[1], __1.v.contents.values[2]);
}

function PerlinNoise2DObject2D__set_Frequency_Z3D47FC51(_, value) {
  _.setVec4("frequency", (0, _vectors.Vec4_Create_Z18D588CE)(value, 0));
}

function PerlinNoise2DObject2D__get_Amplitude(_) {
  return _.getFloat("amplitude");
}

function PerlinNoise2DObject2D__set_Amplitude_5E38073B(_, value) {
  _.setFloat("amplitude", value);
}

function PerlinNoise2DObject2D__get_Lacunarity(_) {
  return _.getFloat("lacunarity");
}

function PerlinNoise2DObject2D__set_Lacunarity_5E38073B(_, value) {
  _.setFloat("lacunarity", value);
}

function PerlinNoise2DObject2D__get_Gain(_) {
  return _.getFloat("gain");
}

function PerlinNoise2DObject2D__set_Gain_5E38073B(_, value) {
  _.setFloat("gain", value);
}

function PerlinNoise2DObject2D__get_Time(_) {
  return _.getFloat("noiseTime");
}

function PerlinNoise2DObject2D__set_Time_5E38073B(_, value) {
  _.setFloat("noiseTime", value);
}

function PerlinNoise2DObject2D__get_Start(_) {
  return _.getVec2("start");
}

function PerlinNoise2DObject2D__set_Start_Z3D47FC52(_, value) {
  _.setVec2("start", value);
}

function PerlinNoise2DObject2D__get_StrokeColor(_) {
  return _.getVec4("strokeColor");
}

function PerlinNoise2DObject2D__set_StrokeColor_Z3D47FC58(_, value) {
  _.setVec4("strokeColor", value);
}

function PerlinNoise2DObject2D__get_FillColor(_) {
  return _.getVec4("fillColor");
}

function PerlinNoise2DObject2D__set_FillColor_Z3D47FC58(_, value) {
  _.setVec4("fillColor", value);
}

function PerlinNoise2DObject2D__get_LineWidth(_) {
  return _.getFloat("lineWidth") / _.scene_1.LineWidthScale;
}

function PerlinNoise2DObject2D__set_LineWidth_5E38073B(_, value) {
  _.setFloat("lineWidth", value * _.scene_1.LineWidthScale);
}

function PerlinNoise2DObject2D__get_ColorMap(_) {
  var uColorMap = (0, _globj.getTexture)("colorMap")((0, _webglobject.WebglObject__get_ObjectDef)(_.o.contents));
  var arr;
  var matchValue = uColorMap.Pixels;

  if (matchValue.tag === 0) {
    var a = matchValue.fields[0];
    arr = a;
  } else {
    throw new Error("Unexpected colorMap pixels type!");
  }

  return arr;
}

function PerlinNoise2DObject2D__set_ColorMap_6C95DA22(_, value) {
  var uColorMap = (0, _globj.getTexture)("colorMap")((0, _webglobject.WebglObject__get_ObjectDef)(_.o.contents));
  (0, _gltexture.setPixelData)(1, value, uColorMap);
}
},{"../webgl_core/shader_utils.js":"../JS/webgl_core/shader_utils.js","../.fable/fable-library.3.0.0/Types.js":"../JS/.fable/fable-library.3.0.0/Types.js","../.fable/fable-library.3.0.0/Map.js":"../JS/.fable/fable-library.3.0.0/Map.js","../.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","../webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","../webgl_data/glcommon.js":"../JS/webgl_data/glcommon.js","./webglobject.js":"../JS/webgl_objects/webglobject.js","../.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","../.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","../webgl_data/gluniform.js":"../JS/webgl_data/gluniform.js","../core/vectors.js":"../JS/core/vectors.js","../.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./perlin_common.js":"../JS/webgl_objects/perlin_common.js","./props.js":"../JS/webgl_objects/props.js","../.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","../webgl_data/globj.js":"../JS/webgl_data/globj.js","../webgl_data/gltexture.js":"../JS/webgl_data/gltexture.js"}],"../JS/webgl_objects/renderer.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GlRenderer$reflection = GlRenderer$reflection;
exports.GlRenderer_$ctor = GlRenderer_$ctor;
exports.GlRenderer__Grid2D_Z270D9612 = GlRenderer__Grid2D_Z270D9612;
exports.GlRenderer__Vector2D_Z270D9612 = GlRenderer__Vector2D_Z270D9612;
exports.GlRenderer__Line2D_515305A0 = GlRenderer__Line2D_515305A0;
exports.GlRenderer__LinePath2D_5BF31CC8 = GlRenderer__LinePath2D_5BF31CC8;
exports.GlRenderer__PerlinNoise1DObject2D_Z4FCA04F9 = GlRenderer__PerlinNoise1DObject2D_Z4FCA04F9;
exports.GlRenderer__PerlinNoise2DObject2D_Z4FCA04F9 = GlRenderer__PerlinNoise2DObject2D_Z4FCA04F9;
exports.GlRenderer = void 0;

var _Reflection = require("../.fable/fable-library.3.0.0/Reflection.js");

var _grid2d = require("./grid2d.js");

var _vectorobject2d = require("./vectorobject2d.js");

var _lineobjects2d = require("./lineobjects2d.js");

var _linepathobject2d = require("./linepathobject2d.js");

var _perlinnoise1dobject2d = require("./perlinnoise1dobject2d.js");

var _perlinnoise2dobject2d = require("./perlinnoise2dobject2d.js");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GlRenderer = function GlRenderer() {
  _classCallCheck(this, GlRenderer);
};

exports.GlRenderer = GlRenderer;

function GlRenderer$reflection() {
  return (0, _Reflection.class_type)("Wil.Webgl.GlRenderer", void 0, GlRenderer);
}

function GlRenderer_$ctor() {
  return new GlRenderer();
}

function GlRenderer__Grid2D_Z270D9612(_, scene, size, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return (0, _grid2d.Grid2D_$ctor_Z166BE183)(scene.Canvas.Params, scene, size, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function GlRenderer__Vector2D_Z270D9612(_, scene, vector, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return (0, _vectorobject2d.VectorObject2D_$ctor_Z166BE183)(scene.Canvas.Params, scene, vector, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function GlRenderer__Line2D_515305A0(_, scene, p1, p2, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return (0, _lineobjects2d.LineObjects2D_$ctor_22E93213)(scene.Canvas.Params, scene, p1, p2, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function GlRenderer__LinePath2D_5BF31CC8(_, scene, points, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return (0, _linepathobject2d.LinePathObject2D_$ctor_3F122D1B)(scene.Canvas.Params, scene, points, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function GlRenderer__PerlinNoise1DObject2D_Z4FCA04F9(_, scene, size, seed, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return (0, _perlinnoise1dobject2d.PerlinNoise1DObject2D_$ctor_C1A1B4)(scene.Canvas.Params, scene, size, seed, layer, name, linkTo, parallaxCam, parallaxDistance);
}

function GlRenderer__PerlinNoise2DObject2D_Z4FCA04F9(_, scene, size, seed, layer, name, linkTo, parallaxCam, parallaxDistance) {
  return (0, _perlinnoise2dobject2d.PerlinNoise2DObject2D_$ctor_C1A1B4)(scene.Canvas.Params, scene, size, seed, layer, name, linkTo, parallaxCam, parallaxDistance);
}
},{"../.fable/fable-library.3.0.0/Reflection.js":"../JS/.fable/fable-library.3.0.0/Reflection.js","./grid2d.js":"../JS/webgl_objects/grid2d.js","./vectorobject2d.js":"../JS/webgl_objects/vectorobject2d.js","./lineobjects2d.js":"../JS/webgl_objects/lineobjects2d.js","./linepathobject2d.js":"../JS/webgl_objects/linepathobject2d.js","./perlinnoise1dobject2d.js":"../JS/webgl_objects/perlinnoise1dobject2d.js","./perlinnoise2dobject2d.js":"../JS/webgl_objects/perlinnoise2dobject2d.js"}],"../JS/App.js":[function(require,module,exports) {
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.showMousePos = showMousePos;
exports.Helpers_getUniforms = Helpers_getUniforms;
exports.Helpers_showUniforms = Helpers_showUniforms;
exports.Helpers_showUbos = Helpers_showUbos;
exports.Helpers_showAttributes = Helpers_showAttributes;
exports.run = run;
exports.testGridObject = testGridObject;
exports.testParallax = testParallax;
exports.testLink = testLink;
exports.testLine = testLine;
exports.testLinePath = testLinePath;
exports.testLinePathAligned = testLinePathAligned;
exports.testNoise = testNoise;
exports.testVector = testVector;
exports.runTests = runTests;
exports.elMouse = exports.elFps = exports.myCanvas = exports.star = void 0;

var _jsutils = require("./js/jsutils.js");

var _String = require("./.fable/fable-library.3.0.0/String.js");

var _Seq = require("./.fable/fable-library.3.0.0/Seq.js");

var _Array = require("./.fable/fable-library.3.0.0/Array.js");

var _Option = require("./.fable/fable-library.3.0.0/Option.js");

var _glcanvas = require("./webgl_data/glcanvas.js");

var _glmouse = require("./webgl_data/glmouse.js");

var _vectors = require("./core/vectors.js");

var _List = require("./.fable/fable-library.3.0.0/List.js");

var _glcamera = require("./webgl_data/glcamera.js");

var _Util = require("./.fable/fable-library.3.0.0/Util.js");

var _glcommon = require("./webgl_data/glcommon.js");

var _optionex = require("./core/optionex.js");

var _globj = require("./webgl_data/globj.js");

var _Observable = require("./.fable/fable-library.3.0.0/Observable.js");

var _bounds = require("./twod/bounds.js");

var _props = require("./webgl_objects/props.js");

var _webgl_data = require("./webgl_data/webgl_data.js");

var _renderer = require("./webgl_objects/renderer.js");

var _grid2d = require("./webgl_objects/grid2d.js");

var _glscene = require("./webgl_data/glscene.js");

var _webglobject = require("./webgl_objects/webglobject.js");

var _vectorobject2d = require("./webgl_objects/vectorobject2d.js");

var _quadobjectbase = require("./webgl_objects/quadobjectbase.js");

var _lineobjects2d = require("./webgl_objects/lineobjects2d.js");

var _linepathobject2d = require("./webgl_objects/linepathobject2d.js");

var _utils = require("./core/utils.js");

(0, _jsutils.enabled)(true, true);
var star = document.getElementById("star");
exports.star = star;
var myCanvas = document.getElementById("myCanvas");
exports.myCanvas = myCanvas;
myCanvas.width = 400;
myCanvas.height = 400;
var elFps = document.getElementById("fps");
exports.elFps = elFps;
var elMouse = document.getElementById("mouse");
exports.elMouse = elMouse;

function showMousePos(pos) {
  elMouse.textContent = (0, _String.toText)((0, _String.interpolate)("%P()", [pos]));
}

function Helpers_getUniforms(info) {
  return (0, _Seq.delay)(function () {
    return (0, _Seq.append)((0, _Seq.singleton)(info), (0, _Seq.delay)(function () {
      return info.Children.length > 0 ? (0, _Seq.concat)((0, _Array.map)(Helpers_getUniforms, info.Children)) : (0, _Seq.empty)();
    }));
  });
}

function Helpers_showUniforms(data) {
  var pinfo = data.ProgramInfo;
  console.log((0, _Option.some)((0, _String.toText)((0, _String.interpolate)("%P()", [data.Name]))));
  console.table((0, _Option.some)(Array.from((0, _Seq.collect)(Helpers_getUniforms, pinfo.Uniforms))));
}

function Helpers_showUbos(data) {
  var pinfo = data.ProgramInfo;
  console.log((0, _Option.some)((0, _String.toText)((0, _String.interpolate)("%P()", [data.Name]))));
  console.table((0, _Option.some)(Array.from((0, _Seq.collect)(function (u) {
    return u.Uniforms;
  }, pinfo.Ubos))));
}

function Helpers_showAttributes(data) {
  var pinfo = data.ProgramInfo;
  console.log((0, _Option.some)((0, _String.toText)((0, _String.interpolate)("%P()", [data.Name]))));
  console.table((0, _Option.some)(Array.from(pinfo.Attributes)));
}

function run(f) {
  var patternInput = f();
  var update = patternInput[2];
  var frames = patternInput[4] | 0;
  var desc = patternInput[0];
  var canvas = patternInput[1];
  var animating = patternInput[3];
  console.log((0, _Option.some)((0, _String.toText)((0, _String.interpolate)("Test %P()", [desc]))));
  var mouse = canvas.Mouse;
  (0, _glcanvas.render)(0, canvas);
  var active = false;
  var fps = 0;
  var frame = 1;
  var lastFpsTime = 0;
  var framesLastSecond = 0;
  var dragButton = _glmouse.Mouse_leftButton | 0;
  var dragging = false;
  var dragOffset = (0, _vectors.Vec3_Create)();

  var getMouseCamera = function getMouseCamera(p) {
    var getCamera = function getCamera(p_1, scene) {
      return (0, _List.tryFind)(function (c) {
        return (0, _glcamera.containsPoint)(p_1, c);
      }, scene.Cameras);
    };

    var array = canvas.Scenes;
    return (0, _Array.tryPick)((0, _Util.partialApply)(1, getCamera, [p]), array);
  };

  var processMouse = function processMouse() {
    if ((0, _glmouse.GlMouse__IsDragStartEvent_Z524259A4)(mouse, dragButton)) {
      var matchValue = getMouseCamera((0, _glmouse.GlMouse__get_Position)(mouse));

      if (matchValue != null) {
        var cam = matchValue;
        dragging = true;
        var scene_1 = cam.Scene;
        var origin = (0, _glcamera.toWorldO)((0, _glmouse.GlMouse__DragOrigin_Z524259A4)(mouse, dragButton), (0, _vectors.Vec3_Create)(), cam);
        var obj1 = (0, _Seq.tryHead)((0, _glcommon.objects)(scene_1));
        (0, _optionex.call)(function (o) {
          dragOffset = (0, _vectors.Vec3_op_Subtraction_Z24FF85E0)(o.Position, origin);
        }, obj1);
      }
    }

    if ((0, _glmouse.GlMouse__IsDragEvent_Z524259A4)(mouse, dragButton) ? dragging : false) {
      var matchValue_1 = getMouseCamera((0, _glmouse.GlMouse__get_Position)(mouse));

      if (matchValue_1 != null) {
        var cam_1 = matchValue_1;
        var scene_2 = cam_1.Scene;
        var worldPos = (0, _glcamera.toWorldO)((0, _glmouse.GlMouse__get_Position)(mouse), (0, _vectors.Vec3_Create)(), cam_1);
        var obj1_1 = (0, _Seq.tryHead)((0, _glcommon.objects)(scene_2));
        (0, _optionex.call)(function (o_1) {
          (0, _globj.setPosition)((0, _vectors.Vec3_op_Addition_Z24FF85E0)(worldPos, dragOffset), o_1);
        }, obj1_1);
      }
    }

    if ((0, _glmouse.GlMouse__IsDragEndEvent_Z524259A4)(mouse, dragButton)) {
      dragging = true;
    }

    if ((0, _glmouse.GlMouse__get_IsWheelEvent)(mouse)) {
      var matchValue_2 = getMouseCamera((0, _glmouse.GlMouse__get_Position)(mouse));

      if (matchValue_2 != null) {
        var cam_2 = matchValue_2;

        if ((0, _glmouse.GlMouse__get_WheelDelta)(mouse).values[1] !== 0) {
          var zoom = (0, _glmouse.GlMouse__get_WheelDelta)(mouse).values[1] > 0 ? 1.03 : 0.97;
          var worldPos_1 = (0, _glcamera.toWorldO)((0, _glmouse.GlMouse__get_Position)(mouse), (0, _vectors.Vec3_Create)(), cam_2);
          (0, _glcamera.zoomToward)(worldPos_1, zoom, cam_2);
        }

        if ((0, _glmouse.GlMouse__get_WheelDelta)(mouse).values[0] !== 0) {
          var amount = (0, _glmouse.GlMouse__get_WheelDelta)(mouse).values[0] > 0 ? 10 : -10;
          (0, _glcamera.panByXY)(amount, 0, cam_2);
        }
      }
    }
  };

  var render = function render(time) {
    var seconds = time / 1000;
    frame = frame + 1;

    if (animating ? frame < frames : false) {
      var value = window.requestAnimationFrame(render);
      void value;
    } else {
      active = false;
    }

    (0, _glmouse.GlMouse__Update)(mouse);
    showMousePos((0, _glmouse.GlMouse__get_Position)(mouse));
    processMouse();

    if (animating) {
      update(seconds);
    }

    (0, _glcanvas.render)(seconds, canvas);

    if (seconds - lastFpsTime >= 1) {
      var t = 0.75;
      fps = fps * (1 - t) + framesLastSecond * t;
      lastFpsTime = seconds;
      framesLastSecond = 0;
      elFps.textContent = (0, _String.toText)((0, _String.interpolate)("%3.1f%P()", [fps]));
    }

    framesLastSecond = framesLastSecond + 1;
  };

  var scheduleRender = function scheduleRender() {
    if (!active) {
      var value_1 = window.requestAnimationFrame(render);
      void value_1;
    }
  };

  (0, _Observable.add)(scheduleRender, (0, _glmouse.GlMouse__get_Changed)(mouse));

  if (animating ? frame < frames : false) {
    scheduleRender();
    active = true;
  }
}

function testGridObject() {
  var viewport = (0, _bounds.BoundsModule_boundsSize)(myCanvas.width, myCanvas.height);
  var dim = 34;
  var worldBounds = (0, _bounds.BoundsModule_boundsCenterHalf)(0, 0, dim, dim);
  var worldScale = (0, _bounds.Bounds__get_HalfSize)(viewport).values[0] / dim;
  var canvas = (0, _props.Props_glcanvas)("myCanvas", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCanvasProp(4, worldBounds), new _webgl_data.BuilderTypes_GlCanvasProp(17), (0, _props.CanvasProps_scene)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlSceneProp(10, worldScale), new _webgl_data.BuilderTypes_GlSceneProp(1, 3), new _webgl_data.BuilderTypes_GlSceneProp(2, 1), (0, _props.SceneProps_orthoCam2d)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCamProp(0, "cam"), new _webgl_data.BuilderTypes_GlCamProp(2, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0.4, 0.4, 0.1)), new _webgl_data.BuilderTypes_GlCamProp(7, 10)])), _props.SceneProps_sharedObjectWithCamera2d]))]));
  var renderer = (0, _renderer.GlRenderer_$ctor)();
  var scene = canvas.Scenes[0];
  var grid = (0, _renderer.GlRenderer__Grid2D_Z270D9612)(renderer, scene, (0, _vectors.Vec2_op_Subtraction_47807E55)((0, _bounds.Bounds__get_Size)(worldBounds), 4), 2);

  var update = function update(time) {
    (0, _grid2d.Grid2D__set_MinorTick_5E38073B)(grid, time % 5 + 1);
  };

  return ["grid", canvas, update, false, 60 * 2];
}

function testParallax() {
  var viewport = (0, _bounds.BoundsModule_boundsSize)(myCanvas.width, myCanvas.height);
  var halfDim = 34;
  var dim = halfDim * 2;
  var worldBounds = (0, _bounds.BoundsModule_boundsCenterHalf)(0, 0, dim, dim);
  var worldScale = (0, _bounds.Bounds__get_HalfSize)(viewport).values[0] / halfDim;
  var canvas = (0, _props.Props_glcanvas)("myCanvas", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCanvasProp(4, worldBounds), new _webgl_data.BuilderTypes_GlCanvasProp(17), (0, _props.CanvasProps_scene)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlSceneProp(10, worldScale), new _webgl_data.BuilderTypes_GlSceneProp(1, 3), new _webgl_data.BuilderTypes_GlSceneProp(2, 1), (0, _props.SceneProps_orthoCam2d)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCamProp(0, "cam"), new _webgl_data.BuilderTypes_GlCamProp(2, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0.4, 0.4, 0.1)), new _webgl_data.BuilderTypes_GlCamProp(7, 10)])), (0, _props.SceneProps_orthoCam2d)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCamProp(0, "cam2"), new _webgl_data.BuilderTypes_GlCamProp(14, (0, _bounds.Bounds__get_Quadrant1)(viewport)), new _webgl_data.BuilderTypes_GlCamProp(2, (0, _vectors.Vec4_Create_Z27E3A4C0)(0.4, 0.4, 0, 0.1)), new _webgl_data.BuilderTypes_GlCamProp(7, 10)])), _props.SceneProps_sharedObjectWithCamera2d]))]));
  var renderer = (0, _renderer.GlRenderer_$ctor)();
  var scene = canvas.Scenes[0];
  var cam = (0, _List.head)(scene.Cameras);
  var cam2 = (0, _glscene.getCamera)("cam2")(scene);
  var grid = (0, _renderer.GlRenderer__Grid2D_Z270D9612)(renderer, scene, (0, _vectors.Vec2_op_Subtraction_47807E55)((0, _bounds.Bounds__get_Size)(worldBounds), 2), 2, "", "", "cam", 4.5);
  var v1 = (0, _renderer.GlRenderer__Vector2D_Z270D9612)(renderer, scene, (0, _vectors.Vec2_Create_7B00E9A0)(5, -10), -1, "v1", "", "cam", 2.1);
  var v2 = (0, _renderer.GlRenderer__Vector2D_Z270D9612)(renderer, scene, (0, _vectors.Vec2_Create_7B00E9A0)(10, 10), -1, "v2", "", "cam", 1);
  (0, _webglobject.WebglObject__set_Position_Z3D47FC51)(v1, (0, _vectors.Vec3_Create_Z18D5882D)((0, _vectorobject2d.VectorObject2D__get_Vector)(v2), 0));
  v1["Wil.Webgl.QuadObjectBase.set_LineWidth"](8);
  v2["Wil.Webgl.QuadObjectBase.set_LineWidth"](10);
  (0, _quadobjectbase.QuadObjectBase__set_StrokeColor_Z3D47FC58)(v2, (0, _vectors.Vec4_Create_Z27E3A4C0)(0.3, 0, 0.5, 1));
  var angle = 0;

  var update = function update(time) {
    var maxView = (0, _vectors.Vec2_op_Multiply_47807E55)((0, _vectors.Vec2_op_Subtraction_Z24FF8540)((0, _bounds.Bounds__get_Size)(worldBounds), cam.ViewSize), 0.5);
    angle = angle + 3;

    if (angle > 360) {
      angle = angle - 360;
    }

    var sin = Math.sin(angle * (3.141592653589793 / 180));
    var x_5 = sin * maxView.values[0];
    var data_1 = cam;
    (0, _glcamera.panToXYZ)(x_5, 0, data_1.LookAt.values[2], data_1);
  };

  return ["Parallax", canvas, update, true, 60 * 10];
}

function testLink() {
  var viewport = (0, _bounds.BoundsModule_boundsSize)(myCanvas.width, myCanvas.height);
  var halfDim = 16;
  var dim = halfDim * 2;
  var worldBounds = (0, _bounds.BoundsModule_boundsCenter)(0, 0, dim, dim);
  var canvas = (0, _props.Props_glcanvas)("myCanvas", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCanvasProp(4, worldBounds), new _webgl_data.BuilderTypes_GlCanvasProp(17), (0, _props.CanvasProps_scene)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlSceneProp(10, 5), new _webgl_data.BuilderTypes_GlSceneProp(1, 3), new _webgl_data.BuilderTypes_GlSceneProp(2, 1), (0, _props.SceneProps_orthoCam2d)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCamProp(0, "cam"), new _webgl_data.BuilderTypes_GlCamProp(2, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0.4, 0.4, 0.1)), new _webgl_data.BuilderTypes_GlCamProp(7, 10)])), _props.SceneProps_sharedObjectWithCamera2d]))]));
  var renderer = (0, _renderer.GlRenderer_$ctor)();
  var scene = canvas.Scenes[0];
  var cam = (0, _List.head)(scene.Cameras);
  var v1 = (0, _renderer.GlRenderer__Vector2D_Z270D9612)(renderer, scene, (0, _vectors.Vec2_Create_7B00E9A0)(5, 5), -1, "v1", "");
  var v2 = (0, _renderer.GlRenderer__Vector2D_Z270D9612)(renderer, scene, (0, _vectors.Vec2_Create_7B00E9A0)(5, -5), -1, "v2", "v1");
  var v3 = (0, _renderer.GlRenderer__Vector2D_Z270D9612)(renderer, scene, (0, _vectors.Vec2_Create_7B00E9A0)(5, 5), -1, "v3", "v2");
  v1["Wil.Webgl.QuadObjectBase.set_LineWidth"](3);
  (0, _quadobjectbase.QuadObjectBase__set_StrokeColor_Z3D47FC58)(v1, (0, _vectors.Vec4_Create_Z27E3A4C0)(0.3, 0, 0.5, 1));
  (0, _webglobject.WebglObject__set_Position_Z3D47FC51)(v2, (0, _vectors.Vec3_Create_Z18D5882D)((0, _vectorobject2d.VectorObject2D__get_Vector)(v1), 0));
  v2["Wil.Webgl.QuadObjectBase.set_LineWidth"](3);
  (0, _webglobject.WebglObject__set_Position_Z3D47FC51)(v3, (0, _vectors.Vec3_Create_Z18D5882D)((0, _vectorobject2d.VectorObject2D__get_Vector)(v2), 0));
  v3["Wil.Webgl.QuadObjectBase.set_LineWidth"](3);
  var angle = 0;

  var update = function update(time) {
    var maxView = (0, _vectors.Vec2_op_Multiply_47807E55)((0, _vectors.Vec2_op_Subtraction_Z24FF8540)((0, _bounds.Bounds__get_Size)(worldBounds), cam.ViewSize), 0.5);
    angle = angle + 3;

    if (angle > 360) {
      angle = angle - 360;
    }

    var sin = Math.sin(angle * (3.141592653589793 / 180));
    (0, _webglobject.WebglObject__set_Scale_5E38073B)(v1, 0.3 + Math.abs(sin));
    (0, _webglobject.WebglObject__set_AngleDegreesZ_60759B6B)(v1, angle * 1);
    (0, _webglobject.WebglObject__set_AngleDegreesZ_60759B6B)(v2, sin * 360 * 1);
    (0, _webglobject.WebglObject__set_Scale_5E38073B)(v3, 0.3 + Math.abs(1.6 - sin));
  };

  return ["Link", canvas, update, false, 60 * 10];
}

function testLine() {
  var viewport = (0, _bounds.BoundsModule_boundsSize)(myCanvas.width, myCanvas.height);
  var ofs = 0;
  var ofs2 = ofs * 2;
  var viewport_1 = (0, _bounds.BoundsModule_bounds)(ofs, ofs, myCanvas.width - ofs2, myCanvas.height - ofs2);
  var halfDim = 3;
  var dim = halfDim * 2;
  var worldBounds = (0, _bounds.BoundsModule_boundsCenter)(0, 0, dim, dim);
  var worldScale = (0, _bounds.Bounds__get_HalfSize)(viewport_1).values[0] / halfDim;
  var canvas = (0, _props.Props_glcanvas)("myCanvas", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCanvasProp(4, worldBounds), new _webgl_data.BuilderTypes_GlCanvasProp(17), (0, _props.CanvasProps_scene)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlSceneProp(10, worldScale), new _webgl_data.BuilderTypes_GlSceneProp(1, 3), new _webgl_data.BuilderTypes_GlSceneProp(2, 1), (0, _props.SceneProps_orthoCam2d)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCamProp(0, "cam"), new _webgl_data.BuilderTypes_GlCamProp(14, viewport_1), new _webgl_data.BuilderTypes_GlCamProp(2, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0.4, 0.4, 0.1)), new _webgl_data.BuilderTypes_GlCamProp(7, 10)])), _props.SceneProps_sharedObjectWithCamera2d]))]));
  var renderer = (0, _renderer.GlRenderer_$ctor)();
  var scene = canvas.Scenes[0];
  var cam = (0, _List.head)(scene.Cameras);
  var grid = (0, _renderer.GlRenderer__Grid2D_Z270D9612)(renderer, scene, (0, _vectors.Vec2_op_Subtraction_47807E55)((0, _bounds.Bounds__get_Size)(worldBounds), 0), 2);
  var line1 = (0, _renderer.GlRenderer__Line2D_515305A0)(renderer, scene, (0, _vectors.Vec2_Create_7B00E9A0)(0, 0.5), (0, _vectors.Vec2_Create_7B00E9A0)(2, 1.5));
  var line2 = (0, _renderer.GlRenderer__Line2D_515305A0)(renderer, scene, (0, _vectors.Vec2_Create_7B00E9A0)(2, -2), (0, _vectors.Vec2_Create_7B00E9A0)(1, -1));
  var line3 = (0, _renderer.GlRenderer__Line2D_515305A0)(renderer, scene, (0, _vectors.Vec2_Create_7B00E9A0)(-1.5, -2), (0, _vectors.Vec2_Create_7B00E9A0)(-0.5, -1));
  (0, _lineobjects2d.LineObjects2D__set_LineWidth_5E38073B)(line1, worldScale);
  (0, _lineobjects2d.LineObjects2D__set_StrokeColor_Z3D47FC58)(line1, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0, 1, 1));
  (0, _lineobjects2d.LineObjects2D__set_LineCap_7B1263D0)(line1, 1);
  (0, _lineobjects2d.LineObjects2D__set_LineWidth_5E38073B)(line2, worldScale * 0.5);
  (0, _lineobjects2d.LineObjects2D__set_LineCap_7B1263D0)(line2, 2);
  (0, _lineobjects2d.LineObjects2D__set_LineWidth_5E38073B)(line3, worldScale * 0.25);
  (0, _lineobjects2d.LineObjects2D__set_LineCap_7B1263D0)(line3, 0);
  var angle = 0;

  var update = function update(time) {
    angle = angle + 3;

    if (angle > 360) {
      angle = angle - 360;
    }

    var sin = Math.sin(angle * (3.141592653589793 / 180));
  };

  return ["Line", canvas, update, false, 60 * 10];
}

function testLinePath() {
  var viewport = (0, _bounds.BoundsModule_boundsSize)(myCanvas.width, myCanvas.height);
  var ofs = 0;
  var ofs2 = ofs * 2;
  var viewport_1 = (0, _bounds.BoundsModule_bounds)(ofs, ofs, myCanvas.width - ofs2, myCanvas.height - ofs2);
  var halfDim = 3;
  var dim = halfDim * 2;
  var worldBounds = (0, _bounds.BoundsModule_boundsCenter)(0, 0, dim, dim);

  var calcScale = function calcScale(bounds) {
    return (0, _bounds.Bounds__get_HalfSize)(bounds).values[0] / halfDim;
  };

  var canvas = (0, _props.Props_glcanvas)("myCanvas", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCanvasProp(4, worldBounds), new _webgl_data.BuilderTypes_GlCanvasProp(17)]));
  var renderer = (0, _renderer.GlRenderer_$ctor)();

  var addScene = function addScene(idx, bounds_1, join, cap) {
    var props;
    var scene = (0, _glcanvas.addScene)((0, _Util.uncurry)(2, (props = (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlSceneProp(9, bounds_1), new _webgl_data.BuilderTypes_GlSceneProp(10, calcScale(bounds_1)), new _webgl_data.BuilderTypes_GlSceneProp(1, 3), new _webgl_data.BuilderTypes_GlSceneProp(2, 1), (0, _props.SceneProps_orthoCam2d)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCamProp(0, (0, _String.toText)((0, _String.interpolate)("cam%P()", [idx]))), new _webgl_data.BuilderTypes_GlCamProp(2, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0.4, 0.4, 0.1)), _props.CameraProps_cameraClearDepthBuffer])), _props.SceneProps_sharedObjectWithCamera2d]), function (overrides) {
      return function (canvas_1) {
        return (0, _props.Props_glscene)(props, overrides, canvas_1);
      };
    })))(canvas);
    var value = (0, _List.head)(scene.Cameras);
    void value;
    var value_1 = (0, _renderer.GlRenderer__Grid2D_Z270D9612)(renderer, scene, (0, _bounds.Bounds__get_Size)(worldBounds), 2, "grid");
    void value_1;
    var path1 = (0, _renderer.GlRenderer__LinePath2D_5BF31CC8)(renderer, scene, [(0, _vectors.Vec2_Create_7B00E9A0)(-2, 0.5), (0, _vectors.Vec2_Create_7B00E9A0)(-0.5, 1.8), (0, _vectors.Vec2_Create_7B00E9A0)(0.5, 0.5), (0, _vectors.Vec2_Create_7B00E9A0)(2.3, 1.8)], -1, "path1");
    var path2 = (0, _renderer.GlRenderer__LinePath2D_5BF31CC8)(renderer, scene, [(0, _vectors.Vec2_Create_7B00E9A0)(2.5, 0), (0, _vectors.Vec2_Create_7B00E9A0)(0.5, -0.5), (0, _vectors.Vec2_Create_7B00E9A0)(-0.5, -2), (0, _vectors.Vec2_Create_7B00E9A0)(-2, -0.5)], -1, "path2");
    (0, _linepathobject2d.LinePathObject2D__Add_Z3D47FC52)(path1, (0, _vectors.Vec2_Create_7B00E9A0)(2.5, 0));
    (0, _linepathobject2d.LinePathObject2D__set_LineWidth_5E38073B)(path1, scene.WorldScale * 0.8);
    (0, _linepathobject2d.LinePathObject2D__set_StrokeColor_Z3D47FC58)(path1, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0, 1, 0.4));
    (0, _linepathobject2d.LinePathObject2D__set_LineCap_7B1263D0)(path1, cap);
    (0, _linepathobject2d.LinePathObject2D__set_LineJoin_Z229C3C20)(path1, join);
    (0, _linepathobject2d.LinePathObject2D__set_MiterLimit_5E38073B)(path1, 100 + 0.5 * (0, _linepathobject2d.LinePathObject2D__get_LineWidth)(path1));
    (0, _linepathobject2d.LinePathObject2D__Add_50C79F88)(path2, [(0, _vectors.Vec2_Create_7B00E9A0)(-1.5, -2), (0, _vectors.Vec2_Create_7B00E9A0)(-2.8, -1)]);
    (0, _linepathobject2d.LinePathObject2D__set_LineWidth_5E38073B)(path2, scene.WorldScale * 0.6);
    (0, _linepathobject2d.LinePathObject2D__set_StrokeColor_Z3D47FC58)(path2, (0, _vectors.Vec4_Create_Z27E3A4C0)(1, 0, 0, 0.1));
    (0, _linepathobject2d.LinePathObject2D__set_LineCap_7B1263D0)(path2, cap);
    (0, _linepathobject2d.LinePathObject2D__set_LineJoin_Z229C3C20)(path2, join);
    (0, _linepathobject2d.LinePathObject2D__set_MiterLimit_5E38073B)(path2, 100 + 0.5 * (0, _linepathobject2d.LinePathObject2D__get_LineWidth)(path2));
    return [path1, path2];
  };

  var s_1 = (0, _List.ofArray)([addScene(1, (0, _bounds.Bounds__get_Quadrant1)(viewport_1), 4, 0), addScene(2, (0, _bounds.Bounds__get_Quadrant2)(viewport_1), 3, 1), addScene(3, (0, _bounds.Bounds__get_Quadrant3)(viewport_1), 5, 2), addScene(4, (0, _bounds.Bounds__get_Quadrant4)(viewport_1), 3, 1)]);
  var angle = 0;

  var update = function update(time) {
    var updatePaths = function updatePaths(sin) {
      var y_14 = sin * 2.5;
      var v1 = (0, _vectors.Vec2_Create_7B00E9A0)(2.5, y_14);
      var v2 = (0, _vectors.Vec2_Create_7B00E9A0)(2.5, 0 - y_14);
      (0, _List.iterate)(function (tupledArg) {
        var p1 = tupledArg[0];
        var p2 = tupledArg[1];
        (0, _linepathobject2d.LinePathObject2D__Set_Z58358D8E)(p1, 4, v1);
        (0, _linepathobject2d.LinePathObject2D__Set_Z58358D8E)(p2, 0, v2);
      }, s_1);
    };

    angle = angle + 0.4;

    if (angle > 360) {
      angle = angle - 360;
    }

    var sin_1 = Math.sin(angle * (3.141592653589793 / 180));
    updatePaths(sin_1);
  };

  return ["Linepath", canvas, update, false, 60 * 120];
}

function testLinePathAligned() {
  var viewport = (0, _bounds.BoundsModule_boundsSize)(myCanvas.width, myCanvas.height);
  var ofs = 0;
  var ofs2 = ofs * 2;
  var viewport_1 = (0, _bounds.BoundsModule_bounds)(ofs, ofs, myCanvas.width - ofs2, myCanvas.height - ofs2);
  var halfDim = 3;
  var dim = halfDim * 2;
  var worldBounds = (0, _bounds.BoundsModule_boundsCenter)(0, 0, dim, dim);

  var calcScale = function calcScale(bounds) {
    return (0, _bounds.Bounds__get_HalfSize)(bounds).values[0] / halfDim;
  };

  var canvas = (0, _props.Props_glcanvas)("myCanvas", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCanvasProp(4, worldBounds), new _webgl_data.BuilderTypes_GlCanvasProp(17)]));
  var renderer = (0, _renderer.GlRenderer_$ctor)();

  var addScene = function addScene(bounds_1, join, cap) {
    var props;
    var scene = (0, _glcanvas.addScene)((0, _Util.uncurry)(2, (props = (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlSceneProp(9, bounds_1), new _webgl_data.BuilderTypes_GlSceneProp(10, calcScale(bounds_1)), new _webgl_data.BuilderTypes_GlSceneProp(1, 3), new _webgl_data.BuilderTypes_GlSceneProp(2, 1), (0, _props.SceneProps_orthoCam2d)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCamProp(0, "cam"), new _webgl_data.BuilderTypes_GlCamProp(2, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0.4, 0.4, 0.1)), _props.CameraProps_cameraClearDepthBuffer, new _webgl_data.BuilderTypes_GlCamProp(7, 10)])), _props.SceneProps_sharedObjectWithCamera2d]), function (overrides) {
      return function (canvas_1) {
        return (0, _props.Props_glscene)(props, overrides, canvas_1);
      };
    })))(canvas);
    var value = (0, _List.head)(scene.Cameras);
    void value;
    var value_1 = (0, _renderer.GlRenderer__Grid2D_Z270D9612)(renderer, scene, (0, _bounds.Bounds__get_Size)(worldBounds), 2, "grid");
    void value_1;

    var addPath = function addPath(name, color, points) {
      var path = (0, _renderer.GlRenderer__LinePath2D_5BF31CC8)(renderer, scene, points, -1, name);
      (0, _linepathobject2d.LinePathObject2D__set_LineWidth_5E38073B)(path, scene.WorldScale * 0.8);
      (0, _linepathobject2d.LinePathObject2D__set_StrokeColor_Z3D47FC58)(path, color);
      (0, _linepathobject2d.LinePathObject2D__set_LineCap_7B1263D0)(path, cap);
      (0, _linepathobject2d.LinePathObject2D__set_LineJoin_Z229C3C20)(path, join);
      return path;
    };

    var color1 = (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0, 1, 0.4);
    var color2 = (0, _vectors.Vec4_Create_Z27E3A4C0)(1, 0.2, 0.5, 0.1);
    var color3 = (0, _vectors.Vec4_Create_Z27E3A4C0)(0.2, 0.5, 1, 0.4);
    var value_2 = addPath("path1", color1, [(0, _vectors.Vec2_Create_7B00E9A0)(-2, 2.3), (0, _vectors.Vec2_Create_7B00E9A0)(0.5, 2.3), (0, _vectors.Vec2_Create_7B00E9A0)(2, 2.3)]);
    void value_2;
    var value_3 = addPath("path2", color1, [(0, _vectors.Vec2_Create_7B00E9A0)(2, -2.3), (0, _vectors.Vec2_Create_7B00E9A0)(0.5, -2.3), (0, _vectors.Vec2_Create_7B00E9A0)(-2, -2.3)]);
    void value_3;
    var value_4 = addPath("path3", color2, [(0, _vectors.Vec2_Create_7B00E9A0)(-2, 2), (0, _vectors.Vec2_Create_7B00E9A0)(-2, 0), (0, _vectors.Vec2_Create_7B00E9A0)(-2, -2)]);
    void value_4;
    var value_5 = addPath("path4", color2, [(0, _vectors.Vec2_Create_7B00E9A0)(2, -2), (0, _vectors.Vec2_Create_7B00E9A0)(2, 0), (0, _vectors.Vec2_Create_7B00E9A0)(2, 2)]);
    void value_5;
    var value_6 = addPath("path5", color3, [(0, _vectors.Vec2_Create_7B00E9A0)(-1, -1), (0, _vectors.Vec2_Create_7B00E9A0)(0, 0), (0, _vectors.Vec2_Create_7B00E9A0)(1, 1)]);
    void value_6;
  };

  addScene((0, _bounds.Bounds__get_Quadrant1)(viewport_1), 4, 0);
  addScene((0, _bounds.Bounds__get_Quadrant2)(viewport_1), 3, 1);
  addScene((0, _bounds.Bounds__get_Quadrant3)(viewport_1), 5, 2);
  addScene((0, _bounds.Bounds__get_Quadrant4)(viewport_1), 3, 1);
  return ["Linepath Aligned", canvas, function (value_7) {
    void value_7;
  }, false, 0];
}

function testNoise() {
  var viewport = (0, _bounds.BoundsModule_boundsSize)(myCanvas.width, myCanvas.height);
  var worldBounds = (0, _bounds.BoundsModule_boundsCenterV)((0, _vectors.Vec2_Create_7B00E9A0)(0, 0), (0, _bounds.Bounds__get_Size)(viewport));
  var halfDim = 2;
  var dim = halfDim * 2;
  var gridWorld = (0, _bounds.BoundsModule_boundsCenter)(0, 0, dim, dim);

  var calcScale = function calcScale(bounds) {
    return (0, _bounds.Bounds__get_HalfSize)(bounds).values[0] / halfDim;
  };

  var canvas = (0, _props.Props_glcanvas)("myCanvas", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCanvasProp(4, worldBounds), new _webgl_data.BuilderTypes_GlCanvasProp(17), _props.CanvasProps_globalWithResolutionTime2d, (0, _props.CanvasProps_scene)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlSceneProp(0, "scene4"), new _webgl_data.BuilderTypes_GlSceneProp(8, gridWorld), new _webgl_data.BuilderTypes_GlSceneProp(10, calcScale(viewport)), new _webgl_data.BuilderTypes_GlSceneProp(9, viewport), new _webgl_data.BuilderTypes_GlSceneProp(1, 2), new _webgl_data.BuilderTypes_GlSceneProp(2, 0), _props.SceneProps_sharedObjectWithCamera2d, (0, _props.SceneProps_orthoCam2d)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCamProp(0, (0, _String.toText)((0, _String.interpolate)("gridCam", []))), new _webgl_data.BuilderTypes_GlCamProp(2, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0.4, 0.4, 0.1)), _props.CameraProps_cameraClearDepthBuffer]))]))]));
  var scene4 = (0, _glcanvas.getScene)("scene4")(canvas);
  var renderer = (0, _renderer.GlRenderer_$ctor)();
  var vec = (0, _renderer.GlRenderer__Vector2D_Z270D9612)(renderer, scene4, (0, _vectors.Vec2_Create_7B00E9A0)(1, 0));
  (0, _webglobject.WebglObject__set_AngleDegreesZ_60759B6B)(vec, 0);
  vec["Wil.Webgl.QuadObjectBase.set_LineWidth"]((0, _glscene.pixelsToWorld)(10, scene4));
  (0, _quadobjectbase.QuadObjectBase__set_StrokeColor_Z3D47FC58)(vec, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0, 1, 1.4));
  (0, _quadobjectbase.QuadObjectBase__set_FillColor_Z3D47FC58)(vec, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0.7, 0, 0.1));
  (0, _webglobject.WebglObject__set_Position2_Z3D47FC52)(vec, (0, _vectors.Vec2_Create_7B00E9A0)(-0, 0.5));
  (0, _quadobjectbase.QuadObjectBase__set_AliasWidth_21F3BA25)(vec, 2);
  var noiseSize = (0, _bounds.Bounds__get_Size)((0, _bounds.Bounds__InflatePct_5E38073B)((0, _bounds.Bounds__get_Quadrant1)(worldBounds), 0.9));
  var grid = (0, _renderer.GlRenderer__Grid2D_Z270D9612)(renderer, scene4, (0, _bounds.Bounds__get_Size)(gridWorld), 1, "grid");
  var incF = 0.001;
  var incS = 0.01;
  var oct = 1;
  var incO = 1 / (60 * 0.1);
  var noiseTime = 0;
  var timeO = 1 / (60 * 0.03);
  var frame = 0;

  var update = function update(time) {
    (0, _glcanvas.dirty)(canvas);
    frame = frame + 1;
    noiseTime = noiseTime + timeO;
  };

  return ["Noise", canvas, update, true, 60 * 120];
}

function testVector() {
  var viewport = (0, _bounds.BoundsModule_boundsSize)(myCanvas.width, myCanvas.height);
  var worldBounds = (0, _bounds.BoundsModule_boundsCenterV)((0, _vectors.Vec2_Create_7B00E9A0)(0, 0), (0, _bounds.Bounds__get_Size)(viewport));
  var halfDim = 2;
  var dim = halfDim * 2;
  var gridWorld = (0, _bounds.BoundsModule_boundsCenter)(0, 0, dim, dim);

  var calcScale = function calcScale(bounds) {
    return (0, _bounds.Bounds__get_HalfSize)(bounds).values[0] / halfDim;
  };

  var canvas = (0, _props.Props_glcanvas)("myCanvas", (0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCanvasProp(4, worldBounds), new _webgl_data.BuilderTypes_GlCanvasProp(17), _props.CanvasProps_globalWithResolutionTime2d, (0, _props.CanvasProps_scene)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlSceneProp(0, "scene4"), new _webgl_data.BuilderTypes_GlSceneProp(8, gridWorld), new _webgl_data.BuilderTypes_GlSceneProp(10, calcScale(viewport)), new _webgl_data.BuilderTypes_GlSceneProp(9, viewport), new _webgl_data.BuilderTypes_GlSceneProp(1, 2), new _webgl_data.BuilderTypes_GlSceneProp(2, 0), _props.SceneProps_sharedObjectWithCamera2d, (0, _props.SceneProps_orthoCam2d)((0, _List.ofArray)([new _webgl_data.BuilderTypes_GlCamProp(0, (0, _String.toText)((0, _String.interpolate)("gridCam", []))), new _webgl_data.BuilderTypes_GlCamProp(2, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0.4, 0.4, 0.1)), _props.CameraProps_cameraClearDepthBuffer]))]))]));
  var scene4 = (0, _glcanvas.getScene)("scene4")(canvas);
  var renderer = (0, _renderer.GlRenderer_$ctor)();
  var vec = (0, _renderer.GlRenderer__Vector2D_Z270D9612)(renderer, scene4, (0, _vectors.Vec2_Create_7B00E9A0)(1, 0));
  (0, _webglobject.WebglObject__set_AngleDegreesZ_60759B6B)(vec, 0);
  vec["Wil.Webgl.QuadObjectBase.set_LineWidth"]((0, _glscene.pixelsToWorld)(10, scene4));
  (0, _quadobjectbase.QuadObjectBase__set_StrokeColor_Z3D47FC58)(vec, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0, 1, 1.4));
  (0, _quadobjectbase.QuadObjectBase__set_FillColor_Z3D47FC58)(vec, (0, _vectors.Vec4_Create_Z27E3A4C0)(0, 0.7, 0, 0.1));
  (0, _webglobject.WebglObject__set_Position2_Z3D47FC52)(vec, (0, _vectors.Vec2_Create_7B00E9A0)(-0, 0.5));
  (0, _quadobjectbase.QuadObjectBase__set_AliasWidth_21F3BA25)(vec, 2);
  var grid = (0, _renderer.GlRenderer__Grid2D_Z270D9612)(renderer, scene4, (0, _bounds.Bounds__get_Size)(gridWorld), 1, "grid");
  var frame = 0;

  var update = function update(time) {
    (0, _glcanvas.dirty)(canvas);
    (0, _vectorobject2d.VectorObject2D__set_Vector_Z3D47FC52)(vec, (0, _vectors.Vec2__Rotate_Z24CF60FF)((0, _vectorobject2d.VectorObject2D__get_Vector)(vec), 1 * _utils.RAD_PER_DEG));
    frame = frame + 1;
  };

  return ["Vector", canvas, update, true, 60 * 120];
}

function runTests() {
  run(testVector);
}

if (star.complete) {
  runTests();
} else {
  star.onload = function (_arg1) {
    runTests();
  };
}
},{"./js/jsutils.js":"../JS/js/jsutils.js","./.fable/fable-library.3.0.0/String.js":"../JS/.fable/fable-library.3.0.0/String.js","./.fable/fable-library.3.0.0/Seq.js":"../JS/.fable/fable-library.3.0.0/Seq.js","./.fable/fable-library.3.0.0/Array.js":"../JS/.fable/fable-library.3.0.0/Array.js","./.fable/fable-library.3.0.0/Option.js":"../JS/.fable/fable-library.3.0.0/Option.js","./webgl_data/glcanvas.js":"../JS/webgl_data/glcanvas.js","./webgl_data/glmouse.js":"../JS/webgl_data/glmouse.js","./core/vectors.js":"../JS/core/vectors.js","./.fable/fable-library.3.0.0/List.js":"../JS/.fable/fable-library.3.0.0/List.js","./webgl_data/glcamera.js":"../JS/webgl_data/glcamera.js","./.fable/fable-library.3.0.0/Util.js":"../JS/.fable/fable-library.3.0.0/Util.js","./webgl_data/glcommon.js":"../JS/webgl_data/glcommon.js","./core/optionex.js":"../JS/core/optionex.js","./webgl_data/globj.js":"../JS/webgl_data/globj.js","./.fable/fable-library.3.0.0/Observable.js":"../JS/.fable/fable-library.3.0.0/Observable.js","./twod/bounds.js":"../JS/twod/bounds.js","./webgl_objects/props.js":"../JS/webgl_objects/props.js","./webgl_data/webgl_data.js":"../JS/webgl_data/webgl_data.js","./webgl_objects/renderer.js":"../JS/webgl_objects/renderer.js","./webgl_objects/grid2d.js":"../JS/webgl_objects/grid2d.js","./webgl_data/glscene.js":"../JS/webgl_data/glscene.js","./webgl_objects/webglobject.js":"../JS/webgl_objects/webglobject.js","./webgl_objects/vectorobject2d.js":"../JS/webgl_objects/vectorobject2d.js","./webgl_objects/quadobjectbase.js":"../JS/webgl_objects/quadobjectbase.js","./webgl_objects/lineobjects2d.js":"../JS/webgl_objects/lineobjects2d.js","./webgl_objects/linepathobject2d.js":"../JS/webgl_objects/linepathobject2d.js","./core/utils.js":"../JS/core/utils.js"}],"C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js":[function(require,module,exports) {
var global = arguments[3];
var OVERLAY_ID = '__parcel__error__overlay__';
var OldModule = module.bundle.Module;

function Module(moduleName) {
  OldModule.call(this, moduleName);
  this.hot = {
    data: module.bundle.hotData,
    _acceptCallbacks: [],
    _disposeCallbacks: [],
    accept: function (fn) {
      this._acceptCallbacks.push(fn || function () {});
    },
    dispose: function (fn) {
      this._disposeCallbacks.push(fn);
    }
  };
  module.bundle.hotData = null;
}

module.bundle.Module = Module;
var checkedAssets, assetsToAccept;
var parent = module.bundle.parent;

if ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {
  var hostname = "" || location.hostname;
  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';
  var ws = new WebSocket(protocol + '://' + hostname + ':' + "57285" + '/');

  ws.onmessage = function (event) {
    checkedAssets = {};
    assetsToAccept = [];
    var data = JSON.parse(event.data);

    if (data.type === 'update') {
      var handled = false;
      data.assets.forEach(function (asset) {
        if (!asset.isNew) {
          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);

          if (didAccept) {
            handled = true;
          }
        }
      }); // Enable HMR for CSS by default.

      handled = handled || data.assets.every(function (asset) {
        return asset.type === 'css' && asset.generated.js;
      });

      if (handled) {
        console.clear();
        data.assets.forEach(function (asset) {
          hmrApply(global.parcelRequire, asset);
        });
        assetsToAccept.forEach(function (v) {
          hmrAcceptRun(v[0], v[1]);
        });
      } else if (location.reload) {
        // `location` global exists in a web worker context but lacks `.reload()` function.
        location.reload();
      }
    }

    if (data.type === 'reload') {
      ws.close();

      ws.onclose = function () {
        location.reload();
      };
    }

    if (data.type === 'error-resolved') {
      console.log('[parcel] ✨ Error resolved');
      removeErrorOverlay();
    }

    if (data.type === 'error') {
      console.error('[parcel] 🚨  ' + data.error.message + '\n' + data.error.stack);
      removeErrorOverlay();
      var overlay = createErrorOverlay(data);
      document.body.appendChild(overlay);
    }
  };
}

function removeErrorOverlay() {
  var overlay = document.getElementById(OVERLAY_ID);

  if (overlay) {
    overlay.remove();
  }
}

function createErrorOverlay(data) {
  var overlay = document.createElement('div');
  overlay.id = OVERLAY_ID; // html encode message and stack trace

  var message = document.createElement('div');
  var stackTrace = document.createElement('pre');
  message.innerText = data.error.message;
  stackTrace.innerText = data.error.stack;
  overlay.innerHTML = '<div style="background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;">' + '<span style="background: red; padding: 2px 4px; border-radius: 2px;">ERROR</span>' + '<span style="top: 2px; margin-left: 5px; position: relative;">🚨</span>' + '<div style="font-size: 18px; font-weight: bold; margin-top: 20px;">' + message.innerHTML + '</div>' + '<pre>' + stackTrace.innerHTML + '</pre>' + '</div>';
  return overlay;
}

function getParents(bundle, id) {
  var modules = bundle.modules;

  if (!modules) {
    return [];
  }

  var parents = [];
  var k, d, dep;

  for (k in modules) {
    for (d in modules[k][1]) {
      dep = modules[k][1][d];

      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {
        parents.push(k);
      }
    }
  }

  if (bundle.parent) {
    parents = parents.concat(getParents(bundle.parent, id));
  }

  return parents;
}

function hmrApply(bundle, asset) {
  var modules = bundle.modules;

  if (!modules) {
    return;
  }

  if (modules[asset.id] || !bundle.parent) {
    var fn = new Function('require', 'module', 'exports', asset.generated.js);
    asset.isNew = !modules[asset.id];
    modules[asset.id] = [fn, asset.deps];
  } else if (bundle.parent) {
    hmrApply(bundle.parent, asset);
  }
}

function hmrAcceptCheck(bundle, id) {
  var modules = bundle.modules;

  if (!modules) {
    return;
  }

  if (!modules[id] && bundle.parent) {
    return hmrAcceptCheck(bundle.parent, id);
  }

  if (checkedAssets[id]) {
    return;
  }

  checkedAssets[id] = true;
  var cached = bundle.cache[id];
  assetsToAccept.push([bundle, id]);

  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {
    return true;
  }

  return getParents(global.parcelRequire, id).some(function (id) {
    return hmrAcceptCheck(global.parcelRequire, id);
  });
}

function hmrAcceptRun(bundle, id) {
  var cached = bundle.cache[id];
  bundle.hotData = {};

  if (cached) {
    cached.hot.data = bundle.hotData;
  }

  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {
    cached.hot._disposeCallbacks.forEach(function (cb) {
      cb(bundle.hotData);
    });
  }

  delete bundle.cache[id];
  bundle(id);
  cached = bundle.cache[id];

  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {
    cached.hot._acceptCallbacks.forEach(function (cb) {
      cb();
    });

    return true;
  }
}
},{}]},{},["C:/Users/Blaine/AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js","../JS/App.js"], null)
//# sourceMappingURL=/App.a0d5d203.js.map